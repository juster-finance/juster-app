{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./node_modules/lodash/set.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/@taquito/taquito/node_modules/@taquito/http-utils/dist/taquito-http-utils.es5.js","webpack:///./node_modules/@taquito/taquito/node_modules/@taquito/utils/dist/taquito-utils.es5.js","webpack:///./node_modules/core-js/modules/es.array.at.js","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./src/components/ui/Checkbox.vue","webpack:///./src/components/ui/Checkbox.vue?51c2","webpack:///./src/components/ui/Pagination.vue","webpack:///./src/components/ui/Pagination.vue?7ad4","webpack:///./src/components/ui/Pagination.vue?a599","webpack:///./node_modules/core-js/modules/es.number.is-integer.js","webpack:///./src/components/ui/Checkbox.vue?f164","webpack:///./src/components/ui/Checkbox.vue?f94e","webpack:///./node_modules/core-js/internals/array-sort.js","webpack:///./src/components/local/modals/WithdrawAllModal.vue?b444","webpack:///./node_modules/@taquito/taquito/node_modules/@taquito/michelson-encoder/dist/taquito-michelson-encoder.es5.js","webpack:///./src/components/ui/Pagination.vue?5e8c","webpack:///./src/views/WithdrawalsPage.vue","webpack:///./src/components/modules/profile/WithdrawalsBase.vue","webpack:///./node_modules/@taquito/taquito/node_modules/@taquito/rpc/dist/taquito-rpc.es5.js","webpack:///./node_modules/@taquito/taquito/node_modules/@taquito/michel-codec/dist/taquito-michel-codec.es5.js","webpack:///./node_modules/@taquito/taquito/dist/taquito.es5.js","webpack:///./src/services/sdk.js","webpack:///./src/components/local/modals/WithdrawAllModal.vue","webpack:///./src/components/local/modals/WithdrawAllModal.vue?0c67","webpack:///./src/components/modules/profile/WithdrawalsBase.vue?4c9a","webpack:///./src/views/WithdrawalsPage.vue?2127","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack:///./node_modules/core-js/modules/es.string.at-alternative.js","webpack:///./node_modules/core-js/internals/is-integral-number.js","webpack:///./src/components/modules/profile/WithdrawalsBase.vue?0e6c","webpack:///./src/components/modules/profile/WithdrawalsBase.vue?4046","webpack:///./src/components/local/modals/WithdrawAllModal.vue?2fa3"],"names":["userAgent","firefox","match","module","exports","baseSet","set","object","path","value","assignValue","castPath","isIndex","isObject","toKey","customizer","index","length","lastIndex","nested","key","newValue","objValue","undefined","STATUS_CODE","isNode","process","versions","node","XMLHttpRequestCTOR","XMLHttpRequest","defaultTimeout","HttpResponseError","message","status","statusText","body","url","this","name","HttpRequestFailed","innerEvent","HttpBackend","prototype","serialize","obj","str","_loop_1","p","hasOwnProperty","prop","toJSON","push","encodeURIComponent","Array","isArray","forEach","item","serialized","join","createXHR","createRequest","_a","data","_this","method","timeout","query","_b","headers","_c","json","_d","mimeType","Promise","resolve","reject","request","k","open","setRequestHeader","overrideMimeType","onload","JSON","parse","response","ex","Error","ontimeout","onerror","err","dataStr","stringify","send","Prefix","prefix","TZ1","Uint8Array","TZ2","TZ3","KT","KT1","EDSK","EDSK2","SPSK","P2SK","EDPK","SPPK","P2PK","EDESK","SPESK","P2ESK","EDSIG","SPSIG","P2SIG","SIG","NET","NCE","B","O","LO","LLO","P","CO","ID","EXPR","TZ","prefixLength","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","error","__spreadArray","to","from","il","j","ValidationResult","bs58check$1","isValidPrefix","validatePrefixedValue","prefixes","RegExp","exec","NO_PREFIX_MATCHED","prefixKey","contractAddress","decoded","decodeUnsafe","slice","INVALID_LENGTH","VALID","INVALID_CHECKSUM","implicitPrefix","contractPrefix","signaturePrefix","pkPrefix","validateAddress","validateChain","validateKeyHash","validateSignature","validatePublicKey","blake","bs58check","encodeExpr","blakeHash","blake2b","hex2buf","b58cencode","payloadAr","encode","buffer","b58cdecode","enc","prefixArg","decode","b58decode","payload","buf","prefixMap","tz1","toString","tz2","tz3","pref","hex","buf2hex","encodePubKey","substring","encodeKey","encodeKeyHash","map","h","parseInt","byteArray","hexParts","byte","paddedHex","$","toObject","lengthOfArrayLike","toIntegerOrInfinity","addToUnscopables","target","proto","at","len","relativeIndex","uncurryThis","aCallable","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","un$Sort","sort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","result","String","fromCharCode","v","a","b","charAt","FORCED","getSortCompare","comparefn","x","y","forced","array","itemsLength","items","arrayLength","webkit","_createElementBlock","onClick","_ctx","class","wrapper","_createElementVNode","box","active","_createVNode","_Transition","_createBlock","_component_Icon","size","check_icon","base","_renderSlot","defineComponent","props","modelValue","Boolean","forceChecked","setup","context","toRefs","toggle","emit","cssModules","__exports__","render","_component_Button","type","icon","arrow_btn","left","disabled","page","current","_Fragment","_renderList","right","jump","_component_Tooltip","position","side","content","jump_btn","total","Number","required","limit","START_INDEX","fillPages","pages","isNaN","isInteger","totalPages","computed","Math","ceil","ref","isLimitExceeded","watch","selectPage","nextPage","prevPage","handleJump","promptedPage","prompt","currentPage","components","Button","Tooltip","isIntegralNumber","stat","arraySlice","floor","mergeSort","middle","insertionSort","merge","element","llength","rlength","lindex","rindex","extendStatics","d","Object","setPrototypeOf","__proto__","__extends","TypeError","__","constructor","create","_a$1","__assign","assign","t","s","arguments","apply","__generator","thisArg","f","g","_","label","sent","trys","ops","verb","step","op","pop","__values","michelsonMapTypeSymbol","for","isMapType","args","MapTypecheckError","errorType","MichelsonMap","mapType","valueMap","Map","keyMap","setType","isMichelsonMap","keySchema","Schema","valueSchema","removeType","fromLiteral","keys","typecheckKey","Typecheck","typecheckValue","assertTypecheckValue","assertTypecheckKey","serializeDeterministically","e_1_1","e_1","_e","_f","entries","return","values","e_2_1","e_2","e_3_1","e_3","get","strKey","delete","has","clear","defineProperty","enumerable","configurable","cb","e_4","e_4_1","TokenValidationError","token","baseMessage","annot","annotText","Token","val","idx","fac","createToken","typeWithoutAnnotations","removeArgsRec","prim","annots","replace","hasAnnotations","ExtractSignature","ExtractSchema","ComparableToken","_super","compare","o1","o2","BigMapValidationError","BigMapToken","big_map","KeySchema","ValueSchema","isValid","Encode","EncodeObject","Execute","semantic","map_1","ToKey","int","OrToken","leftToken","keyCount","rightToken","newSig","sig","semantics","traversal","getLeftValue","getRightValue","concat","leftValue","rightValue","res","findToken","tok","val1","val2","labelVal1","labelVal2","encoded1","encoded2","ToBigMapKey","collapse$1","PairToken","tokens","cnt","leftSig","rightSig","getValue","NatValidationError","NatToken","toFixed","bigNumber","isNegative","nat1","nat2","StringToken","string","AddressValidationError","AddressToken","bytes","address1","address2","isImplicit","address","startsWith","MapValidationError","MapToken","BoolToken","toLowerCase","ContractValidationError","ContractToken","ListValidationError","ListToken","schema","reduce","prev","MutezValidationError","MutezToken","mutez1","mutez2","BytesValidationError","BytesToken","convertUint8ArrayToHexString","Buffer","OptionToken","subToken","TimestampToken","Date","toISOString","IntValidationError","IntToken","int1","int2","UnitToken","_val","UnitValue","_val1","_val2","publicKeyPrefixLength","KeyValidationError","KeyToken","key1","key2","keyPrefix1","getPrefix","keyPrefix2","keyBytes1","getP256PublicKeyComparableBytes","keyBytes2","p2pk","KeyHashValidationError","KeyHashToken","SignatureValidationError","SignatureToken","LambdaToken","parameters","returns","OperationToken","_i","SetValidationError","SetToken","ChainIDValidationError","ChainIDToken","EncodeTicketError","ticketerType","amountType","TicketToken","_args","ticketer","amount","NeverTokenError","NeverToken","SaplingStateValidationError","SaplingStateToken","SaplingTransactionValidationError","SaplingTransactionToken","validateBytes","Bls12381frValidationError","Bls12381frToken","Bls12381g1ValidationError","Bls12381g1Token","Bls12381g2ValidationError","Bls12381g2Token","InvalidTokenError","find","schemaTypeSymbol","collapse","deepEqual","ac","bc","every","root","bigMap","isExpressionExtended","exp","isSchema","fromRPCResponse","storage","script","removeTopLevelAnnotation","ExecuteOnBigMapDiff","diff","eltFormat","ExecuteOnBigMapValue","EncodeBigMapKey","_value","ComputeState","tx","state","contents","metadata","operation_result","big_map_diff","FindFirstInTopLevelPair","valueType","findValue","valueToFind","sch","ParameterSchema","parameter","isMultipleEntryPoint","reverse","ExtractSignatures","_component_Page","_component_WithdrawalsBase","_component_WithdrawAllModal","show","onOnClose","_component_metainfo","title","block","_hoisted_1","description","stats","stat_name","stat_value","week","stat_avg","_toDisplayString","avg","month","all","hint","_hoisted_8","header","_hoisted_10","_component_EventCard","event","id","won","showSymbol","empty","_component_Banner","loading","isPositionsLoading","_component_Pagination","$event","pagination","_hoisted_12","withdrawboard","_hoisted_13","date","sort_icon","_hoisted_16","_hoisted_17","withdraw","user","money_icon","info","tier","closedOracleTime","toLocaleDateString","_hoisted_19","_component_router_link","bottom","tb_pagination","_hoisted_21","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","_arguments","generator","adopt","fulfilled","rejected","then","defaultChain","defaultRPCOptions","getByPath","setByPath","castToBigNumber","returnArray","OpKind","defaultTtl","RpcClientCache","rpcClient","ttl","_cache","getAllCachedData","deleteAllCachedData","formatCacheKey","rpcUrl","rpcMethodName","rpcMethodParams","rpcMethodData","paramsToString","param","put","handle","setTimeout","remove","getBlockHash","getRpcUrl","getLiveBlocks","getBalance","getStorage","getScript","getContract","getManagerKey","getDelegate","getBigMapKey","keyUrl","getBigMapExpr","expr","getDelegates","getConstants","getBlock","getBlockHeader","getBlockMetadata","getBakingRights","getEndorsingRights","getBallotList","getBallots","getCurrentPeriodKind","getCurrentProposal","getCurrentQuorum","getVotesListings","getProposals","forgeOperations","injectOperation","signedOpBytes","preapplyOperations","getEntrypoints","contract","runOperation","runCode","getChainId","packData","getCurrentPeriod","getSuccessorPeriod","getSaplingDiffById","getSaplingDiffByContract","RpcClient","chain","httpBackend","createURL","hash","blocks","balance","contractResponse","delegate","ex_1","NOT_FOUND","deactivated","frozen_balance","frozen_balance_by_cycle","deposit","deposits","fees","rewards","rest","castedToBigNumber","staking_balance","delegated_contracts","delegated_balance","grace_period","voting_power","castedResponse","gas","formattedGas","tryBigNumber","sourceReference","Literal","ScanError","src","isSpace","isIdentStart","isIdent","isDigit","isHex","scan","scanComments","start","ii","esc","Ident","first","last","substr","Bytes","Comment","Protocol","refContract","DefaultProtocol","PsDELPH1","MacroError","assertArgs$1","assertNoAnnots","assertIntArg","arg","parsePairUnpairExpr","annotations","agg","lexpr","ai","ann","rexpr","c","an","parseSetMapCadr","vann","term","trimLast","l","filterAnnotations","fields","a_1","a_1_1","mkPrim","pairRe","unpairRe","cadrRe","setCadrRe","mapCadrRe","diipRe","duupRe","expandMacros","opt","protocol","mayRename","rest_1","r_1","top","leaf","PtEdo2Zk","PsFLorena","PtGRANADs","PtHangzH","ch_1","MichelineParseError","JSONParseError","errEOF","isAnnotation","intRe","bytesRe","Parser","expand","ret","macro","parseListExpr","scanner","expectBracket","tok_1","parseExpr","parseArgs","parseSequenceExpr","seq","itm","parseSequence","parseList","parseMichelineExpression","parseScript","parseData","parseJSON","src_1","src_1_1","_g","Formatter","lev","indent","newline","down","H","K","sha256","msg","pad","fill","ror","w","offset","q","s0","s1","i_1","i_2","b0","b1","t1","t2","i_3","digest","h_1","h_1_1","v_1","base58alphabetFwd","byteAt","charCodeAt","decodeBase58","acc","zeros","carry","decodeBase58Check","sum","MichelsonError","MichelsonTypeError","LongInteger","neg","append","cmp","parseBytes","compareBytes","isDecimal","isNatural","sign","annRe","unpackAnnotations","field","vars","specialVar","specialFields","emptyFields","emptyVar","tezosPrefix","BlockHash","OperationHash","OperationListHash","OperationListListHash","ProtocolHash","ContextHash","ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","CryptoboxPublicKeyHash","ED25519Seed","ED25519PublicKey","SECP256K1SecretKey","P256SecretKey","ED25519EncryptedSeed","SECP256K1EncryptedSecretKey","P256EncryptedSecretKey","SECP256K1PublicKey","P256PublicKey","SECP256K1Scalar","SECP256K1Element","ED25519SecretKey","ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature","ChainID","checkDecodeTezosID","types","types_1","types_1_1","plen","unpackComb","vv","isPairType","isPairData","rfc3339Re","parseDate","valueOf","parseHex","ss","hexBytes","noArgInstructionIDs","instructionIDs","simpleComparableTypeIDs","typeIDs","MichelsonValidationError","isPrim","isPrimOrSeq","assertPrim","assertSeq","assertPrimOrSeq","assertNatural","assertIntLiteral","assertArgs","assertMichelsonInstruction","ex_1_1","assertMichelsonType","assertMichelsonPackableType","assertMichelsonPassableType","assertMichelsonContract","assertMichelsonPushableType","assertMichelsonData","assertMichelsonComparableType","assertMichelsonBigMapStorableType","traverseType","assertMichelsonStorableType","mapElts","ex_2","ex_2_1","ent","ex_3","ex_3_1","sec","isInstruction","assertDataListIfAny","e_5","d_1","d_1_1","e_5_1","Tag","primitives","primTags","ContractID","PublicKeyHashID","PublicKeyID","Writer","writeBytes","writeUint8","writeUint16","writeUint32","writeInt8","writeInt16","writeInt32","boundsErr","Reader","cap","readBytes","reader","copy","readUint8","readUint16","x0","x1","readUint32","x2","x3","readInt8","readInt16","readInt32","readPublicKeyHash","rd","tag","ED25519","SECP256K1","P256","readAddress","Implicit","Originated","dec","TextDecoder","entryPoint","writePublicKeyHash","writeAddress","TextEncoder","readPublicKey","ln","publicKey","writePublicKey","pk","writeExpr","wr","tf","Sequence","Int","BigInt","bits","Prim0","Prim","_h","_j","_k","isOrData","isOptionData","getWriteTransformFunc","tc","dc","dd","e_6_1","e_6","d_2","d_2_1","e_7_1","e_7","elt","e_8_1","e_8","pkh","split","getTime","writePassThrough","isPushInstruction","packDataBytes","decodeAddressBytes","decodePublicKeyHashBytes","decodePublicKeyBytes","MichelsonInstructionError","stackState","typeID","typeArgs","assertScalarTypesEqual","aArgs","bArgs","assertStacksEqual","assertTypeAnnotationsValid","args_1","args_1_1","compareMichelsonData","tComb","aComb","bComb","localeCompare","aa","bb","isFunction","assertDataValidInternal","ctx","ep","functionTypeInternal","failed","d_3","d_3_1","instructionListType","inst","stack","inst_1","inst_1_1","ft","traceCallback","trace","in","out","instruction","typeIds","typeIds_1","typeIds_1_1","ids","rethrow","fn","rethrowTypeGuard","argAnn","ensureStacksEqual","ensureTypesEqual","ensureComparableType","ensurePackableType","ensureStorableType","ensurePushableType","ensureBigMapStorableType","instructionAnn","num","assertNum","annotate","tt","annotateVar","def","ia","annotateField","insAnn","defField","fieldAnn","insFieldAnn","insVarAnn","varAnn","getN","getNth","updateNth","varSuffix","suffix","branchType","br0","br1","retStack","s_1","s_2","s_3","ia_1","trim_1","lastIndexOf","retArgs","va","s_4","ia_2","s_5","toLocaleLowerCase","s_6","s_7","s_8","s_9","s_10","s1_1","s_11","s_12","s_13","pt","s_14","s_15","s_16","s_17","s_18","s_19","s_20","s_21","s_22","s_23","s_24","contractEntryPoint","s_25","s_26","s_27","addr","contractSection","s_28","children","s_29","s_30","tail","s_31","lefta","righta","s_32","s_33","s_34","s_35","head","s_36","assertContractValid","s_37","s_38","s_39","s_40","s_41","section","contract_1","contract_1_1","isContract","e_9","v_1_1","e_9_1","contractEntryPoints","isOrType","ch","args_2","getArg","expected","assertDataValid","functionType","e_10","e_11","stack_1","stack_1_1","e_10_1","typesec","e_11_1","isDataValid","Contract","output","parseTypeExpression","parseDataExpression","entryPoints","assertParameterValid","isParameterValid","DEFAULT_GAS_LIMIT","DEFAULT_FEE","DEFAULT_STORAGE_LIMIT","Protocols","RpcForger","forge","branch","rpc","RpcInjector","inject","signedOperationBytes","UnconfiguredSignerError","NoopSigner","publicKeyHash","secretKey","_bytes","_watermark","DefaultLambdaAddresses","ChainIds","Pt24m4xi","PsBABY5H","PsBabyM1","PsCARTHA","TZ_DECIMALS","MTZ_DECIMALS","getDecimal","format","bigNum","multipliedBy","pow","dividedBy","InvalidParameterError","smartContractMethodName","sigs","UndefinedLambdaContractError","InvalidDelegationSource","source","InvalidCodeParameter","InvalidInitParameter","createOriginationOperation","init","fee","ORIGINATION","gasLimit","storageLimit","mutez","contractStorage","storageType","operation","kind","gas_limit","storage_limit","createTransferOperation","TRANSFER","TRANSACTION","destination","createSetDelegateOperation","DELEGATION","createRegisterDelegateOperation","createRevealOperation","REVEAL","public_key","attachKind","findWithKind","arr","found","isKind","isOpWithFee","isOpRequireReveal","hasMetadata","hasMetadataWithResult","hasMetadataWithInternalOperationResult","isErrorWithMessage","TezosOperationError","errors","lastError","with","TezosPreapplyFailureError","flattenOperationResult","results","returnedResults","internal_operation_results","flattenErrors","internalResult","Operation","raw","_pollingConfig$","ReplaySubject","_currentHeadPromise","currentHead$","defer","timer","pipe","subscribe","polling$","tap","interval","config","timeoutAt","count","switchMap","mapTo","confirmed$","switchMapTo","operations","_foundAt","level","shareReplay","POSITIVE_INFINITY","catchError","of","revealOperation","confirmation","confirmations","confirmationPollingIntervalSecond","defaultConfirmationCount","confirmationPollingTimeoutSecond","conf","getConfirmationPollingInterval","BatchOperation","params","sumProp","filter","BATCH_KINDS","OperationEmitter","signer","isRevealOpNeeded","isAccountRevealRequired","isRevealRequiredForOpType","manager","haveManager","opRequireReveal","op_1","op_1_1","prepareOperation","counter","counters","blockHeaderPromise","blockMetaPromise","counterPromise","counter_1","headCounter","getFee","getSource","constructOps","opCounter","cOps","ACTIVATION","cops","next_protocol","opOb","forgedBytes","forger","opbytes","simulate","opResponse","clone","estimate","estimator","calculatedFee","calculatedGas","calculatedStorage","estimation","suggestedFeeMutez","signAndInject","signed","sbytes","signature","prefixSig","injector","OperationBatch","withTransfer","withContractCall","toTransferParams","withDelegation","withActivation","secret","withOrigination","getRPCOp","parser","prepareCodeOrigination","params_1","params_1_1","estimates","revealNeeded","estimated","reveal","estimatedReveal","prepared","opBytes","batch","unshift","RPCBatchProvider","receiptFromOperation","ALLOCATION_BURN","ORIGINATION_BURN","operationResults","totalGas","totalStorage","totalFee","totalOriginationBurn","totalAllocationBurn","totalPaidStorageDiff","plus","originated_contracts","consumed_gas","paid_storage_size_diff","totalStorageBurn","MissedBlockDuringConfirmationError","MAX_BRANCH_ANCESTORS","WalletOperation","opHash","_newHead$","_operationResult","_includedInBlock","_included","newHead$","newHead","lastHead","bufferSize","refCount","opGroup","opGroup_1","opGroup_1_1","toPromise","receipt","getCurrentConfirmation","combineLatest","foundAtBlock","isInCurrentBranch","tipBlockIdentifier","tipBlockHeader","inclusionBlock","levelDiff","tipBlockLevel","min","Set","bind","confirmationObservable","distinctUntilChanged","previousHead","expectedConfirmation","currentConfirmation","completed","takeWhile","BatchWalletOperation","operationResult","DelegationWalletOperation","delegationOperation","OriginationWalletOperation","originationOperation","wallet","TransactionWalletOperation","transactionOperation","cacheUntil","cacheUntilObs","subject","createNewPollingBasedHeadObservable","pollingTimer","sharedHeadOb","scheduler","distinctUntilKeyChanged","timeoutWith","throwError","OperationFactory","sharedHeadObs","createNewHeadObservable","createPastBlockWalker","startBlock","range","startWith","concatMap","createHeadObservableFromConfig","blockIdentifier","observableSequence","createOperation","createBatchOperation","createTransactionOperation","createDelegationOperation","RpcTzProvider","activate","MINIMAL_FEE_MUTEZ","MINIMAL_FEE_PER_BYTE_MUTEZ","MINIMAL_FEE_PER_GAS_MUTEZ","GAS_BUFFER","Estimate","_milligasLimit","_storageLimit","opSize","minimalFeePerStorageByteMutez","baseFeeMutez","roundUp","max","nanotez","operationFeeMutez","minimalFeeMutez","burnFeeMutez","createEstimateInstanceFromProperties","estimateProperties","milligasLimit","createArrayEstimateInstancesFromProperties","mergeLimits","userDefinedLimit","defaultLimits","SIGNATURE_STUB","RPCEstimateProvider","ALLOCATION_STORAGE","ORIGINATION_STORAGE","OP_SIZE_REVEAL","getAccountLimits","constants","numberOfOps","hard_gas_limit_per_operation","hard_gas_limit_per_block","hard_storage_limit_per_operation","cost_per_byte","ajustGasForBatchOperation","toNumber","gasLimitBlock","gaslimitOp","div","getEstimationPropertiesFromOperationContent","costPerByte","totalMilligas","consumed_milligas","prepareEstimate","chain_id","originate","protocolConstants","DEFAULT_PARAMS","isRevealNeeded","addRevealOp","shift","transfer","setDelegate","sourceOrDefault","_l","registerDelegate","DelegateOperation","delegationOp","consumedGas","OriginationOperation","contractProvider","originatedContracts","originationOp","storageDiff","storageSize","storage_size","RevealOperation","revealOp","txResult","TransactionOperation","transactionOp","ContractMethod","provider","parameterSchema","isMultipleEntrypoint","isAnonymous","validateArgs","getSignature","Wallet","fullTransferParams","entrypoint","DEFAULT_SMART_CONTRACT_METHOD_NAME","WalletOperationBatch","walletProvider","mapOperation","mapTransferParamsToWalletParams","mapOriginateParamsToWalletParams","mapDelegateParamsToWalletParams","sendOperations","operationFactory","walletCommand","forceRefetch","_pkh","getPKH","mappedParams","contractAbstractionComposer","entrypoints","blockHeader","chainId","abs","withExtensions","LegacyWalletProvider","ContractMethodObject","ContractMethodFactory","createContractMethodFlatParams","smartContractMethodSchema","createContractMethodObjectParam","LambdaView","lambdaContract","viewContract","viewMethod","contractParameter","voidLambda","createVoidLambda","execute","failedWith","methods","default","getView","callback","contractArgs","callbackContract","ContractView","currentContract","callbackParametersSchema","read","customLambdaAddress","lambdaAddress","lambdaView","EDONET","FLORENCENET","GRANADANET","HANGZHOUNET","MAINNET","isView","isContractProvider","variableToCheck","contractProviderTypeSymbol","ContractAbstraction","storageProvider","contractMethodFactory","methodsObject","views","_initializeMethods","view","entrypointParamWithoutCallback","smartContractMethodSchemaWithoutCallback","parametersCallback","smartContractMethodCallbackSchema","anonymousMethods","smartContractMethodSchema_1","BigMapAbstraction","keyToEncode","getBigMapKeyByID","getMultipleValues","keysToEncode","batchSize","getBigMapKeysByID","SaplingStateAbstraction","getSaplingDiff","getSaplingDiffByID","getId","smartContractAbstractionSemantic","sapling_state","RpcContractProvider","contractSchema","encodedKey","packed","encodedExpr","bigMapValue","packer","bigMapValues","keysBatch","getBlockForRequest","getBigMapValueOrUndefined","saplingState","addRevealOperationIfNeeded","estimateReveal_1","preparedOrigination","forgedOrigination","publickKeyHash","estimateReveal","MichelCodecParser","getNextProto","parsedParams","formatCodeParam","formatInitParam","parsedCode","order_1","parsedInit","RpcPacker","defaultConfigConfirmation","defaultConfigStreamer","streamerPollingIntervalMilliseconds","shouldObservableSubscriptionRetry","observableSubscriptionRetryFunction","retry","Context","_rpc","_signer","_proto","_config","BehaviorSubject","_extensions","providerDecorator","tz","_rpcClient","_forger","_injector","_walletProvider","_parser","_packer","setPartialConfig","isAnyProtocolActive","includes","defaultInterval","blockTime","confirmationPollingInterval","time_between_blocks","minimal_block_delay","delay_per_missing_endorsement","initial_endorsers","endorsers_per_block","registerProviderDecorator","fx","currentContext","decorator","opHashFilter","sourceFilter","kindFilter","destinationFilter","some","evaluateOpFilter","evaluateExpression","and","evaluateFilter","or","filters","filterOrExp","ObservableSubscription","obs","shouldRetry","operatorFunction","errorListeners","messageListeners","closeListeners","completed$","Subject","takeUntil","listeners","listeners_1","listeners_1_1","console","splice","on","off","close","getLastBlock","applyFilter","Observable","sub","ops_1","ops_1_1","complete","PollingSubscribeProvider","timer$","newBlock$","publish","_filter","pluck","subscribeOperation","ForgingMismatchError","withdrawAll","CompositeForger","forgers","lastResult","currentResult","NoopParser","MichelCodecPacker","TezosToolkit","_options","_context","_wallet","setProvider","stream","setRpcProvider","setStreamProvider","setSignerProvider","setForgerProvider","setWalletProvider","setPackerProvider","getFactory","_stream","addExtension","extension","configureContext","ctor","getVersionInfo","eventIds","juster","_tezos","transactions","batchOp","success","href","_hoisted_9","_component_Modal","width","padding","closable","subtitle","pos","positions","_component_Checkbox","winnerBets","require","_hoisted_5","subname","_component_Spin","text","accountStore","useAccountStore","notificationsStore","useNotificationsStore","awaitingConfirmation","positionsForWithdrawal","selectedPositionsIds","selectedPositions","isAllSelected","buttonState","curr","handleSelectPosition","handleSelectAllPositions","handleUnselectAllPositions","handleWithdrawAll","selectedEventsIds","notification","autoDestroy","Modal","Spin","Checkbox","showWithdrawAllModal","withdrawalsHistory","subToNewPositions","currentPageHistory","paginatedWithdrawalsHistory","currentPageForPositions","positionsForWithdraw","paginatedPositionsForWithdraw","statistics","reactive","sortBy","onMounted","fetchUserWithdrawals","allUserWithdrawals","cloneDeep","withdrawalsLastWeek","DateTime","fromISO","ts","now","minus","days","withdrawalsLastMonth","onUnmounted","closed","unsubscribe","useMeta","allPositionsForWithdraw","numberWithSymbol","WithdrawAllModal","Banner","Pagination","EventCard","Page","WithdrawalsBase","UA","requireObjectCoercible","S","it","isFinite"],"mappings":"kGAAA,IAAIA,EAAY,EAAQ,QAEpBC,EAAUD,EAAUE,MAAM,mBAE9BC,EAAOC,UAAYH,IAAYA,EAAQ,I,uBCJvC,IAAII,EAAU,EAAQ,QA8BtB,SAASC,EAAIC,EAAQC,EAAMC,GACzB,OAAiB,MAAVF,EAAiBA,EAASF,EAAQE,EAAQC,EAAMC,GAGzDN,EAAOC,QAAUE,G,uBClCjB,IAAII,EAAc,EAAQ,QACtBC,EAAW,EAAQ,QACnBC,EAAU,EAAQ,QAClBC,EAAW,EAAQ,QACnBC,EAAQ,EAAQ,QAYpB,SAAST,EAAQE,EAAQC,EAAMC,EAAOM,GACpC,IAAKF,EAASN,GACZ,OAAOA,EAETC,EAAOG,EAASH,EAAMD,GAEtB,IAAIS,GAAS,EACTC,EAAST,EAAKS,OACdC,EAAYD,EAAS,EACrBE,EAASZ,EAEb,MAAiB,MAAVY,KAAoBH,EAAQC,EAAQ,CACzC,IAAIG,EAAMN,EAAMN,EAAKQ,IACjBK,EAAWZ,EAEf,GAAY,cAARW,GAA+B,gBAARA,GAAiC,cAARA,EAClD,OAAOb,EAGT,GAAIS,GAASE,EAAW,CACtB,IAAII,EAAWH,EAAOC,GACtBC,EAAWN,EAAaA,EAAWO,EAAUF,EAAKD,QAAUI,OAC3CA,IAAbF,IACFA,EAAWR,EAASS,GAChBA,EACCV,EAAQJ,EAAKQ,EAAQ,IAAM,GAAK,IAGzCN,EAAYS,EAAQC,EAAKC,GACzBF,EAASA,EAAOC,GAElB,OAAOb,EAGTJ,EAAOC,QAAUC,G,qCClDjB,YAIA,IAAImB,EAJJ,sGAKA,SAAWA,GAQPA,EAAYA,EAAY,YAAc,KAAO,WAI7CA,EAAYA,EAAY,uBAAyB,KAAO,sBAMxDA,EAAYA,EAAY,cAAgB,KAAO,aAO/CA,EAAYA,EAAY,MAAQ,KAAO,KAIvCA,EAAYA,EAAY,WAAa,KAAO,UAK5CA,EAAYA,EAAY,YAAc,KAAO,WAM7CA,EAAYA,EAAY,iCAAmC,KAAO,gCAIlEA,EAAYA,EAAY,cAAgB,KAAO,aAK/CA,EAAYA,EAAY,iBAAmB,KAAO,gBAMlDA,EAAYA,EAAY,mBAAqB,KAAO,kBAKpDA,EAAYA,EAAY,gBAAkB,KAAO,eAKjDA,EAAYA,EAAY,oBAAsB,KAAO,mBAKrDA,EAAYA,EAAY,WAAa,KAAO,UAM5CA,EAAYA,EAAY,oBAAsB,KAAO,mBAIrDA,EAAYA,EAAY,qBAAuB,KAAO,oBAStDA,EAAYA,EAAY,SAAW,KAAO,QAO1CA,EAAYA,EAAY,aAAe,KAAO,YAK9CA,EAAYA,EAAY,gBAAkB,KAAO,eAMjDA,EAAYA,EAAY,aAAe,KAAO,YAI9CA,EAAYA,EAAY,gBAAkB,KAAO,eAOjDA,EAAYA,EAAY,sBAAwB,KAAO,qBAMvDA,EAAYA,EAAY,sBAAwB,KAAO,qBAKvDA,EAAYA,EAAY,eAAiB,KAAO,cAOhDA,EAAYA,EAAY,gBAAkB,KAAO,eAMjDA,EAAYA,EAAY,oBAAsB,KAAO,mBAKrDA,EAAYA,EAAY,aAAe,KAAO,YAK9CA,EAAYA,EAAY,aAAe,KAAO,YAK9CA,EAAYA,EAAY,sBAAwB,KAAO,qBAIvDA,EAAYA,EAAY,kBAAoB,KAAO,iBAInDA,EAAYA,EAAY,iCAAmC,KAAO,gCAMlEA,EAAYA,EAAY,mBAAqB,KAAO,kBAKpDA,EAAYA,EAAY,YAAc,KAAO,WAQ7CA,EAAYA,EAAY,QAAU,KAAO,OAIzCA,EAAYA,EAAY,mBAAqB,KAAO,kBAIpDA,EAAYA,EAAY,uBAAyB,KAAO,sBAIxDA,EAAYA,EAAY,qBAAuB,KAAO,oBAMtDA,EAAYA,EAAY,gBAAkB,KAAO,eAKjDA,EAAYA,EAAY,0BAA4B,KAAO,yBAM3DA,EAAYA,EAAY,yBAA2B,KAAO,wBAI1DA,EAAYA,EAAY,sBAAwB,KAAO,qBAMvDA,EAAYA,EAAY,iBAAmB,KAAO,gBAIlDA,EAAYA,EAAY,uBAAyB,KAAO,sBAIxDA,EAAYA,EAAY,wBAA0B,KAAO,uBAIzDA,EAAYA,EAAY,UAAY,KAAO,SAI3CA,EAAYA,EAAY,qBAAuB,KAAO,oBAItDA,EAAYA,EAAY,oBAAsB,KAAO,mBAOrDA,EAAYA,EAAY,yBAA2B,KAAO,wBAI1DA,EAAYA,EAAY,qBAAuB,KAAO,oBAKtDA,EAAYA,EAAY,mCAAqC,KAAO,kCAKpEA,EAAYA,EAAY,iCAAmC,KAAO,gCAIlEA,EAAYA,EAAY,yBAA2B,KAAO,wBAK1DA,EAAYA,EAAY,mBAAqB,KAAO,kBAIpDA,EAAYA,EAAY,eAAiB,KAAO,cAKhDA,EAAYA,EAAY,uBAAyB,KAAO,sBAIxDA,EAAYA,EAAY,mBAAqB,KAAO,kBAIpDA,EAAYA,EAAY,8BAAgC,KAAO,6BAI/DA,EAAYA,EAAY,2BAA6B,KAAO,0BAI5DA,EAAYA,EAAY,wBAA0B,KAAO,uBAIzDA,EAAYA,EAAY,iBAAmB,KAAO,gBAIlDA,EAAYA,EAAY,gBAAkB,KAAO,eAMjDA,EAAYA,EAAY,mCAAqC,KAAO,kCAxTxE,CAyTGA,IAAgBA,EAAc,KAIjC,IAWIC,EAA4B,qBAAZC,GAA+C,MAApBA,EAAQC,UAA6C,MAAzBD,EAAQC,SAASC,KAExFC,EAAqBJ,EAAS,EAAQ,QAAgBK,eAAiBA,eACvEC,EAAiB,IACjBC,EAAmC,WACnC,SAASA,EAAkBC,EAASC,EAAQC,EAAYC,EAAMC,GAC1DC,KAAKL,QAAUA,EACfK,KAAKJ,OAASA,EACdI,KAAKH,WAAaA,EAClBG,KAAKF,KAAOA,EACZE,KAAKD,IAAMA,EACXC,KAAKC,KAAO,eAEhB,OAAOP,EAT2B,GAWlCQ,EAAmC,WACnC,SAASA,EAAkBH,EAAKI,GAC5BH,KAAKD,IAAMA,EACXC,KAAKG,WAAaA,EAClBH,KAAKC,KAAO,oBACZD,KAAKL,QAAU,cAAgBI,EAAM,UAEzC,OAAOG,EAP2B,GASlCE,EAA6B,WAC7B,SAASA,KA8FT,OA5FAA,EAAYC,UAAUC,UAAY,SAAUC,GACxC,IAAKA,EACD,MAAO,GAEX,IAAIC,EAAM,GACNC,EAAU,SAAUC,GACpB,GAAIH,EAAII,eAAeD,IAAwB,qBAAXH,EAAIG,GAAoB,CACxD,IAAIE,EAAgC,oBAAlBL,EAAIG,GAAGG,OAAwBN,EAAIG,GAAGG,SAAWN,EAAIG,GAGvE,GAAa,OAATE,EAEA,OADAJ,EAAIM,KAAKC,mBAAmBL,IACrB,WAIX,GAAIM,MAAMC,QAAQL,GAId,OAHAA,EAAKM,SAAQ,SAAUC,GACnBX,EAAIM,KAAKC,mBAAmBL,GAAK,IAAMK,mBAAmBI,OAEvD,WAEXX,EAAIM,KAAKC,mBAAmBL,GAAK,IAAMK,mBAAmBH,MAGlE,IAAK,IAAIF,KAAKH,EACVE,EAAQC,GAEZ,IAAIU,EAAaZ,EAAIa,KAAK,KAC1B,OAAID,EACO,IAAMA,EAGN,IAGfhB,EAAYC,UAAUiB,UAAY,WAC9B,OAAO,IAAI/B,GAMfa,EAAYC,UAAUkB,cAAgB,SAAUC,EAAIC,GAChD,IAAIC,EAAQ1B,KACRD,EAAMyB,EAAGzB,IAAK4B,EAASH,EAAGG,OAAQC,EAAUJ,EAAGI,QAASC,EAAQL,EAAGK,MAAOC,EAAKN,EAAGO,QAASA,OAAiB,IAAPD,EAAgB,GAAKA,EAAIE,EAAKR,EAAGS,KAAMA,OAAc,IAAPD,GAAuBA,EAAIE,EAAKV,EAAGW,SAAUA,OAAkB,IAAPD,OAAgBjD,EAAYiD,EAC3O,OAAO,IAAIE,SAAQ,SAAUC,EAASC,GAClC,IAAIC,EAAUb,EAAMJ,YAQpB,IAAK,IAAIkB,KAPTD,EAAQE,KAAKd,GAAU,MAAO,GAAK5B,EAAM2B,EAAMpB,UAAUuB,IACpDE,EAAQ,iBACTQ,EAAQG,iBAAiB,eAAgB,oBAEzCP,GACAI,EAAQI,iBAAiB,GAAKR,GAEpBJ,EACVQ,EAAQG,iBAAiBF,EAAGT,EAAQS,IA2BxC,GAzBAD,EAAQX,QAAUA,GAAWnC,EAC7B8C,EAAQK,OAAS,WACb,GAAI5C,KAAKJ,QAAU,KAAOI,KAAKJ,OAAS,IACpC,GAAIqC,EACA,IACII,EAAQQ,KAAKC,MAAMP,EAAQQ,WAE/B,MAAOC,GACHV,EAAO,IAAIW,MAAM,6BAA+BV,EAAQQ,gBAI5DV,EAAQE,EAAQQ,eAIpBT,EAAO,IAAI5C,EAAkB,yBAA2BM,KAAKJ,OAAS,KAAO2C,EAAQQ,SAAU/C,KAAKJ,OAAQ2C,EAAQ1C,WAAY0C,EAAQQ,SAAUhD,KAG1JwC,EAAQW,UAAY,WAChBZ,EAAO,IAAIW,MAAM,4BAA8BV,EAAQX,QAAU,QAErEW,EAAQY,QAAU,SAAUC,GACxBd,EAAO,IAAIpC,EAAkBH,EAAKqD,KAElC3B,EAAM,CACN,IAAI4B,EAAUR,KAAKS,UAAU7B,GAC7Bc,EAAQgB,KAAKF,QAGbd,EAAQgB,WAIbnD,EA/FqB,K,0DCrWhC,geAEIoB,EAAIM,EACJ0B,EAHJ,aAIA,SAAWA,GACPA,EAAO,OAAS,MAChBA,EAAO,OAAS,MAChBA,EAAO,OAAS,MAChBA,EAAO,MAAQ,KACfA,EAAO,OAAS,MAChBA,EAAO,SAAW,QAClBA,EAAO,QAAU,OACjBA,EAAO,QAAU,OACjBA,EAAO,QAAU,OACjBA,EAAO,QAAU,OACjBA,EAAO,QAAU,OACjBA,EAAO,SAAW,QAClBA,EAAO,SAAW,QAClBA,EAAO,SAAW,QAClBA,EAAO,QAAU,OACjBA,EAAO,SAAW,QAClBA,EAAO,SAAW,QAClBA,EAAO,SAAW,QAClBA,EAAO,OAAS,MAChBA,EAAO,OAAS,MAChBA,EAAO,OAAS,MAChBA,EAAO,KAAO,IACdA,EAAO,KAAO,IACdA,EAAO,MAAQ,KACfA,EAAO,OAAS,MAChBA,EAAO,KAAO,IACdA,EAAO,MAAQ,KACfA,EAAO,MAAQ,KACfA,EAAO,QAAU,OACjBA,EAAO,MAAQ,MA9BnB,CA+BGA,IAAWA,EAAS,KACvB,IAAIC,GAAUjC,EAAK,GACfA,EAAGgC,EAAOE,KAAO,IAAIC,WAAW,CAAC,EAAG,IAAK,MACzCnC,EAAGgC,EAAOI,KAAO,IAAID,WAAW,CAAC,EAAG,IAAK,MACzCnC,EAAGgC,EAAOK,KAAO,IAAIF,WAAW,CAAC,EAAG,IAAK,MACzCnC,EAAGgC,EAAOM,IAAM,IAAIH,WAAW,CAAC,EAAG,GAAI,MACvCnC,EAAGgC,EAAOO,KAAO,IAAIJ,WAAW,CAAC,EAAG,GAAI,MACxCnC,EAAGgC,EAAOQ,MAAQ,IAAIL,WAAW,CAAC,GAAI,IAAK,GAAI,IAC/CnC,EAAGgC,EAAOS,OAAS,IAAIN,WAAW,CAAC,GAAI,GAAI,GAAI,IAC/CnC,EAAGgC,EAAOU,MAAQ,IAAIP,WAAW,CAAC,GAAI,IAAK,IAAK,MAChDnC,EAAGgC,EAAOW,MAAQ,IAAIR,WAAW,CAAC,GAAI,GAAI,IAAK,MAC/CnC,EAAGgC,EAAOY,MAAQ,IAAIT,WAAW,CAAC,GAAI,GAAI,GAAI,MAC9CnC,EAAGgC,EAAOa,MAAQ,IAAIV,WAAW,CAAC,EAAG,IAAK,IAAK,KAC/CnC,EAAGgC,EAAOc,MAAQ,IAAIX,WAAW,CAAC,EAAG,IAAK,IAAK,MAC/CnC,EAAGgC,EAAOe,OAAS,IAAIZ,WAAW,CAAC,EAAG,GAAI,GAAI,IAAK,KACnDnC,EAAGgC,EAAOgB,OAAS,IAAIb,WAAW,CAAC,EAAM,IAAM,IAAM,IAAM,MAC3DnC,EAAGgC,EAAOiB,OAAS,IAAId,WAAW,CAAC,EAAM,GAAM,GAAM,IAAM,MAC3DnC,EAAGgC,EAAOkB,OAAS,IAAIf,WAAW,CAAC,EAAG,IAAK,IAAK,IAAK,KACrDnC,EAAGgC,EAAOmB,OAAS,IAAIhB,WAAW,CAAC,GAAI,IAAK,IAAK,GAAI,KACrDnC,EAAGgC,EAAOoB,OAAS,IAAIjB,WAAW,CAAC,GAAI,IAAK,GAAI,KAChDnC,EAAGgC,EAAOqB,KAAO,IAAIlB,WAAW,CAAC,EAAG,IAAK,KACzCnC,EAAGgC,EAAOsB,KAAO,IAAInB,WAAW,CAAC,GAAI,GAAI,IACzCnC,EAAGgC,EAAOuB,KAAO,IAAIpB,WAAW,CAAC,GAAI,IAAK,MAC1CnC,EAAGgC,EAAOwB,GAAK,IAAIrB,WAAW,CAAC,EAAG,KAClCnC,EAAGgC,EAAOyB,GAAK,IAAItB,WAAW,CAAC,EAAG,MAClCnC,EAAGgC,EAAO0B,IAAM,IAAIvB,WAAW,CAAC,IAAK,MACrCnC,EAAGgC,EAAO2B,KAAO,IAAIxB,WAAW,CAAC,GAAI,IAAK,MAC1CnC,EAAGgC,EAAO4B,GAAK,IAAIzB,WAAW,CAAC,EAAG,MAClCnC,EAAGgC,EAAO6B,IAAM,IAAI1B,WAAW,CAAC,GAAI,MACpCnC,EAAGgC,EAAO8B,IAAM,IAAI3B,WAAW,CAAC,IAAK,MACrCnC,EAAGgC,EAAO+B,MAAQ,IAAI5B,WAAW,CAAC,GAAI,GAAI,GAAI,KAE9CnC,EAAGgC,EAAOgC,IAAM,IAAI7B,WAAW,CAAC,EAAG,GAAI,MACvCnC,GACAiE,GAAgB3D,EAAK,GACrBA,EAAG0B,EAAOE,KAAO,GACjB5B,EAAG0B,EAAOI,KAAO,GACjB9B,EAAG0B,EAAOK,KAAO,GACjB/B,EAAG0B,EAAOM,IAAM,GAChBhC,EAAG0B,EAAOO,KAAO,GACjBjC,EAAG0B,EAAOY,MAAQ,GAClBtC,EAAG0B,EAAOa,MAAQ,GAClBvC,EAAG0B,EAAOc,MAAQ,GAClBxC,EAAG0B,EAAOkB,OAAS,GACnB5C,EAAG0B,EAAOmB,OAAS,GACnB7C,EAAG0B,EAAOoB,OAAS,GACnB9C,EAAG0B,EAAOqB,KAAO,GACjB/C,EAAG0B,EAAOsB,KAAO,EACjBhD,EAAG0B,EAAOwB,GAAK,GACflD,EAAG0B,EAAO4B,GAAK,GACftD,EAAG0B,EAAOyB,GAAK,GACfnD;;;;;;;;;;;;;;;AAiBJ,SAAS4D,EAAOC,EAAGC,GACf,IAAIC,EAAsB,oBAAXC,QAAyBH,EAAEG,OAAOC,UACjD,IAAKF,EAAG,OAAOF,EACf,IAAmBK,EAAYC,EAA3BC,EAAIL,EAAEM,KAAKR,GAAOS,EAAK,GAC3B,IACI,YAAc,IAANR,GAAgBA,KAAM,MAAQI,EAAIE,EAAEG,QAAQC,KAAMF,EAAGtF,KAAKkF,EAAE7H,OAExE,MAAOoI,GAASN,EAAI,CAAEM,MAAOA,GAC7B,QACI,IACQP,IAAMA,EAAEM,OAAST,EAAIK,EAAE,YAAYL,EAAEM,KAAKD,GAElD,QAAU,GAAID,EAAG,MAAMA,EAAEM,OAE7B,OAAOH,EAGX,SAASI,EAAcC,EAAIC,GACvB,IAAK,IAAIR,EAAI,EAAGS,EAAKD,EAAK/H,OAAQiI,EAAIH,EAAG9H,OAAQuH,EAAIS,EAAIT,IAAKU,IAC1DH,EAAGG,GAAKF,EAAKR,GACjB,OAAOO,EAGX,IACII,EADAC,EAAc,EAAQ,QAQ1B,SAASC,EAAc5I,GACnB,MAAqB,kBAAVA,GAGJA,KAASsF,EAYpB,SAASuD,EAAsB7I,EAAO8I,GAClC,IAAIrJ,EAAQ,IAAIsJ,OAAO,KAAOD,EAAS5F,KAAK,KAAO,KAAK8F,KAAKhJ,GAC7D,IAAKP,GAA0B,IAAjBA,EAAMe,OAChB,OAAOkI,EAAiBO,kBAE5B,IAAIC,EAAYzJ,EAAM,GACtB,IAAKmJ,EAAcM,GACf,OAAOR,EAAiBO,kBAG5B,IAAIE,EAAkB,wBAAwBH,KAAKhJ,GAC/CmJ,IACAnJ,EAAQmJ,EAAgB,IAG5B,IAAIC,EAAUT,EAAYU,aAAarJ,GACvC,OAAKoJ,GAGLA,EAAUA,EAAQE,MAAMhE,EAAO4D,GAAW1I,QACtC4I,EAAQ5I,SAAW8G,EAAa4B,GACzBR,EAAiBa,eAErBb,EAAiBc,OANbd,EAAiBe,kBAvChC,SAAWf,GACPA,EAAiBA,EAAiB,qBAAuB,GAAK,oBAC9DA,EAAiBA,EAAiB,oBAAsB,GAAK,mBAC7DA,EAAiBA,EAAiB,kBAAoB,GAAK,iBAC3DA,EAAiBA,EAAiB,SAAW,GAAK,SAJtD,CAKGA,IAAqBA,EAAmB,KA0C3C,IAAIgB,EAAiB,CAACrE,EAAOE,IAAKF,EAAOI,IAAKJ,EAAOK,KACjDiE,EAAiB,CAACtE,EAAOO,KACzBgE,EAAkB,CAACvE,EAAOkB,MAAOlB,EAAOoB,MAAOpB,EAAOmB,MAAOnB,EAAOqB,KACpEmD,EAAW,CAACxE,EAAOY,KAAMZ,EAAOa,KAAMb,EAAOc,MAgBjD,SAAS2D,EAAgB9J,GACrB,OAAO6I,EAAsB7I,EAAOqI,EAAcA,EAAc,GAAId,EAAOmC,IAAkBnC,EAAOoC,KAiBxG,SAASI,EAAc/J,GACnB,OAAO6I,EAAsB7I,EAAO,CAACqF,EAAOsB,MAmChD,SAASqD,EAAgBhK,GACrB,OAAO6I,EAAsB7I,EAAO0J,GAiBxC,SAASO,EAAkBjK,GACvB,OAAO6I,EAAsB7I,EAAO4J,GAiBxC,SAASM,EAAkBlK,GACvB,OAAO6I,EAAsB7I,EAAO6J,GAKxC,IAUIM,EAAQ,EAAQ,QAChBC,EAAY,EAAQ,QAOxB,SAASC,EAAWrK,GAChB,IAAIsK,EAAYH,EAAMI,QAAQC,EAAQxK,GAAQ,KAAM,IACpD,OAAOyK,EAAWH,EAAWhF,EAAO,SAkBxC,SAASmF,EAAWzK,EAAOsF,GACvB,IAAIoF,EAA6B,kBAAV1K,EAAqBwF,WAAW+C,KAAK,YAAOA,KAAKvI,EAAO,QAAUA,EACrFyH,EAAI,IAAIjC,WAAWF,EAAO9E,OAASkK,EAAUlK,QAGjD,OAFAiH,EAAE5H,IAAIyF,GACNmC,EAAE5H,IAAI6K,EAAWpF,EAAO9E,QACjB4J,EAAUO,OAAO,YAAOpC,KAAKd,EAAEmD,SAS1C,IAAIC,EAAa,SAAUC,EAAKC,GAC5B,OAAOX,EAAUY,OAAOF,GAAKxB,MAAMyB,EAAUvK,SAQjD,SAASyK,EAAUC,GACf,IAAI7H,EACA8H,EAAMf,EAAUY,OAAOE,GACvBE,GAAa/H,EAAK,GAClBA,EAAGiC,EAAO+F,IAAIC,YAAc,OAC5BjI,EAAGiC,EAAOiG,IAAID,YAAc,OAC5BjI,EAAGiC,EAAOkG,IAAIF,YAAc,OAC5BjI,GACAoI,EAAOL,EAAU,IAAI5F,WAAW2F,EAAI7B,MAAM,EAAG,IAAIgC,YACrD,GAAIG,EAAM,CAEN,IAAIC,EAAMC,EAAQR,EAAI7B,MAAM,IAC5B,OAAOmC,EAAOC,EAId,MAAO,KAAOC,EAAQR,EAAI7B,MAAM,EAAG,KAAO,KASlD,SAASsC,EAAa5L,GAClB,GAA8B,OAA1BA,EAAM6L,UAAU,EAAG,GAAa,CAChC,IAAIJ,EAAO,CACP,OAAQnG,EAAO+F,IACf,OAAQ/F,EAAOiG,IACf,OAAQjG,EAAOkG,KAEnB,OAAOf,EAAWzK,EAAM6L,UAAU,GAAIJ,EAAKzL,EAAM6L,UAAU,EAAG,KAElE,OAAOpB,EAAWzK,EAAM6L,UAAU,EAAG,IAAKvG,EAAOK,IAQrD,SAASmG,EAAU9L,GACf,GAAiB,MAAbA,EAAM,GAAY,CAClB,IAAIyL,EAAO,CACP,KAAM,IAAIjG,WAAW,CAAC,GAAI,GAAI,GAAI,MAClC,KAAM,IAAIA,WAAW,CAAC,EAAG,IAAK,IAAK,KACnC,KAAM,IAAIA,WAAW,CAAC,EAAG,IAAK,IAAK,OAEvC,OAAOiF,EAAWzK,EAAM6L,UAAU,GAAIJ,EAAKzL,EAAM6L,UAAU,EAAG,MAStE,SAASE,EAAc/L,GACnB,GAAiB,MAAbA,EAAM,GAAY,CAClB,IAAIyL,EAAO,CACP,KAAM,IAAIjG,WAAW,CAAC,EAAG,IAAK,MAC9B,KAAM,IAAIA,WAAW,CAAC,EAAG,IAAK,MAC9B,KAAM,IAAIA,WAAW,CAAC,EAAG,IAAK,OAElC,OAAOiF,EAAWzK,EAAM6L,UAAU,GAAIJ,EAAKzL,EAAM6L,UAAU,EAAG,MAStE,IAAIrB,EAAU,SAAUkB,GACpB,OAAO,IAAIlG,WAAWkG,EAAIjM,MAAM,gBAAgBuM,KAAI,SAAUC,GAAK,OAAOC,SAASD,EAAG,SA6EtFN,EAAU,SAAUf,GACpB,IAAIuB,EAAY,IAAI3G,WAAWoF,GAC3BwB,EAAW,GAMf,OALAD,EAAUpJ,SAAQ,SAAUsJ,GACxB,IAAIX,EAAMW,EAAKf,SAAS,IACpBgB,GAAa,KAAOZ,GAAKpC,OAAO,GACpC8C,EAASzJ,KAAK2J,MAEXF,EAASlJ,KAAK,M,oCC9fzB,IAAIqJ,EAAI,EAAQ,QACZC,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAC5BC,EAAsB,EAAQ,QAC9BC,EAAmB,EAAQ,QAI/BJ,EAAE,CAAEK,OAAQ,QAASC,OAAO,GAAQ,CAClCC,GAAI,SAAYvM,GACd,IAAIuG,EAAI0F,EAAS3K,MACbkL,EAAMN,EAAkB3F,GACxBkG,EAAgBN,EAAoBnM,GACpC8D,EAAI2I,GAAiB,EAAIA,EAAgBD,EAAMC,EACnD,OAAQ3I,EAAI,GAAKA,GAAK0I,OAAOjM,EAAYgG,EAAEzC,MAI/CsI,EAAiB,O,oCClBjB,IAAIJ,EAAI,EAAQ,QACZU,EAAc,EAAQ,QACtBC,EAAY,EAAQ,QACpBV,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAC5BnB,EAAW,EAAQ,QACnB6B,EAAQ,EAAQ,QAChBC,EAAe,EAAQ,QACvBC,EAAsB,EAAQ,QAC9BC,EAAK,EAAQ,QACbC,EAAa,EAAQ,QACrBC,EAAK,EAAQ,QACbC,EAAS,EAAQ,QAEjBC,EAAO,GACPC,EAAUV,EAAYS,EAAKE,MAC3BjL,EAAOsK,EAAYS,EAAK/K,MAGxBkL,EAAqBV,GAAM,WAC7BO,EAAKE,UAAK9M,MAGRgN,EAAgBX,GAAM,WACxBO,EAAKE,KAAK,SAGRG,EAAgBV,EAAoB,QAEpCW,GAAeb,GAAM,WAEvB,GAAIK,EAAI,OAAOA,EAAK,GACpB,KAAIF,GAAMA,EAAK,GAAf,CACA,GAAIC,EAAY,OAAO,EACvB,GAAIE,EAAQ,OAAOA,EAAS,IAE5B,IACIQ,EAAMC,EAAKlO,EAAOO,EADlB4N,EAAS,GAIb,IAAKF,EAAO,GAAIA,EAAO,GAAIA,IAAQ,CAGjC,OAFAC,EAAME,OAAOC,aAAaJ,GAElBA,GACN,KAAK,GAAI,KAAK,GAAI,KAAK,GAAI,KAAK,GAAIjO,EAAQ,EAAG,MAC/C,KAAK,GAAI,KAAK,GAAIA,EAAQ,EAAG,MAC7B,QAASA,EAAQ,EAGnB,IAAKO,EAAQ,EAAGA,EAAQ,GAAIA,IAC1BmN,EAAK/K,KAAK,CAAE0B,EAAG6J,EAAM3N,EAAO+N,EAAGtO,IAMnC,IAFA0N,EAAKE,MAAK,SAAUW,EAAGC,GAAK,OAAOA,EAAEF,EAAIC,EAAED,KAEtC/N,EAAQ,EAAGA,EAAQmN,EAAKlN,OAAQD,IACnC2N,EAAMR,EAAKnN,GAAO8D,EAAEoK,OAAO,GACvBN,EAAOM,OAAON,EAAO3N,OAAS,KAAO0N,IAAKC,GAAUD,GAG1D,MAAkB,gBAAXC,MAGLO,EAASb,IAAuBC,IAAkBC,IAAkBC,EAEpEW,EAAiB,SAAUC,GAC7B,OAAO,SAAUC,EAAGC,GAClB,YAAUhO,IAANgO,GAAyB,OACnBhO,IAAN+N,EAAwB,OACV/N,IAAd8N,GAAiCA,EAAUC,EAAGC,IAAM,EACjDxD,EAASuD,GAAKvD,EAASwD,GAAK,GAAK,IAM5CvC,EAAE,CAAEK,OAAQ,QAASC,OAAO,EAAMkC,OAAQL,GAAU,CAClDd,KAAM,SAAcgB,QACA9N,IAAd8N,GAAyB1B,EAAU0B,GAEvC,IAAII,EAAQxC,EAAS3K,MAErB,GAAImM,EAAa,YAAqBlN,IAAd8N,EAA0BjB,EAAQqB,GAASrB,EAAQqB,EAAOJ,GAElF,IAEIK,EAAa1O,EAFb2O,EAAQ,GACRC,EAAc1C,EAAkBuC,GAGpC,IAAKzO,EAAQ,EAAGA,EAAQ4O,EAAa5O,IAC/BA,KAASyO,GAAOrM,EAAKuM,EAAOF,EAAMzO,IAGxC6M,EAAa8B,EAAOP,EAAeC,IAEnCK,EAAcC,EAAM1O,OACpBD,EAAQ,EAER,MAAOA,EAAQ0O,EAAaD,EAAMzO,GAAS2O,EAAM3O,KACjD,MAAOA,EAAQ4O,SAAoBH,EAAMzO,KAEzC,OAAOyO,M,uBCtGX,IAAIzP,EAAY,EAAQ,QAEpB6P,EAAS7P,EAAUE,MAAM,wBAE7BC,EAAOC,UAAYyP,IAAWA,EAAO,I,wJCgBjCC,gCAmBM,OAnBAC,QAAK,8BAAEC,wCAASC,MAAK,4BAAED,SAAOE,UAApC,CACIC,gCAeM,OAdDF,MAAK,6BAAqBD,SAAOI,IAAuBJ,cAAcA,SAAOK,QAAiCL,gBAAgBA,SAAOK,UAD1I,CAOIC,yBAOaC,gBAAA,CAPDhO,KAAK,SAAO,C,8BACpB,iBAKE,CAJQyN,cAAcA,yCADxBQ,yBAKEC,EAAA,C,MAHElO,KAAK,QACLmO,KAAK,KACJT,MAAK,4BAAED,SAAOW,aAJnB,8D,OARR,GAiBAR,gCAAwC,OAAlCF,MAAK,4BAAED,SAAOY,OAApB,CAA0BC,wBAAQb,SAAA,YAAlC,IAlBJ,GAjBWc,mCAAgB,CAC3BvO,KAAM,WACNwO,MAAO,CAAEC,WAAYC,QAASC,aAAcD,SAE5CE,MAJ2B,SAIrBJ,EAAOK,GACT,MAAuBC,oBAAON,GAAtBC,EAAR,EAAQA,WAEFM,EAAS,WACXF,EAAQG,KAAK,qBAAsBP,EAAWvQ,QAGlD,MAAO,CAAE6Q,a,iCCVjB,MAAME,EAAa,GAEnBA,EAAW,UAAY,aAGvB,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,eAAeF,KAE7E,U,mFCqKF,K,+BAOA,O,+BAmBI,O,+BAkCwB,mC,yLA3ErC1B,gCAgFM,OAhFAG,MAAK,4BAAED,SAAOE,UAApB,CACII,yBAOEqB,EAAA,CANG5B,QAAOC,WACR4B,KAAK,YACLlB,KAAK,QACLmB,KAAK,QACJ5B,MAAK,6BAAGD,SAAO8B,UAAW9B,SAAO+B,OACjCC,SAAqB,GAAXhC,eANf,uCASAM,yBAMCqB,EAAA,CALI5B,QAAK,+BAAEC,aAAU,KAClB4B,KAAK,YACLlB,KAAK,QACJT,MAAK,6BAAGD,SAAOiC,KAAiB,GAAXjC,eAAoBA,SAAOkC,WAJrD,C,8BAKK,iBAAC,O,KALN,aAQUlC,cAAW,GAAQA,4CAD7BQ,yBAMCmB,EAAA,C,MAJGC,KAAK,YACLlB,KAAK,QACLsB,SAAA,IAJJ,C,8BAKK,iBAAG,O,OALR,mEAQAlC,gCAQCqC,cAAA,KAAAC,wBAPkBpC,SAAK,SAAbiC,G,gCADXzB,yBAQCmB,EAAA,CANIvQ,IAAK6Q,EACLlC,QAAK,mBAAEC,aAAWiC,IACnBL,KAAK,YACLlB,KAAK,QACJT,MAAK,6BAAGD,SAAOiC,KAAMjC,eAAeiC,GAAQjC,SAAOkC,WANxD,C,8BAOK,iBAAU,2DAAPD,GAAI,O,KAPZ,mCAUgBjC,4CAAhBF,gCAkBWqC,cAAA,CAAA/Q,OAAA,CAhBG4O,eAAeA,aAAU,4BADnCQ,yBAMCmB,EAAA,C,MAJGC,KAAK,YACLlB,KAAK,QACLsB,SAAA,IAJJ,C,8BAKK,iBAAG,O,OALR,uCAOA1B,yBASCqB,EAAA,CARI5B,QAAK,+BAAEC,aAAWA,gBACnB4B,KAAK,YACLlB,KAAK,QACJT,MAAK,6BAAyBD,SAAOiC,KAA2BjC,eAAeA,cAAcA,SAAOkC,WAJzG,C,8BAQK,iBAAgB,2DAAblC,cAAU,O,KARlB,cARJ,4CAoBAM,yBAOEqB,EAAA,CANG5B,QAAOC,WACR4B,KAAK,YACLlB,KAAK,QACLmB,KAAK,QACJ5B,MAAK,6BAAGD,SAAO8B,UAAW9B,SAAOqC,QACjCL,SAAUhC,eAAeA,cAN9B,uCASWA,aAAU,6BAArBF,gCAeM,O,MAfuBG,MAAK,4BAAED,SAAOsC,OAA3C,CACIhC,yBAaUiC,EAAA,CAbDC,SAAS,SAASC,KAAK,SAAhC,CAUqBC,QAAO,sBAAC,iBAEzB,O,8BAXA,iBAOS,CAPTpC,yBAOSqB,EAAA,CANJ5B,QAAOC,aACR4B,KAAK,YACLlB,KAAK,QACJT,MAAK,4BAAED,SAAO2C,WAJnB,C,8BAMI,iBAA8B,CAA9BrC,yBAA8BG,EAAA,CAAxBlO,KAAK,OAAOmO,KAAK,W,KAN3B,2B,OAFR,4CAhEJ,G,gDAxJWI,+BAAgB,CAC3BvO,KAAM,aACNwO,MAAO,CACH6B,MAAO,CACHhB,KAAMiB,OACNC,UAAU,GAEdC,MAAO,CACHnB,KAAMiB,OACNC,UAAU,GAEd9B,WAAY6B,QAGhB1B,MAd2B,SAcrBJ,EAAOK,GACT,MAAqCC,oBAAON,GAApC6B,EAAR,EAAQA,MAAOG,EAAf,EAAeA,MAAO/B,EAAtB,EAAsBA,WAOhBgC,EAAc,EAKdC,EAAY,SAAC,GAAiB,IAAfjK,EAAe,EAAfA,KAAMD,EAAS,EAATA,GACjBmK,EAAQ,GAEd,GAAIlK,EAAOD,EAAI,OAAOmK,EACtB,GAAIC,MAAMnK,IAASmK,MAAMpK,GAAK,OAAOmK,EACrC,GAAKL,OAAOO,UAAUpK,IAAU6J,OAAOO,UAAUrK,GAAjD,CAEA,IAAK,IAAI/H,EAAQgI,EAAMhI,GAAS+H,EAAI/H,IAChCkS,EAAM9P,KAAKpC,GAGf,OAAOkS,IAMLG,EAAaC,uBAAS,kBAAMC,KAAKC,KAAKZ,EAAMnS,MAAQsS,EAAMtS,UAE1DyS,EAAQO,iBAAI,IACZC,EAAkBD,kBAAI,GAExBJ,EAAW5S,OAAS,EACpByS,EAAMzS,MAAQwS,EAAU,CAAEjK,KAAMgK,EAAajK,GAAIsK,EAAW5S,SAE5DiT,EAAgBjT,OAAQ,EAExByS,EAAMzS,MAAQwS,EAAU,CAAEjK,KAAMgK,EAAajK,GAAI,KAQrD4K,mBAAMf,GAAO,WACTM,EAAMzS,MAAQ,GAEV4S,EAAW5S,OAAS,GACpBiT,EAAgBjT,OAAQ,EAExByS,EAAMzS,MAAQwS,EAAU,CACpBjK,KAAMgK,EACNjK,GAAIsK,EAAW5S,UAGnBiT,EAAgBjT,OAAQ,EAExByS,EAAMzS,MAAQwS,EAAU,CAAEjK,KAAMgK,EAAajK,GAAI,QASzD4K,mBAAM3C,GAAY,WACd,KAAIqC,EAAW5S,OAAS,GAIxB,GAFAyS,EAAMzS,MAAQ,GAEU,GAApBuQ,EAAWvQ,MACXyS,EAAMzS,MAAQwS,EAAU,CAAEjK,KAAMgK,EAAajK,GAAI,SAEjD,IACI,IAAI/H,EAAQgQ,EAAWvQ,MAAQ,EAC/BO,EAAQgQ,EAAWvQ,MAAQ,EAC3BO,IAEa,GAATA,IACAA,EAAQqS,EAAW5S,OACnBO,GAASqS,EAAW5S,OAExByS,EAAMzS,MAAM2C,KAAKpC,OAK7B,IAAM4S,EAAa,SAAC3B,GAChBb,EAAQG,KAAK,oBAAqBU,IAGhC4B,EAAW,WACT7C,EAAWvQ,OAAS4S,EAAW5S,OAEnC2Q,EAAQG,KAAK,oBAAqBP,EAAWvQ,MAAQ,IAGnDqT,EAAW,WACW,GAApB9C,EAAWvQ,OAEf2Q,EAAQG,KAAK,oBAAqBP,EAAWvQ,MAAQ,IAGnDsT,EAAa,WACf,IAAMC,EAAerH,SACjBsH,OAAO,kCAIPd,MAAMa,IAENA,EAAe,GAAKA,EAAeX,EAAW5S,OAElD2Q,EAAQG,KAAK,oBAAqByC,IAGtC,MAAO,CACHN,kBACAR,QACAG,aACAa,YAAalD,EACb4C,aACAC,WACAC,WACAC,eAIRI,WAAY,CAAEC,cAAQC,kB,iCCxJ1B,MAAM7C,EAAa,GAEnBA,EAAW,UAAY,aAGvB,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,eAAeF,KAE7E,U,uBCVfrR,EAAOC,QAAU,CAAC,QAAU,2BAA2B,KAAO,wBAAwB,QAAU,2BAA2B,UAAY,6BAA6B,KAAO,wBAAwB,MAAQ,yBAAyB,KAAO,wBAAwB,SAAW,8B,uBCD9Q,IAAI4M,EAAI,EAAQ,QACZsH,EAAmB,EAAQ,SAI/BtH,EAAE,CAAEK,OAAQ,SAAUkH,MAAM,GAAQ,CAClCnB,UAAWkB,K,kCCNb,oE,qBCCAnU,EAAOC,QAAU,CAAC,QAAU,yBAAyB,IAAM,qBAAqB,OAAS,wBAAwB,KAAO,wB,qBCDxH,IAAIoU,EAAa,EAAQ,QAErBC,EAAQlB,KAAKkB,MAEbC,EAAY,SAAUjF,EAAOJ,GAC/B,IAAIpO,EAASwO,EAAMxO,OACf0T,EAASF,EAAMxT,EAAS,GAC5B,OAAOA,EAAS,EAAI2T,EAAcnF,EAAOJ,GAAawF,EACpDpF,EACAiF,EAAUF,EAAW/E,EAAO,EAAGkF,GAAStF,GACxCqF,EAAUF,EAAW/E,EAAOkF,GAAStF,GACrCA,IAIAuF,EAAgB,SAAUnF,EAAOJ,GACnC,IAEIyF,EAAS5L,EAFTjI,EAASwO,EAAMxO,OACfuH,EAAI,EAGR,MAAOA,EAAIvH,EAAQ,CACjBiI,EAAIV,EACJsM,EAAUrF,EAAMjH,GAChB,MAAOU,GAAKmG,EAAUI,EAAMvG,EAAI,GAAI4L,GAAW,EAC7CrF,EAAMvG,GAAKuG,IAAQvG,GAEjBA,IAAMV,MAAKiH,EAAMvG,GAAK4L,GAC1B,OAAOrF,GAGPoF,EAAQ,SAAUpF,EAAOsC,EAAMM,EAAOhD,GACxC,IAAI0F,EAAUhD,EAAK9Q,OACf+T,EAAU3C,EAAMpR,OAChBgU,EAAS,EACTC,EAAS,EAEb,MAAOD,EAASF,GAAWG,EAASF,EAClCvF,EAAMwF,EAASC,GAAWD,EAASF,GAAWG,EAASF,EACnD3F,EAAU0C,EAAKkD,GAAS5C,EAAM6C,KAAY,EAAInD,EAAKkD,KAAY5C,EAAM6C,KACrED,EAASF,EAAUhD,EAAKkD,KAAY5C,EAAM6C,KAC9C,OAAOzF,GAGXtP,EAAOC,QAAUsU,G,qBC1CjBvU,EAAOC,QAAU,CAAC,QAAU,iCAAiC,MAAQ,+BAA+B,YAAc,qCAAqC,SAAW,kCAAkC,UAAY,mCAAmC,SAAW,kCAAkC,KAAO,8BAA8B,KAAO,8BAA8B,QAAU,iCAAiC,KAAO,gC,mCCD5Z,8KAoBI+U,EAAgB,SAASC,EAAGnG,GAI5B,OAHAkG,EAAgBE,OAAOC,gBAClB,CAAEC,UAAW,cAAgBjS,OAAS,SAAU8R,EAAGnG,GAAKmG,EAAEG,UAAYtG,IACvE,SAAUmG,EAAGnG,GAAK,IAAK,IAAIjM,KAAKiM,EAAOoG,OAAO1S,UAAUM,eAAewF,KAAKwG,EAAGjM,KAAIoS,EAAEpS,GAAKiM,EAAEjM,KACzFmS,EAAcC,EAAGnG,IAG5B,SAASuG,EAAUJ,EAAGnG,GAClB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIwG,UAAU,uBAAyB5G,OAAOI,GAAK,iCAE7D,SAASyG,IAAOpT,KAAKqT,YAAcP,EADnCD,EAAcC,EAAGnG,GAEjBmG,EAAEzS,UAAkB,OAANsM,EAAaoG,OAAOO,OAAO3G,IAAMyG,EAAG/S,UAAYsM,EAAEtM,UAAW,IAAI+S,GAGnF,IA0EIG,EA1EAC,EAAW,WAQX,OAPAA,EAAWT,OAAOU,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGzN,EAAI,EAAGN,EAAIgO,UAAUjV,OAAQuH,EAAIN,EAAGM,IAE5C,IAAK,IAAIxF,KADTiT,EAAIC,UAAU1N,GACAyN,EAAOZ,OAAO1S,UAAUM,eAAewF,KAAKwN,EAAGjT,KAAIgT,EAAEhT,GAAKiT,EAAEjT,IAE9E,OAAOgT,GAEJF,EAASK,MAAM7T,KAAM4T,YAGhC,SAASE,EAAYC,EAASjU,GAC1B,IAAsGkU,EAAG/G,EAAGyG,EAAGO,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPV,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOW,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAE5N,KAAMkO,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXzO,SAA0BmO,EAAEnO,OAAOC,UAAY,WAAa,OAAO/F,OAAUiU,EACvJ,SAASM,EAAK3O,GAAK,OAAO,SAAU6G,GAAK,OAAO+H,EAAK,CAAC5O,EAAG6G,KACzD,SAAS+H,EAAKC,GACV,GAAIT,EAAG,MAAM,IAAIb,UAAU,mCAC3B,MAAOe,EAAG,IACN,GAAIF,EAAI,EAAG/G,IAAMyG,EAAY,EAARe,EAAG,GAASxH,EAAE,UAAYwH,EAAG,GAAKxH,EAAE,YAAcyG,EAAIzG,EAAE,YAAcyG,EAAEvN,KAAK8G,GAAI,GAAKA,EAAE5G,SAAWqN,EAAIA,EAAEvN,KAAK8G,EAAGwH,EAAG,KAAKnO,KAAM,OAAOoN,EAE3J,OADIzG,EAAI,EAAGyG,IAAGe,EAAK,CAAS,EAARA,EAAG,GAAQf,EAAEvV,QACzBsW,EAAG,IACP,KAAK,EAAG,KAAK,EAAGf,EAAIe,EAAI,MACxB,KAAK,EAAc,OAAXP,EAAEC,QAAgB,CAAEhW,MAAOsW,EAAG,GAAInO,MAAM,GAChD,KAAK,EAAG4N,EAAEC,QAASlH,EAAIwH,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKP,EAAEI,IAAII,MAAOR,EAAEG,KAAKK,MAAO,SACxC,QACI,GAAMhB,EAAIQ,EAAEG,OAAMX,EAAIA,EAAE/U,OAAS,GAAK+U,EAAEA,EAAE/U,OAAS,MAAkB,IAAV8V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEP,EAAI,EAAG,SACjG,GAAc,IAAVO,EAAG,MAAcf,GAAMe,EAAG,GAAKf,EAAE,IAAMe,EAAG,GAAKf,EAAE,IAAM,CAAEQ,EAAEC,MAAQM,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYP,EAAEC,MAAQT,EAAE,GAAI,CAAEQ,EAAEC,MAAQT,EAAE,GAAIA,EAAIe,EAAI,MAC7D,GAAIf,GAAKQ,EAAEC,MAAQT,EAAE,GAAI,CAAEQ,EAAEC,MAAQT,EAAE,GAAIQ,EAAEI,IAAIxT,KAAK2T,GAAK,MACvDf,EAAE,IAAIQ,EAAEI,IAAII,MAChBR,EAAEG,KAAKK,MAAO,SAEtBD,EAAK3U,EAAKqG,KAAK4N,EAASG,GAC1B,MAAOjO,GAAKwO,EAAK,CAAC,EAAGxO,GAAIgH,EAAI,EAAK,QAAU+G,EAAIN,EAAI,EACtD,GAAY,EAARe,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEtW,MAAOsW,EAAG,GAAKA,EAAG,QAAK,EAAQnO,MAAM,IAIlF,SAASqO,EAAShP,GACd,IAAIgO,EAAsB,oBAAX7N,QAAyBA,OAAOC,SAAUF,EAAI8N,GAAKhO,EAAEgO,GAAIzN,EAAI,EAC5E,GAAIL,EAAG,OAAOA,EAAEM,KAAKR,GACrB,GAAIA,GAAyB,kBAAbA,EAAEhH,OAAqB,MAAO,CAC1C0H,KAAM,WAEF,OADIV,GAAKO,GAAKP,EAAEhH,SAAQgH,OAAI,GACrB,CAAExH,MAAOwH,GAAKA,EAAEO,KAAMI,MAAOX,KAG5C,MAAM,IAAIwN,UAAUQ,EAAI,0BAA4B,mCAGxD,SAASjO,EAAOC,EAAGC,GACf,IAAIC,EAAsB,oBAAXC,QAAyBH,EAAEG,OAAOC,UACjD,IAAKF,EAAG,OAAOF,EACf,IAAmBK,EAAYC,EAA3BC,EAAIL,EAAEM,KAAKR,GAAOS,EAAK,GAC3B,IACI,YAAc,IAANR,GAAgBA,KAAM,MAAQI,EAAIE,EAAEG,QAAQC,KAAMF,EAAGtF,KAAKkF,EAAE7H,OAExE,MAAOoI,GAASN,EAAI,CAAEM,MAAOA,GAC7B,QACI,IACQP,IAAMA,EAAEM,OAAST,EAAIK,EAAE,YAAYL,EAAEM,KAAKD,GAElD,QAAU,GAAID,EAAG,MAAMA,EAAEM,OAE7B,OAAOH,EAGX,SAASI,EAAcC,EAAIC,GACvB,IAAK,IAAIR,EAAI,EAAGS,EAAKD,EAAK/H,OAAQiI,EAAIH,EAAG9H,OAAQuH,EAAIS,EAAIT,IAAKU,IAC1DH,EAAGG,GAAKF,EAAKR,GACjB,OAAOO,EAMX,IAAImO,EAAyB9O,OAAO+O,IAAI,qCACpCC,EAAY,SAAU3W,GACtB,MAAO,SAAUA,GAAS6C,MAAMC,QAAQ9C,EAAM4W,OAA+B,IAAtB5W,EAAM4W,KAAKpW,QAElEqW,EAAmC,WACnC,SAASA,EAAkB7W,EAAOmR,EAAM2F,GACpCjV,KAAK7B,MAAQA,EACb6B,KAAKsP,KAAOA,EACZtP,KAAKC,KAAO,oBACZD,KAAKL,QAAUsV,EAAY,gDAE/B,OAAOD,EAP2B,GAYlCE,EAA8B,WAM9B,SAASA,EAAaC,GAClBnV,KAAKoV,SAAW,IAAIC,IACpBrV,KAAKsV,OAAS,IAAID,IAClBrV,KAAKuT,IAAQ,EACT4B,GACAnV,KAAKuV,QAAQJ,GAyNrB,OAnNAD,EAAaM,eAAiB,SAAUjV,GACpC,OAAOA,IAAuC,IAAhCA,EAAIqU,IAEtBM,EAAa7U,UAAUkV,QAAU,SAAUJ,GACvC,IAAKL,EAAUK,GACX,MAAM,IAAIlS,MAAM,6CAEpBjD,KAAKyV,UAAY,IAAIC,GAAOP,EAAQJ,KAAK,IACzC/U,KAAK2V,YAAc,IAAID,GAAOP,EAAQJ,KAAK,KAE/CG,EAAa7U,UAAUuV,WAAa,WAChC5V,KAAKyV,eAAYxW,EACjBe,KAAK2V,iBAAc1W,GAEvBiW,EAAaW,YAAc,SAAUtV,EAAK4U,GACtC,IAAIhL,EAAM,IAAI+K,EAAaC,GAI3B,OAHApC,OAAO+C,KAAKvV,GAAKW,SAAQ,SAAUpC,GAC/BqL,EAAInM,IAAIc,EAAKyB,EAAIzB,OAEdqL,GAEX+K,EAAa7U,UAAU0V,aAAe,SAAUjX,GAC5C,OAAIkB,KAAKyV,WACEzV,KAAKyV,UAAUO,UAAUlX,IAIxCoW,EAAa7U,UAAU4V,eAAiB,SAAU9X,GAC9C,OAAI6B,KAAK2V,aACE3V,KAAK2V,YAAYK,UAAU7X,IAI1C+W,EAAa7U,UAAU6V,qBAAuB,SAAU/X,GACpD,IAAK6B,KAAKiW,eAAe9X,GACrB,MAAM,IAAI6W,EAAkB7W,EAAO6B,KAAK2V,YAAa,UAG7DT,EAAa7U,UAAU8V,mBAAqB,SAAUrX,GAClD,IAAKkB,KAAK+V,aAAajX,GACnB,MAAM,IAAIkW,EAAkBlW,EAAKkB,KAAKyV,UAAW,QAGzDP,EAAa7U,UAAU+V,2BAA6B,SAAUtX,GAC1D,OAAO,IAAUA,IAErBoW,EAAa7U,UAAUyV,KAAO,WAC1B,IAAIhU,EAAIE,EAAIE,EAAIpD,EAAKuX,EACjBC,EAAKC,EACT,OAAOzC,EAAY9T,MAAM,SAAUwW,GAC/B,OAAQA,EAAGrC,OACP,KAAK,EACDqC,EAAGnC,KAAKvT,KAAK,CAAC,EAAG,EAAG,EAAG,IACvBgB,EAAK6S,EAAS3U,KAAKyW,WAAYzU,EAAKF,EAAGuE,OACvCmQ,EAAGrC,MAAQ,EACf,KAAK,EACD,OAAMnS,EAAGsE,KAAa,CAAC,EAAa,IACpCpE,EAAKwD,EAAO1D,EAAG7D,MAAO,GAAIW,EAAMoD,EAAG,GAC5B,CAAC,EAAapD,IACzB,KAAK,EACD0X,EAAGpC,OACHoC,EAAGrC,MAAQ,EACf,KAAK,EAED,OADAnS,EAAKF,EAAGuE,OACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFAgQ,EAAQG,EAAGpC,OACXkC,EAAM,CAAE/P,MAAO8P,GACR,CAAC,EAAa,GACzB,KAAK,EACD,IACQrU,IAAOA,EAAGsE,OAASiQ,EAAKzU,EAAG4U,SAASH,EAAGpQ,KAAKrE,GAEpD,QAAU,GAAIwU,EAAK,MAAMA,EAAI/P,MAC7B,MAAO,CAAC,GACZ,KAAK,EAAG,MAAO,CAAC,QAI5B2O,EAAa7U,UAAUsW,OAAS,WAC5B,IAAI7U,EAAIE,EAAIE,EAAI/D,EAAOyY,EACnBC,EAAKN,EACT,OAAOzC,EAAY9T,MAAM,SAAUwW,GAC/B,OAAQA,EAAGrC,OACP,KAAK,EACDqC,EAAGnC,KAAKvT,KAAK,CAAC,EAAG,EAAG,EAAG,IACvBgB,EAAK6S,EAAS3U,KAAKyW,WAAYzU,EAAKF,EAAGuE,OACvCmQ,EAAGrC,MAAQ,EACf,KAAK,EACD,OAAMnS,EAAGsE,KAAa,CAAC,EAAa,IACpCpE,EAAKwD,EAAO1D,EAAG7D,MAAO,GAAIA,EAAQ+D,EAAG,GAC9B,CAAC,EAAa/D,IACzB,KAAK,EACDqY,EAAGpC,OACHoC,EAAGrC,MAAQ,EACf,KAAK,EAED,OADAnS,EAAKF,EAAGuE,OACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFAuQ,EAAQJ,EAAGpC,OACXyC,EAAM,CAAEtQ,MAAOqQ,GACR,CAAC,EAAa,GACzB,KAAK,EACD,IACQ5U,IAAOA,EAAGsE,OAASiQ,EAAKzU,EAAG4U,SAASH,EAAGpQ,KAAKrE,GAEpD,QAAU,GAAI+U,EAAK,MAAMA,EAAItQ,MAC7B,MAAO,CAAC,GACZ,KAAK,EAAG,MAAO,CAAC,QAI5B2O,EAAa7U,UAAUoW,QAAU,WAC7B,IAAI3U,EAAIE,EAAIlD,EAAKgY,EACbC,EAAK7U,EACT,OAAO4R,EAAY9T,MAAM,SAAUuW,GAC/B,OAAQA,EAAGpC,OACP,KAAK,EACDoC,EAAGlC,KAAKvT,KAAK,CAAC,EAAG,EAAG,EAAG,IACvBgB,EAAK6S,EAAS3U,KAAKoV,SAASU,QAAS9T,EAAKF,EAAGuE,OAC7CkQ,EAAGpC,MAAQ,EACf,KAAK,EACD,OAAMnS,EAAGsE,KAAa,CAAC,EAAa,IACpCxH,EAAMkD,EAAG7D,MACF,CAAC,EAAa,CAAC6B,KAAKsV,OAAO0B,IAAIlY,GAAMkB,KAAKoV,SAAS4B,IAAIlY,MAClE,KAAK,EACDyX,EAAGnC,OACHmC,EAAGpC,MAAQ,EACf,KAAK,EAED,OADAnS,EAAKF,EAAGuE,OACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFAyQ,EAAQP,EAAGnC,OACX2C,EAAM,CAAExQ,MAAOuQ,GACR,CAAC,EAAa,GACzB,KAAK,EACD,IACQ9U,IAAOA,EAAGsE,OAASpE,EAAKJ,EAAG4U,SAASxU,EAAGiE,KAAKrE,GAEpD,QAAU,GAAIiV,EAAK,MAAMA,EAAIxQ,MAC7B,MAAO,CAAC,GACZ,KAAK,EAAG,MAAO,CAAC,QAI5B2O,EAAa7U,UAAU2W,IAAM,SAAUlY,GACnCkB,KAAKmW,mBAAmBrX,GACxB,IAAImY,EAASjX,KAAKoW,2BAA2BtX,GAC7C,OAAOkB,KAAKoV,SAAS4B,IAAIC,IAgB7B/B,EAAa7U,UAAUrC,IAAM,SAAUc,EAAKX,GACxC6B,KAAKmW,mBAAmBrX,GACxBkB,KAAKkW,qBAAqB/X,GAC1B,IAAI8Y,EAASjX,KAAKoW,2BAA2BtX,GAC7CkB,KAAKsV,OAAOtX,IAAIiZ,EAAQnY,GACxBkB,KAAKoV,SAASpX,IAAIiZ,EAAQ9Y,IAE9B+W,EAAa7U,UAAU6W,OAAS,SAAUpY,GACtCkB,KAAKmW,mBAAmBrX,GACxBkB,KAAKsV,OAAO4B,OAAOlX,KAAKoW,2BAA2BtX,IACnDkB,KAAKoV,SAAS8B,OAAOlX,KAAKoW,2BAA2BtX,KAEzDoW,EAAa7U,UAAU8W,IAAM,SAAUrY,GACnCkB,KAAKmW,mBAAmBrX,GACxB,IAAImY,EAASjX,KAAKoW,2BAA2BtX,GAC7C,OAAOkB,KAAKsV,OAAO6B,IAAIF,IAAWjX,KAAKoV,SAAS+B,IAAIF,IAExD/B,EAAa7U,UAAU+W,MAAQ,WAC3BpX,KAAKsV,OAAO8B,QACZpX,KAAKoV,SAASgC,SAElBrE,OAAOsE,eAAenC,EAAa7U,UAAW,OAAQ,CAClD2W,IAAK,WACD,OAAOhX,KAAKsV,OAAOlH,MAEvBkJ,YAAY,EACZC,cAAc,IAElBrC,EAAa7U,UAAUa,QAAU,SAAUsW,GACvC,IAAIC,EAAK3V,EACT,IACI,IAAK,IAAIE,EAAK2S,EAAS3U,KAAKyW,WAAYvU,EAAKF,EAAGqE,QAASnE,EAAGoE,KAAMpE,EAAKF,EAAGqE,OAAQ,CAC9E,IAAIkQ,EAAK7Q,EAAOxD,EAAG/D,MAAO,GAAIW,EAAMyX,EAAG,GAAIpY,EAAQoY,EAAG,GACtDiB,EAAGrZ,EAAOW,EAAKkB,OAGvB,MAAO0X,GAASD,EAAM,CAAElR,MAAOmR,GAC/B,QACI,IACQxV,IAAOA,EAAGoE,OAASxE,EAAKE,EAAG0U,SAAS5U,EAAGqE,KAAKnE,GAEpD,QAAU,GAAIyV,EAAK,MAAMA,EAAIlR,SAG9B2O,EApOsB,GAsOjC3B,EAAOqB,EAEP,IAAI+C,EAAsC,WACtC,SAASA,EAAqBxZ,EAAOyZ,EAAOC,GACxC7X,KAAK7B,MAAQA,EACb6B,KAAK4X,MAAQA,EACb5X,KAAKC,KAAO,kBACZ,IAAI6X,EAAQ9X,KAAK4X,MAAME,QACnBC,EAAYD,EAAQ,IAAMA,EAAQ,KAAO,GAC7C9X,KAAKL,QAAU,GAAKoY,EAAYF,EAEpC,OAAOF,EAT8B,GAWrCK,EAAuB,WACvB,SAASA,EAAMC,EAAKC,EAAKC,GACrBnY,KAAKiY,IAAMA,EACXjY,KAAKkY,IAAMA,EACXlY,KAAKmY,IAAMA,EACXnY,KAAKoY,YAAcpY,KAAKmY,IA6B5B,OA3BAH,EAAM3X,UAAUgY,uBAAyB,WACrC,IAAIC,EAAgB,SAAUL,GAC1B,OAAIA,EAAIlD,KACG,CACHwD,KAAMN,EAAIM,KACVxD,KAAMkD,EAAIlD,KAAK5K,KAAI,SAAU6C,GAAK,OAAOsL,EAActL,OAIpD,CACHuL,KAAMN,EAAIM,OAItB,OAAOD,EAActY,KAAKiY,MAE9BD,EAAM3X,UAAUyX,MAAQ,WACpB,OAAQ9W,MAAMC,QAAQjB,KAAKiY,IAAIO,SAAWxY,KAAKiY,IAAIO,OAAO7Z,OAAS,EAC7DqB,KAAKiY,IAAIO,OAAO,GAChBjM,OAAOvM,KAAKkY,MAAMO,QAAQ,uBAAwB,KAE5DT,EAAM3X,UAAUqY,eAAiB,WAC7B,OAAO1X,MAAMC,QAAQjB,KAAKiY,IAAIO,SAAWxY,KAAKiY,IAAIO,OAAO7Z,QAE7DqZ,EAAM3X,UAAUsY,iBAAmB,WAC/B,MAAO,CAAC,CAAC3Y,KAAK4Y,mBAEXZ,EAlCe,GAoCtBa,EAAiC,SAAUC,GAE3C,SAASD,IACL,OAAkB,OAAXC,GAAmBA,EAAOjF,MAAM7T,KAAM4T,YAAc5T,KAQ/D,OAVAkT,EAAU2F,EAAiBC,GAI3BD,EAAgBxY,UAAU0Y,QAAU,SAAUC,EAAIC,GAC9C,OAAID,IAAOC,EACA,EAEJD,EAAKC,GAAM,EAAI,GAEnBJ,EAXyB,CAYlCb,GAEEkB,EAAuC,SAAUJ,GAEjD,SAASI,EAAsB/a,EAAOyZ,EAAOjY,GACzC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,wBACNyB,EAEX,OARAwR,EAAUgG,EAAuBJ,GAQ1BI,EAT+B,CAUxCvB,GACEwB,EAA6B,SAAUL,GAEvC,SAASK,EAAYlB,EAAKC,EAAKC,GAC3B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAsFX,OA5FAwR,EAAUiG,EAAaL,GAQvB/F,OAAOsE,eAAe8B,EAAY9Y,UAAW,cAAe,CACxD2W,IAAK,WACD,OAAOhX,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,IAE9CuC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe8B,EAAY9Y,UAAW,YAAa,CACtD2W,IAAK,WACD,OAAOhX,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,IAE9CuC,YAAY,EACZC,cAAc,IAElB4B,EAAY9Y,UAAUuY,cAAgB,WAClC,MAAO,CACHQ,QAAS,CACLta,IAAKkB,KAAKqZ,UAAUT,gBACpBza,MAAO6B,KAAKsZ,YAAYV,mBAIpCO,EAAY9Y,UAAUkZ,QAAU,SAAUpb,GACtC,OAAI+W,EAAaM,eAAerX,GACrB,KAEJ,IAAI+a,EAAsB/a,EAAO6B,KAAM,iCAElDmZ,EAAY9Y,UAAUmZ,OAAS,SAAUzE,GACrC,IAAIrT,EAAQ1B,KACRiY,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,OAAOpC,MAAM0F,KAAKuR,EAAInC,QACjB/J,MAAK,SAAUW,EAAGC,GAAK,OAAOjL,EAAM2X,UAAUN,QAAQrM,EAAGC,MACzDxC,KAAI,SAAUrL,GACf,MAAO,CACHyZ,KAAM,MACNxD,KAAM,CAACrT,EAAM2X,UAAUI,aAAa3a,GAAM4C,EAAM4X,YAAYG,aAAaxB,EAAIjB,IAAIlY,UAI7Fqa,EAAY9Y,UAAUoZ,aAAe,SAAU1E,GAC3C,IAAIrT,EAAQ1B,KACRiY,EAAMlD,EACN3R,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,OAAOpC,MAAM0F,KAAKuR,EAAInC,QACjB/J,MAAK,SAAUW,EAAGC,GAAK,OAAOjL,EAAM2X,UAAUN,QAAQrM,EAAGC,MACzDxC,KAAI,SAAUrL,GACf,MAAO,CACHyZ,KAAM,MACNxD,KAAM,CAACrT,EAAM2X,UAAUI,aAAa3a,GAAM4C,EAAM4X,YAAYG,aAAaxB,EAAIjB,IAAIlY,UAI7Fqa,EAAY9Y,UAAUqZ,QAAU,SAAUzB,EAAK0B,GAC3C,IAAIjY,EAAQ1B,KACZ,GAAI2Z,GAAYA,EAASR,EAAYZ,MACjC,OAAOoB,EAASR,EAAYZ,MAAMN,EAAKjY,KAAKiY,KAEhD,GAAIjX,MAAMC,QAAQgX,GAAM,CAGpB,IAAI2B,EAAQ,IAAI1E,EAAalV,KAAKiY,KAIlC,OAHAA,EAAI/W,SAAQ,SAAU0O,GAClBgK,EAAM5b,IAAI0D,EAAM2X,UAAUQ,MAAMjK,EAAQmF,KAAK,IAAKrT,EAAM4X,YAAYI,QAAQ9J,EAAQmF,KAAK,QAEtF6E,EAEN,GAAI,QAAS3B,EAEd,OAAOA,EAAI6B,IAIX,MAAM,IAAI7W,MAAM,kGAAoGJ,KAAKS,UAAU2U,KAG3IkB,EAAYZ,KAAO,UACZY,EA7FqB,CA8F9BnB,GAEE+B,EAAyB,SAAUjB,GAEnC,SAASiB,EAAQ9B,EAAKC,EAAKC,GACvB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EA6NX,OAnOAwR,EAAU6G,EAASjB,GAQnBiB,EAAQ1Z,UAAUmZ,OAAS,SAAUzE,GACjC,IAAIZ,EAAQY,EAAKA,EAAKpW,OAAS,GAC3Bqb,EAAYha,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KACpD+B,EAAW,EACXD,aAAqBD,IACrBE,EAAWlH,OAAO+C,KAAKkE,EAAUpB,iBAAiBja,QAEtD,IAAIub,EAAala,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,IAAM+B,GAC/D,GAAI1N,OAAOyN,EAAUlC,WAAavL,OAAO4H,IAAY6F,aAAqBD,EAIrE,IAAIxN,OAAO2N,EAAWpC,WAAavL,OAAO4H,IAAY+F,aAAsBH,EAI5E,CACD,GAAIC,aAAqBD,EAAS,CAC9B,IAAI9B,EAAM+B,EAAUR,OAAOzE,GAC3B,GAAIkD,EACA,MAAO,CAAEM,KAAM,OAAQxD,KAAM,CAACkD,IAGtC,GAAIiC,aAAsBH,EAAS,CAC3B9B,EAAMiC,EAAWV,OAAOzE,GAC5B,GAAIkD,EACA,MAAO,CAAEM,KAAM,QAASxD,KAAM,CAACkD,IAGvC,OAAO,KAfP,OADAlD,EAAKL,MACE,CAAE6D,KAAM,QAASxD,KAAM,CAACmF,EAAWV,OAAOzE,KAJjD,OADAA,EAAKL,MACE,CAAE6D,KAAM,OAAQxD,KAAM,CAACiF,EAAUR,OAAOzE,MAsBvDgF,EAAQ1Z,UAAUsY,iBAAmB,WACjC,IAAIrC,EAAK9U,EAAIqV,EAAK/U,EACdkY,EAAYha,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KACpD+B,EAAW,EACXD,aAAqBD,IACrBE,EAAWlH,OAAO+C,KAAKkE,EAAUpB,iBAAiBja,QAEtD,IAAIub,EAAala,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,IAAM+B,GAC3DE,EAAS,GACb,GAAIH,aAAqBD,EACrBI,EAAOrZ,KAAK+S,MAAMsG,EAAQ3T,EAAc,GAAId,EAAOsU,EAAUrB,2BAG7D,IACI,IAAK,IAAI3W,EAAK2S,EAASqF,EAAUrB,oBAAqBzW,EAAKF,EAAGqE,QAASnE,EAAGoE,KAAMpE,EAAKF,EAAGqE,OAAQ,CAC5F,IAAI+T,EAAMlY,EAAG/D,MACbgc,EAAOrZ,KAAK0F,EAAc,CAACwT,EAAUlC,SAAUpS,EAAO0U,MAG9D,MAAO/D,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQnU,IAAOA,EAAGoE,OAAS9E,EAAKQ,EAAG0U,SAASlV,EAAG2E,KAAKnE,GAEpD,QAAU,GAAIsU,EAAK,MAAMA,EAAI/P,OAGrC,GAAI2T,aAAsBH,EACtBI,EAAOrZ,KAAK+S,MAAMsG,EAAQ3T,EAAc,GAAId,EAAOwU,EAAWvB,2BAG9D,IACI,IAAK,IAAIpC,EAAK5B,EAASuF,EAAWvB,oBAAqBnC,EAAKD,EAAGlQ,QAASmQ,EAAGlQ,KAAMkQ,EAAKD,EAAGlQ,OAAQ,CACzF+T,EAAM5D,EAAGrY,MACbgc,EAAOrZ,KAAK0F,EAAc,CAAC0T,EAAWpC,SAAUpS,EAAO0U,MAG/D,MAAOxD,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQJ,IAAOA,EAAGlQ,OAASxE,EAAKyU,EAAGG,SAAS5U,EAAGqE,KAAKoQ,GAEpD,QAAU,GAAIM,EAAK,MAAMA,EAAItQ,OAGrC,OAAO4T,GAEXJ,EAAQ1Z,UAAUoZ,aAAe,SAAU1E,GACvC,IAAIZ,EAAQpB,OAAO+C,KAAKf,GAAM,GAC1BiF,EAAYha,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KACpD+B,EAAW,EACXD,aAAqBD,IACrBE,EAAWlH,OAAO+C,KAAKkE,EAAUpB,iBAAiBja,QAEtD,IAAIub,EAAala,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,IAAM+B,GAC/D,GAAI1N,OAAOyN,EAAUlC,WAAavL,OAAO4H,IAAY6F,aAAqBD,EAGrE,IAAIxN,OAAO2N,EAAWpC,WAAavL,OAAO4H,IAAY+F,aAAsBH,EAG5E,CACD,GAAIC,aAAqBD,EAAS,CAC9B,IAAI9B,EAAM+B,EAAUP,aAAa1E,GACjC,GAAIkD,EACA,MAAO,CAAEM,KAAM,OAAQxD,KAAM,CAACkD,IAGtC,GAAIiC,aAAsBH,EAAS,CAC3B9B,EAAMiC,EAAWT,aAAa1E,GAClC,GAAIkD,EACA,MAAO,CAAEM,KAAM,QAASxD,KAAM,CAACkD,IAGvC,OAAO,KAfP,MAAO,CAAEM,KAAM,QAASxD,KAAM,CAACmF,EAAWT,aAAa1E,EAAKZ,MAH5D,MAAO,CAAEoE,KAAM,OAAQxD,KAAM,CAACiF,EAAUP,aAAa1E,EAAKZ,OAqBlE4F,EAAQ1Z,UAAUqZ,QAAU,SAAUzB,EAAKoC,GACvC,IAAI7Y,EAAIM,EACJkY,EAAYha,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KACpD+B,EAAW,EACXD,aAAqBD,IACrBE,EAAWlH,OAAO+C,KAAKkE,EAAUpB,iBAAiBja,QAEtD,IAAIub,EAAala,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,IAAM+B,GAC/D,GAAiB,UAAbhC,EAAIM,KACJ,OAAI2B,aAAsBH,EACfG,EAAWR,QAAQzB,EAAIlD,KAAK,GAAIsF,IAGhC7Y,EAAK,GACRA,EAAG0Y,EAAWpC,SAAWoC,EAAWR,QAAQzB,EAAIlD,KAAK,GAAIsF,GACzD7Y,GAGP,GAAiB,SAAbyW,EAAIM,KACT,OAAIyB,aAAqBD,EACdC,EAAUN,QAAQzB,EAAIlD,KAAK,GAAIsF,IAEnCvY,EAAK,GACRA,EAAGkY,EAAUlC,SAAWkC,EAAUN,QAAQzB,EAAIlD,KAAK,GAAIsF,GACvDvY,GAGJ,MAAM,IAAImB,MAAM,6CAA+CgV,EAAIM,OAG3EwB,EAAQ1Z,UAAUia,UAAY,SAAUC,EAAcC,EAAeC,GACjE,IAAIjZ,EAAIM,EAGJ4Y,EAFAV,EAAYha,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KACpD+B,EAAW,EAEXD,aAAqBD,IAAYC,EAAUtB,kBAC3CgC,EAAYH,EAAaP,GACzBC,EAAWlH,OAAO+C,KAAKkE,EAAUpB,iBAAiBja,SAGrC6C,EAAK,GAAIA,EAAGwY,EAAUlC,SAAWyC,EAAaP,GAA3DU,EAAuElZ,GAE3E,IACImZ,EADAT,EAAala,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,IAAM+B,GAE3DC,aAAsBH,IAAYG,EAAWxB,iBAC7CiC,EAAaH,EAAcN,IAGbpY,EAAK,GAAIA,EAAGoY,EAAWpC,SAAW0C,EAAcN,GAA9DS,EAA2E7Y,GAE/E,IAAI8Y,EAAMH,EAAOC,EAAWC,GAC5B,OAAOC,GAEXb,EAAQ1Z,UAAUuY,cAAgB,WAC9B,OAAO5Y,KAAKsa,WAAU,SAAUN,GAAa,OAAOA,EAAUpB,mBAAoB,SAAUsB,GAAc,OAAOA,EAAWtB,mBAAoB,SAAU8B,EAAWC,GAAc,OAAQnH,EAASA,EAAS,GAAIkH,GAAYC,OAEjOZ,EAAQ1Z,UAAUwa,UAAY,SAAU1G,GACpC,IAAI6F,EAAYha,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KACpD+B,EAAW,EACXD,aAAqBD,IACrBE,EAAWlH,OAAO+C,KAAKkE,EAAUpB,iBAAiBja,QAEtD,IAAIub,EAAala,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,IAAM+B,GAC/D,GAAI1N,OAAOyN,EAAUlC,WAAavL,OAAO4H,MAAY6F,aAAqBD,IAAYC,aAAqBnB,EACvG,OAAOmB,EAEN,GAAIzN,OAAO2N,EAAWpC,WAAavL,OAAO4H,MAAY+F,aAAsBH,IAAYG,aAAsBrB,EAC/G,OAAOqB,EAGP,GAAIF,aAAqBD,EAAS,CAC9B,IAAIe,EAAMd,EAAUa,UAAU1G,GAC9B,GAAI2G,EACA,OAAOA,EAGf,GAAIZ,aAAsBH,EAAS,CAC3Be,EAAMZ,EAAWW,UAAU1G,GAC/B,GAAI2G,EACA,OAAOA,EAGf,OAAO,MAGff,EAAQ1Z,UAAU0Y,QAAU,SAAUgC,EAAMC,GACxC,IAAIC,EAAYlI,OAAO+C,KAAKiF,GAAM,GAC9BG,EAAYnI,OAAO+C,KAAKkF,GAAM,GAClC,GAAIC,IAAcC,EAMb,CACD,IAAIC,EAAWtY,KAAKS,UAAUtD,KAAKyZ,aAAasB,IAC5CK,EAAWvY,KAAKS,UAAUtD,KAAKyZ,aAAauB,IAChD,OAAOG,EAAWC,GAAY,EAAI,EARlC,IAAIxD,EAAQ5X,KAAK6a,UAAUI,GAC3B,GAAIrD,aAAiBiB,EACjB,OAAOjB,EAAMmB,QAAQgC,EAAKE,GAAYD,EAAKC,KASvDlB,EAAQ1Z,UAAUwZ,MAAQ,SAAU5B,GAChC,OAAOjY,KAAK0Z,QAAQzB,IAExB8B,EAAQ1Z,UAAUgb,YAAc,SAAUpD,GACtC,MAAO,CACHnZ,IAAKkB,KAAKyZ,aAAaxB,GACvB3I,KAAMtP,KAAKqY,2BAGnB0B,EAAQxB,KAAO,KACRwB,EApOiB,CAqO1BlB,GAGF,SAASyC,EAAWrD,EAAKM,GAErB,QADa,IAATA,IAAmBA,EAAOgD,EAAUhD,MACpCvX,MAAMC,QAAQgX,GACd,OAAOqD,EAAW,CACd/C,KAAMA,EACNxD,KAAMkD,GACPM,GAEP,QAAiBtZ,IAAbgZ,EAAIlD,KACJ,MAAM,IAAI9R,MAAM,0BAEpB,OAAIgV,EAAIlD,KAAKpW,OAAS,EACX,CAACsZ,EAAIlD,KAAK,GAAI,CACbwD,KAAMA,EACNxD,KAAMkD,EAAIlD,KAAKtN,MAAM,KAG1B,CAACwQ,EAAIlD,KAAK,GAAIkD,EAAIlD,KAAK,IAElC,IA00DIvT,EA10DA+Z,EAA2B,SAAUzC,GAErC,SAASyC,EAAUtD,EAAKC,EAAKC,GACzB,OAAOW,EAAO3S,KAAKnG,KAAMgB,MAAMC,QAAQgX,GAAO,CAC1CM,KAAMgD,EAAUhD,KAChBxD,KAAMkD,GACNA,EAAKC,EAAKC,IAAQnY,KAgJ1B,OArJAkT,EAAUqI,EAAWzC,GAOrByC,EAAUlb,UAAU0U,KAAO,WAEvB,OAAOuG,EAAWtb,KAAKiY,MAE3BsD,EAAUlb,UAAUmb,OAAS,WACzB,IAAI9Z,EAAQ1B,KACRyb,EAAM,EACV,OAAOzb,KAAK+U,OAAO5K,KAAI,SAAUuC,GAC7B,IAAIoO,EAAMpZ,EAAM0W,YAAY1L,EAAGhL,EAAMwW,IAAMuD,GAO3C,OANIX,aAAeS,EACfE,GAAO1I,OAAO+C,KAAKgF,EAAIlC,iBAAiBja,OAGxC8c,IAEGX,MAGfS,EAAUlb,UAAUmZ,OAAS,SAAUzE,GACnC,MAAO,CACHwD,KAAM,OACNxD,KAAM/U,KAAKwb,SAASrR,KAAI,SAAUuJ,GAAK,OAAOA,EAAE8F,OAAOzE,QAG/DwG,EAAUlb,UAAUsY,iBAAmB,WACnC,IAAIrC,EAAK9U,EAAIqV,EAAK/U,EACdiT,EAAO/U,KAAK+U,OACZiF,EAAYha,KAAKoY,YAAYrD,EAAK,GAAI/U,KAAKkY,KAC3C+B,EAAW,EACXD,aAAqBD,IACrBE,EAAWlH,OAAO+C,KAAKkE,EAAUpB,iBAAiBja,QAEtD,IAAIub,EAAala,KAAKoY,YAAYrD,EAAK,GAAI/U,KAAKkY,IAAM+B,GAClDE,EAAS,GACb,IACI,IAAK,IAAInY,EAAK2S,EAASqF,EAAUrB,oBAAqBzW,EAAKF,EAAGqE,QAASnE,EAAGoE,KAAMpE,EAAKF,EAAGqE,OAAQ,CAC5F,IAAIqV,EAAUxZ,EAAG/D,MACjB,IACI,IAAK,IAAIoY,GAAMM,OAAM,EAAQlC,EAASuF,EAAWvB,qBAAsBnC,EAAKD,EAAGlQ,QAASmQ,EAAGlQ,KAAMkQ,EAAKD,EAAGlQ,OAAQ,CAC7G,IAAIsV,EAAWnF,EAAGrY,MAClBgc,EAAOrZ,KAAK0F,EAAcA,EAAc,GAAId,EAAOgW,IAAWhW,EAAOiW,MAG7E,MAAO/E,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQJ,IAAOA,EAAGlQ,OAASxE,EAAKyU,EAAGG,SAAS5U,EAAGqE,KAAKoQ,GAEpD,QAAU,GAAIM,EAAK,MAAMA,EAAItQ,SAIzC,MAAO8P,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQnU,IAAOA,EAAGoE,OAAS9E,EAAKQ,EAAG0U,SAASlV,EAAG2E,KAAKnE,GAEpD,QAAU,GAAIsU,EAAK,MAAMA,EAAI/P,OAEjC,OAAO4T,GAEXoB,EAAUlb,UAAUgb,YAAc,SAAUpD,GACxC,MAAO,CACHnZ,IAAKkB,KAAKyZ,aAAaxB,GACvB3I,KAAMtP,KAAKqY,2BAGnBkD,EAAUlb,UAAUwZ,MAAQ,SAAU5B,GAClC,OAAOjY,KAAK0Z,QAAQzB,IAExBsD,EAAUlb,UAAUoZ,aAAe,SAAU1E,GACzC,IACI2F,EAOAC,EARAnZ,EAAKkE,EAAO1F,KAAKwb,SAAU,GAAIxB,EAAYxY,EAAG,GAAI0Y,EAAa1Y,EAAG,GAetE,OAZIkZ,EADAV,aAAqBuB,IAAcvB,EAAUtB,iBACjC3D,EAGAA,EAAKiF,EAAUlC,SAI3B6C,EADAT,aAAsBqB,IAAcrB,EAAWxB,iBAClC3D,EAGAA,EAAKmF,EAAWpC,SAE1B,CACHS,KAAM,OACNxD,KAAM,CAACiF,EAAUP,aAAaiB,GAAYR,EAAWT,aAAakB,MAG1EY,EAAUlb,UAAUia,UAAY,SAAUC,EAAcC,GACpD,IAAIhZ,EAAIM,EAIJ4Y,EAHA3F,EAAO/U,KAAK+U,OACZiF,EAAYha,KAAKoY,YAAYrD,EAAK,GAAI/U,KAAKkY,KAC3C+B,EAAW,EAEXD,aAAqBuB,IAAcvB,EAAUtB,kBAC7CgC,EAAYH,EAAaP,GACzBC,EAAWlH,OAAO+C,KAAKkE,EAAUpB,iBAAiBja,SAGrC6C,EAAK,GAAIA,EAAGwY,EAAUlC,SAAWyC,EAAaP,GAA3DU,EAAuElZ,GAE3E,IACImZ,EADAT,EAAala,KAAKoY,YAAYrD,EAAK,GAAI/U,KAAKkY,IAAM+B,GAElDC,aAAsBqB,IAAcrB,EAAWxB,iBAC/CiC,EAAaH,EAAcN,IAGbpY,EAAK,GAAIA,EAAGoY,EAAWpC,SAAW0C,EAAcN,GAA9DS,EAA2E7Y,GAE/E,IAAI8Y,EAAMpH,EAASA,EAAS,GAAIkH,GAAYC,GAC5C,OAAOC,GAEXW,EAAUlb,UAAUqZ,QAAU,SAAUzB,EAAKoC,GACzC,IAAItF,EAAOuG,EAAWrD,EAAK,QAC3B,OAAOjY,KAAKsa,WAAU,SAAUN,GAAa,OAAOA,EAAUN,QAAQ3E,EAAK,GAAIsF,MAAe,SAAUH,GAAc,OAAOA,EAAWR,QAAQ3E,EAAK,GAAIsF,OAE7JkB,EAAUlb,UAAUuY,cAAgB,WAChC,OAAO5Y,KAAKsa,WAAU,SAAUN,GAAa,OAAOA,EAAUpB,mBAAoB,SAAUsB,GAAc,OAAOA,EAAWtB,oBAEhI2C,EAAUlb,UAAU0Y,QAAU,SAAUgC,EAAMC,GAC1C,IAAIxZ,EAAKkE,EAAO1F,KAAKwb,SAAU,GAAIxB,EAAYxY,EAAG,GAAI0Y,EAAa1Y,EAAG,GAClEoa,EAAW,SAAUhE,EAAO7C,GAC5B,OAAI6C,aAAiB2D,IAAc3D,EAAMc,iBAC9B3D,EAGAA,EAAK6C,EAAME,UAG1B,GAAIkC,aAAqBnB,GAAmBqB,aAAsBrB,EAAiB,CAC/E,IAAIvM,EAAS0N,EAAUjB,QAAQ6C,EAAS5B,EAAWe,GAAOa,EAAS5B,EAAWgB,IAC9E,OAAe,IAAX1O,EACO4N,EAAWnB,QAAQ6C,EAAS1B,EAAYa,GAAOa,EAAS1B,EAAYc,IAExE1O,EAEX,MAAM,IAAIrJ,MAAM,0BAEpBsY,EAAUhD,KAAO,OACVgD,EAtJmB,CAuJ5B1C,GAEEgD,EAAoC,SAAU/C,GAE9C,SAAS+C,EAAmB1d,EAAOyZ,EAAOjY,GACtC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,qBACNyB,EAEX,OARAwR,EAAU2I,EAAoB/C,GAQvB+C,EAT4B,CAUrClE,GACEmE,EAA0B,SAAUhD,GAEpC,SAASgD,EAAS7D,EAAKC,EAAKC,GACxB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAsDX,OA5DAwR,EAAU4I,EAAUhD,GAQpBgD,EAASzb,UAAUqZ,QAAU,SAAUzB,GACnC,OAAO,IAAI,IAAUA,EAAIlF,OAAO+C,KAAKmC,GAAK,MAE9C6D,EAASzb,UAAUmZ,OAAS,SAAUzE,GAClC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAE0W,IAAK,IAAI,IAAU7B,GAAK8D,YAErCD,EAASzb,UAAUkZ,QAAU,SAAUtB,GACnC,IAAI+D,EAAY,IAAI,IAAU/D,GAC9B,OAAI+D,EAAUnL,QACH,IAAIgL,EAAmB5D,EAAKjY,KAAM,0BAA4BiY,GAEhE+D,EAAUC,aACR,IAAIJ,EAAmB5D,EAAKjY,KAAM,6BAA+BiY,GAGjE,MAGf6D,EAASzb,UAAUoZ,aAAe,SAAUxB,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAE0W,IAAK,IAAI,IAAU7B,GAAK8D,YAErCD,EAASzb,UAAUuY,cAAgB,WAC/B,OAAOkD,EAASvD,MAEpBuD,EAASzb,UAAUgb,YAAc,SAAUpD,GACvC,MAAO,CACHnZ,IAAK,CAAEgb,IAAKvN,OAAO0L,IACnB3I,KAAM,CAAEiJ,KAAMuD,EAASvD,QAG/BuD,EAASzb,UAAUwZ,MAAQ,SAAUrY,GACjC,IAAIsY,EAAMtY,EAAGsY,IACb,OAAOA,GAEXgC,EAASzb,UAAU0Y,QAAU,SAAUmD,EAAMC,GACzC,IAAInD,EAAKzI,OAAO2L,GACZjD,EAAK1I,OAAO4L,GAChB,OAAInD,IAAOC,EACA,EAEJD,EAAKC,GAAM,EAAI,GAE1B6C,EAASvD,KAAO,MACTuD,EA7DkB,CA8D3BjD,GAEEuD,EAA6B,SAAUtD,GAEvC,SAASsD,EAAYnE,EAAKC,EAAKC,GAC3B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EA2BX,OAjCAwR,EAAUkJ,EAAatD,GAQvBsD,EAAY/b,UAAUqZ,QAAU,SAAUzB,GACtC,OAAOA,EAAIlF,OAAO+C,KAAKmC,GAAK,KAEhCmE,EAAY/b,UAAUuY,cAAgB,WAClC,OAAOwD,EAAY7D,MAEvB6D,EAAY/b,UAAUmZ,OAAS,SAAUzE,GACrC,IAAIkD,EAAMlD,EAAKL,MACf,MAAO,CAAE2H,OAAQpE,IAErBmE,EAAY/b,UAAUoZ,aAAe,SAAUxB,GAC3C,MAAO,CAAEoE,OAAQpE,IAGrBmE,EAAY/b,UAAUwZ,MAAQ,SAAUrY,GACpC,IAAI6a,EAAS7a,EAAG6a,OAChB,OAAOA,GAEXD,EAAY/b,UAAUgb,YAAc,SAAUpD,GAC1C,MAAO,CACHnZ,IAAK,CAAEud,OAAQpE,GACf3I,KAAM,CAAEiJ,KAAM6D,EAAY7D,QAGlC6D,EAAY7D,KAAO,SACZ6D,EAlCqB,CAmC9BvD,GAEEyD,EAAwC,SAAUxD,GAElD,SAASwD,EAAuBne,EAAOyZ,EAAOjY,GAC1C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,yBACNyB,EAEX,OARAwR,EAAUoJ,EAAwBxD,GAQ3BwD,EATgC,CAUzC3E,GACE4E,EAA8B,SAAUzD,GAExC,SAASyD,EAAatE,EAAKC,EAAKC,GAC5B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAkEX,OAxEAwR,EAAUqJ,EAAczD,GAQxByD,EAAalc,UAAUgb,YAAc,SAAUpD,GAC3C,IAAI1Q,EAAU,eAAU0Q,GACxB,MAAO,CACHnZ,IAAK,CAAE0d,MAAOjV,GACd+H,KAAM,CAAEiJ,KAAM,WAGtBgE,EAAalc,UAAUkZ,QAAU,SAAUpb,GACvC,OAAI,eAAgBA,KAAW,OAAiBwJ,MACrC,IAAI2U,EAAuBne,EAAO6B,KAAM,yBAA2B7B,GAEvE,MAEXoe,EAAalc,UAAUmZ,OAAS,SAAUzE,GACtC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErBsE,EAAalc,UAAUoZ,aAAe,SAAUxB,GAC5C,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAGrBsE,EAAalc,UAAUqZ,QAAU,SAAUzB,GACvC,OAAIA,EAAIoE,OACGpE,EAAIoE,OAER,eAAapE,EAAIuE,QAE5BD,EAAalc,UAAUuY,cAAgB,WACnC,OAAO2D,EAAahE,MAGxBgE,EAAalc,UAAUwZ,MAAQ,SAAUrY,GACrC,IAAIgb,EAAQhb,EAAGgb,MAAOH,EAAS7a,EAAG6a,OAClC,OAAIA,GAGG,eAAaG,IAExBD,EAAalc,UAAU0Y,QAAU,SAAU0D,EAAUC,GACjD,IAAIC,EAAa,SAAUC,GACvB,OAAOA,EAAQC,WAAW,OAE9B,OAAIF,EAAWF,IAAaE,EAAWD,GAC5B5D,EAAOzY,UAAU0Y,QAAQ5S,KAAKnG,KAAMyc,EAAUC,GAEhDC,EAAWF,IACR,EAEHE,EAAWD,GACT,EAGA5D,EAAOzY,UAAU0Y,QAAQ5S,KAAKnG,KAAMyc,EAAUC,IAG7DH,EAAahE,KAAO,UACbgE,EAzEsB,CA0E/B1D,GAEEiE,EAAoC,SAAUhE,GAE9C,SAASgE,EAAmB3e,EAAOyZ,EAAOjY,GACtC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,qBACNyB,EAEX,OARAwR,EAAU4J,EAAoBhE,GAQvBgE,EAT4B,CAUrCnF,GACEoF,EAA0B,SAAUjE,GAEpC,SAASiE,EAAS9E,EAAKC,EAAKC,GACxB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAuEX,OA7EAwR,EAAU6J,EAAUjE,GAQpB/F,OAAOsE,eAAe0F,EAAS1c,UAAW,cAAe,CACrD2W,IAAK,WACD,OAAOhX,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,IAE9CuC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe0F,EAAS1c,UAAW,YAAa,CACnD2W,IAAK,WACD,OAAOhX,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,IAE9CuC,YAAY,EACZC,cAAc,IAElBwF,EAAS1c,UAAUkZ,QAAU,SAAUpb,GACnC,OAAI+W,EAAaM,eAAerX,GACrB,KAEJ,IAAI2e,EAAmB3e,EAAO6B,KAAM,iCAE/C+c,EAAS1c,UAAUqZ,QAAU,SAAUzB,EAAKoC,GACxC,IAAI3Y,EAAQ1B,KACRmK,EAAM,IAAI+K,EAAalV,KAAKiY,KAIhC,OAHAA,EAAI/W,SAAQ,SAAU0O,GAClBzF,EAAInM,IAAI0D,EAAM2X,UAAUQ,MAAMjK,EAAQmF,KAAK,IAAKrT,EAAM4X,YAAYI,QAAQ9J,EAAQmF,KAAK,GAAIsF,OAExFlQ,GAEX4S,EAAS1c,UAAUmZ,OAAS,SAAUzE,GAClC,IAAIrT,EAAQ1B,KACRiY,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,OAAOpC,MAAM0F,KAAKuR,EAAInC,QACjB/J,MAAK,SAAUW,EAAGC,GAAK,OAAOjL,EAAM2X,UAAUN,QAAQrM,EAAGC,MACzDxC,KAAI,SAAUrL,GACf,MAAO,CACHyZ,KAAM,MACNxD,KAAM,CAACrT,EAAM2X,UAAUI,aAAa3a,GAAM4C,EAAM4X,YAAYG,aAAaxB,EAAIjB,IAAIlY,UAI7Fie,EAAS1c,UAAUoZ,aAAe,SAAU1E,GACxC,IAAIrT,EAAQ1B,KACRiY,EAAMlD,EACN3R,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,OAAOpC,MAAM0F,KAAKuR,EAAInC,QACjB/J,MAAK,SAAUW,EAAGC,GAAK,OAAOjL,EAAM2X,UAAUN,QAAQrM,EAAGC,MACzDxC,KAAI,SAAUrL,GACf,MAAO,CACHyZ,KAAM,MACNxD,KAAM,CAACrT,EAAM2X,UAAUI,aAAa3a,GAAM4C,EAAM4X,YAAYG,aAAaxB,EAAIjB,IAAIlY,UAI7Fie,EAAS1c,UAAUuY,cAAgB,WAC/B,MAAO,CACHzO,IAAK,CACDrL,IAAKkB,KAAKqZ,UAAUT,gBACpBza,MAAO6B,KAAKsZ,YAAYV,mBAIpCmE,EAASxE,KAAO,MACTwE,EA9EkB,CA+E3B/E,GAEEgF,EAA2B,SAAUlE,GAErC,SAASkE,EAAU/E,EAAKC,EAAKC,GACzB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAoCX,OA1CAwR,EAAU8J,EAAWlE,GAQrBkE,EAAU3c,UAAUqZ,QAAU,SAAUzB,GACpC,MAA0C,SAAnC1L,OAAO0L,EAAIM,MAAM0E,eAE5BD,EAAU3c,UAAUmZ,OAAS,SAAUzE,GACnC,IAAIkD,EAAMlD,EAAKL,MACf,MAAO,CAAE6D,KAAMN,EAAM,OAAS,UAElC+E,EAAU3c,UAAUoZ,aAAe,SAAUxB,GACzC,MAAO,CAAEM,KAAMN,EAAM,OAAS,UAElC+E,EAAU3c,UAAUuY,cAAgB,WAChC,OAAOoE,EAAUzE,MAErByE,EAAU3c,UAAUgb,YAAc,SAAUpD,GACxC,MAAO,CACHnZ,IAAKkB,KAAKyZ,aAAaxB,GACvB3I,KAAM,CAAEiJ,KAAMyE,EAAUzE,QAGhCyE,EAAU3c,UAAUwZ,MAAQ,SAAU5B,GAClC,OAAOjY,KAAKyZ,aAAaxB,IAE7B+E,EAAU3c,UAAU0Y,QAAU,SAAUgC,EAAMC,GAC1C,OAAKD,GAAQC,IAAWD,IAASC,EACtB,EAEFD,EACE,GAGC,GAGhBiC,EAAUzE,KAAO,OACVyE,EA3CmB,CA4C5BnE,GAEEqE,EAAyC,SAAUpE,GAEnD,SAASoE,EAAwB/e,EAAOyZ,EAAOjY,GAC3C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,0BACNyB,EAEX,OARAwR,EAAUgK,EAAyBpE,GAQ5BoE,EATiC,CAU1CvF,GACEwF,EAA+B,SAAUrE,GAEzC,SAASqE,EAAclF,EAAKC,EAAKC,GAC7B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAkCX,OAxCAwR,EAAUiK,EAAerE,GAQzBqE,EAAc9c,UAAUkZ,QAAU,SAAUpb,GAExC,OAAI,eAAgBA,KAAW,OAAiBwJ,MACrC,IAAIuV,EAAwB/e,EAAO6B,KAAM,iCAE7C,MAEXmd,EAAc9c,UAAUqZ,QAAU,SAAUzB,GACxC,OAAIA,EAAIoE,OACGpE,EAAIoE,OAER,eAAapE,EAAIuE,QAE5BW,EAAc9c,UAAUmZ,OAAS,SAAUzE,GACvC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErBkF,EAAc9c,UAAUoZ,aAAe,SAAUxB,GAC7C,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErBkF,EAAc9c,UAAUuY,cAAgB,WACpC,OAAOuE,EAAc5E,MAEzB4E,EAAc5E,KAAO,WACd4E,EAzCuB,CA0ChCnF,GAEEoF,EAAqC,SAAUtE,GAE/C,SAASsE,EAAoBjf,EAAOyZ,EAAOjY,GACvC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,sBACNyB,EAEX,OARAwR,EAAUkK,EAAqBtE,GAQxBsE,EAT6B,CAUtCzF,GACE0F,EAA2B,SAAUvE,GAErC,SAASuE,EAAUpF,EAAKC,EAAKC,GACzB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EA+CX,OArDAwR,EAAUmK,EAAWvE,GAQrBuE,EAAUhd,UAAUkZ,QAAU,SAAUpb,GACpC,OAAI6C,MAAMC,QAAQ9C,GACP,KAEJ,IAAIif,EAAoBjf,EAAO6B,KAAM,2BAEhDqd,EAAUhd,UAAUmZ,OAAS,SAAUzE,GACnC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,IAAIka,EAAStd,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,GAChD,OAAOkD,EAAIsF,QAAO,SAAUC,EAAM5N,GAC9B,OAAOpJ,EAAcA,EAAc,GAAId,EAAO8X,IAAQ,CAACF,EAAO7D,aAAa7J,OAC5E,KAEPyN,EAAUhd,UAAUqZ,QAAU,SAAUzB,EAAKoC,GACzC,IAAIiD,EAAStd,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,GAC5C3R,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,OAAO6U,EAAIsF,QAAO,SAAUC,EAAM5N,GAC9B,OAAOpJ,EAAcA,EAAc,GAAId,EAAO8X,IAAQ,CAACF,EAAO5D,QAAQ9J,EAASyK,OAChF,KAEPgD,EAAUhd,UAAUoZ,aAAe,SAAU1E,GACzC,IAAIuI,EAAStd,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,GAC5C3R,EAAMpD,KAAKuZ,QAAQxE,GACvB,GAAI3R,EACA,MAAMA,EAEV,OAAO2R,EAAKwI,QAAO,SAAUC,EAAM5N,GAC/B,OAAOpJ,EAAcA,EAAc,GAAId,EAAO8X,IAAQ,CAACF,EAAO7D,aAAa7J,OAC5E,KAEPyN,EAAUhd,UAAUuY,cAAgB,WAChC,IAAIpX,EACAmU,EAAc3V,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KAC1D,OAAO1W,EAAK,GACRA,EAAG6b,EAAU9E,MAAQ5C,EAAYiD,gBACjCpX,GAER6b,EAAU9E,KAAO,OACV8E,EAtDmB,CAuD5BrF,GAEEyF,EAAsC,SAAU3E,GAEhD,SAAS2E,EAAqBtf,EAAOyZ,EAAOjY,GACxC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,uBACNyB,EAEX,OARAwR,EAAUuK,EAAsB3E,GAQzB2E,EAT8B,CAUvC9F,GACE+F,EAA4B,SAAU5E,GAEtC,SAAS4E,EAAWzF,EAAKC,EAAKC,GAC1B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAmDX,OAzDAwR,EAAUwK,EAAY5E,GAQtB4E,EAAWrd,UAAUqZ,QAAU,SAAUzB,GACrC,OAAO,IAAI,IAAUA,EAAIlF,OAAO+C,KAAKmC,GAAK,MAE9CyF,EAAWrd,UAAUuY,cAAgB,WACjC,OAAO8E,EAAWnF,MAEtBmF,EAAWrd,UAAUkZ,QAAU,SAAUtB,GACrC,IAAI+D,EAAY,IAAI,IAAU/D,GAC9B,OAAI+D,EAAUnL,QACH,IAAI4M,EAAqBxF,EAAKjY,KAAM,0BAA4BiY,GAGhE,MAGfyF,EAAWrd,UAAUmZ,OAAS,SAAUzE,GACpC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAE0W,IAAKvN,OAAO0L,GAAKxO,aAE9BiU,EAAWrd,UAAUoZ,aAAe,SAAUxB,GAC1C,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAE0W,IAAKvN,OAAO0L,GAAKxO,aAE9BiU,EAAWrd,UAAUgb,YAAc,SAAUpD,GACzC,MAAO,CACHnZ,IAAK,CAAEgb,IAAKvN,OAAO0L,IACnB3I,KAAM,CAAEiJ,KAAMmF,EAAWnF,QAGjCmF,EAAWrd,UAAUwZ,MAAQ,SAAUrY,GACnC,IAAIsY,EAAMtY,EAAGsY,IACb,OAAOA,GAEX4D,EAAWrd,UAAU0Y,QAAU,SAAU4E,EAAQC,GAC7C,IAAI5E,EAAKzI,OAAOoN,GACZ1E,EAAK1I,OAAOqN,GAChB,OAAI5E,IAAOC,EACA,EAEJD,EAAKC,GAAM,EAAI,GAE1ByE,EAAWnF,KAAO,QACXmF,EA1DoB,CA2D7B7E,GAEEgF,EAAsC,SAAU/E,GAEhD,SAAS+E,EAAqB1f,EAAOyZ,EAAOjY,GACxC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,uBACNyB,EAEX,OARAwR,EAAU2K,EAAsB/E,GAQzB+E,EAT8B,CAUvClG,GACEmG,EAA4B,SAAUhF,GAEtC,SAASgF,EAAW7F,EAAKC,EAAKC,GAC1B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAmDX,OAzDAwR,EAAU4K,EAAYhF,GAQtBgF,EAAWzd,UAAUgb,YAAc,SAAUpD,GACzC,MAAO,CACHnZ,IAAK,CAAE0d,MAAOvE,GACd3I,KAAM,CAAEiJ,KAAMuF,EAAWvF,QAGjCuF,EAAWzd,UAAUkZ,QAAU,SAAUtB,GACrC,MAAmB,kBAARA,GAAoB,iBAAiBpM,KAAKoM,IAAQA,EAAItZ,OAAS,IAAM,EACrE,KAGA,IAAIkf,EAAqB5F,EAAKjY,KAAM,kBAAoBiY,IAGvE6F,EAAWzd,UAAU0d,6BAA+B,SAAU9F,GAC1D,OAAOA,EAAI5E,cAAgB1P,WAAaqa,EAAOtX,KAAKuR,GAAKxO,SAAS,OAASwO,GAE/E6F,EAAWzd,UAAUmZ,OAAS,SAAUzE,GACpC,IAAIkD,EAAMlD,EAAKL,MACfuD,EAAMjY,KAAK+d,6BAA6B9F,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEoZ,MAAOjQ,OAAO0L,GAAKxO,aAEhCqU,EAAWzd,UAAUoZ,aAAe,SAAUxB,GAC1CA,EAAMjY,KAAK+d,6BAA6B9F,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEoZ,MAAOjQ,OAAO0L,GAAKxO,aAEhCqU,EAAWzd,UAAUqZ,QAAU,SAAUzB,GACrC,OAAOA,EAAIuE,OAEfsB,EAAWzd,UAAUuY,cAAgB,WACjC,OAAOkF,EAAWvF,MAGtBuF,EAAWzd,UAAUwZ,MAAQ,SAAUrY,GACnC,IAAIgb,EAAQhb,EAAGgb,MAAOH,EAAS7a,EAAG6a,OAClC,OAAIA,GAGGG,GAEXsB,EAAWvF,KAAO,QACXuF,EA1DoB,CA2D7BjF,GAEEoF,EAA6B,SAAUnF,GAEvC,SAASmF,EAAYhG,EAAKC,EAAKC,GAC3B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAwEX,OA9EAwR,EAAU+K,EAAanF,GAQvBmF,EAAY5d,UAAU6d,SAAW,WAC7B,OAAOle,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,MAEnD+F,EAAY5d,UAAUyX,MAAQ,WAC1B,OAAO9W,MAAMC,QAAQjB,KAAKiY,IAAIO,QACxBM,EAAOzY,UAAUyX,MAAM3R,KAAKnG,MAC5BA,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KAAKJ,SAEvDmG,EAAY5d,UAAUmZ,OAAS,SAAUzE,GACrC,IAAI5W,EAAQ4W,EACZ,QAAc9V,IAAVd,GACU,OAAVA,EACA,MAAO,CAAEoa,KAAM,QAEd,GAAKvX,MAAMC,QAAQ9C,UAAuCc,IAA5Bd,EAAMA,EAAMQ,OAAS,IAAgD,OAA5BR,EAAMA,EAAMQ,OAAS,IAE7F,OADAR,EAAMuW,MACC,CAAE6D,KAAM,QAEnB,IAAI+E,EAAStd,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,GAChD,MAAO,CAAEwD,KAAM,OAAQxD,KAAM,CAACuI,EAAO9D,OAAOzE,MAEhDkJ,EAAY5d,UAAUoZ,aAAe,SAAU1E,GAC3C,IAAIuI,EAAStd,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,GAC5C5W,EAAQ4W,EACZ,YAAc9V,IAAVd,GAAiC,OAAVA,EAChB,CAAEoa,KAAM,QAEZ,CAAEA,KAAM,OAAQxD,KAAM,CAACuI,EAAO7D,aAAatb,MAEtD8f,EAAY5d,UAAUqZ,QAAU,SAAUzB,EAAKoC,GAC3C,GAAiB,SAAbpC,EAAIM,KACJ,OAAO,KAEX,IAAI+E,EAAStd,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,GAChD,OAAOuI,EAAO5D,QAAQzB,EAAIlD,KAAK,GAAIsF,IAEvC4D,EAAY5d,UAAUuY,cAAgB,WAClC,IAAI0E,EAAStd,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,GAChD,OAAOuI,EAAO1E,iBAElBqF,EAAY5d,UAAUsY,iBAAmB,WACrC,IAAI2E,EAAStd,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,GAChD,OAAOvO,EAAcA,EAAc,GAAId,EAAO4X,EAAO3E,qBAAsB,CAAC,MAEhF5F,OAAOsE,eAAe4G,EAAY5d,UAAW,YAAa,CACtD2W,IAAK,WACD,OAAOhX,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,IAE9CuC,YAAY,EACZC,cAAc,IAElB0G,EAAY5d,UAAU0Y,QAAU,SAAUgC,EAAMC,GAC5C,OAAKD,EAGKC,EAGHhb,KAAKqZ,UAAUN,QAAQgC,EAAMC,GAFzB,GAHC,GAOhBiD,EAAY5d,UAAUwZ,MAAQ,SAAU5B,GACpC,OAAOjY,KAAK0Z,QAAQzB,IAExBgG,EAAY5d,UAAUgb,YAAc,SAAUpD,GAC1C,MAAO,CACHnZ,IAAKkB,KAAKyZ,aAAaxB,GACvB3I,KAAMtP,KAAKqY,2BAGnB4F,EAAY1F,KAAO,SACZ0F,EA/EqB,CAgF9BpF,GAEEsF,EAAgC,SAAUrF,GAE1C,SAASqF,EAAelG,EAAKC,EAAKC,GAC9B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAgCX,OAtCAwR,EAAUiL,EAAgBrF,GAQ1BqF,EAAe9d,UAAUqZ,QAAU,SAAUzB,GACzC,OAAIA,EAAIoE,OACG,IAAI+B,KAAKnG,EAAIoE,QAAQgC,cAEvBpG,EAAI6B,IACF,IAAIsE,KAAuB,IAAlB7N,OAAO0H,EAAI6B,MAAauE,mBADvC,GAITF,EAAe9d,UAAUmZ,OAAS,SAAUzE,GACxC,IAAIkD,EAAMlD,EAAKL,MACf,MAAO,CAAE2H,OAAQpE,IAErBkG,EAAe9d,UAAUoZ,aAAe,SAAUxB,GAC9C,MAAO,CAAEoE,OAAQpE,IAErBkG,EAAe9d,UAAUuY,cAAgB,WACrC,OAAOuF,EAAe5F,MAG1B4F,EAAe9d,UAAUwZ,MAAQ,SAAUrY,GACvC,IAAI6a,EAAS7a,EAAG6a,OAChB,OAAOA,GAEX8B,EAAe9d,UAAUgb,YAAc,SAAUpD,GAC7C,MAAO,CACHnZ,IAAK,CAAEud,OAAQpE,GACf3I,KAAM,CAAEiJ,KAAM4F,EAAe5F,QAGrC4F,EAAe5F,KAAO,YACf4F,EAvCwB,CAwCjCtF,GAEEyF,EAAoC,SAAUxF,GAE9C,SAASwF,EAAmBngB,EAAOyZ,EAAOjY,GACtC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,qBACNyB,EAEX,OARAwR,EAAUoL,EAAoBxF,GAQvBwF,EAT4B,CAUrC3G,GACE4G,EAA0B,SAAUzF,GAEpC,SAASyF,EAAStG,EAAKC,EAAKC,GACxB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAmDX,OAzDAwR,EAAUqL,EAAUzF,GAQpByF,EAASle,UAAUqZ,QAAU,SAAUzB,GACnC,OAAO,IAAI,IAAUA,EAAIlF,OAAO+C,KAAKmC,GAAK,MAE9CsG,EAASle,UAAUuY,cAAgB,WAC/B,OAAO2F,EAAShG,MAEpBgG,EAASle,UAAUkZ,QAAU,SAAUtB,GACnC,IAAI+D,EAAY,IAAI,IAAU/D,GAC9B,OAAI+D,EAAUnL,QACH,IAAIyN,EAAmBrG,EAAKjY,KAAM,0BAA4BiY,GAG9D,MAGfsG,EAASle,UAAUmZ,OAAS,SAAUzE,GAClC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAE0W,IAAK,IAAI,IAAU7B,GAAK8D,YAErCwC,EAASle,UAAUoZ,aAAe,SAAUxB,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAE0W,IAAK,IAAI,IAAU7B,GAAK8D,YAErCwC,EAASle,UAAUgb,YAAc,SAAUpD,GACvC,MAAO,CACHnZ,IAAK,CAAEgb,IAAKvN,OAAO0L,IACnB3I,KAAM,CAAEiJ,KAAMgG,EAAShG,QAG/BgG,EAASle,UAAUwZ,MAAQ,SAAUrY,GACjC,IAAIsY,EAAMtY,EAAGsY,IACb,OAAOA,GAEXyE,EAASle,UAAU0Y,QAAU,SAAUyF,EAAMC,GACzC,IAAIzF,EAAKzI,OAAOiO,GACZvF,EAAK1I,OAAOkO,GAChB,OAAIzF,IAAOC,EACA,EAEJD,EAAKC,GAAM,EAAI,GAE1BsF,EAAShG,KAAO,MACTgG,EA1DkB,CA2D3B1F,GAEE6F,EAA2B,SAAU5F,GAErC,SAAS4F,EAAUzG,EAAKC,EAAKC,GACzB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EA4BX,OAlCAwR,EAAUwL,EAAW5F,GAQrB4F,EAAUre,UAAUmZ,OAAS,SAAUzE,GAEnC,OADAA,EAAKL,MACE,CAAE6D,KAAM,SAEnBmG,EAAUre,UAAUoZ,aAAe,SAAUkF,GACzC,MAAO,CAAEpG,KAAM,SAEnBmG,EAAUre,UAAUqZ,QAAU,SAAUiF,GACpC,OAAOC,IAEXF,EAAUre,UAAUuY,cAAgB,WAChC,OAAO8F,EAAUnG,MAErBmG,EAAUre,UAAU0Y,QAAU,SAAU8F,EAAOC,GAC3C,OAAO,GAEXJ,EAAUre,UAAUwZ,MAAQ,SAAU8E,GAClC,OAAOC,IAEXF,EAAUre,UAAUgb,YAAc,SAAUsD,GACxC,MAAO,CACH7f,IAAK,CAAEyZ,KAAM,QACbjJ,KAAM,CAAEiJ,KAAMmG,EAAUnG,QAGhCmG,EAAUnG,KAAO,OACVmG,EAnCmB,CAoC5B7F,GAEEkG,EAAwB,EACxBC,EAAoC,SAAUlG,GAE9C,SAASkG,EAAmB7gB,EAAOyZ,EAAOjY,GACtC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,qBACNyB,EAEX,OARAwR,EAAU8L,EAAoBlG,GAQvBkG,EAT4B,CAUrCrH,GACEsH,EAA0B,SAAUnG,GAEpC,SAASmG,EAAShH,EAAKC,EAAKC,GACxB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAmEX,OAzEAwR,EAAU+L,EAAUnG,GAQpBmG,EAAS5e,UAAUqZ,QAAU,SAAUzB,GACnC,OAAIA,EAAIoE,OACGpE,EAAIoE,OAER,eAAUpE,EAAIuE,QAEzByC,EAAS5e,UAAUkZ,QAAU,SAAUpb,GACnC,OAAI,eAAkBA,KAAW,OAAiBwJ,MACvC,IAAIqX,EAAmB7gB,EAAO6B,KAAM,oBAExC,MAEXif,EAAS5e,UAAUmZ,OAAS,SAAUzE,GAClC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErBgH,EAAS5e,UAAUoZ,aAAe,SAAUxB,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErBgH,EAAS5e,UAAUuY,cAAgB,WAC/B,OAAOqG,EAAS1G,MAEpB0G,EAAS5e,UAAUwZ,MAAQ,SAAU5B,GACjC,OAAOjY,KAAK0Z,QAAQzB,IAExBgH,EAAS5e,UAAUgb,YAAc,SAAUpD,GACvC,MAAO,CACHnZ,IAAK,CAAEud,OAAQpE,GACf3I,KAAM,CAAEiJ,KAAM0G,EAAS1G,QAG/B0G,EAAS5e,UAAU0Y,QAAU,SAAUmG,EAAMC,GACzC,IAAIC,EAAapf,KAAKqf,UAAUH,GAC5BI,EAAatf,KAAKqf,UAAUF,GAChC,GAAIC,IAAe,OAAOhb,MAAQkb,IAAe,OAAOlb,KACpD,OAAQ,EAEP,GAAIgb,IAAe,OAAO/a,MAAQib,IAAe,OAAOjb,KACzD,OAAOib,IAAe,OAAOlb,KAAO,GAAK,EAExC,GAAIgb,IAAe,OAAO9a,KAAM,CACjC,GAAIgb,IAAe,OAAOhb,KACtB,OAAO,EAEX,IAAIib,EAAYvf,KAAKwf,gCAAgCN,GACjDO,EAAYzf,KAAKwf,gCAAgCL,GACrD,OAAOnB,EAAOjF,QAAQwG,EAAWE,GAErC,OAAO3G,EAAOzY,UAAU0Y,QAAQ5S,KAAKnG,KAAMkf,EAAMC,IAErDF,EAAS5e,UAAUgf,UAAY,SAAUpH,GACrC,OAAOA,EAAIjO,UAAU,EAAG+U,IAE5BE,EAAS5e,UAAUmf,gCAAkC,SAAUE,GAC3D,OAAO,eAAWA,EAAM,OAAO,OAAOpb,OAAOmD,MAAM,IAEvDwX,EAAS1G,KAAO,MACT0G,EA1EkB,CA2E3BpG,GAEE8G,EAAwC,SAAU7G,GAElD,SAAS6G,EAAuBxhB,EAAOyZ,EAAOjY,GAC1C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,yBACNyB,EAEX,OARAwR,EAAUyM,EAAwB7G,GAQ3B6G,EATgC,CAUzChI,GACEiI,GAA8B,SAAU9G,GAExC,SAAS8G,EAAa3H,EAAKC,EAAKC,GAC5B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EA+CX,OArDAwR,EAAU0M,EAAc9G,GAQxB8G,EAAavf,UAAUqZ,QAAU,SAAUzB,GACvC,OAAIA,EAAIoE,OACGpE,EAAIoE,OAER,eAAcpE,EAAIuE,QAE7BoD,EAAavf,UAAUkZ,QAAU,SAAUpb,GACvC,OAAI,eAAgBA,KAAW,OAAiBwJ,MACrC,IAAIgY,EAAuBxhB,EAAO6B,KAAM,yBAA2B7B,GAEvE,MAEXyhB,EAAavf,UAAUmZ,OAAS,SAAUzE,GACtC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErB2H,EAAavf,UAAUoZ,aAAe,SAAUxB,GAC5C,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErB2H,EAAavf,UAAUuY,cAAgB,WACnC,OAAOgH,EAAarH,MAGxBqH,EAAavf,UAAUwZ,MAAQ,SAAUrY,GACrC,IAAI6a,EAAS7a,EAAG6a,OAAQG,EAAQhb,EAAGgb,MACnC,OAAIH,GAGG,eAAcG,IAEzBoD,EAAavf,UAAUgb,YAAc,SAAUpD,GAC3C,MAAO,CACHnZ,IAAK,CAAEud,OAAQpE,GACf3I,KAAM,CAAEiJ,KAAMqH,EAAarH,QAGnCqH,EAAarH,KAAO,WACbqH,EAtDsB,CAuD/B/G,GAEEgH,GAA0C,SAAU/G,GAEpD,SAAS+G,EAAyB1hB,EAAOyZ,EAAOjY,GAC5C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,2BACNyB,EAEX,OARAwR,EAAU2M,EAA0B/G,GAQ7B+G,EATkC,CAU3ClI,GACEmI,GAAgC,SAAUhH,GAE1C,SAASgH,EAAe7H,EAAKC,EAAKC,GAC9B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAuCX,OA7CAwR,EAAU4M,EAAgBhH,GAQ1BgH,EAAezf,UAAUqZ,QAAU,SAAUzB,GACzC,OAAOA,EAAIoE,QAEfyD,EAAezf,UAAUkZ,QAAU,SAAUpb,GACzC,OAAI,eAAkBA,KAAW,OAAiBwJ,MACvC,IAAIkY,GAAyB1hB,EAAO6B,KAAM,0BAE9C,MAEX8f,EAAezf,UAAUmZ,OAAS,SAAUzE,GACxC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErB6H,EAAezf,UAAUoZ,aAAe,SAAUxB,GAC9C,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErB6H,EAAezf,UAAUuY,cAAgB,WACrC,OAAOkH,EAAevH,MAE1BuH,EAAezf,UAAUwZ,MAAQ,SAAU5B,GACvC,OAAOjY,KAAK0Z,QAAQzB,IAExB6H,EAAezf,UAAUgb,YAAc,SAAUpD,GAC7C,MAAO,CACHnZ,IAAK,CAAEud,OAAQpE,GACf3I,KAAM,CAAEiJ,KAAMuH,EAAevH,QAGrCuH,EAAevH,KAAO,YACfuH,EA9CwB,CA+CjCjH,GAEEkH,GAA6B,SAAUjH,GAEvC,SAASiH,EAAY9H,EAAKC,EAAKC,GAC3B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EA6BX,OAnCAwR,EAAU6M,EAAajH,GAQvBiH,EAAY1f,UAAUqZ,QAAU,SAAUzB,GACtC,OAAIA,EAAIoE,OACGpE,EAAIoE,OAGJpE,GAGf8H,EAAY1f,UAAUmZ,OAAS,SAAUzE,GACrC,IAAIkD,EAAMlD,EAAKL,MACf,OAAOuD,GAEX8H,EAAY1f,UAAUoZ,aAAe,SAAUxB,GAC3C,OAAOA,GAEX8H,EAAY1f,UAAUuY,cAAgB,WAClC,IAAIpX,EACAwY,EAAYha,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KACpDgC,EAAala,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,IAAM,GAC/D,OAAO1W,EAAK,GACRA,EAAGue,EAAYxH,MAAQ,CACnByH,WAAYhG,EAAUpB,gBACtBqH,QAAS/F,EAAWtB,iBAExBpX,GAERue,EAAYxH,KAAO,SACZwH,EApCqB,CAqC9B/H,GAEEkI,GAAgC,SAAUpH,GAE1C,SAASoH,EAAejI,EAAKC,EAAKC,GAC9B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAoBX,OA1BAwR,EAAUgN,EAAgBpH,GAQ1BoH,EAAe7f,UAAUqZ,QAAU,SAAUzB,GACzC,OAAOA,EAAIoE,QAEf6D,EAAe7f,UAAUmZ,OAAS,WAE9B,IADA,IAAIzE,EAAO,GACFoL,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCpL,EAAKoL,GAAMvM,UAAUuM,GAEzB,IAAIlI,EAAMlD,EAAKL,MACf,MAAO,CAAE2H,OAAQpE,IAErBiI,EAAe7f,UAAUoZ,aAAe,SAAUxB,GAC9C,MAAO,CAAEoE,OAAQpE,IAErBiI,EAAe7f,UAAUuY,cAAgB,WACrC,OAAOsH,EAAe3H,MAE1B2H,EAAe3H,KAAO,YACf2H,EA3BwB,CA4BjClI,GAEEoI,GAAoC,SAAUtH,GAE9C,SAASsH,EAAmBjiB,EAAOyZ,EAAOjY,GACtC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,qBACNyB,EAEX,OARAwR,EAAUkN,EAAoBtH,GAQvBsH,EAT4B,CAUrCzI,GACE0I,GAA0B,SAAUvH,GAEpC,SAASuH,EAASpI,EAAKC,EAAKC,GACxB,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAkDX,OAxDAwR,EAAUmN,EAAUvH,GAQpB/F,OAAOsE,eAAegJ,EAAShgB,UAAW,YAAa,CACnD2W,IAAK,WACD,OAAOhX,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI,IAE9CuC,YAAY,EACZC,cAAc,IAElB8I,EAAShgB,UAAUkZ,QAAU,SAAUpb,GACnC,OAAI6C,MAAMC,QAAQ9C,GACP,KAEJ,IAAIiiB,GAAmBjiB,EAAO6B,KAAM,2BAE/CqgB,EAAShgB,UAAUmZ,OAAS,SAAUzE,GAClC,IAAIrT,EAAQ1B,KACRiY,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,OAAO6U,EACFlM,MAAK,SAAUW,EAAGC,GAAK,OAAOjL,EAAM2X,UAAUN,QAAQrM,EAAGC,MACzD4Q,QAAO,SAAUC,EAAM5N,GACxB,OAAOpJ,EAAcA,EAAc,GAAId,EAAO8X,IAAQ,CAAC9b,EAAM2X,UAAUI,aAAa7J,OACrF,KAEPyQ,EAAShgB,UAAUqZ,QAAU,SAAUzB,EAAKoC,GACxC,IAAI3Y,EAAQ1B,KACZ,OAAOiY,EAAIsF,QAAO,SAAUC,EAAM5N,GAC9B,OAAOpJ,EAAcA,EAAc,GAAId,EAAO8X,IAAQ,CAAC9b,EAAM2X,UAAUK,QAAQ9J,EAASyK,OACzF,KAEPgG,EAAShgB,UAAUoZ,aAAe,SAAU1E,GACxC,IAAIrT,EAAQ1B,KACRoD,EAAMpD,KAAKuZ,QAAQxE,GACvB,GAAI3R,EACA,MAAMA,EAEV,OAAO2R,EACFhJ,MAAK,SAAUW,EAAGC,GAAK,OAAOjL,EAAM2X,UAAUN,QAAQrM,EAAGC,MACzD4Q,QAAO,SAAUC,EAAM5N,GACxB,OAAOpJ,EAAcA,EAAc,GAAId,EAAO8X,IAAQ,CAAC9b,EAAM2X,UAAUI,aAAa7J,OACrF,KAEPyQ,EAAShgB,UAAUuY,cAAgB,WAC/B,OAAOyH,EAAS9H,MAEpB8H,EAAS9H,KAAO,MACT8H,EAzDkB,CA0D3BrI,GAEEsI,GAAwC,SAAUxH,GAElD,SAASwH,EAAuBniB,EAAOyZ,EAAOjY,GAC1C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,yBACNyB,EAEX,OARAwR,EAAUoN,EAAwBxH,GAQ3BwH,EATgC,CAUzC3I,GACE4I,GAA8B,SAAUzH,GAExC,SAASyH,EAAatI,EAAKC,EAAKC,GAC5B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAyCX,OA/CAwR,EAAUqN,EAAczH,GAQxByH,EAAalgB,UAAUkZ,QAAU,SAAUpb,GACvC,OAAI,eAAcA,KAAW,OAAiBwJ,MACnC,IAAI2Y,GAAuBniB,EAAO6B,KAAM,wBAE5C,MAEXugB,EAAalgB,UAAUqZ,QAAU,SAAUzB,GACvC,OAAOA,EAAIlF,OAAO+C,KAAKmC,GAAK,KAEhCsI,EAAalgB,UAAUuY,cAAgB,WACnC,OAAO2H,EAAahI,MAExBgI,EAAalgB,UAAUmZ,OAAS,SAAUzE,GACtC,IAAIkD,EAAMlD,EAAKL,MACXtR,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAErBsI,EAAalgB,UAAUoZ,aAAe,SAAUxB,GAC5C,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEiZ,OAAQpE,IAGrBsI,EAAalgB,UAAUwZ,MAAQ,SAAUrY,GACrC,IAAI6a,EAAS7a,EAAG6a,OAChB,OAAOA,GAEXkE,EAAalgB,UAAUgb,YAAc,SAAUpD,GAC3C,MAAO,CACHnZ,IAAK,CAAEud,OAAQpE,GACf3I,KAAM,CAAEiJ,KAAMgI,EAAahI,QAGnCgI,EAAahI,KAAO,WACbgI,EAhDsB,CAiD/B1H,GAEE2H,GAAmC,WACnC,SAASA,IACLxgB,KAAKC,KAAO,oBACZD,KAAKL,QAAU,sEAEnB,OAAO6gB,EAL2B,GAOlCC,GAAe,CAAE,KAAQ,YACzBC,GAAa,CAAE,KAAQ,OACvBC,GAA6B,SAAU7H,GAEvC,SAAS6H,EAAY1I,EAAKC,EAAKC,GAC3B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAsCX,OA5CAwR,EAAUyN,EAAa7H,GAQvB6H,EAAYtgB,UAAUmZ,OAAS,SAAUoH,GACrC,MAAM,IAAIJ,IAEdG,EAAYtgB,UAAUoZ,aAAe,SAAUmH,GAC3C,MAAM,IAAIJ,IAEdG,EAAYtgB,UAAUqZ,QAAU,SAAUzB,EAAKoC,GAC3C,GAAIA,GAAaA,EAAUsG,EAAYpI,MACnC,OAAO8B,EAAUsG,EAAYpI,MAAMN,EAAKjY,KAAKiY,KAEjD,IAAI4I,EAAW7gB,KAAKoY,YAAYqI,GAAczgB,KAAKkY,KAC/C/Z,EAAQ6B,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KAChD4I,EAAS9gB,KAAKoY,YAAYsI,GAAY1gB,KAAKkY,KAC/C,YAAIjZ,GAAagZ,EAAIlD,KAAK,SACtB9V,IAAcgZ,EAAIlD,KAAK,GAAGA,KACnB,CACH8L,SAAUA,EAASnH,QAAQzB,EAAIlD,KAAK,GAAIsF,GACxClc,MAAOA,EAAMub,QAAQzB,EAAIlD,KAAK,GAAGA,KAAK,GAAIsF,GAC1CyG,OAAQA,EAAOpH,QAAQzB,EAAIlD,KAAK,GAAGA,KAAK,GAAIsF,IAG7C,CACHwG,SAAUA,EAASnH,QAAQzB,EAAIlD,KAAK,GAAIsF,GACxClc,MAAOA,EAAMub,QAAQzB,EAAIlD,KAAK,GAAIsF,GAClCyG,OAAQA,EAAOpH,QAAQzB,EAAIlD,KAAK,GAAIsF,KAG5CsG,EAAYtgB,UAAUuY,cAAgB,WAClC,IAAIjD,EAAc3V,KAAKoY,YAAYpY,KAAKiY,IAAIlD,KAAK,GAAI/U,KAAKkY,KAC1D,MAAO,CACH2I,SAAU1D,EAAc5E,KACxBpa,MAAOwX,EAAYiD,gBACnBkI,OAAQvC,EAAShG,OAGzBoI,EAAYpI,KAAO,SACZoI,EA7CqB,CA8C9B3I,GAEE+I,GAAiC,SAAUjI,GAE3C,SAASiI,EAAgB5iB,EAAOyZ,EAAOjY,GACnC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,kBACNyB,EAEX,OARAwR,EAAU6N,EAAiBjI,GAQpBiI,EATyB,CAUlCpJ,GACEqJ,GAA4B,SAAUlI,GAEtC,SAASkI,EAAW/I,EAAKC,EAAKC,GAC1B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAgBX,OAtBAwR,EAAU8N,EAAYlI,GAQtBkI,EAAW3gB,UAAUmZ,OAAS,SAAUzE,GACpC,IAAIkD,EAAMlD,EAAKL,MACf,MAAM,IAAIqM,GAAgB9I,EAAKjY,KAAM,sDAEzCghB,EAAW3gB,UAAUoZ,aAAe,SAAUxB,GAC1C,MAAM,IAAI8I,GAAgB9I,EAAKjY,KAAM,sDAEzCghB,EAAW3gB,UAAUqZ,QAAU,SAAUzB,GACrC,MAAM,IAAI8I,GAAgB9I,EAAKjY,KAAM,kDAEzCghB,EAAW3gB,UAAUuY,cAAgB,WACjC,OAAOoI,EAAWzI,MAEtByI,EAAWzI,KAAO,QACXyI,EAvBoB,CAwB7BhJ,GAEEiJ,GAA6C,SAAUnI,GAEvD,SAASmI,EAA4B9iB,EAAOyZ,EAAOjY,GAC/C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,8BACNyB,EAEX,OARAwR,EAAU+N,EAA6BnI,GAQhCmI,EATqC,CAU9CtJ,GACEuJ,GAAmC,SAAUpI,GAE7C,SAASoI,EAAkBjJ,EAAKC,EAAKC,GACjC,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EA2CX,OAjDAwR,EAAUgO,EAAmBpI,GAQ7BoI,EAAkB7gB,UAAUkZ,QAAU,SAAUtB,GAC5C,MAAsB,kBAARA,GAAgD,IAA5BlF,OAAO+C,KAAKmC,GAAKtZ,QAEvDuiB,EAAkB7gB,UAAUqZ,QAAU,SAAUzB,EAAK0B,GACjD,GAAIA,GAAYA,EAASuH,EAAkB3I,MACvC,OAAOoB,EAASuH,EAAkB3I,MAAMN,EAAKjY,KAAKiY,KAEtD,GAAI,QAASA,EACT,OAAOA,EAAI6B,IAIX,MAAM,IAAI7W,MAAM,kEAAoEJ,KAAKS,UAAU2U,KAG3GiJ,EAAkB7gB,UAAUmZ,OAAS,SAAUzE,GAC3C,IAAIkD,EAAMlD,EAAKL,MACf,GAAI1U,KAAKuZ,QAAQtB,GACb,MAAO,GAGP,MAAM,IAAIgJ,GAA4BhJ,EAAKjY,KAAM,oCAAsCiY,EAAM,yBAGrGiJ,EAAkB7gB,UAAUoZ,aAAe,SAAUxB,GACjD,GAAIjY,KAAKuZ,QAAQtB,GACb,MAAO,GAGP,MAAM,IAAIgJ,GAA4BhJ,EAAKjY,KAAM,oCAAsCiY,EAAM,yBAGrGiJ,EAAkB7gB,UAAUuY,cAAgB,WACxC,IAAIpX,EACJ,OAAOA,EAAK,GACRA,EAAG0f,EAAkB3I,MAAQ,CACzB,YAAahI,OAAOvQ,KAAKiY,IAAIlD,KAAK,GAAG,SAEzCvT,GAER0f,EAAkB3I,KAAO,gBAClB2I,EAlD2B,CAmDpClJ,GAEEmJ,GAAmD,SAAUrI,GAE7D,SAASqI,EAAkChjB,EAAOyZ,EAAOjY,GACrD,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,oCACNyB,EAEX,OARAwR,EAAUiO,EAAmCrI,GAQtCqI,EAT2C,CAUpDxJ,GACEyJ,GAAyC,SAAUtI,GAEnD,SAASsI,EAAwBnJ,EAAKC,EAAKC,GACvC,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAmCX,OAzCAwR,EAAUkO,EAAyBtI,GAQnCsI,EAAwB/gB,UAAUqZ,QAAU,SAAUiF,GAClD,MAAM,IAAI1b,MAAM,gEAEpBme,EAAwB/gB,UAAUghB,cAAgB,SAAUpJ,GACxD,IAAIuE,EAAQ,2BAA2BrV,KAAK8Q,GAC5C,GAAIuE,GAASA,EAAM,GAAG7d,OAAS,IAAM,EACjC,OAAO6d,EAAM,GAGb,MAAM,IAAI2E,GAAkClJ,EAAKjY,KAAM,kBAAoBiY,IAGnFmJ,EAAwB/gB,UAAU0d,6BAA+B,SAAU9F,GACvE,OAAOA,EAAI5E,cAAgB1P,WAAaqa,EAAOtX,KAAKuR,GAAKxO,SAAS,OAASwO,GAE/EmJ,EAAwB/gB,UAAUmZ,OAAS,SAAUzE,GACjD,IAAIkD,EAAMlD,EAAKL,MAEf,OADAuD,EAAMjY,KAAKqhB,cAAcrhB,KAAK+d,6BAA6B9F,IACpD,CAAEuE,MAAOjQ,OAAO0L,GAAKxO,aAEhC2X,EAAwB/gB,UAAUoZ,aAAe,SAAUxB,GAEvD,OADAA,EAAMjY,KAAKqhB,cAAcrhB,KAAK+d,6BAA6B9F,IACpD,CAAEuE,MAAOjQ,OAAO0L,GAAKxO,aAEhC2X,EAAwB/gB,UAAUuY,cAAgB,WAC9C,IAAIpX,EACJ,OAAOA,EAAK,GACRA,EAAG4f,EAAwB7I,MAAQ,CAC/B,YAAahI,OAAOvQ,KAAKiY,IAAIlD,KAAK,GAAG,SAEzCvT,GAER4f,EAAwB7I,KAAO,sBACxB6I,EA1CiC,CA2C1CpJ,GAEEsJ,GAA2C,SAAUxI,GAErD,SAASwI,EAA0BnjB,EAAOyZ,EAAOjY,GAC7C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,4BACNyB,EAEX,OARAwR,EAAUoO,EAA2BxI,GAQ9BwI,EATmC,CAU5C3J,GACE4J,GAAiC,SAAUzI,GAE3C,SAASyI,EAAgBtJ,EAAKC,EAAKC,GAC/B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAiDX,OAvDAwR,EAAUqO,EAAiBzI,GAQ3ByI,EAAgBlhB,UAAUkZ,QAAU,SAAUtB,GAC1C,MAAI,iBAAiBpM,KAAKoM,IAAQA,EAAItZ,OAAS,IAAM,EAC1C,KAGA,IAAI2iB,GAA0BrJ,EAAKjY,KAAM,kBAAoBiY,IAG5EsJ,EAAgBlhB,UAAU0d,6BAA+B,SAAU9F,GAC/D,OAAOA,EAAI5E,cAAgB1P,WAAaqa,EAAOtX,KAAKuR,GAAKxO,SAAS,OAASwO,GAE/EsJ,EAAgBlhB,UAAUmZ,OAAS,SAAUzE,GACzC,IAAIkD,EAAMlD,EAAKL,MACf,GAAmB,kBAARuD,EACP,MAAO,CAAE6B,IAAK7B,EAAIxO,YAGlBwO,EAAMjY,KAAK+d,6BAA6B9F,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEoZ,MAAOvE,IAGxBsJ,EAAgBlhB,UAAUoZ,aAAe,SAAUxB,GAC/C,GAAmB,kBAARA,EACP,MAAO,CAAE6B,IAAK7B,EAAIxO,YAGlBwO,EAAMjY,KAAK+d,6BAA6B9F,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEoZ,MAAOvE,IAGxBsJ,EAAgBlhB,UAAUqZ,QAAU,SAAUzB,GAC1C,OAAOA,EAAIuE,OAEf+E,EAAgBlhB,UAAUuY,cAAgB,WACtC,OAAO2I,EAAgBhJ,MAI3BgJ,EAAgBhJ,KAAO,eAChBgJ,EAxDyB,CAyDlCvJ,GAEEwJ,GAA2C,SAAU1I,GAErD,SAAS0I,EAA0BrjB,EAAOyZ,EAAOjY,GAC7C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,4BACNyB,EAEX,OARAwR,EAAUsO,EAA2B1I,GAQ9B0I,EATmC,CAU5C7J,GACE8J,GAAiC,SAAU3I,GAE3C,SAAS2I,EAAgBxJ,EAAKC,EAAKC,GAC/B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAuCX,OA7CAwR,EAAUuO,EAAiB3I,GAQ3B2I,EAAgBphB,UAAUkZ,QAAU,SAAUtB,GAC1C,MAAI,iBAAiBpM,KAAKoM,IAAQA,EAAItZ,OAAS,IAAM,EAC1C,KAGA,IAAI6iB,GAA0BvJ,EAAKjY,KAAM,kBAAoBiY,IAG5EwJ,EAAgBphB,UAAU0d,6BAA+B,SAAU9F,GAC/D,OAAOA,EAAI5E,cAAgB1P,WAAaqa,EAAOtX,KAAKuR,GAAKxO,SAAS,OAASwO,GAE/EwJ,EAAgBphB,UAAUmZ,OAAS,SAAUzE,GACzC,IAAIkD,EAAMlD,EAAKL,MACfuD,EAAMjY,KAAK+d,6BAA6B9F,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEoZ,MAAOvE,IAEpBwJ,EAAgBphB,UAAUoZ,aAAe,SAAUxB,GAC/CA,EAAMjY,KAAK+d,6BAA6B9F,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEoZ,MAAOvE,IAEpBwJ,EAAgBphB,UAAUqZ,QAAU,SAAUzB,GAC1C,OAAOA,EAAIuE,OAEfiF,EAAgBphB,UAAUuY,cAAgB,WACtC,OAAO6I,EAAgBlJ,MAI3BkJ,EAAgBlJ,KAAO,eAChBkJ,EA9CyB,CA+ClCzJ,GAEE0J,GAA2C,SAAU5I,GAErD,SAAS4I,EAA0BvjB,EAAOyZ,EAAOjY,GAC7C,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAM7B,EAAOyZ,EAAOjY,IAAYK,KAIxD,OAHA0B,EAAMvD,MAAQA,EACduD,EAAMkW,MAAQA,EACdlW,EAAMzB,KAAO,4BACNyB,EAEX,OARAwR,EAAUwO,EAA2B5I,GAQ9B4I,EATmC,CAU5C/J,GACEgK,GAAiC,SAAU7I,GAE3C,SAAS6I,EAAgB1J,EAAKC,EAAKC,GAC/B,IAAIzW,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKC,EAAKC,IAAQnY,KAIhD,OAHA0B,EAAMuW,IAAMA,EACZvW,EAAMwW,IAAMA,EACZxW,EAAMyW,IAAMA,EACLzW,EAuCX,OA7CAwR,EAAUyO,EAAiB7I,GAQ3B6I,EAAgBthB,UAAUkZ,QAAU,SAAUtB,GAC1C,MAAI,iBAAiBpM,KAAKoM,IAAQA,EAAItZ,OAAS,IAAM,EAC1C,KAGA,IAAI+iB,GAA0BzJ,EAAKjY,KAAM,kBAAoBiY,IAG5E0J,EAAgBthB,UAAU0d,6BAA+B,SAAU9F,GAC/D,OAAOA,EAAI5E,cAAgB1P,WAAaqa,EAAOtX,KAAKuR,GAAKxO,SAAS,OAASwO,GAE/E0J,EAAgBthB,UAAUmZ,OAAS,SAAUzE,GACzC,IAAIkD,EAAMlD,EAAKL,MACfuD,EAAMjY,KAAK+d,6BAA6B9F,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEoZ,MAAOvE,IAEpB0J,EAAgBthB,UAAUoZ,aAAe,SAAUxB,GAC/CA,EAAMjY,KAAK+d,6BAA6B9F,GACxC,IAAI7U,EAAMpD,KAAKuZ,QAAQtB,GACvB,GAAI7U,EACA,MAAMA,EAEV,MAAO,CAAEoZ,MAAOvE,IAEpB0J,EAAgBthB,UAAUqZ,QAAU,SAAUzB,GAC1C,OAAOA,EAAIuE,OAEfmF,EAAgBthB,UAAUuY,cAAgB,WACtC,OAAO+I,EAAgBpJ,MAI3BoJ,EAAgBpJ,KAAO,eAChBoJ,EA9CyB,CA+ClC3J,GAEEwD,GAAS,CACTD,EACAO,EACAM,EACAjD,EACAoD,EACAQ,EACAC,EACAjD,EACAoD,EACAE,EACAK,EACAI,EACAG,EACAE,EACAI,EACAG,EACAO,EACAW,GACAE,GACAC,GACAG,GACAG,GACAE,GACAI,GACAK,GACAE,GACAE,GACAG,GACAE,GACAE,IAGAC,GAAmC,WACnC,SAASA,EAAkBjiB,EAAS8B,GAChCzB,KAAKL,QAAUA,EACfK,KAAKyB,KAAOA,EACZzB,KAAKC,KAAO,sBAEhB,OAAO2hB,EAN2B,GAQtC,SAASxJ,GAAYH,EAAKC,GACtB,GAAIlX,MAAMC,QAAQgX,GACd,OAAO,IAAIsD,EAAUtD,EAAKC,EAAKE,IAEnC,IAAI1E,EAAI8H,GAAOqG,MAAK,SAAU7U,GAAK,OAAOA,EAAEuL,OAASN,EAAIM,QACzD,IAAK7E,EACD,MAAM,IAAIkO,GAAkB,6DAA8D3J,GAE9F,OAAO,IAAIvE,EAAEuE,EAAKC,EAAKE,IAI3B,IAAI0J,GAAmBhc,OAAO+O,IAAI,8BAElC,SAASkN,GAAS9J,EAAKM,GACnB,IAAIzW,EAAIE,EAER,YADa,IAATuW,IAAmBA,EAAOgD,EAAUhD,MACpCvX,MAAMC,QAAQgX,GACP8J,GAAS,CACZxJ,KAAMA,EACNxD,KAAMkD,GACPM,GAEHN,EAAIM,OAASA,IAA6B,QAAnBzW,EAAKmW,EAAIlD,YAAyB,IAAPjT,OAAgB,EAASA,EAAGnD,QAAU,EACjF6U,EAASA,EAAS,GAAIyE,GAAM,CAAElD,KAAM,CAACkD,EAAIlD,KAAK,GAAI,CAC7CwD,KAAMA,EACNxD,KAA0B,QAAnB/S,EAAKiW,EAAIlD,YAAyB,IAAP/S,OAAgB,EAASA,EAAGyF,MAAM,OAG7EwQ,EAEX,SAAS+J,GAAUtV,EAAGC,GAClB,IAAIsV,EAAKF,GAASrV,GACdwV,EAAKH,GAASpV,GAClB,OAAOsV,EAAG1J,OAAS2J,EAAG3J,YACLtZ,IAAZgjB,EAAGlN,WAAkC9V,IAAZijB,EAAGnN,WACb9V,IAAZgjB,EAAGlN,WAAkC9V,IAAZijB,EAAGnN,MACxBkN,EAAGlN,KAAKpW,SAAWujB,EAAGnN,KAAKpW,QAC3BsjB,EAAGlN,KAAKoN,OAAM,SAAU1V,EAAGvG,GAAK,IAAIpE,EAAI,OAAOkgB,GAAUvV,EAAsB,QAAlB3K,EAAKogB,EAAGnN,YAAyB,IAAPjT,OAAgB,EAASA,EAAGoE,eAC5GjH,IAAdgjB,EAAGzJ,aAAsCvZ,IAAdijB,EAAG1J,aACbvZ,IAAdgjB,EAAGzJ,aAAsCvZ,IAAdijB,EAAG1J,QAC1ByJ,EAAGzJ,OAAO7Z,SAAWujB,EAAG1J,OAAO7Z,QAC/BsjB,EAAGzJ,OAAO2J,OAAM,SAAU1V,EAAGvG,GAAK,IAAIpE,EAAI,OAAO2K,KAA4B,QAApB3K,EAAKogB,EAAG1J,cAA2B,IAAP1W,OAAgB,EAASA,EAAGoE,QAKjI,IAAIwP,GAAwB,WACxB,SAASA,EAAOuC,GAGZ,GAFAjY,KAAKwB,IAAM,EACXxB,KAAKoiB,KAAOhK,GAAYH,EAAK,GACzBjY,KAAKoiB,gBAAgBjJ,EACrBnZ,KAAKqiB,OAASriB,KAAKoiB,UAElB,GAAIpiB,KAAKsiB,qBAAqBrK,IAAqB,SAAbA,EAAIM,KAAiB,CAC5D,IAAIgK,EAAMtK,EAAIlD,KAAK,GACf/U,KAAKsiB,qBAAqBC,IAAqB,YAAbA,EAAIhK,OACtCvY,KAAKqiB,OAAS,IAAIlJ,EAAYoJ,EAAK,EAAGnK,MAiIlD,OA7HA1C,EAAO8M,SAAW,SAAUjiB,GACxB,OAAOA,IAAiC,IAA1BA,EAAIuhB,KAEtBpM,EAAO+M,gBAAkB,SAAUxK,GAC/B,IAAIyK,EAAUzK,GACVA,EAAI0K,QACJ3hB,MAAMC,QAAQgX,EAAI0K,OAAOvW,OACzB6L,EAAI0K,OAAOvW,KAAKyV,MAAK,SAAU7U,GAAK,MAAkB,YAAXA,EAAEuL,QACjD,IAAKmK,IAAY1hB,MAAMC,QAAQyhB,EAAQ3N,MACnC,MAAM,IAAI9R,MAAM,4CAEpB,OAAO,IAAIyS,EAAOgN,EAAQ3N,KAAK,KAEnCW,EAAOrV,UAAUiiB,qBAAuB,SAAUrK,GAC9C,MAAO,SAAUA,GAAOjX,MAAMC,QAAQgX,EAAIlD,OAE9CW,EAAOrV,UAAUuiB,yBAA2B,SAAUriB,GAElD,OAAIP,KAAKoiB,gBAAgB7G,GAAavb,KAAKoiB,gBAAgBrI,IACnD/Z,KAAKoiB,KAAK1J,kBAAmC,kBAARnY,GAAgD,IAA5BwS,OAAO+C,KAAKvV,GAAK5B,OACnE4B,EAAIwS,OAAO+C,KAAKvV,GAAK,IAG7BA,GAEXmV,EAAOrV,UAAUqZ,QAAU,SAAUzB,EAAKoC,GACtC,IAAIqI,EAAU1iB,KAAKoiB,KAAK1I,QAAQzB,EAAKoC,GACrC,OAAOra,KAAK4iB,yBAAyBF,IAEzChN,EAAOrV,UAAU2V,UAAY,SAAUiC,GACnC,GAAIjY,KAAKoiB,gBAAgBjJ,GAAe5I,OAAOO,UAAUP,OAAO0H,IAC5D,OAAO,EAEX,IAEI,OADAjY,KAAKoiB,KAAK3I,aAAaxB,IAChB,EAEX,MAAOjV,GACH,OAAO,IAGf0S,EAAOrV,UAAUwiB,oBAAsB,SAAUC,EAAMzI,GACnD,IAAKra,KAAKqiB,OACN,MAAM,IAAIpf,MAAM,qBAEpB,IAAKjC,MAAMC,QAAQ6hB,GACf,MAAM,IAAI7f,MAAM,6CAEpB,IAAI8f,EAAYD,EAAK3Y,KAAI,SAAUrI,GAC/B,IAAIhD,EAAMgD,EAAGhD,IAAKX,EAAQ2D,EAAG3D,MAC7B,MAAO,CAAG4W,KAAM,CAACjW,EAAKX,OAE1B,OAAO6B,KAAKqiB,OAAO3I,QAAQqJ,EAAW1I,IAE1C3E,EAAOrV,UAAU2iB,qBAAuB,SAAUlkB,EAAKub,GACnD,IAAKra,KAAKqiB,OACN,MAAM,IAAIpf,MAAM,qBAEpB,OAAOjD,KAAKqiB,OAAO/I,YAAYI,QAAQ5a,EAAKub,IAEhD3E,EAAOrV,UAAU4iB,gBAAkB,SAAUnkB,GACzC,IAAKkB,KAAKqiB,OACN,MAAM,IAAIpf,MAAM,qBAEpB,IACI,OAAOjD,KAAKqiB,OAAOhJ,UAAUgC,YAAYvc,GAE7C,MAAOkE,GACH,MAAM,IAAIC,MAAM,iCAAmCD,KAG3D0S,EAAOrV,UAAUmZ,OAAS,SAAU0J,GAChC,IACI,OAAOljB,KAAKoiB,KAAK3I,aAAayJ,GAElC,MAAOlgB,GACH,GAAIA,aAAc2U,EACd,MAAM3U,EAEV,MAAM,IAAIC,MAAM,oCAAsCD,KAG9D0S,EAAOrV,UAAUuY,cAAgB,WAC7B,OAAO5Y,KAAK4iB,yBAAyB5iB,KAAKoiB,KAAKxJ,kBAKnDlD,EAAOrV,UAAU8iB,aAAe,SAAUC,EAAIC,GAC1C,IAAIvhB,EACAJ,EAAQ1B,KACZ,IAAKA,KAAKqiB,OACN,MAAM,IAAIpf,MAAM,qBAEpB,IAAIof,EAASe,EAAG7F,QAAO,SAAUC,EAAM5N,GACnC,OAAO4D,EAASA,EAAS,GAAIgK,GAAO9b,EAAMmhB,oBAAoBjT,EAAQ0T,SAAS,GAAGC,SAASC,iBAAiBC,iBAC7G,IACH,OAAOjQ,EAASA,EAAS,GAAIxT,KAAK0Z,QAAQ2J,KAAUvhB,EAAK,GAAIA,EAAG9B,KAAKqiB,OAAOvK,SAAWuK,EAAQvgB,KAWnG4T,EAAOrV,UAAUqjB,wBAA0B,SAAUhB,EAASiB,GAC1D,OAAO3jB,KAAK4jB,UAAU5jB,KAAKoiB,KAAK,OAAQM,EAASiB,IAErDjO,EAAOrV,UAAUujB,UAAY,SAAUtG,EAAQoF,EAASmB,GACpD,GAAI7B,GAAU6B,EAAavG,GACvB,OAAOoF,EAEX,GAAI1hB,MAAMC,QAAQqc,IAA8B,SAAnBA,EAAO,QAAoB,CACpD,IAAIwG,EAAM/B,GAASzE,GACf9c,EAAMuhB,GAASW,EAAS,QAC5B,QAAiBzjB,IAAb6kB,EAAI/O,WAAmC9V,IAAbuB,EAAIuU,KAC9B,MAAM,IAAI9R,MAAM,4BAEpB,OAAOjD,KAAK4jB,UAAUE,EAAI/O,KAAK,GAAIvU,EAAIuU,KAAK,GAAI8O,IAC5C7jB,KAAK4jB,UAAUE,EAAI/O,KAAK,GAAIvU,EAAIuU,KAAK,GAAI8O,KAG9CnO,EA3IgB,GA6I3BlU,EAAKsgB,GAKL,IAAIiC,GAAiC,WACjC,SAASA,EAAgB9L,GACrBjY,KAAKoiB,KAAOhK,GAAYH,EAAK,GAmEjC,OAjEA8L,EAAgBtB,gBAAkB,SAAUxK,GACxC,IAAI+L,EAAY/L,GACZA,EAAI0K,QACJ3hB,MAAMC,QAAQgX,EAAI0K,OAAOvW,OACzB6L,EAAI0K,OAAOvW,KAAKyV,MAAK,SAAU7U,GAAK,MAAkB,cAAXA,EAAEuL,QACjD,IAAKyL,IAAchjB,MAAMC,QAAQ+iB,EAAUjP,MACvC,MAAM,IAAI9R,MAAM,4CAEpB,OAAO,IAAI8gB,EAAgBC,EAAUjP,KAAK,KAE9ChC,OAAOsE,eAAe0M,EAAgB1jB,UAAW,uBAAwB,CACrE2W,IAAK,WACD,OAAQhX,KAAKoiB,gBAAgBrI,GACxB/Z,KAAKoiB,gBAAgBnE,GAAeje,KAAKoiB,KAAKlE,qBAAsBnE,GAE7EzC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe0M,EAAgB1jB,UAAW,gBAAiB,CAC9D2W,IAAK,WACD,OAAIhX,KAAKikB,sBAC2C,MAAzClR,OAAO+C,KAAK9V,KAAK4Y,iBAAiB,IAMjDtB,YAAY,EACZC,cAAc,IAElBwM,EAAgB1jB,UAAUqZ,QAAU,SAAUzB,EAAKoC,GAC/C,OAAOra,KAAKoiB,KAAK1I,QAAQzB,EAAKoC,IAElC0J,EAAgB1jB,UAAUmZ,OAAS,WAE/B,IADA,IAAIzE,EAAO,GACFoL,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCpL,EAAKoL,GAAMvM,UAAUuM,GAEzB,IACI,OAAOngB,KAAKoiB,KAAK5I,OAAOzE,EAAKmP,WAEjC,MAAOlhB,GACH,GAAIA,aAAc2U,EACd,MAAM3U,EAEV,MAAM,IAAIC,MAAM,+BAAiCD,KAGzD+gB,EAAgB1jB,UAAUoZ,aAAe,SAAUyJ,GAC/C,IACI,OAAOljB,KAAKoiB,KAAK3I,aAAayJ,GAElC,MAAOlgB,GACH,GAAIA,aAAc2U,EACd,MAAM3U,EAEV,MAAM,IAAIC,MAAM,sCAAwCD,KAGhE+gB,EAAgB1jB,UAAUuY,cAAgB,WACtC,OAAO5Y,KAAKoiB,KAAKxJ,iBAErBmL,EAAgB1jB,UAAU8jB,kBAAoB,WAC1C,OAAOnkB,KAAKoiB,KAAKzJ,oBAEdoL,EArEyB,GAoFhCnF,GAAY9Y,W,+DC/1FhB,oE,gNCqBIoI,yBAEOkW,EAAA,M,8BADH,iBAAmB,CAAnBpW,yBAAmBqW,O,2EC8NfxW,gCAAuB,UAAnB,kBAAc,I,+BAWoB,S,+BAE2B,e,+BAS3B,S,+BAE4B,e,+BAS5B,S,+BAE0B,e,EAQ5DA,gCAAmC,YAA7B,0BAAsB,G,+BAAO,uE,EAS/BA,gCAA6B,UAAzB,wBAAoB,G,+BAavB,gB,EAoCTA,gCAA2B,UAAvB,sBAAkB,G,yCAMkB,c,+BAYE,Y,EAY9BA,gCAAc,UAAV,SAAK,G,EACTA,gCAAa,UAAT,QAAI,G,+BAc8B,c,EAqBlCA,gCAAgB,YAAV,OAAG,G,+BAGyC,W,6CAwChC,mI,kaA/N1CL,gCAoOM,OApOAG,MAAK,4BAAED,SAAOE,UAApB,CACII,yBAGEsW,EAAA,CAFGC,KAAM7W,uBACN8W,UAAO,+BAAE9W,wBAAoB,KAFlC,iBAKAM,yBAIWyW,EAAA,MAHUC,MAAK,sBACjB,gBADqBtU,EACrB,EADqBA,QACrB,MAD4B,2DACzBA,GAAU,YAAS,O,MAI/BvC,gCAgDM,OAhDAF,MAAK,4BAAED,SAAOiX,QAApB,CACIC,EACA/W,gCAEM,OAFAF,MAAK,4BAAED,SAAOmX,cAAa,uDAEjC,GAEAhX,gCAkCM,OAlCAF,MAAK,4BAAED,SAAOoX,QAApB,CACIjX,gCAUM,OAVAF,MAAK,4BAAED,SAAOuE,OAApB,CACIpE,gCAA8C,OAAxCF,MAAK,4BAAED,SAAOqX,YAAW,YAAS,GACxClX,gCAEM,OAFAF,MAAK,4BAAED,SAAOsX,aAApB,6BACOtX,aAAWuX,KAAK9mB,MAAM4d,QAAO,IAAM,QAC1C,GACAlO,gCAIM,OAJAF,MAAK,4BAAED,SAAOwX,WAApB,GAEIrX,gCAAqD,YAAAsX,6BAA5CzX,aAAWuX,KAAKG,IAAIrJ,QAAO,IAAM,OAAI,GAA9C,GAFJ,IALJ,GAWAlO,gCAUM,OAVAF,MAAK,4BAAED,SAAOuE,OAApB,CACIpE,gCAA+C,OAAzCF,MAAK,4BAAED,SAAOqX,YAAW,aAAU,GACzClX,gCAEM,OAFAF,MAAK,4BAAED,SAAOsX,aAApB,6BACOtX,aAAW2X,MAAMlnB,MAAM4d,QAAO,IAAM,QAC3C,GACAlO,gCAIM,OAJAF,MAAK,4BAAED,SAAOwX,WAApB,GAEIrX,gCAAsD,YAAAsX,6BAA7CzX,aAAW2X,MAAMD,IAAIrJ,QAAO,IAAM,OAAI,GAA/C,GAFJ,IALJ,GAWAlO,gCAUM,OAVAF,MAAK,4BAAED,SAAOuE,OAApB,CACIpE,gCAA6C,OAAvCF,MAAK,4BAAED,SAAOqX,YAAW,WAAQ,GACvClX,gCAEM,OAFAF,MAAK,4BAAED,SAAOsX,aAApB,6BACOtX,aAAW4X,IAAInnB,MAAM4d,QAAO,IAAM,QACzC,GACAlO,gCAIM,OAJAF,MAAK,4BAAED,SAAOwX,WAApB,GAEIrX,gCAAoD,YAAAsX,6BAA3CzX,aAAW4X,IAAIF,IAAIrJ,QAAO,IAAM,OAAI,GAA7C,GAFJ,IALJ,IAvBJ,GAoCAlO,gCAKM,OALAF,MAAK,4BAAED,SAAO6X,OAApB,CACIvX,yBAA8BG,EAAA,CAAxBlO,KAAK,OAAOmO,KAAK,OACvBoX,KAFJ,IA1CJ,GAkDA3X,gCAiDM,OAjDAF,MAAK,4BAAED,SAAOiX,QAApB,CACI9W,gCAiBM,OAjBAF,MAAK,4BAAED,SAAO+X,SAApB,CACI5X,gCAKM,OALAF,MAAK,4BAAED,SAAO+B,OAApB,CACIiW,EACA7X,gCAEM,OAFAF,MAAK,4BAAED,SAAOmX,cAAa,kDAEjC,IAJJ,GAOA7W,yBAQCqB,EAAA,CAPI5B,QAAK,+BAAEC,wBAAoB,IAC3B4B,KAAgC5B,uBAAqB/O,OAAM,sBAG5DyP,KAAK,QACJsB,UAAWhC,uBAAqB/O,QANrC,C,8BAOK,iBAAY,O,KAPjB,wBARJ,GAmBW+O,uBAAqB/O,iCAAhC6O,gCAQM,O,MARmCG,MAAK,4BAAED,SAAOL,QAAvD,6BACIG,gCAMEqC,cAAA,KAAAC,wBALqBpC,iCAA6B,SAAzCwC,G,gCADXhC,yBAMEyX,EAAA,CAJG7mB,IAAKoR,EAAS0V,MAAMC,GACpBD,MAAO1V,EAAS0V,MACjBE,IAAA,GACAC,WAAA,IALJ,4BADJ,8BASAvY,gCAQM,O,MAROG,MAAK,4BAAED,SAAOsY,QAA3B,CACIhY,yBAMSiY,EAAA,CANAC,QAASxY,eAAayY,mBAAoB7W,KAAK,QAAxD,C,8BACI,iBAIE,2DAHE5B,eAAayY,mBAAb,8D,KAFR,gBADJ,KAWiCzY,eAAayY,oBAA2CzY,uBAAqB/O,OAAM,4BADpHuP,yBASEkY,EAAA,C,iBAJW1Y,0B,qDAAAA,0BAAuB2Y,IAC/B/V,MAAO5C,uBAAqB/O,OAC5B8R,MAAO,EACP9C,MAAK,4BAAED,SAAO4Y,aARnB,gFAvCJ,GAmDAzY,gCAkHM,OAlHAF,MAAK,4BAAED,SAAOiX,QAApB,CACI4B,EACA1Y,gCAAsD,OAAhDF,MAAK,4BAAED,SAAOmX,cAAa,kBAAe,GAEhDhX,gCAuGM,OAvGAF,MAAK,4BAAED,SAAO8Y,gBAApB,CACiB9Y,qBAAmB/O,iCAAhC6O,gCA8EQ,QAAAiZ,EAAA,CA7EJ5Y,gCA2BK,WA1BDA,gCAWK,MAXAJ,QAAK,+BAAEC,SAAM,WAAlB,GAGuB,YAATA,OAAKgZ,MAAI,yBADnBxY,yBAQEC,EAAA,C,MANElO,KAAK,aACLmO,KAAK,KACJT,MAAK,6BAAyCD,SAAOiZ,UAAyD,OAATjZ,OAAKgZ,MAAiBhZ,SAAOwW,WAJvI,4DAUJrW,gCAWK,MAXAJ,QAAK,+BAAEC,SAAM,aAAlB,GAGyB,YAAXA,OAAKoT,QAAM,yBADrB5S,yBAQEC,EAAA,C,MANElO,KAAK,aACLmO,KAAK,KACJT,MAAK,6BAAyCD,SAAOiZ,UAA2D,OAAXjZ,OAAKoT,QAAmBpT,SAAOwW,WAJzI,4DAUJ0C,EACAC,KAmDA,2BAhDJrZ,gCA+CKqC,cAAA,KAAAC,wBA9CkBpC,+BAA2B,SAAvCoZ,G,gCADXtZ,gCA+CK,MA7CA1O,IAAKgoB,EAASjB,IAFnB,CAIIhY,gCAoBK,WAnBDA,gCAkBM,OAlBAF,MAAK,4BAAED,SAAOqZ,OAApB,CACIlZ,gCAEM,OAFAF,MAAK,4BAAED,SAAOsZ,aAApB,CACIhZ,yBAA+BG,EAAA,CAAzBlO,KAAK,QAAQmO,KAAK,QAD5B,GAIAP,gCAYM,OAZAF,MAAK,4BAAED,SAAOuZ,OAApB,CACIpZ,gCAGM,OAHAF,MAAK,4BAAED,SAAOzN,OAApB,GAEI4N,gCAA+B,YAAzB,IAACsX,6BAAG2B,EAASjB,IAAE,IAFzB,GAIAhY,gCAMM,OANAF,MAAK,4BAAED,SAAOwZ,OAApB,iCAEY9I,KAAuD0I,EAASlB,MAAMuB,kBAAiEC,sBAAkB,IAPzK,IALJ,KAoBJvZ,gCAQK,wCARD,KACCsX,6BACGzX,mBAAuDoZ,EAAShG,OAAO/E,QAAO,GAA9E,MAIF,IACF,GAAAsL,IAEJxZ,gCAKK,WAJDG,yBAGcsZ,EAAA,CAHA7gB,GAAE,kBAAaqgB,EAASlB,MAAMC,KAA5C,C,8BAAkD,iBAE9C,mCAAqC,YAA/B,IAACV,6BAAG2B,EAASlB,MAAMC,IAAE,O,KAF/B,eAKJhY,gCAMK,UAAAsX,6BAJgB,UAAb2B,EAASxX,KAAT,wBAFR,QAxCJ,SA9BJ,uCAgFAzB,gCAqBM,OArBAF,MAAK,4BAAED,SAAO6Z,SAApB,CACI1Z,gCAAwD,YAAAsX,6BAA/CzX,qBAAmB/O,QAAS,eAAY,GAGvC+O,qBAAmB/O,iCAD7B6O,gCAiBM,O,MAfDG,MAAK,4BAAED,SAAO8Z,gBAFnB,6BAIIha,gCAYMqC,cAAA,KAAAC,wBAXamB,KAAKC,KAAuCxD,qBAAmB/O,OAAM,IAWlF,SAXKgR,G,gCADXnC,gCAYM,OARD1O,IAAK6Q,EACLlC,QAAK,mBAAEC,qBAAqBiC,GAC5BhC,MAAK,6BAAqCD,SAAOiC,KAAuCjC,sBAAsBiC,GAAQjC,SAAOkC,WANlI,6BAWOD,GAAI,GAAA8X,MAXX,OAJJ,4CAHJ,IAjFJ,GAyGA5Z,gCAIM,OAJAF,MAAK,4BAAED,SAAO6X,OAApB,CACIvX,yBAA8BG,EAAA,CAAxBlO,KAAK,OAAOmO,KAAK,OAAvB,GADJ,IA7GJ,IAjHJ,G,uLCrNAoF,EAAW,WAQX,OAPAA,EAAWT,OAAOU,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGzN,EAAI,EAAGN,EAAIgO,UAAUjV,OAAQuH,EAAIN,EAAGM,IAE5C,IAAK,IAAIxF,KADTiT,EAAIC,UAAU1N,GACAyN,EAAOZ,OAAO1S,UAAUM,eAAewF,KAAKwN,EAAGjT,KAAIgT,EAAEhT,GAAKiT,EAAEjT,IAE9E,OAAOgT,GAEJF,EAASK,MAAM7T,KAAM4T,YAGhC,SAAS8T,EAAO/T,EAAG1N,GACf,IAAIyN,EAAI,GACR,IAAK,IAAIhT,KAAKiT,EAAOZ,OAAO1S,UAAUM,eAAewF,KAAKwN,EAAGjT,IAAMuF,EAAE0hB,QAAQjnB,GAAK,IAC9EgT,EAAEhT,GAAKiT,EAAEjT,IACb,GAAS,MAALiT,GAAqD,oBAAjCZ,OAAO6U,sBACtB,KAAI1hB,EAAI,EAAb,IAAgBxF,EAAIqS,OAAO6U,sBAAsBjU,GAAIzN,EAAIxF,EAAE/B,OAAQuH,IAC3DD,EAAE0hB,QAAQjnB,EAAEwF,IAAM,GAAK6M,OAAO1S,UAAUwnB,qBAAqB1hB,KAAKwN,EAAGjT,EAAEwF,MACvEwN,EAAEhT,EAAEwF,IAAMyN,EAAEjT,EAAEwF,KAE1B,OAAOwN,EAGX,SAASoU,EAAU/T,EAASgU,EAAY3iB,EAAG4iB,GACvC,SAASC,EAAM9pB,GAAS,OAAOA,aAAiBiH,EAAIjH,EAAQ,IAAIiH,GAAE,SAAU/C,GAAWA,EAAQlE,MAC/F,OAAO,IAAKiH,IAAMA,EAAIhD,WAAU,SAAUC,EAASC,GAC/C,SAAS4lB,EAAU/pB,GAAS,IAAMqW,EAAKwT,EAAU3hB,KAAKlI,IAAW,MAAO8H,GAAK3D,EAAO2D,IACpF,SAASkiB,EAAShqB,GAAS,IAAMqW,EAAKwT,EAAU,SAAS7pB,IAAW,MAAO8H,GAAK3D,EAAO2D,IACvF,SAASuO,EAAKlI,GAAUA,EAAOhG,KAAOjE,EAAQiK,EAAOnO,OAAS8pB,EAAM3b,EAAOnO,OAAOiqB,KAAKF,EAAWC,GAClG3T,GAAMwT,EAAYA,EAAUnU,MAAME,EAASgU,GAAc,KAAK1hB,WAItE,SAASyN,EAAYC,EAASjU,GAC1B,IAAsGkU,EAAG/G,EAAGyG,EAAGO,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPV,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOW,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAE5N,KAAMkO,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXzO,SAA0BmO,EAAEnO,OAAOC,UAAY,WAAa,OAAO/F,OAAUiU,EACvJ,SAASM,EAAK3O,GAAK,OAAO,SAAU6G,GAAK,OAAO+H,EAAK,CAAC5O,EAAG6G,KACzD,SAAS+H,EAAKC,GACV,GAAIT,EAAG,MAAM,IAAIb,UAAU,mCAC3B,MAAOe,EAAG,IACN,GAAIF,EAAI,EAAG/G,IAAMyG,EAAY,EAARe,EAAG,GAASxH,EAAE,UAAYwH,EAAG,GAAKxH,EAAE,YAAcyG,EAAIzG,EAAE,YAAcyG,EAAEvN,KAAK8G,GAAI,GAAKA,EAAE5G,SAAWqN,EAAIA,EAAEvN,KAAK8G,EAAGwH,EAAG,KAAKnO,KAAM,OAAOoN,EAE3J,OADIzG,EAAI,EAAGyG,IAAGe,EAAK,CAAS,EAARA,EAAG,GAAQf,EAAEvV,QACzBsW,EAAG,IACP,KAAK,EAAG,KAAK,EAAGf,EAAIe,EAAI,MACxB,KAAK,EAAc,OAAXP,EAAEC,QAAgB,CAAEhW,MAAOsW,EAAG,GAAInO,MAAM,GAChD,KAAK,EAAG4N,EAAEC,QAASlH,EAAIwH,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKP,EAAEI,IAAII,MAAOR,EAAEG,KAAKK,MAAO,SACxC,QACI,GAAMhB,EAAIQ,EAAEG,OAAMX,EAAIA,EAAE/U,OAAS,GAAK+U,EAAEA,EAAE/U,OAAS,MAAkB,IAAV8V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEP,EAAI,EAAG,SACjG,GAAc,IAAVO,EAAG,MAAcf,GAAMe,EAAG,GAAKf,EAAE,IAAMe,EAAG,GAAKf,EAAE,IAAM,CAAEQ,EAAEC,MAAQM,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYP,EAAEC,MAAQT,EAAE,GAAI,CAAEQ,EAAEC,MAAQT,EAAE,GAAIA,EAAIe,EAAI,MAC7D,GAAIf,GAAKQ,EAAEC,MAAQT,EAAE,GAAI,CAAEQ,EAAEC,MAAQT,EAAE,GAAIQ,EAAEI,IAAIxT,KAAK2T,GAAK,MACvDf,EAAE,IAAIQ,EAAEI,IAAII,MAChBR,EAAEG,KAAKK,MAAO,SAEtBD,EAAK3U,EAAKqG,KAAK4N,EAASG,GAC1B,MAAOjO,GAAKwO,EAAK,CAAC,EAAGxO,GAAIgH,EAAI,EAAK,QAAU+G,EAAIN,EAAI,EACtD,GAAY,EAARe,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEtW,MAAOsW,EAAG,GAAKA,EAAG,QAAK,EAAQnO,MAAM,IAIlF,IAAI+hB,EAAe,OACfC,EAAoB,CAAE3D,MAAO,QAE7B4D,EAAY,EAAQ,QACpBC,EAAY,EAAQ,QAUxB,SAASC,EAAgBhnB,EAAMqU,GAC3B,IAAI4S,EAAc1nB,MAAMC,QAAQQ,GACZ,qBAATqU,IACPA,EAAO/C,OAAO+C,KAAKrU,IAEvB,IAAIsB,EAAW2lB,EAAc,GAAK,GAelC,OAdA5S,EAAK5U,SAAQ,SAAUpC,GACnB,IACI8b,EADAzZ,EAAOonB,EAAU9mB,EAAM3C,GAE3B,GAAoB,qBAATqC,EAAX,CAGA,GAAIH,MAAMC,QAAQE,GAGd,OAFAyZ,EAAM6N,EAAgBtnB,QACtBqnB,EAAUzlB,EAAUjE,EAAK8b,GAG7BA,EAAM,IAAI,IAAUzZ,GACpBqnB,EAAUzlB,EAAUjE,EAAK8b,OAEtB7X,EAGX,IAg7BI4lB,EAh7BAC,EAAa,KAImB,WAQhC,SAASC,EAAeC,EAAWC,QACnB,IAARA,IAAkBA,EAAMH,GAC5B5oB,KAAK8oB,UAAYA,EACjB9oB,KAAK+oB,IAAMA,EACX/oB,KAAKgpB,OAAS,GAElBH,EAAexoB,UAAU4oB,iBAAmB,WACxC,OAAOjpB,KAAKgpB,QAMhBH,EAAexoB,UAAU6oB,oBAAsB,WAC3C,IAAK,IAAIpqB,KAAOkB,KAAKgpB,cACVhpB,KAAKgpB,OAAOlqB,IAG3B+pB,EAAexoB,UAAU8oB,eAAiB,SAAUC,EAAQC,EAAeC,EAAiBC,GACxF,IAAIC,EAAiB,GAIrB,OAHAF,EAAgBpoB,SAAQ,SAAUuoB,GAC9BD,EAAmC,kBAAVC,EAAsBD,EAAiB3mB,KAAKS,UAAUmmB,GAAS,IAAMD,EAAiBC,EAAQ,OAEpHF,EAAgBH,EAAS,IAAMC,EAAgB,IAAMG,EAAiB,IAAM3mB,KAAKS,UAAUimB,GAAiBH,EAAS,IAAMC,EAAgB,IAAMG,GAE5JX,EAAexoB,UAAU8W,IAAM,SAAUrY,GACrC,OAAOA,KAAOkB,KAAKgpB,QAEvBH,EAAexoB,UAAU2W,IAAM,SAAUlY,GACrC,OAAOkB,KAAKgpB,OAAOlqB,GAAKiE,UAE5B8lB,EAAexoB,UAAUqpB,IAAM,SAAU5qB,EAAKiE,GAC1C,IAAIvB,EACAE,EAAQ1B,KACR2pB,EAASC,YAAW,WACpB,OAAOloB,EAAMmoB,OAAO/qB,KACrBkB,KAAK+oB,KACRhW,OAAOU,OAAOzT,KAAKgpB,QAASxnB,EAAK,GAAIA,EAAG1C,GAAO,CAAE6qB,OAAQA,EAAQ5mB,SAAUA,GAAYvB,KAE3FqnB,EAAexoB,UAAUwpB,OAAS,SAAU/qB,GACpCA,KAAOkB,KAAKgpB,eACLhpB,KAAKgpB,OAAOlqB,IAW3B+pB,EAAexoB,UAAUypB,aAAe,SAAUtoB,GAC9C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,eAAgB,CAACpF,IACnE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUgB,aAAa,CAAEnF,MAAOA,IAChD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAU2pB,cAAgB,SAAUxoB,GAC/C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,gBAAiB,CAACpF,IACpE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUkB,cAAc,CAAErF,MAAOA,IACjD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAU4pB,WAAa,SAAUrN,EAASpb,GACrD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,aAAc,CAACpF,EAAO/H,IACxE5c,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUmB,WAAWrN,EAAS,CAAE+H,MAAOA,IACvD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAU6pB,WAAa,SAAUtN,EAASpb,GACrD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,aAAc,CAACpF,EAAO/H,IACxE5c,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUoB,WAAWtN,EAAS,CAAE+H,MAAOA,IACvD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAU8pB,UAAY,SAAUvN,EAASpb,GACpD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,YAAa,CAACpF,EAAO/H,IACvE5c,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUqB,UAAUvN,EAAS,CAAE+H,MAAOA,IACtD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAU+pB,YAAc,SAAUxN,EAASpb,GACtD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,cAAe,CAACpF,EAAO/H,IACzE5c,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUsB,YAAYxN,EAAS,CAAE+H,MAAOA,IACxD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAUgqB,cAAgB,SAAUzN,EAASpb,GACxD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,gBAAiB,CAACpF,EAAO/H,IAC3E5c,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUuB,cAAczN,EAAS,CAAE+H,MAAOA,IAC1D3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAUiqB,YAAc,SAAU1N,EAASpb,GACtD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,cAAe,CAACpF,EAAO/H,IACzE5c,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUwB,YAAY1N,EAAS,CAAE+H,MAAOA,IACxD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAgBtC8lB,EAAexoB,UAAUkqB,aAAe,SAAU3N,EAAS9d,EAAK0C,GAC5D,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIwqB,EAAQznB,EACZ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAwoB,EAASxqB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,eAAgB,CAACpF,EAAO/H,EAAS9d,IACtFkB,KAAKmX,IAAIqT,GACF,CAAC,EAAcxqB,KAAKgX,IAAIwT,KAG/BznB,EAAW/C,KAAK8oB,UAAUyB,aAAa3N,EAAS9d,EAAK,CAAE6lB,MAAOA,IAC9D3kB,KAAK0pB,IAAIc,EAAQznB,GACV,CAAC,EAAcA,WAetC8lB,EAAexoB,UAAUoqB,cAAgB,SAAU5E,EAAI6E,EAAMlpB,GACzD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,gBAAiB,CAACpF,EAAOkB,EAAI6E,IAC/E1qB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAU2B,cAAc5E,EAAI6E,EAAM,CAAE/F,MAAOA,IAC3D3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAUsqB,aAAe,SAAU/N,EAASpb,GACvD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,eAAgB,CAACpF,EAAO/H,IAC1E5c,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAU6B,aAAa/N,EAAS,CAAE+H,MAAOA,IACzD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAUuqB,aAAe,SAAUppB,GAC9C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,eAAgB,CAACpF,IACnE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAU8B,aAAa,CAAEjG,MAAOA,IAChD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAgBtC8lB,EAAexoB,UAAUwqB,SAAW,SAAUrpB,GAC1C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,WAAY,CAACpF,IAC/D3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAU+B,SAAS,CAAElG,MAAOA,IAC5C3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAUyqB,eAAiB,SAAUtpB,GAChD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,iBAAkB,CAACpF,IACrE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUgC,eAAe,CAAEnG,MAAOA,IAClD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAU0qB,iBAAmB,SAAUvpB,GAClD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,mBAAoB,CAACpF,IACvE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUiC,iBAAiB,CAAEpG,MAAOA,IACpD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAU2qB,gBAAkB,SAAUjW,EAAMvT,QAC1C,IAATuT,IAAmBA,EAAO,IAC9B,IAAIjT,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,kBAAmB,CAACpF,EAAO5P,IAC7E/U,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUkC,gBAAgBjW,EAAM,CAAE4P,MAAOA,IACzD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAU4qB,mBAAqB,SAAUlW,EAAMvT,QAC7C,IAATuT,IAAmBA,EAAO,IAC9B,IAAIjT,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,qBAAsB,CAACpF,EAAO5P,IAChF/U,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUmC,mBAAmBlW,EAAM,CAAE4P,MAAOA,IAC5D3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAYtC8lB,EAAexoB,UAAU6qB,cAAgB,SAAU1pB,GAC/C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,gBAAiB,CAACpF,IACpE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUoC,cAAc,CAAEvG,MAAOA,IACjD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAU8qB,WAAa,SAAU3pB,GAC5C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,aAAc,CAACpF,IACjE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUqC,WAAW,CAAExG,MAAOA,IAC9C3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAetC8lB,EAAexoB,UAAU+qB,qBAAuB,SAAU5pB,GACtD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,uBAAwB,CAACpF,IAC3E3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUsC,qBAAqB,CAAEzG,MAAOA,IACxD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAUgrB,mBAAqB,SAAU7pB,GACpD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,qBAAsB,CAACpF,IACzE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUuC,mBAAmB,CAAE1G,MAAOA,IACtD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAUirB,iBAAmB,SAAU9pB,GAClD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,mBAAoB,CAACpF,IACvE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUwC,iBAAiB,CAAE3G,MAAOA,IACpD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAUkrB,iBAAmB,SAAU/pB,GAClD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,mBAAoB,CAACpF,IACvE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUyC,iBAAiB,CAAE5G,MAAOA,IACpD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAUmrB,aAAe,SAAUhqB,GAC9C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,eAAgB,CAACpF,IACnE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAU0C,aAAa,CAAE7G,MAAOA,IAChD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAUorB,gBAAkB,SAAUhqB,EAAMD,GACvD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAK8oB,UAAU2C,gBAAgBhqB,EAAM,CAAEkjB,MAAOA,YAYhFkE,EAAexoB,UAAUqrB,gBAAkB,SAAUC,GACjD,OAAO7D,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAK8oB,UAAU4C,gBAAgBC,WAajE9C,EAAexoB,UAAUurB,mBAAqB,SAAUtX,EAAK9S,GACzD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAK8oB,UAAU8C,mBAAmBtX,EAAK,CAAEqQ,MAAOA,YAclFkE,EAAexoB,UAAUwrB,eAAiB,SAAUC,EAAUtqB,GAC1D,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,iBAAkB,CAACpF,EAAOmH,IAC5E9rB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAU+C,eAAeC,EAAU,CAAEnH,MAAOA,IAC5D3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAatC8lB,EAAexoB,UAAU0rB,aAAe,SAAUtX,EAAIjT,GAClD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAK8oB,UAAUiD,aAAatX,EAAI,CAAEkQ,MAAOA,YAY3EkE,EAAexoB,UAAU2rB,QAAU,SAAU5f,EAAM5K,GAC/C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAK8oB,UAAUkD,QAAQ5f,EAAM,CAAEuY,MAAOA,YAIxEkE,EAAexoB,UAAU4rB,WAAa,WAClC,OAAOnE,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUwB,GAE/B,OADA1C,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,aAAc,IAChE/pB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUmD,aAC1BjsB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAgBtC8lB,EAAexoB,UAAU6rB,SAAW,SAAUzqB,EAAMD,GAChD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,WAAY,CAACpF,EAAOljB,IACtEzB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUoD,SAASzqB,EAAM,CAAEkjB,MAAOA,IAClD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAStC8lB,EAAexoB,UAAU0pB,UAAY,WACjC,OAAO/pB,KAAK8oB,UAAUiB,aAY1BlB,EAAexoB,UAAU8rB,iBAAmB,SAAU3qB,GAClD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,mBAAoB,CAACpF,IACvE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUqD,iBAAiB,CAAExH,MAAOA,IACpD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WAetC8lB,EAAexoB,UAAU+rB,mBAAqB,SAAU5qB,GACpD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,qBAAsB,CAACpF,IACzE3kB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUsD,mBAAmB,CAAEzH,MAAOA,IACtD3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAUgsB,mBAAqB,SAAUxG,EAAIrkB,GACxD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,qBAAsB,CAACpF,EAAOkB,IAChF7lB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUuD,mBAAmBxG,EAAI,CAAElB,MAAOA,IAC1D3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,WActC8lB,EAAexoB,UAAUisB,yBAA2B,SAAUR,EAAUtqB,GACpE,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIlB,EAAKiE,EACT,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAE/B,OADAlD,EAAMkB,KAAKmpB,eAAenpB,KAAK8oB,UAAUiB,YAAa,2BAA4B,CAACpF,EAAOmH,IACtF9rB,KAAKmX,IAAIrY,GACF,CAAC,EAAckB,KAAKgX,IAAIlY,KAG/BiE,EAAW/C,KAAK8oB,UAAUwD,yBAAyBR,EAAU,CAAEnH,MAAOA,IACtE3kB,KAAK0pB,IAAI5qB,EAAKiE,GACP,CAAC,EAAcA,YAp6BP,IA66BnC,SAAW4lB,GACPA,EAAO,eAAiB,cACxBA,EAAO,cAAgB,aACvBA,EAAO,UAAY,SACnBA,EAAO,eAAiB,cACxBA,EAAO,cAAgB,mBACvBA,EAAO,eAAiB,cACxBA,EAAO,yBAA2B,wBAClCA,EAAO,yBAA2B,wBAClCA,EAAO,+BAAiC,8BACxCA,EAAO,0BAA4B,yBACnCA,EAAO,aAAe,YACtBA,EAAO,UAAY,SACnBA,EAAO,gBAAkB,gBAb7B,CAcGA,IAAWA,EAAS,KAIvB,IASI,EAA2B,WAU3B,SAAS4D,EAAUxsB,EAAKysB,EAAOC,QACb,IAAVD,IAAoBA,EAAQnE,QACZ,IAAhBoE,IAA0BA,EAAc,IAAI,QAChDzsB,KAAKD,IAAMA,EACXC,KAAKwsB,MAAQA,EACbxsB,KAAKysB,YAAcA,EAq6BvB,OAn6BAF,EAAUlsB,UAAUqsB,UAAY,SAAUxuB,GAEtC,MAAO,GAAK8B,KAAKD,IAAI0Y,QAAQ,QAAS,IAAMva,GAUhDquB,EAAUlsB,UAAUypB,aAAe,SAAUtoB,GACzC,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI2sB,EACJ,OAAO7Y,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,SACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAgrB,EAAO3qB,EAAGoS,OACH,CAAC,EAAcuY,WAa1CJ,EAAUlsB,UAAU2pB,cAAgB,SAAUxoB,GAC1C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI4sB,EACJ,OAAO9Y,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,gBACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAirB,EAAS5qB,EAAGoS,OACL,CAAC,EAAcwY,WAc1CL,EAAUlsB,UAAU4pB,WAAa,SAAUrN,EAASpb,GAChD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI6sB,EACJ,OAAO/Y,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwB/H,EAAU,YACrGjb,OAAQ,SAEhB,KAAK,EAED,OADAkrB,EAAU7qB,EAAGoS,OACN,CAAC,EAAc,IAAI,IAAUyY,YAcxDN,EAAUlsB,UAAU6pB,WAAa,SAAUtN,EAASpb,GAChD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwB/H,EAAU,YACrGjb,OAAQ,gBAc5B4qB,EAAUlsB,UAAU8pB,UAAY,SAAUvN,EAASpb,GAC/C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwB/H,EAAU,WACrGjb,OAAQ,gBAc5B4qB,EAAUlsB,UAAU+pB,YAAc,SAAUxN,EAASpb,GACjD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI8sB,EACJ,OAAOhZ,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwB/H,GAC3Fjb,OAAQ,SAEhB,KAAK,EAED,OADAmrB,EAAmB9qB,EAAGoS,OACf,CAAC,EAAcZ,EAASA,EAAS,GAAIsZ,GAAmB,CAAED,QAAS,IAAI,IAAUC,EAAiBD,oBAc7HN,EAAUlsB,UAAUgqB,cAAgB,SAAUzN,EAASpb,GACnD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwB/H,EAAU,gBACrGjb,OAAQ,gBAc5B4qB,EAAUlsB,UAAUiqB,YAAc,SAAU1N,EAASpb,GACjD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+sB,EAAUC,EACd,OAAOlZ,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAED,OADAnS,EAAGqS,KAAKvT,KAAK,CAAC,EAAG,EAAG,CAAE,IACf,CAAC,EAAad,KAAKysB,YAAYlrB,cAAc,CAC5CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwB/H,EAAU,aACrGjb,OAAQ,SAEpB,KAAK,EAED,OADAorB,EAAW/qB,EAAGoS,OACP,CAAC,EAAa,GACzB,KAAK,EAED,GADA4Y,EAAOhrB,EAAGoS,SACN4Y,aAAgB,QAAqBA,EAAKptB,SAAW,OAAYqtB,WAIjE,MAAMD,EAEV,OALID,EAAW,KAKR,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAcA,WAgB9CR,EAAUlsB,UAAUkqB,aAAe,SAAU3N,EAAS9d,EAAK0C,GACvD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwB/H,EAAU,gBACrGjb,OAAQ,QACT7C,WAcnBytB,EAAUlsB,UAAUoqB,cAAgB,SAAU5E,EAAI6E,EAAMlpB,GACpD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,qBAAuBkB,EAAK,IAAM6E,GACrG/oB,OAAQ,gBAc5B4qB,EAAUlsB,UAAUsqB,aAAe,SAAU/N,EAASpb,GAClD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwB/H,GAC3Fjb,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAc,CACd8Y,YAAanqB,EAASmqB,YACtBL,QAAS,IAAI,IAAU9pB,EAAS8pB,SAChCM,eAAgB,IAAI,IAAUpqB,EAASoqB,gBACvCC,wBAAyBrqB,EAASqqB,wBAAwBjjB,KAAI,SAAU3I,GACpE,IAAI6rB,EAAU7rB,EAAG6rB,QAASC,EAAW9rB,EAAG8rB,SAAUC,EAAO/rB,EAAG+rB,KAAMC,EAAUhsB,EAAGgsB,QAASC,EAAO/F,EAAOlmB,EAAI,CAAC,UAAW,WAAY,OAAQ,YACtIksB,EAAoBjF,EAAgB,CAAE4E,QAASA,EAASC,SAAUA,EAAUC,KAAMA,EAAMC,QAASA,GAAW,CAC5G,UACA,WACA,OACA,YAEJ,OAAOha,EAASA,EAAS,GAAIia,GAAO,CAAEJ,QAASK,EAAkBL,QAASC,SAAUI,EAAkBJ,SAAUC,KAAMG,EAAkBH,KAAMC,QAASE,EAAkBF,aAE7KG,gBAAiB,IAAI,IAAU5qB,EAAS4qB,iBACxCC,oBAAqB7qB,EAAS6qB,oBAC9BC,kBAAmB,IAAI,IAAU9qB,EAAS8qB,mBAC1CC,aAAc/qB,EAAS+qB,aACvBC,aAAchrB,EAASgrB,uBAcnDxB,EAAUlsB,UAAUuqB,aAAe,SAAUppB,GACzC,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EAAUirB,EACd,OAAOla,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBACnEhjB,OAAQ,SAEhB,KAAK,EAqBD,OApBAoB,EAAWf,EAAGoS,OACd4Z,EAAiBvF,EAAgB1lB,EAAU,CACvC,sBACA,+BACA,2BACA,0BACA,kBACA,4BACA,yBACA,+BACA,eACA,qBACA,gBACA,mCACA,sBACA,gCACA,gCACA,sBACA,6BAEG,CAAC,EAAcyQ,EAASA,EAAS,GAAIzQ,GAAWirB,YAgB3EzB,EAAUlsB,UAAUwqB,SAAW,SAAUrpB,GACrC,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,GAC3DhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAa1CwpB,EAAUlsB,UAAUyqB,eAAiB,SAAUtpB,GAC3C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,WACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAa1CwpB,EAAUlsB,UAAU0qB,iBAAmB,SAAUvpB,GAC7C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,aACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAc1CwpB,EAAUlsB,UAAU2qB,gBAAkB,SAAUjW,EAAMvT,QACrC,IAATuT,IAAmBA,EAAO,IAC9B,IAAIjT,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,0BACnEhjB,OAAQ,MACRE,MAAOkT,KAEf,KAAK,EAED,OADAhS,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAc1CwpB,EAAUlsB,UAAU4qB,mBAAqB,SAAUlW,EAAMvT,QACxC,IAATuT,IAAmBA,EAAO,IAC9B,IAAIjT,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,6BACnEhjB,OAAQ,MACRE,MAAOkT,KAEf,KAAK,EAED,OADAhS,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAY1CwpB,EAAUlsB,UAAU6qB,cAAgB,SAAU1pB,GAC1C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAa1CwpB,EAAUlsB,UAAU8qB,WAAa,SAAU3pB,GACvC,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,kBACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAe1CwpB,EAAUlsB,UAAU+qB,qBAAuB,SAAU5pB,GACjD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,8BACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAa1CwpB,EAAUlsB,UAAUgrB,mBAAqB,SAAU7pB,GAC/C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,2BACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAa1CwpB,EAAUlsB,UAAUirB,iBAAmB,SAAU9pB,GAC7C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,yBACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAa1CwpB,EAAUlsB,UAAUkrB,iBAAmB,SAAU/pB,GAC7C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,mBACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAa1CwpB,EAAUlsB,UAAUmrB,aAAe,SAAUhqB,GACzC,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,oBACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAc1CwpB,EAAUlsB,UAAUorB,gBAAkB,SAAUhqB,EAAMD,GAClD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,6BACnEhjB,OAAQ,QACTF,WAYnB8qB,EAAUlsB,UAAUqrB,gBAAkB,SAAUC,GAC5C,OAAO7D,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,wBACpB/qB,OAAQ,QACTgqB,WAanBY,EAAUlsB,UAAUurB,mBAAqB,SAAUtX,EAAK9S,GACpD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,gCACnEhjB,OAAQ,QACT2S,IACP,KAAK,EAED,OADAvR,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAe1CwpB,EAAUlsB,UAAUwrB,eAAiB,SAAUC,EAAUtqB,GACrD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI8sB,EACJ,OAAOhZ,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwBmH,EAAW,gBACtGnqB,OAAQ,SAEhB,KAAK,EAED,OADAmrB,EAAmB9qB,EAAGoS,OACf,CAAC,EAAc0Y,WAa1CP,EAAUlsB,UAAU0rB,aAAe,SAAUtX,EAAIjT,GAC7C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,kCACnEhjB,OAAQ,QACT8S,IACP,KAAK,EAED,OADA1R,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAa1CwpB,EAAUlsB,UAAU2rB,QAAU,SAAU5f,EAAM5K,GAC1C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,6BACnEhjB,OAAQ,QACTyK,IACP,KAAK,EAED,OADArJ,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAK1CwpB,EAAUlsB,UAAU4rB,WAAa,WAC7B,OAAOnE,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,aAC9C7qB,OAAQ,gBAgB5B4qB,EAAUlsB,UAAU6rB,SAAW,SAAUzqB,EAAMD,GAC3C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EAAIisB,EAAKR,EAAMS,EAAcC,EACjC,OAAOra,EAAY9T,MAAM,SAAUkC,GAC/B,OAAQA,EAAGiS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,8BACnEhjB,OAAQ,QACTF,IACP,KAAK,EAOD,OANAO,EAAKE,EAAGkS,OAAQ6Z,EAAMjsB,EAAGisB,IAAKR,EAAO/F,EAAO1lB,EAAI,CAAC,QACjDksB,EAAeD,EACfE,EAAe,IAAI,IAAUF,GAAO,IAC/BE,EAAatd,UACdqd,EAAeC,GAEZ,CAAC,EAAc3a,EAAS,CAAEya,IAAKC,GAAgBT,YAS1ElB,EAAUlsB,UAAU0pB,UAAY,WAC5B,OAAO/pB,KAAKD,KAYhBwsB,EAAUlsB,UAAU8rB,iBAAmB,SAAU3qB,GAC7C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,yBACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAe1CwpB,EAAUlsB,UAAU+rB,mBAAqB,SAAU5qB,GAC/C,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,IAAI+C,EACJ,OAAO+Q,EAAY9T,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKysB,YAAYlrB,cAAc,CACpDxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,2BACnEhjB,OAAQ,SAEhB,KAAK,EAED,OADAoB,EAAWf,EAAGoS,OACP,CAAC,EAAcrR,WAc1CwpB,EAAUlsB,UAAUgsB,mBAAqB,SAAUxG,EAAIrkB,GACnD,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,oBAAsBkB,EAAK,aAC9FlkB,OAAQ,gBAc5B4qB,EAAUlsB,UAAUisB,yBAA2B,SAAUR,EAAUtqB,GAC/D,IAAIM,OAAY,IAAPN,EAAgB8mB,EAAoB9mB,EAAImjB,EAAQ7iB,EAAG6iB,MAC5D,OAAOmD,EAAU9nB,UAAM,OAAQ,GAAQ,WACnC,OAAO8T,EAAY9T,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKysB,YAAYlrB,cAAc,CAC7CxB,IAAKC,KAAK0sB,UAAU,WAAa1sB,KAAKwsB,MAAQ,WAAa7H,EAAQ,sBAAwBmH,EAAW,4BACtGnqB,OAAQ,gBAKrB4qB,EAp7BmB,G,gdC/jC1B6B,GAAkBtoB,OAAO,oBAkBzB+M,GAAgB,SAASC,EAAGnG,GAI5B,OAHAkG,GAAgBE,OAAOC,gBAClB,CAAEC,UAAW,cAAgBjS,OAAS,SAAU8R,EAAGnG,GAAKmG,EAAEG,UAAYtG,IACvE,SAAUmG,EAAGnG,GAAK,IAAK,IAAIjM,KAAKiM,EAAOoG,OAAO1S,UAAUM,eAAewF,KAAKwG,EAAGjM,KAAIoS,EAAEpS,GAAKiM,EAAEjM,KACzFmS,GAAcC,EAAGnG,IAG5B,SAASuG,GAAUJ,EAAGnG,GAClB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIwG,UAAU,uBAAyB5G,OAAOI,GAAK,iCAE7D,SAASyG,IAAOpT,KAAKqT,YAAcP,EADnCD,GAAcC,EAAGnG,GAEjBmG,EAAEzS,UAAkB,OAANsM,EAAaoG,OAAOO,OAAO3G,IAAMyG,EAAG/S,UAAYsM,EAAEtM,UAAW,IAAI+S,GAGnF,IAAI,GAAW,WAQX,OAPA,GAAWL,OAAOU,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGzN,EAAI,EAAGN,EAAIgO,UAAUjV,OAAQuH,EAAIN,EAAGM,IAE5C,IAAK,IAAIxF,KADTiT,EAAIC,UAAU1N,GACAyN,EAAOZ,OAAO1S,UAAUM,eAAewF,KAAKwN,EAAGjT,KAAIgT,EAAEhT,GAAKiT,EAAEjT,IAE9E,OAAOgT,GAEJ,GAASG,MAAM7T,KAAM4T,YAGhC,SAAS,GAAOD,EAAG1N,GACf,IAAIyN,EAAI,GACR,IAAK,IAAIhT,KAAKiT,EAAOZ,OAAO1S,UAAUM,eAAewF,KAAKwN,EAAGjT,IAAMuF,EAAE0hB,QAAQjnB,GAAK,IAC9EgT,EAAEhT,GAAKiT,EAAEjT,IACb,GAAS,MAALiT,GAAqD,oBAAjCZ,OAAO6U,sBACtB,KAAI1hB,EAAI,EAAb,IAAgBxF,EAAIqS,OAAO6U,sBAAsBjU,GAAIzN,EAAIxF,EAAE/B,OAAQuH,IAC3DD,EAAE0hB,QAAQjnB,EAAEwF,IAAM,GAAK6M,OAAO1S,UAAUwnB,qBAAqB1hB,KAAKwN,EAAGjT,EAAEwF,MACvEwN,EAAEhT,EAAEwF,IAAMyN,EAAEjT,EAAEwF,KAE1B,OAAOwN,EAGX,SAAS,GAAYK,EAASjU,GAC1B,IAAsGkU,EAAG/G,EAAGyG,EAAGO,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPV,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOW,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAE5N,KAAMkO,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXzO,SAA0BmO,EAAEnO,OAAOC,UAAY,WAAa,OAAO/F,OAAUiU,EACvJ,SAASM,EAAK3O,GAAK,OAAO,SAAU6G,GAAK,OAAO+H,EAAK,CAAC5O,EAAG6G,KACzD,SAAS+H,EAAKC,GACV,GAAIT,EAAG,MAAM,IAAIb,UAAU,mCAC3B,MAAOe,EAAG,IACN,GAAIF,EAAI,EAAG/G,IAAMyG,EAAY,EAARe,EAAG,GAASxH,EAAE,UAAYwH,EAAG,GAAKxH,EAAE,YAAcyG,EAAIzG,EAAE,YAAcyG,EAAEvN,KAAK8G,GAAI,GAAKA,EAAE5G,SAAWqN,EAAIA,EAAEvN,KAAK8G,EAAGwH,EAAG,KAAKnO,KAAM,OAAOoN,EAE3J,OADIzG,EAAI,EAAGyG,IAAGe,EAAK,CAAS,EAARA,EAAG,GAAQf,EAAEvV,QACzBsW,EAAG,IACP,KAAK,EAAG,KAAK,EAAGf,EAAIe,EAAI,MACxB,KAAK,EAAc,OAAXP,EAAEC,QAAgB,CAAEhW,MAAOsW,EAAG,GAAInO,MAAM,GAChD,KAAK,EAAG4N,EAAEC,QAASlH,EAAIwH,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKP,EAAEI,IAAII,MAAOR,EAAEG,KAAKK,MAAO,SACxC,QACI,GAAMhB,EAAIQ,EAAEG,OAAMX,EAAIA,EAAE/U,OAAS,GAAK+U,EAAEA,EAAE/U,OAAS,MAAkB,IAAV8V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEP,EAAI,EAAG,SACjG,GAAc,IAAVO,EAAG,MAAcf,GAAMe,EAAG,GAAKf,EAAE,IAAMe,EAAG,GAAKf,EAAE,IAAM,CAAEQ,EAAEC,MAAQM,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYP,EAAEC,MAAQT,EAAE,GAAI,CAAEQ,EAAEC,MAAQT,EAAE,GAAIA,EAAIe,EAAI,MAC7D,GAAIf,GAAKQ,EAAEC,MAAQT,EAAE,GAAI,CAAEQ,EAAEC,MAAQT,EAAE,GAAIQ,EAAEI,IAAIxT,KAAK2T,GAAK,MACvDf,EAAE,IAAIQ,EAAEI,IAAII,MAChBR,EAAEG,KAAKK,MAAO,SAEtBD,EAAK3U,EAAKqG,KAAK4N,EAASG,GAC1B,MAAOjO,GAAKwO,EAAK,CAAC,EAAGxO,GAAIgH,EAAI,EAAK,QAAU+G,EAAIN,EAAI,EACtD,GAAY,EAARe,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEtW,MAAOsW,EAAG,GAAKA,EAAG,QAAK,EAAQnO,MAAM,IAIlF,SAASqO,GAAShP,GACd,IAAIgO,EAAsB,oBAAX7N,QAAyBA,OAAOC,SAAUF,EAAI8N,GAAKhO,EAAEgO,GAAIzN,EAAI,EAC5E,GAAIL,EAAG,OAAOA,EAAEM,KAAKR,GACrB,GAAIA,GAAyB,kBAAbA,EAAEhH,OAAqB,MAAO,CAC1C0H,KAAM,WAEF,OADIV,GAAKO,GAAKP,EAAEhH,SAAQgH,OAAI,GACrB,CAAExH,MAAOwH,GAAKA,EAAEO,KAAMI,MAAOX,KAG5C,MAAM,IAAIwN,UAAUQ,EAAI,0BAA4B,mCAGxD,SAASjO,GAAOC,EAAGC,GACf,IAAIC,EAAsB,oBAAXC,QAAyBH,EAAEG,OAAOC,UACjD,IAAKF,EAAG,OAAOF,EACf,IAAmBK,EAAYC,EAA3BC,EAAIL,EAAEM,KAAKR,GAAOS,EAAK,GAC3B,IACI,YAAc,IAANR,GAAgBA,KAAM,MAAQI,EAAIE,EAAEG,QAAQC,KAAMF,EAAGtF,KAAKkF,EAAE7H,OAExE,MAAOoI,GAASN,EAAI,CAAEM,MAAOA,GAC7B,QACI,IACQP,IAAMA,EAAEM,OAAST,EAAIK,EAAE,YAAYL,EAAEM,KAAKD,GAElD,QAAU,GAAID,EAAG,MAAMA,EAAEM,OAE7B,OAAOH,EAGX,SAASI,GAAcC,EAAIC,GACvB,IAAK,IAAIR,EAAI,EAAGS,EAAKD,EAAK/H,OAAQiI,EAAIH,EAAG9H,OAAQuH,EAAIS,EAAIT,IAAKU,IAC1DH,EAAGG,GAAKF,EAAKR,GACjB,OAAOO,EAGX,IAWI4nB,GAXAC,GAA2B,SAAUxV,GAErC,SAASwV,EAAUC,EAAKrW,EAAKvY,GACzB,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAML,IAAYK,KAI1C,OAHA0B,EAAM6sB,IAAMA,EACZ7sB,EAAMwW,IAAMA,EACZnF,OAAOC,eAAetR,EAAO4sB,EAAUjuB,WAChCqB,EAEX,OARAwR,GAAUob,EAAWxV,GAQdwV,EATmB,CAU5BrrB,QAEF,SAAWorB,GACPA,EAAQA,EAAQ,WAAa,GAAK,UAClCA,EAAQA,EAAQ,UAAY,GAAK,SACjCA,EAAQA,EAAQ,UAAY,GAAK,SACjCA,EAAQA,EAAQ,SAAW,GAAK,QAChCA,EAAQA,EAAQ,SAAW,GAAK,SALpC,CAMGA,KAAYA,GAAU,KACzB,IAAIG,GAAU,IAAItnB,OAAO,OACrBunB,GAAe,IAAIvnB,OAAO,gBAC1BwnB,GAAU,IAAIxnB,OAAO,qBACrBynB,GAAU,IAAIznB,OAAO,SACrB0nB,GAAQ,IAAI1nB,OAAO,eACvB,SAAS2nB,GAAKN,EAAKO,GACf,IAAI5oB,EAAGyN,EAAGob,EAAOC,EAAIC,EAErB,YADqB,IAAjBH,IAA2BA,GAAe,GACvC,GAAY9uB,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACDjO,EAAI,EACJ1E,EAAG2S,MAAQ,EACf,KAAK,EACD,KAAMjO,EAAIqoB,EAAI5vB,QAAS,MAAO,CAAC,EAAa,IAE5C,MAAOuH,EAAIqoB,EAAI5vB,QAAU6vB,GAAQ3iB,KAAK0iB,EAAIroB,IACtCA,IAEJ,GAAIA,IAAMqoB,EAAI5vB,OACV,MAAO,CAAC,GAIZ,GAFAgV,EAAI4a,EAAIroB,GACR6oB,EAAQ7oB,GACHuoB,GAAa5iB,KAAK8H,GAAI,MAAO,CAAC,EAAa,GAEhDzN,IACA,MAAOA,EAAIqoB,EAAI5vB,QAAU+vB,GAAQ7iB,KAAK0iB,EAAIroB,IACtCA,IAEJ,MAAO,CAAC,EAAa,CAAEwN,EAAG2a,GAAQa,MAAOziB,EAAG8hB,EAAI9mB,MAAMsnB,EAAO7oB,GAAIipB,MAAOJ,EAAOK,KAAMlpB,IACzF,KAAK,EAED,OADA1E,EAAG4S,OACI,CAAC,EAAa,IACzB,KAAK,EACD,KAAMma,EAAI5vB,OAASuH,EAAI,GAA0B,OAArBqoB,EAAIc,OAAOnpB,EAAG,IAAc,MAAO,CAAC,EAAa,GAE7EA,GAAK,EACL,MAAOA,EAAIqoB,EAAI5vB,QAAUiwB,GAAM/iB,KAAK0iB,EAAIroB,IACpCA,IAEJ,GAA0B,KAApBA,EAAI6oB,EAAS,GACf,MAAM,IAAIT,GAAUC,EAAKroB,EAAG,uDAEhC,MAAO,CAAC,EAAa,CAAEwN,EAAG2a,GAAQiB,MAAO7iB,EAAG8hB,EAAI9mB,MAAMsnB,EAAO7oB,GAAIipB,MAAOJ,EAAOK,KAAMlpB,IACzF,KAAK,EAED,OADA1E,EAAG4S,OACI,CAAC,EAAa,IACzB,KAAK,EACD,IAAMua,GAAQ9iB,KAAK8H,IAAY,MAANA,EAAY,MAAO,CAAC,EAAa,GAEhD,MAANA,GACAzN,IAEJ8oB,EAAK9oB,EACL,MAAOA,EAAIqoB,EAAI5vB,QAAUgwB,GAAQ9iB,KAAK0iB,EAAIroB,IACtCA,IAEJ,GAAI8oB,IAAO9oB,EACP,MAAM,IAAIooB,GAAUC,EAAKroB,EAAG,+BAEhC,MAAO,CAAC,EAAa,CAAEwN,EAAG2a,GAAQ9d,OAAQ9D,EAAG8hB,EAAI9mB,MAAMsnB,EAAO7oB,GAAIipB,MAAOJ,EAAOK,KAAMlpB,IAC1F,KAAK,EAED,OADA1E,EAAG4S,OACI,CAAC,EAAa,IACzB,KAAK,EACD,GAAY,MAANT,EAAa,MAAO,CAAC,EAAa,GAIxC,IAFAzN,IACA+oB,GAAM,EACC/oB,EAAIqoB,EAAI5vB,SAAWswB,GAAkB,MAAXV,EAAIroB,IAAcA,IAK3C+oB,GAJCA,GAAkB,OAAXV,EAAIroB,GAOpB,GAAIA,IAAMqoB,EAAI5vB,OACV,MAAM,IAAI2vB,GAAUC,EAAKroB,EAAG,+BAGhC,OADAA,IACO,CAAC,EAAa,CAAEwN,EAAG2a,GAAQ9hB,OAAQE,EAAG8hB,EAAI9mB,MAAMsnB,EAAO7oB,GAAIipB,MAAOJ,EAAOK,KAAMlpB,IAC1F,KAAK,EAED,OADA1E,EAAG4S,OACI,CAAC,EAAa,IACzB,KAAK,EACD,GAAY,MAANT,EAAY,MAAO,CAAC,EAAa,IAEvCzN,IACA,MAAOA,EAAIqoB,EAAI5vB,QAAqB,OAAX4vB,EAAIroB,GACzBA,IAEJ,OAAK4oB,EACE,CAAC,EAAa,CAAEpb,EAAG2a,GAAQkB,QAAS9iB,EAAG8hB,EAAI9mB,MAAMsnB,EAAO7oB,GAAIipB,MAAOJ,EAAOK,KAAMlpB,IAD7D,CAAC,EAAa,IAE5C,KAAK,GACD1E,EAAG4S,OACH5S,EAAG2S,MAAQ,GACf,KAAK,GAAI,MAAO,CAAC,EAAa,IAC9B,KAAK,GACD,KAAMoa,EAAI5vB,OAASuH,EAAI,GAA0B,OAArBqoB,EAAIc,OAAOnpB,EAAG,IAAc,MAAO,CAAC,EAAa,IAE7EA,GAAK,EACL,MAAOA,EAAIqoB,EAAI5vB,UAAY4vB,EAAI5vB,OAASuH,EAAI,GAA0B,OAArBqoB,EAAIc,OAAOnpB,EAAG,IAC3DA,IAEJ,GAAIA,IAAMqoB,EAAI5vB,OACV,MAAM,IAAI2vB,GAAUC,EAAKroB,EAAG,gCAGhC,OADAA,GAAK,EACA4oB,EACE,CAAC,EAAa,CAAEpb,EAAG2a,GAAQkB,QAAS9iB,EAAG8hB,EAAI9mB,MAAMsnB,EAAO7oB,GAAIipB,MAAOJ,EAAOK,KAAMlpB,IAD7D,CAAC,EAAa,IAE5C,KAAK,GACD1E,EAAG4S,OACH5S,EAAG2S,MAAQ,GACf,KAAK,GAAI,MAAO,CAAC,EAAa,IAC9B,KAAK,GACD,MAAY,MAANR,GAAmB,MAANA,GAAmB,MAANA,GAAmB,MAANA,GAAmB,MAANA,EAAmB,CAAC,EAAa,KAC3FzN,IACO,CAAC,EAAa,CAAEwN,EAAGC,EAAGlH,EAAGkH,EAAGwb,MAAOJ,EAAOK,KAAMlpB,KAC3D,KAAK,GAED,OADA1E,EAAG4S,OACI,CAAC,EAAa,IACzB,KAAK,GAAI,MAAM,IAAIka,GAAUC,EAAKroB,EAAG,+BAAiCA,EAAI,MAAQyN,EAAI,KACtF,KAAK,GAAI,MAAO,CAAC,EAAa,GAC9B,KAAK,GAAI,MAAO,CAAC,OAM7B,IACI6b,GADAC,GAAc3pB,OAAO,iBAEzB,SAAW0pB,GACPA,EAAS,YAAc,sDACvBA,EAAS,YAAc,sDACvBA,EAAS,YAAc,sDACvBA,EAAS,YAAc,sDACvBA,EAAS,YAAc,sDACvBA,EAAS,YAAc,sDACvBA,EAAS,aAAe,sDACxBA,EAAS,aAAe,sDACxBA,EAAS,YAAc,uDAT3B,CAUGA,KAAaA,GAAW,KAC3B,IAAIE,GAAkBF,GAASG,SAE3BC,GAA4B,SAAU9W,GAEtC,SAAS8W,EAAWrX,EAAM5Y,GACtB,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAML,IAAYK,KAG1C,OAFA0B,EAAM6W,KAAOA,EACbxF,OAAOC,eAAetR,EAAOkuB,EAAWvvB,WACjCqB,EAEX,OAPAwR,GAAU0c,EAAY9W,GAOf8W,EARoB,CAS7B3sB,OACF,SAAS4sB,GAAa7sB,EAAI4C,GACtB,IAAIpE,EAAIM,EACR,GAAW,IAAN8D,QAAuB3G,IAAZ+D,EAAG+R,OAA2C,QAAlBvT,EAAKwB,EAAG+R,YAAyB,IAAPvT,OAAgB,EAASA,EAAG7C,UAAYiH,EAC1G,OAAO,EAEX,MAAM,IAAIgqB,GAAW5sB,EAAI,SAAWA,EAAGuV,KAAO,YAAc3S,EAAI,0BAA+C,QAAlB9D,EAAKkB,EAAG+R,YAAyB,IAAPjT,OAAgB,EAASA,EAAGnD,SAEvJ,SAASmxB,GAAe9sB,GACpB,QAAkB/D,IAAd+D,EAAGwV,OACH,OAAO,EAEX,MAAM,IAAIoX,GAAW5sB,EAAI,kCAAoCA,EAAGuV,KAAO,KAAOvV,EAAGwV,QAErF,SAASuX,GAAa/sB,EAAIgtB,GACtB,GAAI,QAASA,EACT,OAAO,EAEX,MAAM,IAAIJ,GAAW5sB,EAAI,SAAWA,EAAGuV,KAAO,yBAElD,SAAS0X,GAAoBvvB,EAAGgqB,EAAMwF,EAAaC,GAC/C,IAIIC,EAJAlqB,EAAI,EACJmqB,EAAK,EACLC,EAAM,CAAC,KAAM,MAGjB,GAAIpqB,IAAMwkB,EAAK/rB,OACX,MAAM,IAAIixB,GAAWlvB,EAAG,mBAAqBA,EAAE6X,MAEnD,IAiBIgY,EAjBAC,EAAI9F,EAAKxkB,KACb,OAAQsqB,GACJ,IAAK,IACD,IAAIhvB,EAAKyuB,GAAoBvvB,EAAGgqB,EAAKjjB,MAAMvB,GAAIgqB,EAAYzoB,MAAM4oB,GAAKF,GAAMnqB,EAAIxE,EAAGwE,EAAGJ,EAAIpE,EAAGoE,EAAG6qB,EAAKjvB,EAAGivB,GACxGL,EAAQpqB,EACRE,GAAKN,EACLyqB,GAAMI,EACN,MACJ,IAAK,IACGJ,IAAOH,EAAYvxB,SACnB2xB,EAAI,GAAKJ,EAAYG,MAEzB,MACJ,QACI,MAAM,IAAIT,GAAWlvB,EAAGA,EAAE6X,KAAO,2BAA6BiY,GAItE,GAAItqB,IAAMwkB,EAAK/rB,OACX,MAAM,IAAIixB,GAAWlvB,EAAG,mBAAqBA,EAAE6X,MAGnD,OADAiY,EAAI9F,EAAKxkB,KACDsqB,GACJ,IAAK,IACD,IAAI1uB,EAAKmuB,GAAoBvvB,EAAGgqB,EAAKjjB,MAAMvB,GAAIgqB,EAAYzoB,MAAM4oB,GAAKF,GAAMnqB,EAAIlE,EAAGkE,EAAGJ,EAAI9D,EAAG8D,EAAG6qB,EAAK3uB,EAAG2uB,GACxGF,EAAQvqB,EAAEmE,KAAI,SAAU3I,GACpB,IAAIM,EAAK4D,GAAOlE,EAAI,GAAIiL,EAAI3K,EAAG,GAAI4K,EAAI5K,EAAG,GAC1C,MAAO,CAAC2K,EAAI,EAAGC,MAEnBxG,GAAKN,EACLyqB,GAAMI,EACN,MACJ,IAAK,IACGJ,IAAOH,EAAYvxB,SACnB2xB,EAAI,GAAKJ,EAAYG,MAEzB,MACJ,QACI,MAAM,IAAIT,GAAWlvB,EAAGA,EAAE6X,KAAO,2BAA6BiY,GAEtE,MAAO,CAAExqB,EAAGmqB,EAAIC,EAAOG,EAAO,CAAC,EAAGD,IAAO1qB,EAAGM,EAAGuqB,GAAIJ,GAEvD,SAASK,GAAgBhwB,EAAGgqB,EAAMiG,EAAMC,GACpC,IAAIJ,EAAI9F,EAAK,GACb,OAAQ8F,GACJ,IAAK,IACD,OAAO9F,EAAK/rB,OAAS,EACjB,CACI,CAAE4Z,KAAM,OACR,CACIA,KAAM,MACNxD,KAAM,CAAC,CACC,CAAEwD,KAAM,MAAOC,OAAQ,CAAC,QACxBkY,GAAgBhwB,EAAGgqB,EAAKjjB,MAAM,GAAI,GAAImpB,MAGlD,CAAErY,KAAM,MAAOC,OAAQ,CAAC,QACxB,CAAED,KAAM,QACR,CAAEA,KAAM,OAAQC,OAAQhS,GAAc,CAAC,KAAM,MAAOd,GAAOirB,MAC3DC,EAAKlkB,EACjB,IAAK,IACD,OAAOge,EAAK/rB,OAAS,EACjB,CACI,CAAE4Z,KAAM,OACR,CACIA,KAAM,MACNxD,KAAM,CAAC,CACC,CAAEwD,KAAM,MAAOC,OAAQ,CAAC,QACxBkY,GAAgBhwB,EAAGgqB,EAAKjjB,MAAM,GAAI,GAAImpB,MAGlD,CAAErY,KAAM,MAAOC,OAAQ,CAAC,QACxB,CAAED,KAAM,OAAQC,OAAQhS,GAAc,CAAC,KAAM,MAAOd,GAAOirB,MAC3DC,EAAK9d,EACjB,QACI,MAAM,IAAI8c,GAAWlvB,EAAGA,EAAE6X,KAAO,2BAA6BiY,IAG1E,SAASK,GAASnkB,EAAGD,GACjB,IAAIqkB,EAAIpkB,EAAE/N,OACV,MAAOmyB,EAAI,GAAKpkB,EAAEokB,EAAI,KAAOrkB,EACzBqkB,IAEJ,OAAOpkB,EAAEjF,MAAM,EAAGqpB,GAEtB,SAASC,GAAkBrkB,GACvB,IAAI4J,EAAK9U,EACLwvB,EAAS,GACTvD,EAAO,GACX,QAAUxuB,IAANyN,EACA,IACI,IAAK,IAAIukB,EAAMtc,GAASjI,GAAIwkB,EAAQD,EAAI5qB,QAAS6qB,EAAM5qB,KAAM4qB,EAAQD,EAAI5qB,OAAQ,CAC7E,IAAIoG,EAAIykB,EAAM/yB,OACA,IAAbsO,EAAE9N,QAAyB,MAAT8N,EAAE,GAAaukB,EAASvD,GAAM3sB,KAAK2L,IAG9D,MAAO4J,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQ6a,IAAUA,EAAM5qB,OAAS9E,EAAKyvB,EAAIva,SAASlV,EAAG2E,KAAK8qB,GAE3D,QAAU,GAAI3a,EAAK,MAAMA,EAAI/P,OAGrC,MAAO,CAAEyqB,OAAQA,EAAQvD,KAAMA,GAEnC,SAAS0D,GAAO3vB,GACZ,IAAI+W,EAAO/W,EAAG+W,KAAMC,EAAShX,EAAGgX,OAAQzD,EAAOvT,EAAGuT,KAClD,OAAO,GAAS,GAAS,CAAEwD,KAAMA,GAASC,GAAU,CAAEA,OAAQA,IAAazD,GAAQ,CAAEA,KAAMA,IAE/F,IAAIqc,GAAS,gBACTC,GAAW,kBACXC,GAAS,eACTC,GAAY,gBACZC,GAAY,gBACZC,GAAS,YACTC,GAAS,SACb,SAASC,GAAa3uB,EAAI4uB,GACtB,IAAI5mB,GAAiB,OAAR4mB,QAAwB,IAARA,OAAiB,EAASA,EAAIC,WAAanC,GACxE,SAASoC,EAAUtZ,GACf,YAAkBvZ,IAAXuZ,EAAuB,CAAC,CAAED,KAAM,SAAUC,OAAQA,IAAY,GAEzE,OAAQxV,EAAGuV,MAEP,IAAK,QACL,IAAK,SACL,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,QACD,GAAIsX,GAAa7sB,EAAI,GACjB,MAAO,CACH,CAAEuV,KAAM,WACR4Y,GAAO,CAAE5Y,KAAMvV,EAAGuV,KAAK9Q,MAAM,GAAI+Q,OAAQxV,EAAGwV,UAGpD,MACJ,IAAK,OACL,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,OACL,IAAK,OACD,GAAIqX,GAAa7sB,EAAI,GACjB,MAAO,CACH,CAAEuV,KAAMvV,EAAGuV,KAAK9Q,MAAM,IACtB0pB,GAAO,CAAE5Y,KAAM,KAAMC,OAAQxV,EAAGwV,OAAQzD,KAAM/R,EAAG+R,QAGzD,MACJ,IAAK,UACL,IAAK,WACL,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,UACD,GAAI8a,GAAa7sB,EAAI,GACjB,MAAO,CACH,CAAEuV,KAAM,WACR,CAAEA,KAAMvV,EAAGuV,KAAK9Q,MAAM,IACtB0pB,GAAO,CAAE5Y,KAAM,KAAMC,OAAQxV,EAAGwV,OAAQzD,KAAM/R,EAAG+R,QAGzD,MAEJ,IAAK,OACD,GAAI8a,GAAa7sB,EAAI,IAAM8sB,GAAe9sB,GACtC,MAAO,CACH,CAAEuV,KAAM,QACR,CAAEA,KAAM,aAGhB,MAEJ,IAAK,SACD,GAAIsX,GAAa7sB,EAAI,IAAM8sB,GAAe9sB,GACtC,MAAO,CAAC,CACAuV,KAAM,KAAMxD,KAAM,CACd,GACA,CAAC,CAAC,CAAEwD,KAAM,QAAU,CAAEA,KAAM,iBAI5C,MACJ,IAAK,YACL,IAAK,aACL,IAAK,YACL,IAAK,YACL,IAAK,YACL,IAAK,YACD,GAAIsX,GAAa7sB,EAAI,IAAM8sB,GAAe9sB,GACtC,MAAO,CACH,CAAEuV,KAAMvV,EAAGuV,KAAK9Q,MAAM,IACtB,CACI8Q,KAAM,KAAMxD,KAAM,CACd,GACA,CAAC,CAAC,CAAEwD,KAAM,QAAU,CAAEA,KAAM,iBAK5C,MACJ,IAAK,eACL,IAAK,gBACL,IAAK,eACL,IAAK,eACL,IAAK,eACL,IAAK,eACD,GAAIsX,GAAa7sB,EAAI,IAAM8sB,GAAe9sB,GACtC,MAAO,CACH,CACI,CAAEuV,KAAM,WACR,CAAEA,KAAMvV,EAAGuV,KAAK9Q,MAAM,MAE1B,CACI8Q,KAAM,KAAMxD,KAAM,CACd,GACA,CAAC,CAAC,CAAEwD,KAAM,QAAU,CAAEA,KAAM,iBAK5C,MACJ,IAAK,cACD,GAAIsX,GAAa7sB,EAAI,IAAM8sB,GAAe9sB,GACtC,MAAO,CAAC,CACAuV,KAAM,UAAWxD,KAAM,CACnB,GACA,CAAC,CAAC,CAAEwD,KAAM,QAAU,CAAEA,KAAM,iBAI5C,MACJ,IAAK,cACD,GAAIsX,GAAa7sB,EAAI,GACjB,MAAO,CAAC,CACAuV,KAAM,UAAWxD,KAAM,CACnB,CAAC,CAAC,CAAEwD,KAAM,QAAU,CAAEA,KAAM,cAC5BuZ,EAAU9uB,EAAGwV,WAI7B,MACJ,IAAK,cACD,GAAIqX,GAAa7sB,EAAI,GACjB,MAAO,CAAC,CACAuV,KAAM,UAAWxD,KAAM,CACnB+c,EAAU9uB,EAAGwV,QACb,CAAC,CAAC,CAAED,KAAM,QAAU,CAAEA,KAAM,iBAI5C,MACJ,IAAK,eACD,GAAIsX,GAAa7sB,EAAI,GACjB,MAAO,CAAC,CACAuV,KAAM,UAAWxD,KAAM,CACnB,CAAC,CAAC,CAAEwD,KAAM,QAAU,CAAEA,KAAM,cAC5BuZ,EAAU9uB,EAAGwV,WAI7B,MAEJ,IAAK,UACD,GAAIqX,GAAa7sB,EAAI,GACjB,MAAO,CAACmuB,GAAO,CAAE5Y,KAAM,UAAWC,OAAQxV,EAAGwV,OAAQzD,KAAM,CAAC/R,EAAG+R,KAAK,GAAI/R,EAAG+R,KAAK,OAEpF,MACJ,IAAK,WACD,GAAI8a,GAAa7sB,EAAI,GACjB,MAAO,CAACmuB,GAAO,CAAE5Y,KAAM,UAAWC,OAAQxV,EAAGwV,OAAQzD,KAAM,CAAC/R,EAAG+R,KAAK,GAAI/R,EAAG+R,KAAK,OAEpF,MAEJ,IAAK,MACL,IAAK,MACD,QAAgB9V,IAAZ+D,EAAG+R,KAWH,OAAO/R,EAVP,GAAI6sB,GAAa7sB,EAAI,IAAM+sB,GAAa/sB,EAAIA,EAAG+R,KAAK,IAAK,CACrD,IAAInP,EAAIyE,SAASrH,EAAG+R,KAAK,GAAG+E,IAAK,IACjC,OAAOqX,GAAO,CACV5Y,KAAM,MACNxD,KAAM,CAAC,CAAE+E,IAAiB,QAAZ9W,EAAGuV,KAAiBhM,OAAW,EAAJ3G,EAAQ,GAAK2G,OAAW,EAAJ3G,KAC7D4S,OAAQxV,EAAGwV,UAU/B,GAAI4Y,GAAOvlB,KAAK7I,EAAGuV,OACXsX,GAAa7sB,EAAI,GAAI,CACrB,IAAIxB,EAAKuvB,GAAkB/tB,EAAGwV,QAASwY,EAASxvB,EAAGwvB,OAAQe,EAASvwB,EAAGisB,KACnEuE,EAAM/B,GAAoBjtB,EAAIA,EAAGuV,KAAK9Q,MAAM,GAAIupB,GAAQ,SAAUF,EAAG9qB,EAAGisB,GAAO,OAAOzrB,GAAcA,GAAcA,GAAc,GAAId,GAAQorB,GAAK,KAAOprB,GAAQM,GAAK,KAAO,CAACisB,OAAUjsB,EAC3L,OAAOgsB,EAAI7nB,KAAI,SAAU3I,EAAI0E,GACzB,IAAIpE,EAAK4D,GAAOlE,EAAI,GAAIiL,EAAI3K,EAAG,GAAI4K,EAAI5K,EAAG,GACtCwuB,EAAM9pB,GAAcA,GAAc,GAAId,GAAOmrB,GAASnkB,EAAG,MAAMvC,KAAI,SAAUsC,GAAK,OAAa,OAANA,EAAa,IAAMA,OAAS/G,GAAe,IAAN+G,GAAWvG,IAAM8rB,EAAIrzB,OAAS,EAAKozB,EAAS,KAC1KG,EAAOf,GAAO,CAAE5Y,KAAM,OAAQC,OAAuB,IAAf8X,EAAI3xB,OAAe2xB,OAAMrxB,IACnE,OAAa,IAANwN,EAAUylB,EAAO,CACpB3Z,KAAM,MACNxD,KAAY,IAANtI,EAAU,CAAC,CAACylB,IAAS,CAAC,CAAEpY,IAAKvN,OAAOE,IAAM,CAACylB,QAMjE,GAAIb,GAASxlB,KAAK7I,EAAGuV,MACjB,GAAIvN,IAAUwkB,GAAS2C,UAAYnnB,IAAUwkB,GAAS4C,WAAapnB,IAAUwkB,GAAS6C,WAAarnB,IAAUwkB,GAAS8C,SAAU,CAC5H,GAAgB,WAAZtvB,EAAGuV,KACH,OAAOvV,EAEX,GAAI6sB,GAAa7sB,EAAI,GAAI,CAErB,IAAIgD,EAAIiqB,GAAoBjtB,EAAIA,EAAGuV,KAAK9Q,MAAM,GAAI,IAAI,SAAUqpB,EAAG9qB,EAAGisB,GAAO,OAAOzrB,GAAcA,GAAc,CAACyrB,GAAMvsB,GAAQM,GAAK,KAAON,GAAQorB,GAAK,QAAU9qB,EAClK,OAAOA,EAAEmE,KAAI,SAAU3I,GACnB,IAAIM,EAAK4D,GAAOlE,EAAI,GAAIiL,EAAI3K,EAAG,GAC3BowB,EAAOf,GAAO,CACd5Y,KAAM,WAEV,OAAa,IAAN9L,EAAUylB,EAAO,CACpB3Z,KAAM,MACNxD,KAAY,IAANtI,EAAU,CAAC,CAACylB,IAAS,CAAC,CAAEpY,IAAKvN,OAAOE,IAAM,CAACylB,cAK5D,GAAIrC,GAAa7sB,EAAI,GAAI,CACtBgD,EAAIiqB,GAAoBjtB,EAAIA,EAAGuV,KAAK9Q,MAAM,GAAIzE,EAAGwV,QAAU,IAAI,SAAUsY,EAAG9qB,EAAGisB,GAAO,OAAOzrB,GAAcA,GAAc,CAACyrB,GAAMvsB,GAAQM,GAAK,KAAON,GAAQorB,GAAK,QAAU9qB,EAC/K,OAAOA,EAAEmE,KAAI,SAAU3I,GACnB,IAAIM,EAAK4D,GAAOlE,EAAI,GAAIiL,EAAI3K,EAAG,GAAI4K,EAAI5K,EAAG,GACtCowB,EAAO,CACP,CAAE3Z,KAAM,OACR4Y,GAAO,CAAE5Y,KAAM,MAAOC,OAAiB,OAAT9L,EAAE,GAAc,CAACA,EAAE,SAAMzN,IACvD,CACIsZ,KAAM,MACNxD,KAAM,CAAC,CAACoc,GAAO,CAAE5Y,KAAM,MAAOC,OAAiB,OAAT9L,EAAE,GAAc,CAACA,EAAE,SAAMzN,QAGvE,OAAa,IAANwN,EAAUylB,EAAO,CACpB3Z,KAAM,MACNxD,KAAY,IAANtI,EAAU,CAAC,CAACylB,IAAS,CAAC,CAAEpY,IAAKvN,OAAOE,IAAM,CAACylB,QAMjE,GAAIZ,GAAOzlB,KAAK7I,EAAGuV,OACXsX,GAAa7sB,EAAI,GAAI,CACrB,IAAIuvB,EAAO/rB,GAAc,GAAId,GAAO1C,EAAGuV,KAAK9Q,MAAM,EAAGzE,EAAGuV,KAAK5Z,OAAS,KACtE,OAAO4zB,EAAKpoB,KAAI,SAAUqmB,EAAGtqB,GACzB,IAAIoqB,EAAMpqB,IAAMqsB,EAAK5zB,OAAS,EAAIqE,EAAGwV,YAASvZ,EAC9C,OAAQuxB,GACJ,IAAK,IACD,OAAOW,GAAO,CAAE5Y,KAAM,MAAOC,OAAQ8X,IACzC,IAAK,IACD,OAAOa,GAAO,CAAE5Y,KAAM,MAAOC,OAAQ8X,IACzC,QACI,MAAM,IAAIV,GAAW5sB,EAAI,yBAA2BwtB,OAMxE,GAAIe,GAAU1lB,KAAK7I,EAAGuV,OACdsX,GAAa7sB,EAAI,GAAI,CACrB,IAAIlB,EAAKivB,GAAkB/tB,EAAGwV,QAA6BiV,GAApBuD,EAASlvB,EAAGkvB,OAAelvB,EAAG2rB,MACrE,GAAIuD,EAAOryB,OAAS,EAChB,MAAM,IAAIixB,GAAW5sB,EAAI,kCAAoCA,EAAGuV,KAAO,KAAOyY,GAElF,IAAIJ,EAAyB,IAAlBI,EAAOryB,OACd,CACI+N,EAAG,CACC,CAAE6L,KAAM,OACR,CAAEA,KAAM,MAAOC,OAAQwY,GACvB,CAAEzY,KAAM,QACR,CAAEA,KAAM,MAAOC,OAAQ,CAAC,QACxB,CAAED,KAAM,QACR,CAAEA,KAAM,OAAQC,OAAQ,CAACwY,EAAO,GAAI,QAExCle,EAAG,CACC,CAAEyF,KAAM,OACR,CAAEA,KAAM,MAAOC,OAAQwY,GACvB,CAAEzY,KAAM,QACR,CAAEA,KAAM,MAAOC,OAAQ,CAAC,QACxB,CAAED,KAAM,OAAQC,OAAQ,CAAC,KAAMwY,EAAO,OAG9C,CACItkB,EAAG,CACC,CAAE6L,KAAM,MAAOC,OAAQ,CAAC,QACxB,CAAED,KAAM,QACR,CAAEA,KAAM,OAAQC,OAAQ,CAAC,IAAK,QAElC1F,EAAG,CACC,CAAEyF,KAAM,MAAOC,OAAQ,CAAC,QACxB,CAAED,KAAM,OAAQC,OAAQ,CAAC,KAAM,QAG3C,OAAOkY,GAAgB1tB,EAAIA,EAAGuV,KAAK9Q,MAAM,EAAGzE,EAAGuV,KAAK5Z,OAAS,GAAI8uB,EAAMmD,GAI/E,GAAIY,GAAU3lB,KAAK7I,EAAGuV,OACdsX,GAAa7sB,EAAI,GAAI,CACjBguB,EAASD,GAAkB/tB,EAAGwV,QAAQwY,OAC1C,GAAIA,EAAOryB,OAAS,EAChB,MAAM,IAAIixB,GAAW5sB,EAAI,kCAAoCA,EAAGuV,KAAO,KAAOyY,GAE9EJ,EAAO,CACPlkB,EAAG,CACC,CAAE6L,KAAM,OACR,CAAEA,KAAM,MAAOC,OAAQ,CAAC,QACxB,CACID,KAAM,MAAOxD,KAAM,CAAC,CACZoc,GAAO,CAAE5Y,KAAM,MAAOC,OAA0B,IAAlBwY,EAAOryB,OAAe,CAAC,IAAMqyB,EAAO,GAAGvpB,MAAM,SAAMxI,IACjF+D,EAAG+R,KAAK,MAGpB,CAAEwD,KAAM,QACR,CAAEA,KAAM,OAAQC,OAAQ,CAAmB,IAAlBwY,EAAOryB,OAAeqyB,EAAO,GAAK,IAAK,QAEpEle,EAAG,CACC,CAAEyF,KAAM,OACR4Y,GAAO,CAAE5Y,KAAM,MAAOC,OAA0B,IAAlBwY,EAAOryB,OAAe,CAAC,IAAMqyB,EAAO,GAAGvpB,MAAM,SAAMxI,IACjF+D,EAAG+R,KAAK,GACR,CAAEwD,KAAM,QACR,CAAEA,KAAM,MAAOC,OAAQ,CAAC,QACxB,CAAED,KAAM,OAAQC,OAAQ,CAAC,KAAwB,IAAlBwY,EAAOryB,OAAeqyB,EAAO,GAAK,QAGzE,OAAON,GAAgB1tB,EAAIA,EAAGuV,KAAK9Q,MAAM,EAAGzE,EAAGuV,KAAK5Z,OAAS,GAAI,GAAIiyB,GAI7E,GAAIa,GAAO5lB,KAAK7I,EAAGuV,OACXsX,GAAa7sB,EAAI,GAAI,CACjB4C,EAAI,EACR,MAA0B,MAAnB5C,EAAGuV,KAAK,EAAI3S,GACfA,IAEJ,OAAOurB,GAAO,CAAE5Y,KAAM,MAAOxD,KAAM,CAAC,CAAE+E,IAAKvN,OAAO3G,IAAM5C,EAAG+R,KAAK,MAIxE,GAAI2c,GAAO7lB,KAAK7I,EAAGuV,MAAO,CAClB3S,EAAI,EACR,MAA0B,MAAnB5C,EAAGuV,KAAK,EAAI3S,GACfA,IAEJ,GAAIoF,IAAUwkB,GAAS2C,UAAYnnB,IAAUwkB,GAAS4C,WAAapnB,IAAUwkB,GAAS6C,WAAarnB,IAAUwkB,GAAS8C,SAQjH,CACD,GAAU,IAAN1sB,EAAS,CACT,QAAgB3G,IAAZ+D,EAAG+R,KACH,OAAO/R,EAEP6sB,GAAa7sB,EAAI,IAAM+sB,GAAa/sB,EAAIA,EAAG+R,KAAK,MAChDnP,EAAIyE,SAASrH,EAAG+R,KAAK,GAAG+E,IAAK,UAIjC+V,GAAa7sB,EAAI,GAErB,OAAU,IAAN4C,EACO,CAACurB,GAAO,CAAE5Y,KAAM,MAAOC,OAAQxV,EAAGwV,UAE9B,IAAN5S,EACE,CACH,CACI2S,KAAM,MACNxD,KAAM,CAAC,CAACoc,GAAO,CAAE5Y,KAAM,MAAOC,OAAQxV,EAAGwV,YAE7C,CAAED,KAAM,SAIL,CACH,CACIA,KAAM,MACNxD,KAAM,CACF,CAAE+E,IAAKvN,OAAO3G,EAAI,IAClB,CAACurB,GAAO,CAAE5Y,KAAM,MAAOC,OAAQxV,EAAGwV,YAG1C,CACID,KAAM,MACNxD,KAAM,CAAC,CAAE+E,IAAKvN,OAAO3G,OA1CjC,GAAU,IAANA,EACA,OAAO5C,EAEX,GAAI6sB,GAAa7sB,EAAI,GACjB,OAAOmuB,GAAO,CAAE5Y,KAAM,MAAOxD,KAAM,CAAC,CAAE+E,IAAKvN,OAAO3G,KAAO4S,OAAQxV,EAAGwV,SA4ChF,OAAOxV,EAGX,IAAIwvB,GAAqC,SAAU1Z,GAM/C,SAAS0Z,EAAoB5a,EAAOjY,GAChC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAML,IAAYK,KAG1C,OAFA0B,EAAMkW,MAAQA,EACd7E,OAAOC,eAAetR,EAAO8wB,EAAoBnyB,WAC1CqB,EAEX,OAXAwR,GAAUsf,EAAqB1Z,GAWxB0Z,EAZ6B,CAatCvvB,OACEwvB,GAAgC,SAAU3Z,GAM1C,SAAS2Z,EAAenzB,EAAMK,GAC1B,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAML,IAAYK,KAG1C,OAFA0B,EAAMpC,KAAOA,EACbyT,OAAOC,eAAetR,EAAO+wB,EAAepyB,WACrCqB,EAEX,OAXAwR,GAAUuf,EAAgB3Z,GAWnB2Z,EAZwB,CAajCxvB,OACEyvB,GAAS,IAAIF,GAAoB,KAAM,kBAC3C,SAASG,GAAa7X,GAClB,OAAOA,EAAIpH,IAAM2a,GAAQa,QAAuB,MAAbpU,EAAIrO,EAAE,IAA2B,MAAbqO,EAAIrO,EAAE,IAA2B,MAAbqO,EAAIrO,EAAE,IAErF,IAAImmB,GAAQ,IAAI1rB,OAAO,cACnB2rB,GAAU,IAAI3rB,OAAO,uBAiCrB4rB,GAAwB,WACxB,SAASA,EAAOlB,GACZ5xB,KAAK4xB,IAAMA,EA0Vf,OAxVAkB,EAAOzyB,UAAU0yB,OAAS,SAAU/vB,GAChC,IAAIxB,EAAIM,EACR,QAA+E7C,KAAtD,QAAnBuC,EAAKxB,KAAK4xB,WAAwB,IAAPpwB,OAAgB,EAASA,EAAGmwB,gBAAkD,QAAnB7vB,EAAK9B,KAAK4xB,WAAwB,IAAP9vB,OAAgB,EAASA,EAAG6vB,cAAqB,CACpK,IAAIqB,EAAMrB,GAAa3uB,EAAIhD,KAAK4xB,KAIhC,OAHIoB,IAAQhwB,IACRgwB,EAAI5E,IAAmB,GAAS,GAAS,GAAKprB,EAAGorB,KAAoB,CAAEe,MAAO,EAAGC,KAAM,IAAO,CAAE6D,MAAOjwB,KAEpGgwB,EAGP,OAAOhwB,GAGf8vB,EAAOzyB,UAAU6yB,cAAgB,SAAUC,EAASpE,GAChD,IAAIvtB,EACAM,EAMAgZ,EALA3J,EAAM,CACNge,MAAOJ,EAAMI,MACbC,KAAML,EAAMK,MAEZgE,EAA4B,MAAZrE,EAAMrb,EAE1B,GAAI0f,EAAe,CAEf,GADAtY,EAAMqY,EAAQ9sB,OACVyU,EAAIxU,KACJ,MAAMosB,GAEVvhB,EAAIie,KAAOtU,EAAI3c,MAAMixB,UAGrBtU,EAAM,CAAE3c,MAAO4wB,GAEnB,GAAIjU,EAAI3c,MAAMuV,IAAM2a,GAAQa,MACxB,MAAM,IAAIsD,GAAoB1X,EAAI3c,MAAO,sBAAwB2c,EAAI3c,MAAMsO,GAO/E,IALA,IAAIumB,GAAOxxB,EAAK,CACR+W,KAAMuC,EAAI3c,MAAMsO,GAEpBjL,EAAG4sB,IAAmBjd,EACtB3P,KACK,CACL,IAAI6xB,EAAQF,EAAQ9sB,OACpB,GAAIgtB,EAAM/sB,KAAM,CACZ,GAAI8sB,EACA,MAAMV,GAEV,MAEC,GAAsB,MAAlBW,EAAMl1B,MAAMuV,EAAW,CAC5B,IAAK0f,EACD,MAAM,IAAIZ,GAAoBa,EAAMl1B,MAAO,8BAE/CgT,EAAIie,KAAOiE,EAAMl1B,MAAMixB,KACvB,MAEC,GAAIuD,GAAaU,EAAMl1B,OACxB60B,EAAIxa,OAASwa,EAAIxa,QAAU,GAC3Bwa,EAAIxa,OAAO1X,KAAKuyB,EAAMl1B,MAAMsO,GAC5B0E,EAAIie,KAAOiE,EAAMl1B,MAAMixB,SAEtB,CACD4D,EAAIje,KAAOie,EAAIje,MAAQ,GACvB,IAAIib,EAAMhwB,KAAKszB,UAAUH,EAASE,EAAMl1B,OACxCgT,EAAIie,MAAwC,QAA/BttB,EAAKkuB,EAAI5B,WAAqC,IAAPtsB,OAAgB,EAASA,EAAGstB,OAASje,EAAIie,KAC7F4D,EAAIje,KAAKjU,KAAKkvB,IAGtB,OAAOhwB,KAAK+yB,OAAOC,IAEvBF,EAAOzyB,UAAUkzB,UAAY,SAAUJ,EAASpE,GAa5C,IAZA,IAAIvtB,EACAM,EAEAqP,EAAM,CACNge,MAAOJ,EAAMI,MACbC,KAAML,EAAMK,MAEZ1uB,GAAKc,EAAK,CACN+W,KAAMwW,EAAMtiB,GAEhBjL,EAAG4sB,IAAmBjd,EACtB3P,KACK,CACL,IAAIkS,EAAIyf,EAAQ9sB,OAChB,GAAIqN,EAAEpN,MAAsB,MAAdoN,EAAEvV,MAAMuV,GAA2B,MAAdA,EAAEvV,MAAMuV,EACvC,MAAO,CAAChT,EAAGgT,GAEf,GAAIif,GAAajf,EAAEvV,OACfgT,EAAIie,KAAO1b,EAAEvV,MAAMixB,KACnB1uB,EAAE8X,OAAS9X,EAAE8X,QAAU,GACvB9X,EAAE8X,OAAO1X,KAAK4S,EAAEvV,MAAMsO,OAErB,CACD,IAAIujB,EAAMhwB,KAAKszB,UAAUH,EAASzf,EAAEvV,OACpCgT,EAAIie,MAAwC,QAA/BttB,EAAKkuB,EAAI5B,WAAqC,IAAPtsB,OAAgB,EAASA,EAAGstB,OAASje,EAAIie,KAC7F1uB,EAAEqU,KAAOrU,EAAEqU,MAAQ,GACnBrU,EAAEqU,KAAKjU,KAAKkvB,MAIxB8C,EAAOzyB,UAAUmzB,kBAAoB,SAAUL,EAASpE,GACpD,IAAIvtB,EAAIM,EACJqP,EAAM,CACNge,MAAOJ,EAAMI,MACbC,KAAML,EAAMK,MAEZqE,EAAM,GACVA,EAAIrF,IAAmBjd,EAGvB,IAFA,IAAIiiB,EAA4B,MAAZrE,EAAMrb,EACtBoH,EAAkB,MAAZiU,EAAMrb,EAAY,KAAO,CAAEvV,MAAO4wB,KACnC,CAOL,GANY,OAARjU,IACAA,EAAMqY,EAAQ9sB,OACTyU,EAAIxU,OACL6K,EAAIie,KAAOtU,EAAI3c,MAAMixB,OAGzBtU,EAAIxU,KAAM,CACV,GAAI8sB,EACA,MAAMV,GAGN,OAAOe,EAGf,GAAoB,MAAhB3Y,EAAI3c,MAAMuV,EAAW,CACrB,GAAK0f,EAID,OAAOK,EAHP,MAAM,IAAIjB,GAAoB1X,EAAI3c,MAAO,8BAM5C,GAAI2c,EAAI3c,MAAMuV,IAAM2a,GAAQa,MAAO,CAEpC,IAAIltB,EAAK0D,GAAO1F,KAAKuzB,UAAUJ,EAASrY,EAAI3c,OAAQ,GAAIu1B,EAAM1xB,EAAG,GAAI4D,EAAI5D,EAAG,GAC5EmP,EAAIie,MAAwC,QAA/B5tB,EAAKkyB,EAAItF,WAAqC,IAAP5sB,OAAgB,EAASA,EAAG4tB,OAASje,EAAIie,KAC7FqE,EAAI3yB,KAAKd,KAAK+yB,OAAOW,IACrB5Y,EAAMlV,MAEL,CAED,IAAI5C,EAAKhD,KAAKszB,UAAUH,EAASrY,EAAI3c,OACrCgT,EAAIie,MAAuC,QAA9BttB,EAAKkB,EAAGorB,WAAqC,IAAPtsB,OAAgB,EAASA,EAAGstB,OAASje,EAAIie,KAC5FqE,EAAI3yB,KAAKkC,GACT8X,EAAM,KAEE,OAARA,IACAA,EAAMqY,EAAQ9sB,OACTyU,EAAIxU,OACL6K,EAAIie,KAAOtU,EAAI3c,MAAMixB,OAGxBtU,EAAIxU,MAAwB,MAAhBwU,EAAI3c,MAAMuV,IACvBoH,EAAM,QAIlBgY,EAAOzyB,UAAUizB,UAAY,SAAUH,EAASrY,GAC5C,IAAItZ,EAAIM,EAAIE,EAAIE,EAChB,OAAQ4Y,EAAIpH,GACR,KAAK2a,GAAQa,MACT,OAAOlvB,KAAK+yB,QAAQvxB,EAAK,CAAE+W,KAAMuC,EAAIrO,GAAKjL,EAAG4sB,IAAmB,CAAEe,MAAOrU,EAAIqU,MAAOC,KAAMtU,EAAIsU,MAAQ5tB,IAC1G,KAAK6sB,GAAQ9d,OACT,OAAOzO,EAAK,CAAEgY,IAAKgB,EAAIrO,GAAK3K,EAAGssB,IAAmB,CAAEe,MAAOrU,EAAIqU,MAAOC,KAAMtU,EAAIsU,MAAQttB,EAC5F,KAAKusB,GAAQ9hB,OACT,OAAOvK,EAAK,CAAEqa,OAAQxZ,KAAKC,MAAMgY,EAAIrO,IAAMzK,EAAGosB,IAAmB,CAAEe,MAAOrU,EAAIqU,MAAOC,KAAMtU,EAAIsU,MAAQptB,EAC3G,KAAKqsB,GAAQiB,MACT,OAAOptB,EAAK,CAAEsa,MAAO1B,EAAIrO,EAAEhF,MAAM,IAAMvF,EAAGksB,IAAmB,CAAEe,MAAOrU,EAAIqU,MAAOC,KAAMtU,EAAIsU,MAAQltB,EACvG,IAAK,IACD,OAAOlC,KAAKwzB,kBAAkBL,EAASrY,GAC3C,QACI,OAAO9a,KAAKkzB,cAAcC,EAASrY,KAO/CgY,EAAOzyB,UAAUszB,cAAgB,SAAUpF,GAEvC,GAAmB,kBAARA,EACP,MAAM,IAAIpb,UAAU,wCAA0Cob,EAAM,YAExE,IAAI4E,EAAUtE,GAAKN,GACfzT,EAAMqY,EAAQ9sB,OAClB,OAAIyU,EAAIxU,KACG,KAEJtG,KAAKwzB,kBAAkBL,EAASrY,EAAI3c,QAO/C20B,EAAOzyB,UAAUuzB,UAAY,SAAUrF,GAEnC,GAAmB,kBAARA,EACP,MAAM,IAAIpb,UAAU,wCAA0Cob,EAAM,YAExE,IAAI4E,EAAUtE,GAAKN,GACfzT,EAAMqY,EAAQ9sB,OAClB,OAAIyU,EAAIxU,KACG,KAEJtG,KAAKkzB,cAAcC,EAASrY,EAAI3c,QAO3C20B,EAAOzyB,UAAUwzB,yBAA2B,SAAUtF,GAElD,GAAmB,kBAARA,EACP,MAAM,IAAIpb,UAAU,wCAA0Cob,EAAM,YAExE,IAAI4E,EAAUtE,GAAKN,GACfzT,EAAMqY,EAAQ9sB,OAClB,OAAIyU,EAAIxU,KACG,KAEJtG,KAAKszB,UAAUH,EAASrY,EAAI3c,QAOvC20B,EAAOzyB,UAAUyzB,YAAc,SAAUvF,GACrC,OAAOvuB,KAAK2zB,cAAcpF,IAQ9BuE,EAAOzyB,UAAU0zB,UAAY,SAAUxF,GACnC,OAAOvuB,KAAK4zB,UAAUrF,IAM1BuE,EAAOzyB,UAAU2zB,UAAY,SAAUzF,GACnC,IAAIjY,EAAK9U,EAAIqV,EAAK/U,EAAIiV,EAAK/U,EAE3B,GAAmB,kBAARusB,EACP,MAAM,IAAIpb,UAAU,wCAA0Cob,EAAM,YAExE,GAAIvtB,MAAMC,QAAQstB,GAAM,CACpB,IAAIyE,EAAM,GACV,IACI,IAAK,IAAIiB,EAAQtf,GAAS4Z,GAAM2F,EAAUD,EAAM5tB,QAAS6tB,EAAQ5tB,KAAM4tB,EAAUD,EAAM5tB,OAAQ,CAC3F,IAAIT,EAAIsuB,EAAQ/1B,MAChB,GAAU,OAANyH,GAA2B,kBAANA,EACrB,MAAM,IAAI6sB,GAAe7sB,EAAG,gCAAkCA,GAElEotB,EAAIlyB,KAAKd,KAAKg0B,UAAUpuB,KAGhC,MAAOyQ,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQ6d,IAAYA,EAAQ5tB,OAAS9E,EAAKyyB,EAAMvd,SAASlV,EAAG2E,KAAK8tB,GAEjE,QAAU,GAAI3d,EAAK,MAAMA,EAAI/P,OAEjC,OAAOysB,EAEN,GAAI,SAAUzE,EAAK,CACpB,IAAI7tB,EAAI6tB,EACR,GAAsB,kBAAX7tB,EAAE6X,YACKtZ,IAAbyB,EAAE8X,QAAwBxX,MAAMC,QAAQP,EAAE8X,gBAC/BvZ,IAAXyB,EAAEqU,MAAsB/T,MAAMC,QAAQP,EAAEqU,OAAQ,CAC7Cie,EAAM,CACNza,KAAM7X,EAAE6X,MAEZ,QAAiBtZ,IAAbyB,EAAE8X,OAAsB,CACxB,IACI,IAAK,IAAItW,EAAKyS,GAASjU,EAAE8X,QAASjC,EAAKrU,EAAGmE,QAASkQ,EAAGjQ,KAAMiQ,EAAKrU,EAAGmE,OAAQ,CACxE,IAAIqG,EAAI6J,EAAGpY,MACX,GAAiB,kBAANuO,EACP,MAAM,IAAI+lB,GAAe/lB,EAAG,oBAAsBA,IAI9D,MAAOkK,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQL,IAAOA,EAAGjQ,OAASxE,EAAKI,EAAGwU,SAAS5U,EAAGqE,KAAKjE,GAEpD,QAAU,GAAI2U,EAAK,MAAMA,EAAItQ,OAEjCysB,EAAIxa,OAAS9X,EAAE8X,OAEnB,QAAevZ,IAAXyB,EAAEqU,KAAoB,CACtBie,EAAIje,KAAO,GACX,IACI,IAAK,IAAIyB,EAAK7B,GAASjU,EAAEqU,MAAOof,EAAK3d,EAAGnQ,QAAS8tB,EAAG7tB,KAAM6tB,EAAK3d,EAAGnQ,OAAQ,CAClEqG,EAAIynB,EAAGh2B,MACX,GAAU,OAANuO,GAA2B,kBAANA,EACrB,MAAM,IAAI+lB,GAAe/lB,EAAG,wBAA0BA,GAE1DsmB,EAAIje,KAAKjU,KAAKd,KAAKg0B,UAAUtnB,KAGrC,MAAOoK,GAASC,EAAM,CAAExQ,MAAOuQ,GAC/B,QACI,IACQqd,IAAOA,EAAG7tB,OAAStE,EAAKwU,EAAGE,SAAS1U,EAAGmE,KAAKqQ,GAEpD,QAAU,GAAIO,EAAK,MAAMA,EAAIxQ,QAGrC,OAAOvG,KAAK+yB,OAAOC,GAEvB,MAAM,IAAIP,GAAelE,EAAK,8BAAgCA,GAE7D,GAAI,WAAYA,EAAK,CACtB,GAA0B,kBAAfA,EAAIlS,OACX,MAAO,CAAEA,OAAQkS,EAAIlS,QAEzB,MAAM,IAAIoW,GAAelE,EAAK,6BAA+BA,GAE5D,GAAI,QAASA,EAAK,CACnB,GAAuB,kBAAZA,EAAIzU,KAAoB8Y,GAAM/mB,KAAK0iB,EAAIzU,KAC9C,MAAO,CAAEA,IAAKyU,EAAIzU,KAEtB,MAAM,IAAI2Y,GAAelE,EAAK,0BAA4BA,GAEzD,GAAI,UAAWA,EAAK,CACrB,GAAyB,kBAAdA,EAAI/R,OACXqW,GAAQhnB,KAAK0iB,EAAI/R,OACjB,MAAO,CAAEA,MAAO+R,EAAI/R,OAExB,MAAM,IAAIiW,GAAelE,EAAK,4BAA8BA,GAG5D,MAAM,IAAIkE,GAAelE,EAAK,sBAAwBA,IAGvDuE,EA5VgB,IA+VI,WAC3B,SAASsB,EAAUxC,EAAKyC,QACR,IAARA,IAAkBA,EAAM,GAC5Br0B,KAAK4xB,IAAMA,EACX5xB,KAAKq0B,IAAMA,EAEfD,EAAU/zB,UAAUi0B,OAAS,SAAU1uB,GACnC,IAAIpE,OACM,IAANoE,IAAgBA,EAAI,GACxB,IAAIotB,EAAM,GACV,QAAyE/zB,KAAhD,QAAnBuC,EAAKxB,KAAK4xB,WAAwB,IAAPpwB,OAAgB,EAASA,EAAG8yB,QACzD,IAAK,IAAIpuB,EAAIlG,KAAKq0B,IAAMzuB,EAAGM,EAAI,EAAGA,IAC9B8sB,GAAOhzB,KAAK4xB,IAAI0C,OAGxB,OAAOtB,GAEXjgB,OAAOsE,eAAe+c,EAAU/zB,UAAW,KAAM,CAC7C2W,IAAK,WACD,IAAIxV,EACJ,OAA4B,QAAnBA,EAAKxB,KAAK4xB,WAAwB,IAAPpwB,OAAgB,EAASA,EAAG+yB,UAAY,IAEhFjd,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe+c,EAAU/zB,UAAW,OAAQ,CAC/C2W,IAAK,WACD,IAAIxV,EACJ,OAA4B,QAAnBA,EAAKxB,KAAK4xB,WAAwB,IAAPpwB,OAAgB,EAASA,EAAG+yB,UAAY,KAEhFjd,YAAY,EACZC,cAAc,IAElB6c,EAAU/zB,UAAUm0B,KAAO,SAAU5uB,GACjC,OAAO,IAAIwuB,EAAUp0B,KAAK4xB,IAAK5xB,KAAKq0B,IAAMzuB,KAlCpB,GA6M9B,IAAI6uB,GAAI,CACJ,YACA,WACA,YACA,WACA,YACA,WACA,UACA,YAEAC,GAAI,CACJ,WAAgB,YAAgB,YAAgB,UAAgB,UAAgB,YAAgB,YAAgB,YAChH,UAAgB,UAAgB,UAAgB,WAAgB,YAAgB,YAAgB,YAAgB,YAChH,WAAgB,UAAgB,UAAgB,UAAgB,UAAgB,WAAgB,WAAgB,YAChH,YAAgB,YAAgB,YAAgB,YAAgB,WAAgB,UAAgB,UAAgB,UAChH,UAAgB,UAAgB,WAAgB,WAAgB,WAAgB,YAAgB,YAAgB,YAChH,YAAgB,YAAgB,YAAgB,WAAgB,WAAgB,WAAgB,UAAgB,UAChH,UAAgB,UAAgB,UAAgB,UAAgB,UAAgB,WAAgB,WAAgB,WAChH,WAAgB,YAAgB,YAAgB,YAAgB,YAAgB,YAAgB,YAAgB,WAGpH,SAASC,GAAOC,GACZ,IAAIte,EAAK9U,EAELwE,GAAK4uB,EAAIj2B,OAAS,GAAK,GACvBk2B,EAAY,IAAN7uB,EAAU,EAAI,GAAKA,EAC7B,GAAI4uB,EAAIj2B,OAAS,UACb,MAAM,IAAIsE,MAAM,sCAAwC2xB,EAAIj2B,QAEhE,IAAImyB,EAAI8D,EAAIj2B,QAAU,EAClBoK,EAASvC,GAAcA,GAAcA,GAAcA,GAAc,GAAId,GAAOkvB,IAAO,CACnF,MACAlvB,GAAQ,IAAI1E,MAAM6zB,GAAKC,KAAK,KAAO,CACnC,EAAG,EAAG,EAAG,EAAIhE,GAAK,GAAM,IAAOA,GAAK,GAAM,IAAOA,GAAK,EAAK,IAAU,IAAJA,IAErE,SAASiE,EAAI/nB,EAAGpH,GACZ,OAAQoH,IAAMpH,EAAMoH,GAAM,GAAKpH,EAKnC,IAHA,IAAIwE,EAAI5D,GAAc,GAAId,GAAO+uB,KAC7BO,EAAI,IAAIh0B,MAAM,IACdyL,EAAI,IAAIzL,MAAM,GACTi0B,EAAS,EAAGA,EAASlsB,EAAOpK,OAAQs2B,GAAU,GAAI,CACvD,IAAIC,EAAID,EACJ/uB,EAAI,EACR,MAAOA,EAAI,GACP8uB,EAAE9uB,GAAM6C,EAAOmsB,IAAM,GAAOnsB,EAAOmsB,EAAI,IAAM,GAAOnsB,EAAOmsB,EAAI,IAAM,EAAKnsB,EAAOmsB,EAAI,GACrFA,GAAK,EACLhvB,IAEJ,MAAOA,EAAI,GAAI,CACX,IAAIivB,EAAKJ,EAAIC,EAAE9uB,EAAI,IAAK,GAAK6uB,EAAIC,EAAE9uB,EAAI,IAAK,IAAO8uB,EAAE9uB,EAAI,MAAQ,EAC7DkvB,EAAKL,EAAIC,EAAE9uB,EAAI,GAAI,IAAM6uB,EAAIC,EAAE9uB,EAAI,GAAI,IAAO8uB,EAAE9uB,EAAI,KAAO,GAC/D8uB,EAAE9uB,IAAY,EAALkvB,GAAUJ,EAAE9uB,EAAI,GAAKivB,EAAKH,EAAE9uB,EAAI,IAAO,EAChDA,IAEJ,IAAK,IAAImvB,EAAM,EAAGA,EAAM,EAAGA,IACvB5oB,EAAE4oB,GAAOjrB,EAAEirB,GAEf,IAAK,IAAIC,EAAM,EAAGA,EAAM,GAAIA,IAAO,CAC/B,IAAIC,EAAKR,EAAItoB,EAAE,GAAI,GAAKsoB,EAAItoB,EAAE,GAAI,IAAMsoB,EAAItoB,EAAE,GAAI,IAC9C+oB,EAAKT,EAAItoB,EAAE,GAAI,GAAKsoB,EAAItoB,EAAE,GAAI,IAAMsoB,EAAItoB,EAAE,GAAI,IAC9CgpB,EAAMhpB,EAAE,GAAK+oB,GAAO/oB,EAAE,GAAKA,EAAE,IAASA,EAAE,GAAMA,EAAE,IAAOioB,GAAEY,GAAON,EAAEM,GAAQ,EAC1EI,EAAMH,GAAQ9oB,EAAE,GAAKA,EAAE,GAAOA,EAAE,GAAKA,EAAE,GAAOA,EAAE,GAAKA,EAAE,IAAS,EACpEA,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAMA,EAAE,GAAKgpB,EAAM,EACrBhpB,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAKA,EAAE,GACTA,EAAE,GAAMgpB,EAAKC,EAAM,EAEvB,IAAK,IAAIC,EAAM,EAAGA,EAAM,EAAGA,IACvBvrB,EAAEurB,GAAQvrB,EAAEurB,GAAOlpB,EAAEkpB,GAAQ,EAGrC,IAAIC,EAAS,GACb,IACI,IAAK,IAAIC,EAAMlhB,GAASvK,GAAI0rB,EAAQD,EAAIxvB,QAASyvB,EAAMxvB,KAAMwvB,EAAQD,EAAIxvB,OAAQ,CAC7E,IAAI0vB,EAAMD,EAAM33B,MAChBy3B,EAAO90B,KAAMi1B,GAAO,GAAM,KAC1BH,EAAO90B,KAAMi1B,GAAO,GAAM,KAC1BH,EAAO90B,KAAMi1B,GAAO,EAAK,KACzBH,EAAO90B,KAAW,IAANi1B,IAGpB,MAAO1f,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQyf,IAAUA,EAAMxvB,OAAS9E,EAAKq0B,EAAInf,SAASlV,EAAG2E,KAAK0vB,GAE3D,QAAU,GAAIvf,EAAK,MAAMA,EAAI/P,OAEjC,OAAOqvB,EAEX,IAAII,GAAoB,CACpB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAClB,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1B,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAC3B,IAAK,EAAG,GAAI,GAAI,GAAI,GAAI,IAAK,EAC7B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAC5B,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,IAAK,EAAG,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,IAYZ,SAASC,GAAO1H,EAAKroB,GACjB,IAAIsqB,EAAIjC,EAAI2H,WAAWhwB,GAAK,GAC5B,GAAIsqB,GAAKwF,GAAkBr3B,SAAoC,IAA1Bq3B,GAAkBxF,GACnD,MAAM,IAAIvtB,MAAM,2DAA6DiD,EAAI,KAAOqoB,EAAIroB,IAEhG,OAAO8vB,GAAkBxF,GAE7B,SAAS2F,GAAa5H,GAClB,IAAI6H,EAAM,GACNlwB,EAAI,EAER,MAAOA,EAAIqoB,EAAI5vB,QAA6B,IAAnBs3B,GAAO1H,EAAKroB,GACjCA,IAEJ,IAAImwB,EAAQnwB,EACZ,MAAOA,EAAIqoB,EAAI5vB,OAAQ,CACnB,IAAI23B,EAAQL,GAAO1H,EAAKroB,KAMpB8oB,EAAK,EACT,MAAiB,IAAVsH,GAAetH,EAAKoH,EAAIz3B,OAAQ,CACnC,IAAIkH,EAAqB,IAAhBuwB,EAAIpH,IAAO,GAAUsH,EAC9BF,EAAIpH,KAAQnpB,EAAI,IAChBywB,EAAQrlB,KAAKkB,MAAMtM,EAAI,MAG/B,MAAOwwB,KAAU,EACbD,EAAIt1B,KAAK,GAEb,OAAOs1B,EAAIlS,UAyBf,SAASqS,GAAkBhI,GACvB,IAAIxlB,EAASotB,GAAa5H,GAC1B,GAAIxlB,EAAOpK,OAAS,EAChB,MAAM,IAAIsE,MAAM,iDAAmD8F,EAAOpK,QAE9E,IAAI8C,EAAOsH,EAAOtB,MAAM,EAAGsB,EAAOpK,OAAS,GACvC63B,EAAMztB,EAAOtB,MAAMsB,EAAOpK,OAAS,GACnCqS,EAAW2jB,GAAOA,GAAOlzB,IAC7B,GAAI+0B,EAAI,KAAOxlB,EAAS,IACpBwlB,EAAI,KAAOxlB,EAAS,IACpBwlB,EAAI,KAAOxlB,EAAS,IACpBwlB,EAAI,KAAOxlB,EAAS,GACpB,MAAM,IAAI/N,MAAM,gDAEpB,OAAOxB,EAOX,IAAIg1B,GAAgC,SAAU3d,GAO1C,SAAS2d,EAAexe,EAAKtY,GACzB,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAML,IAAYK,KAG1C,OAFA0B,EAAMuW,IAAMA,EACZlF,OAAOC,eAAetR,EAAO+0B,EAAep2B,WACrCqB,EAEX,OAZAwR,GAAUujB,EAAgB3d,GAYnB2d,EAbwB,CAcjCxzB,OAIF,IAAIyzB,GAAoC,SAAU5d,GAO9C,SAAS4d,EAAmBze,EAAKxW,EAAM9B,GACnC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKtY,IAAYK,KAK/C,YAJaf,IAATwC,IACAC,EAAMD,KAAOA,GAEjBsR,OAAOC,eAAetR,EAAOg1B,EAAmBr2B,WACzCqB,EAEX,OAdAwR,GAAUwjB,EAAoB5d,GAcvB4d,EAf4B,CAgBrCD,IAEEE,GAA6B,WAC7B,SAASA,EAAY3G,GAGjB,GAFAhwB,KAAK42B,KAAM,EACX52B,KAAKsJ,IAAM,QACCrK,IAAR+wB,EAGJ,GAAmB,kBAARA,EACP,IAAK,IAAI9pB,EAAI,EAAGA,EAAI8pB,EAAIrxB,OAAQuH,IAAK,CACjC,IAAIsqB,EAAIR,EAAIkG,WAAWhwB,GACvB,GAAU,IAANA,GAAiB,KAANsqB,EACXxwB,KAAK42B,KAAM,MAEV,CACD,GAAIpG,EAAI,IAAQA,EAAI,GAChB,MAAM,IAAIvtB,MAAM,6CAA+C+sB,EAAI9pB,IAEvElG,KAAK62B,OAAOrG,EAAI,UAInBR,EAAM,GACXhwB,KAAK42B,KAAM,EACX52B,KAAK62B,QAAQ7G,IAGbhwB,KAAK62B,OAAO7G,GAqCpB,OAlCA2G,EAAYt2B,UAAUw2B,OAAS,SAAUrG,GACrC,IAAItqB,EAAI,EACR,MAAa,IAANsqB,GAAWtqB,EAAIlG,KAAKsJ,IAAI3K,OAAQ,CACnC,IAAIkH,EAAyB,IAApB7F,KAAKsJ,IAAIpD,IAAM,GAAUsqB,EAClCxwB,KAAKsJ,IAAIpD,KAAOL,EAAI,IACpB2qB,EAAIvf,KAAKkB,MAAMtM,EAAI,OAG3B8wB,EAAYt2B,UAAUy2B,IAAM,SAAU9G,GAClC,GAAIhwB,KAAK42B,MAAQ5G,EAAI4G,IACjB,OAAQ5G,EAAI4G,IAAM,EAAI,IAAM52B,KAAK42B,IAAM,EAAI,GAG3C,IAAI5D,EAAM,EACV,GAAIhzB,KAAKsJ,IAAI3K,SAAWqxB,EAAI1mB,IAAI3K,OAC5Bq0B,EAAMhzB,KAAKsJ,IAAI3K,OAASqxB,EAAI1mB,IAAI3K,QAAU,EAAI,OAE7C,GAAwB,IAApBqB,KAAKsJ,IAAI3K,OAAc,CAC5B,IAAIuH,EAAI8pB,EAAI1mB,IAAI3K,OAAS,EACzB,MAAOuH,GAAK,GAAKlG,KAAKsJ,IAAIpD,KAAO8pB,EAAI1mB,IAAIpD,GACrCA,IAEJ8sB,EAAM9sB,EAAI,EAAI,EAAIlG,KAAKsJ,IAAIpD,GAAK8pB,EAAI1mB,IAAIpD,IAAM,EAAI,EAEtD,OAAQlG,KAAK42B,IAAoB,IAAR5D,EAAY,GAAKA,EAAvBA,GAG3BjgB,OAAOsE,eAAesf,EAAYt2B,UAAW,OAAQ,CACjD2W,IAAK,WACD,OAA2B,IAApBhX,KAAKsJ,IAAI3K,OAAe,EAAIqB,KAAK42B,KAAO,EAAI,GAEvDtf,YAAY,EACZC,cAAc,IAEXof,EA/DqB,GAiEhC,SAASI,GAAWpjB,GAEhB,IADA,IAAIqf,EAAM,GACD9sB,EAAI,EAAGA,EAAIyN,EAAEhV,OAAQuH,GAAK,EAAG,CAClC,IAAI8G,EAAI3C,SAASsJ,EAAElM,MAAMvB,EAAGA,EAAI,GAAI,IACpC,GAAIqK,OAAOM,MAAM7D,GACb,OAAO,KAEXgmB,EAAIlyB,KAAKkM,GAEb,OAAOgmB,EAEX,SAASgE,GAAatqB,EAAGC,GACrB,GAAID,EAAE/N,SAAWgO,EAAEhO,OACf,OAAO+N,EAAE/N,OAASgO,EAAEhO,QAAU,EAAI,EAEjC,GAAiB,IAAb+N,EAAE/N,OAAc,CACrB,IAAIuH,EAAI,EACR,MAAOA,EAAIwG,EAAE/N,QAAU+N,EAAExG,KAAOyG,EAAEzG,GAC9BA,IAEJ,OAAOA,IAAMwG,EAAE/N,OAAS,EAAI+N,EAAExG,GAAKyG,EAAEzG,IAAM,EAAI,EAG/C,OAAO,EAGf,SAAS+wB,GAAUjqB,GACf,IAGI,OADA,IAAI2pB,GAAY3pB,IACT,EAEX,MAAOxL,GACH,OAAO,GAGf,SAAS01B,GAAUlqB,GACf,IACI,OAAO,IAAI2pB,GAAY3pB,GAAGmqB,MAAQ,EAEtC,MAAO31B,GACH,OAAO,GAGf,IAAI41B,GAAQ,sDACZ,SAASC,GAAkB32B,EAAGkxB,GAC1B,IAAItb,EAAK9U,EAIL81B,EACAhoB,EACAioB,EALJ,GAAIv2B,MAAMC,QAAQP,GACd,MAAO,GAKX,QAAiBzB,IAAbyB,EAAE8X,OACF,IACI,IAAK,IAAI1W,EAAK6S,GAASjU,EAAE8X,QAASxW,EAAKF,EAAGuE,QAASrE,EAAGsE,KAAMtE,EAAKF,EAAGuE,OAAQ,CACxE,IAAIoG,EAAIzK,EAAG7D,MACX,GAAiB,IAAbsO,EAAE9N,OAAc,CAChB,IAAKy4B,GAAMvrB,KAAKY,MACD,OAARmlB,QAAwB,IAARA,OAAiB,EAASA,EAAI4F,cAAsB,OAAN/qB,GAAoB,QAANA,MACpE,OAARmlB,QAAwB,IAARA,OAAiB,EAASA,EAAI6F,gBAAwB,OAANhrB,EACnE,MAAM,IAAIgqB,GAAe/1B,EAAGA,EAAE6X,KAAO,4BAA8B9L,GAEvE,OAAQA,EAAE,IACN,IAAK,MACY,OAARmlB,QAAwB,IAARA,OAAiB,EAASA,EAAI8F,cAAgBjrB,EAAE9N,OAAS,KAC1E24B,EAAQA,GAAS,GACjBA,EAAMx2B,KAAK2L,IAEf,MACJ,IAAK,IACGA,EAAE9N,OAAS,IACX2Q,EAAOA,GAAQ,GACfA,EAAKxO,KAAK2L,IAEd,MACJ,IAAK,MACY,OAARmlB,QAAwB,IAARA,OAAiB,EAASA,EAAI+F,WAAalrB,EAAE9N,OAAS,KACvE44B,EAAOA,GAAQ,GACfA,EAAKz2B,KAAK2L,IAEd,SAKpB,MAAO4J,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQrU,IAAOA,EAAGsE,OAAS9E,EAAKM,EAAG4U,SAASlV,EAAG2E,KAAKrE,GAEpD,QAAU,GAAIwU,EAAK,MAAMA,EAAI/P,OAGrC,MAAO,CAAEyN,EAAGsjB,EAAO5jB,EAAGpE,EAAM7C,EAAG8qB,GAEnC,IAAIK,GAAc,CACdC,UAAW,CAAC,GAAI,CAAC,EAAG,KACpBC,cAAe,CAAC,GAAI,CAAC,EAAG,MACxBC,kBAAmB,CAAC,GAAI,CAAC,IAAK,MAC9BC,sBAAuB,CAAC,GAAI,CAAC,GAAI,IAAK,MACtCC,aAAc,CAAC,GAAI,CAAC,EAAG,MACvBC,YAAa,CAAC,GAAI,CAAC,GAAI,MACvBC,qBAAsB,CAAC,GAAI,CAAC,EAAG,IAAK,MACpCC,uBAAwB,CAAC,GAAI,CAAC,EAAG,IAAK,MACtCC,kBAAmB,CAAC,GAAI,CAAC,EAAG,IAAK,MACjCC,aAAc,CAAC,GAAI,CAAC,EAAG,GAAI,MAC3BC,uBAAwB,CAAC,GAAI,CAAC,IAAK,MACnCC,YAAa,CAAC,GAAI,CAAC,GAAI,GAAI,GAAI,IAC/BC,iBAAkB,CAAC,GAAI,CAAC,GAAI,GAAI,GAAI,MACpCC,mBAAoB,CAAC,GAAI,CAAC,GAAI,IAAK,IAAK,MACxCC,cAAe,CAAC,GAAI,CAAC,GAAI,GAAI,IAAK,MAClCC,qBAAsB,CAAC,GAAI,CAAC,EAAG,GAAI,GAAI,IAAK,KAC5CC,4BAA6B,CAAC,GAAI,CAAC,EAAG,IAAK,IAAK,IAAK,MACrDC,uBAAwB,CAAC,GAAI,CAAC,EAAG,GAAI,GAAI,IAAK,MAC9CC,mBAAoB,CAAC,GAAI,CAAC,EAAG,IAAK,IAAK,KACvCC,cAAe,CAAC,GAAI,CAAC,EAAG,IAAK,IAAK,MAClCC,gBAAiB,CAAC,GAAI,CAAC,GAAI,IAAK,MAChCC,iBAAkB,CAAC,GAAI,CAAC,EAAG,GAAI,IAC/BC,iBAAkB,CAAC,GAAI,CAAC,GAAI,IAAK,GAAI,IACrCC,iBAAkB,CAAC,GAAI,CAAC,EAAG,IAAK,IAAK,IAAK,KAC1CC,mBAAoB,CAAC,GAAI,CAAC,GAAI,IAAK,IAAK,GAAI,KAC5CC,cAAe,CAAC,GAAI,CAAC,GAAI,IAAK,GAAI,KAClCC,iBAAkB,CAAC,GAAI,CAAC,EAAG,IAAK,KAChCC,QAAS,CAAC,EAAG,CAAC,GAAI,GAAI,KAE1B,SAASC,GAAmB5T,GAGxB,IAFA,IAAIhP,EAAKrV,EACLk4B,EAAQ,GACHvZ,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCuZ,EAAMvZ,EAAK,GAAKvM,UAAUuM,GAE9B,IAAI7W,EAAMitB,GAAkB1Q,GAC5B,IACI,IAAK,IAAI8T,EAAUhlB,GAAS+kB,GAAQE,EAAYD,EAAQtzB,QAASuzB,EAAUtzB,KAAMszB,EAAYD,EAAQtzB,OAAQ,CACzG,IAAIqN,EAAIkmB,EAAUz7B,MACd2D,EAAK4D,GAAOkyB,GAAYlkB,GAAI,GAAImmB,EAAO/3B,EAAG,GAAIpB,EAAIoB,EAAG,GACzD,GAAIwH,EAAI3K,SAAWk7B,EAAOn5B,EAAE/B,OAAQ,CAChC,IAAIuH,EAAI,EACR,MAAOA,EAAIxF,EAAE/B,QAAU2K,EAAIpD,KAAOxF,EAAEwF,GAChCA,IAEJ,GAAIA,IAAMxF,EAAE/B,OACR,MAAO,CAAC+U,EAAGpK,EAAI7B,MAAM/G,EAAE/B,WAKvC,MAAOiY,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQgjB,IAAcA,EAAUtzB,OAAS9E,EAAKm4B,EAAQjjB,SAASlV,EAAG2E,KAAKwzB,GAEvE,QAAU,GAAI9iB,EAAK,MAAMA,EAAItQ,OAEjC,OAAO,KASX,SAASuzB,GAAWjU,EAAIpZ,GACpB,IAAIstB,EAAKttB,EACLsI,EAAO/T,MAAMC,QAAQ84B,GAAMA,EAAKA,EAAGhlB,KACvC,GAAoB,IAAhBA,EAAKpW,OAAc,CAEnB,IAAIq0B,EAAa,SAAPnN,EAAgB,CACtBtN,KAAM,OACNxD,KAAMA,GACN,CACAwD,KAAM,OACNxD,KAAMA,GAEV,OAAOie,EAEX,OAAO,GAAS,GAAS,GAAKhyB,MAAMC,QAAQ84B,GAAM,CAAExhB,KAAMsN,GAAOkU,GAAM,CAAEhlB,KAAM,CACvEA,EAAK,GACL,CACIwD,KAAMsN,EACN9Q,KAAMA,EAAKtN,MAAM,OAIjC,SAASuyB,GAAWtmB,GAChB,OAAO1S,MAAMC,QAAQyS,IAAiB,SAAXA,EAAE6E,KAEjC,SAAS0hB,GAAWnnB,GAChB,OAAO9R,MAAMC,QAAQ6R,IAAM,SAAUA,GAAgB,SAAXA,EAAEyF,KAEhD,IAAI2hB,GAAY,2JAChB,SAASC,GAAUztB,GACf,GAAI,WAAYA,EAAG,CACf,GAAIwqB,GAAUxqB,EAAE2P,QACZ,OAAO,IAAI+B,KAAK/T,SAASqC,EAAE2P,OAAQ,KAElC,GAAI6d,GAAUruB,KAAKa,EAAE2P,QAAS,CAC/B,IAAIrP,EAAI,IAAIoR,KAAK1R,EAAE2P,QACnB,IAAK9L,OAAOM,MAAM7D,EAAEotB,SAChB,OAAOptB,QAId,GAAIkqB,GAAUxqB,EAAEoN,KACjB,OAAO,IAAIsE,KAAK/T,SAASqC,EAAEoN,IAAK,KAEpC,OAAO,KAEX,SAASugB,GAAS1mB,GAEd,IADA,IAAIiH,EAAM,GACD1U,EAAI,EAAGA,EAAIyN,EAAEhV,OAAQuH,GAAK,EAAG,CAClC,IAAIo0B,EAAK3mB,EAAElM,MAAMvB,EAAGA,EAAI,GACpB8G,EAAI3C,SAASiwB,EAAI,IACrB,GAAI/pB,OAAOM,MAAM7D,GACb,MAAM,IAAI/J,MAAM,yBAA2Bq3B,GAE/C1f,EAAI9Z,KAAKkM,GAEb,OAAO4N,EAEX,SAAS2f,GAAS/d,GACd,OAAOA,EAAMrS,KAAI,SAAU6C,GAAK,OAASA,GAAK,EAAK,IAAKvD,SAAS,KAAW,GAAJuD,GAASvD,SAAS,OAAQpI,KAAK,IAI3G,IAAIm5B,GAAsB,CACtB,KAAO,EAAM,KAAO,EAAM,SAAW,EAAM,QAAU,EAAM,KAAO,EAAM,OAAS,EAAM,SAAW,EAClG,SAAW,EAAM,KAAO,EAAM,KAAO,EAAM,UAAY,EAAM,iBAAmB,EAAM,SAAW,EAAM,QAAU,EAAM,MAAQ,EAAM,MAAQ,EAC7I,IAAM,EAAM,MAAQ,EAAM,UAAY,EAAM,IAAM,EAAM,gBAAkB,EAAM,IAAM,EAAM,UAAY,EAAM,kBAAoB,EAClI,KAAO,EAAM,OAAS,EAAM,cAAgB,EAAM,QAAU,EAAM,IAAM,EAAM,OAAS,EAAM,KAAO,EAAM,KAAO,EAAM,IAAM,EAAM,KAAO,EAAM,KAAO,EACvJ,KAAO,EAAM,KAAO,EAAM,OAAS,EAAM,KAAO,EAAM,KAAO,EAAM,IAAM,EAAM,MAAQ,EAAM,eAAiB,EAAM,aAAe,EACnI,uBAAyB,EAAM,MAAQ,EAAM,cAAgB,EAAM,QAAU,EAAM,cAAgB,EAAM,QAAU,EAAM,MAAQ,EACjI,QAAU,EAAM,MAAQ,EAAM,OAAS,EAAM,MAAQ,EAAM,QAAU,EAAM,cAAgB,EAAM,KAAO,EAAM,MAAQ,EAAM,QAAU,EACtI,oBAAsB,EAAM,iBAAmB,EAAM,MAAQ,EAAM,cAAgB,EAAM,KAAO,EAAM,QAAU,GAEhHC,GAAiB1nB,OAAOU,OAAO,GAAI+mB,GAAqB,CACxD,UAAY,EAAM,iBAAmB,EAAM,KAAO,EAAM,KAAO,EAAM,MAAQ,EAC7E,KAAO,EAAM,KAAO,EAAM,eAAiB,EAAM,WAAa,EAAM,WAAa,EAAM,KAAO,EAAM,IAAM,EAAM,SAAW,EAAM,SAAW,EAC5I,SAAW,EAAM,MAAQ,EAAM,QAAU,EAAM,MAAQ,EAAM,MAAQ,EAAM,WAAa,EAAM,KAAO,EAAM,KAAO,EAAM,MAAQ,EAAM,MAAQ,EAC9I,MAAQ,EAAM,OAAS,EAAM,qBAAuB,EAAM,QAAU,EAAM,QAAU,EAAM,QAAU,EAAM,MAAQ,IAElHE,GAA0B,CAC1B,MAAQ,EAAM,OAAS,EAAM,MAAQ,EAAM,KAAO,EAAM,KAAO,EAAM,QAAU,EAC/E,UAAY,EAAM,OAAS,EAAM,OAAS,EAAM,UAAY,EAAM,KAAO,EACzE,WAAa,EAAM,WAAa,EAAM,SAAW,GAEjDC,GAAU5nB,OAAOU,OAAO,GAAIinB,GAAyB,CACrD,IAAM,EAAM,MAAQ,EAAM,KAAO,EAAM,SAAW,EAAM,UAAY,EAAM,QAAU,EACpF,MAAQ,EAAM,KAAO,EAAM,WAAa,EAAM,QAAU,EAAM,cAAgB,EAC9E,cAAgB,EAAM,cAAgB,EAAM,qBAAuB,EAAM,eAAiB,EAAM,QAAU,IAE1GE,GAA0C,SAAU9hB,GAMpD,SAAS8hB,EAAyB3iB,EAAKtY,GACnC,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKtY,IAAYK,KAG/C,OAFA0B,EAAMuW,IAAMA,EACZlF,OAAOC,eAAetR,EAAOk5B,EAAyBv6B,WAC/CqB,EAEX,OAXAwR,GAAU0nB,EAA0B9hB,GAW7B8hB,EAZkC,CAa3CnE,IACF,SAASoE,GAAO73B,GACZ,MAAO,SAAUA,EAErB,SAAS83B,GAAY93B,GACjB,OAAOhC,MAAMC,QAAQ+B,IAAO,SAAUA,EAE1C,SAAS+3B,GAAW/3B,GAChB,GAAI63B,GAAO73B,GACP,OAAO,EAEX,MAAM,IAAI43B,GAAyB53B,EAAI,4BAE3C,SAASg4B,GAAUh4B,GACf,GAAIhC,MAAMC,QAAQ+B,GACd,OAAO,EAEX,MAAM,IAAI43B,GAAyB53B,EAAI,gCAE3C,SAASi4B,GAAgBj4B,GACrB,GAAI83B,GAAY93B,GACZ,OAAO,EAEX,MAAM,IAAI43B,GAAyB53B,EAAI,wCAE3C,SAASk4B,GAAch1B,GACnB,GAAiB,MAAbA,EAAE4T,IAAI,GACN,MAAM,IAAI8gB,GAAyB10B,EAAG,2BAG9C,SAASi1B,GAAiBn4B,GACtB,GAAI,QAASA,EACT,OAAO,EAEX,MAAM,IAAI43B,GAAyB53B,EAAI,wBAE3C,SAASo4B,GAAWp4B,EAAI4C,GACpB,IAAIpE,EACJ,GAAW,IAANoE,QAAuB3G,IAAZ+D,EAAG+R,OAA2C,QAAlBvT,EAAKwB,EAAG+R,YAAyB,IAAPvT,OAAgB,EAASA,EAAG7C,UAAYiH,EAC1G,OAAO,EAEX,MAAM,IAAIg1B,GAAyB53B,EAAI4C,EAAI,uBAO/C,SAASy1B,GAA2Br4B,GAChC,IAAIsT,EAAK9U,EACLM,EAAIE,EACR,GAAIhB,MAAMC,QAAQ+B,GAAK,CACnB,IACI,IAAK,IAAIgqB,EAAOrY,GAAS3R,GAAKs4B,EAAStO,EAAK3mB,QAASi1B,EAAOh1B,KAAMg1B,EAAStO,EAAK3mB,OAAQ,CACpF,IAAIT,EAAI01B,EAAOn9B,MACf,IAAK6C,MAAMC,QAAQ2E,KAAOi1B,GAAOj1B,GAC7B,MAAM,IAAIg1B,GAAyB53B,EAAI,6BAE3Cq4B,GAA2Bz1B,IAGnC,MAAOyQ,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQilB,IAAWA,EAAOh1B,OAAS9E,EAAKwrB,EAAKtW,SAASlV,EAAG2E,KAAK6mB,GAE9D,QAAU,GAAI1W,EAAK,MAAMA,EAAI/P,OAEjC,OAAO,EAEX,GAAIw0B,GAAW/3B,GAAK,CAChB,GAAI+P,OAAO1S,UAAUM,eAAewF,KAAKq0B,GAAqBx3B,EAAGuV,MAE7D,OADA6iB,GAAWp4B,EAAI,IACR,EAEX,OAAQA,EAAGuV,MACP,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,MACL,IAAK,SACL,IAAK,WACetZ,IAAZ+D,EAAG+R,MAAsBqmB,GAAWp4B,EAAI,IAEpCm4B,GAAiBn4B,EAAG+R,KAAK,KACzBmmB,GAAcl4B,EAAG+R,KAAK,IAG9B,MACJ,IAAK,MACL,IAAK,MACL,IAAK,sBAEGqmB,GAAWp4B,EAAI,IAEXm4B,GAAiBn4B,EAAG+R,KAAK,KACzBmmB,GAAcl4B,EAAG+R,KAAK,IAG9B,MACJ,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,MACL,IAAK,OAEGqmB,GAAWp4B,EAAI,IACfu4B,GAAoBv4B,EAAG+R,KAAK,IAEhC,MACJ,IAAK,SAEGqmB,GAAWp4B,EAAI,IACfw4B,GAA4Bx4B,EAAG+R,KAAK,IAExC,MACJ,IAAK,WAEGqmB,GAAWp4B,EAAI,IACfy4B,GAA4Bz4B,EAAG+R,KAAK,IAExC,MACJ,IAAK,UACL,IAAK,UACL,IAAK,UACL,IAAK,KAEGqmB,GAAWp4B,EAAI,KAEXg4B,GAAUh4B,EAAG+R,KAAK,KAClBsmB,GAA2Br4B,EAAG+R,KAAK,IAGnCimB,GAAUh4B,EAAG+R,KAAK,KAClBsmB,GAA2Br4B,EAAG+R,KAAK,KAG3C,MACJ,IAAK,MACL,IAAK,OACL,IAAK,OACL,IAAK,YAEGqmB,GAAWp4B,EAAI,IACfq4B,GAA2Br4B,EAAG+R,KAAK,IAEvC,MACJ,IAAK,kBAEGqmB,GAAWp4B,EAAI,IACf04B,GAAwB14B,EAAG+R,KAAK,IAEpC,MACJ,IAAK,MACD,GAAwE,KAAhD,QAAlBjT,EAAKkB,EAAG+R,YAAyB,IAAPjT,OAAgB,EAASA,EAAGnD,QAEpDw8B,GAAiBn4B,EAAG+R,KAAK,KACzBmmB,GAAcl4B,EAAG+R,KAAK,IAGtBimB,GAAUh4B,EAAG+R,KAAK,KAClBsmB,GAA2Br4B,EAAG+R,KAAK,QAGtC,IAAwE,KAAhD,QAAlB/S,EAAKgB,EAAG+R,YAAyB,IAAP/S,OAAgB,EAASA,EAAGrD,QAO7D,MAAM,IAAIi8B,GAAyB53B,EAAI,6BALnCg4B,GAAUh4B,EAAG+R,KAAK,KAClBsmB,GAA2Br4B,EAAG+R,KAAK,IAM3C,MACJ,IAAK,OAEGqmB,GAAWp4B,EAAI,KACf24B,GAA4B34B,EAAG+R,KAAK,IACpC6mB,GAAoB54B,EAAG+R,KAAK,KAEhC,MACJ,IAAK,YAEGqmB,GAAWp4B,EAAI,IACf64B,GAA8B74B,EAAG+R,KAAK,IAE1C,MACJ,IAAK,YAEGqmB,GAAWp4B,EAAI,KACf64B,GAA8B74B,EAAG+R,KAAK,IACtCwmB,GAAoBv4B,EAAG+R,KAAK,KAEhC,MACJ,IAAK,gBAEGqmB,GAAWp4B,EAAI,KACf64B,GAA8B74B,EAAG+R,KAAK,IACtC+mB,GAAkC94B,EAAG+R,KAAK,KAE9C,MACJ,IAAK,SAEGqmB,GAAWp4B,EAAI,KACfu4B,GAAoBv4B,EAAG+R,KAAK,IAC5BwmB,GAAoBv4B,EAAG+R,KAAK,IAExBimB,GAAUh4B,EAAG+R,KAAK,KAClBsmB,GAA2Br4B,EAAG+R,KAAK,KAG3C,MACJ,QACI,MAAM,IAAI6lB,GAAyB53B,EAAI,yBAGnD,OAAO,EAEX,SAAS64B,GAA8B74B,GAEnC,GAAIi4B,GAAgBj4B,GAChB,GAAIhC,MAAMC,QAAQ+B,IAAmB,SAAZA,EAAGuV,MAA+B,OAAZvV,EAAGuV,MAA6B,WAAZvV,EAAGuV,KAClEwjB,GAAa/4B,GAAI,SAAUA,GAAM,OAAO64B,GAA8B74B,WAErE,IAAK+P,OAAO1S,UAAUM,eAAewF,KAAKu0B,GAAyB13B,EAAGuV,MACvE,MAAM,IAAIqiB,GAAyB53B,EAAIA,EAAGuV,KAAO,4BAGzD,OAAO,EAEX,SAASijB,GAA4Bx4B,GAEjC,GAAIi4B,GAAgBj4B,IACZ63B,GAAO73B,GAAK,CACZ,IAAK+P,OAAO1S,UAAUM,eAAewF,KAAKw0B,GAAS33B,EAAGuV,OACtC,YAAZvV,EAAGuV,MACS,cAAZvV,EAAGuV,MACS,kBAAZvV,EAAGuV,MACS,WAAZvV,EAAGuV,KACH,MAAM,IAAIqiB,GAAyB53B,EAAIA,EAAGuV,KAAO,wDAErDwjB,GAAa/4B,GAAI,SAAUA,GAAM,OAAOw4B,GAA4Bx4B,MAG5E,OAAO,EAEX,SAAS24B,GAA4B34B,GAEjC,GAAIi4B,GAAgBj4B,IACZ63B,GAAO73B,GAAK,CACZ,IAAK+P,OAAO1S,UAAUM,eAAewF,KAAKw0B,GAAS33B,EAAGuV,OACtC,YAAZvV,EAAGuV,MACS,cAAZvV,EAAGuV,MACS,kBAAZvV,EAAGuV,MACS,WAAZvV,EAAGuV,MACS,aAAZvV,EAAGuV,KACH,MAAM,IAAIqiB,GAAyB53B,EAAIA,EAAGuV,KAAO,0BAErDwjB,GAAa/4B,GAAI,SAAUA,GAAM,OAAO24B,GAA4B34B,MAG5E,OAAO,EAEX,SAASg5B,GAA4Bh5B,GAEjC,GAAIi4B,GAAgBj4B,IACZ63B,GAAO73B,GAAK,CACZ,IAAK+P,OAAO1S,UAAUM,eAAewF,KAAKw0B,GAAS33B,EAAGuV,OACtC,cAAZvV,EAAGuV,MACS,aAAZvV,EAAGuV,KACH,MAAM,IAAIqiB,GAAyB53B,EAAIA,EAAGuV,KAAO,6CAErDwjB,GAAa/4B,GAAI,SAAUA,GAAM,OAAOg5B,GAA4Bh5B,MAG5E,OAAO,EAEX,SAASy4B,GAA4Bz4B,GAEjC,GAAIi4B,GAAgBj4B,IACZ63B,GAAO73B,GAAK,CACZ,IAAK+P,OAAO1S,UAAUM,eAAewF,KAAKw0B,GAAS33B,EAAGuV,OACtC,cAAZvV,EAAGuV,KACH,MAAM,IAAIqiB,GAAyB53B,EAAIA,EAAGuV,KAAO,+CAErDwjB,GAAa/4B,GAAI,SAAUA,GAAM,OAAOy4B,GAA4Bz4B,MAG5E,OAAO,EAEX,SAAS84B,GAAkC94B,GAEvC,GAAIi4B,GAAgBj4B,IACZ63B,GAAO73B,GAAK,CACZ,IAAK+P,OAAO1S,UAAUM,eAAewF,KAAKw0B,GAAS33B,EAAGuV,OACtC,YAAZvV,EAAGuV,MACS,cAAZvV,EAAGuV,MACS,kBAAZvV,EAAGuV,KACH,MAAM,IAAIqiB,GAAyB53B,EAAIA,EAAGuV,KAAO,yCAErDwjB,GAAa/4B,GAAI,SAAUA,GAAM,OAAO84B,GAAkC94B,MAGlF,OAAO,EAOX,SAASu4B,GAAoBv4B,GAEzB,GAAIi4B,GAAgBj4B,IACZ63B,GAAO73B,GAAK,CACZ,IAAK+P,OAAO1S,UAAUM,eAAewF,KAAKw0B,GAAS33B,EAAGuV,MAClD,MAAM,IAAIqiB,GAAyB53B,EAAI,iBAE3C+4B,GAAa/4B,GAAI,SAAUA,GAAM,OAAOu4B,GAAoBv4B,MAGpE,OAAO,EAEX,SAAS+4B,GAAa/4B,EAAIwU,GACtB,GAAIxW,MAAMC,QAAQ+B,IAAmB,SAAZA,EAAGuV,KAAiB,CACzC,IAAIxD,EAAO/T,MAAMC,QAAQ+B,GAAMA,EAAKA,EAAG+R,KACvC,QAAa9V,IAAT8V,GAAsBA,EAAKpW,OAAS,EACpC,MAAM,IAAIi8B,GAAyB53B,EAAI,iCAO3C,OALA+R,EAAK7T,SAAQ,SAAUwL,GACfuuB,GAAgBvuB,IAChB8K,EAAG9K,OAGJ,EAEX,OAAQ1J,EAAGuV,MACP,IAAK,SACL,IAAK,OAEG6iB,GAAWp4B,EAAI,IAAMi4B,GAAgBj4B,EAAG+R,KAAK,KAC7CyC,EAAGxU,EAAG+R,KAAK,IAEf,MACJ,IAAK,WAEGqmB,GAAWp4B,EAAI,IACfy4B,GAA4Bz4B,EAAG+R,KAAK,IAExC,MACJ,IAAK,KAEGqmB,GAAWp4B,EAAI,IAAMi4B,GAAgBj4B,EAAG+R,KAAK,KAAOkmB,GAAgBj4B,EAAG+R,KAAK,MAC5EyC,EAAGxU,EAAG+R,KAAK,IACXyC,EAAGxU,EAAG+R,KAAK,KAEf,MACJ,IAAK,SAEGqmB,GAAWp4B,EAAI,KACfu4B,GAAoBv4B,EAAG+R,KAAK,IAC5BwmB,GAAoBv4B,EAAG+R,KAAK,KAEhC,MACJ,IAAK,MAEGqmB,GAAWp4B,EAAI,IACf64B,GAA8B74B,EAAG+R,KAAK,IAE1C,MACJ,IAAK,MAEGqmB,GAAWp4B,EAAI,IAAMi4B,GAAgBj4B,EAAG+R,KAAK,KAAOkmB,GAAgBj4B,EAAG+R,KAAK,MAC5E8mB,GAA8B74B,EAAG+R,KAAK,IACtCyC,EAAGxU,EAAG+R,KAAK,KAEf,MACJ,IAAK,UAEGqmB,GAAWp4B,EAAI,IAAMi4B,GAAgBj4B,EAAG+R,KAAK,KAAOkmB,GAAgBj4B,EAAG+R,KAAK,MAC5E8mB,GAA8B74B,EAAG+R,KAAK,IACtC+mB,GAAkC94B,EAAG+R,KAAK,IAC1CyC,EAAGxU,EAAG+R,KAAK,KAEf,MACJ,IAAK,SAEGqmB,GAAWp4B,EAAI,IAAMi4B,GAAgBj4B,EAAG+R,KAAK,KAC7C8mB,GAA8B74B,EAAG+R,KAAK,IAE1C,MACJ,IAAK,gBACL,IAAK,sBACGqmB,GAAWp4B,EAAI,IACfm4B,GAAiBn4B,EAAG+R,KAAK,IAE7B,MACJ,QACIqmB,GAAWp4B,EAAI,GAEvB,OAAO,EAOX,SAAS44B,GAAoB54B,GACzB,IAAI6T,EAAKrV,EAAIuV,EAAKjV,EAClB,GAAK,QAASkB,GAAQ,WAAYA,GAAQ,UAAWA,EACjD,OAAO,EAEX,GAAIhC,MAAMC,QAAQ+B,GAAK,CACnB,IAAIi5B,EAAU,EACd,IACI,IAAK,IAAIC,EAAOvnB,GAAS3R,GAAKm5B,EAASD,EAAK71B,QAAS81B,EAAO71B,KAAM61B,EAASD,EAAK71B,OAAQ,CACpF,IAAIT,EAAIu2B,EAAOh+B,MACX08B,GAAOj1B,IAAiB,QAAXA,EAAE2S,MAEX6iB,GAAWx1B,EAAG,KACdg2B,GAAoBh2B,EAAEmP,KAAK,IAC3B6mB,GAAoBh2B,EAAEmP,KAAK,KAE/BknB,KAGAL,GAAoBh2B,IAIhC,MAAOgR,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQulB,IAAWA,EAAO71B,OAAS9E,EAAK06B,EAAKxlB,SAASlV,EAAG2E,KAAK+1B,GAE9D,QAAU,GAAIrlB,EAAK,MAAMA,EAAItQ,OAEjC,GAAgB,IAAZ01B,GAAiBA,IAAYj5B,EAAGrE,OAChC,MAAM,IAAIi8B,GAAyB53B,EAAI,qDAE3C,OAAO,EAEX,IAAI63B,GAAO73B,GA6CP,MAAM,IAAI43B,GAAyB53B,EAAI,uBA5CvC,OAAQA,EAAGuV,MACP,IAAK,OACL,IAAK,OACL,IAAK,QACL,IAAK,OACD6iB,GAAWp4B,EAAI,GACf,MACJ,IAAK,OAED,QAAgB/D,IAAZ+D,EAAG+R,MAAsB/R,EAAG+R,KAAKpW,OAAS,EAC1C,MAAM,IAAIi8B,GAAyB53B,EAAI,iCAE3C,IACI,IAAK,IAAIhB,EAAK2S,GAAS3R,EAAG+R,MAAO7S,EAAKF,EAAGqE,QAASnE,EAAGoE,KAAMpE,EAAKF,EAAGqE,OAAQ,CACvE,IAAIqG,EAAIxK,EAAG/D,MACXy9B,GAAoBlvB,IAG5B,MAAOoK,GAASC,EAAM,CAAExQ,MAAOuQ,GAC/B,QACI,IACQ5U,IAAOA,EAAGoE,OAASxE,EAAKE,EAAG0U,SAAS5U,EAAGqE,KAAKnE,GAEpD,QAAU,GAAI+U,EAAK,MAAMA,EAAIxQ,OAEjC,MACJ,IAAK,OACL,IAAK,QACL,IAAK,OAEG60B,GAAWp4B,EAAI,IACf44B,GAAoB54B,EAAG+R,KAAK,IAEhC,MACJ,QACI,IAAIhC,OAAO1S,UAAUM,eAAewF,KAAKs0B,GAAgBz3B,EAAGuV,MAIxD,MAAM,IAAIqiB,GAAyB53B,EAAI,sCAHvCq4B,GAA2Br4B,GAU3C,OAAO,EAOX,SAAS04B,GAAwB14B,GAC7B,IAAIyU,EAAKjW,EAET,GAAIw5B,GAAUh4B,GAAK,CACf,IAAIo5B,EAAM,GACV,IACI,IAAK,IAAIC,EAAO1nB,GAAS3R,GAAKs5B,EAASD,EAAKh2B,QAASi2B,EAAOh2B,KAAMg2B,EAASD,EAAKh2B,OAAQ,CACpF,IAAIk2B,EAAMD,EAAOn+B,MACjB,GAAI48B,GAAWwB,GAAM,CACjB,GAAiB,SAAbA,EAAIhkB,MAAgC,cAAbgkB,EAAIhkB,MAAqC,YAAbgkB,EAAIhkB,KACvD,MAAM,IAAIqiB,GAAyB53B,EAAI,gCAAkCu5B,EAAIhkB,MAEjF,GAAIgkB,EAAIhkB,QAAQ6jB,EACZ,MAAM,IAAIxB,GAAyB53B,EAAI,+BAAiCu5B,EAAIhkB,MAIhF,GAFA6jB,EAAIG,EAAIhkB,OAAQ,EAEZ6iB,GAAWmB,EAAK,GAChB,OAAQA,EAAIhkB,MACR,IAAK,OAEGyiB,GAAUuB,EAAIxnB,KAAK,KACnBsmB,GAA2BkB,EAAIxnB,KAAK,IAExC,MACJ,IAAK,YACD0mB,GAA4Bc,EAAIxnB,KAAK,IACrC,MACJ,IAAK,UACDinB,GAA4BO,EAAIxnB,KAAK,OAM7D,MAAO2C,GAASD,EAAM,CAAElR,MAAOmR,GAC/B,QACI,IACQ4kB,IAAWA,EAAOh2B,OAAS9E,EAAK66B,EAAK3lB,SAASlV,EAAG2E,KAAKk2B,GAE9D,QAAU,GAAI5kB,EAAK,MAAMA,EAAIlR,QAGrC,OAAO,EAsDX,SAASi2B,GAAc97B,GACnB,OAAOqS,OAAO1S,UAAUM,eAAewF,KAAKs0B,GAAgB/5B,EAAE6X,MAElE,SAASkkB,GAAoB3pB,GACzB,IAAI4pB,EAAKl7B,EACT,IAAKR,MAAMC,QAAQ6R,GACf,OAAO,EAEX,IACI,IAAK,IAAI6pB,EAAMhoB,GAAS7B,GAAI8pB,EAAQD,EAAIt2B,QAASu2B,EAAMt2B,KAAMs2B,EAAQD,EAAIt2B,OAAQ,CAC7E,IAAIoG,EAAImwB,EAAMz+B,MACd,GAAI,SAAUsO,EAAG,CACb,GAAI+vB,GAAc/vB,GACd,MAAM,IAAIgqB,GAAe3jB,EAAG,oCAAsCjQ,KAAKS,UAAUwP,IAEhF,GAAe,QAAXrG,EAAE8L,KACP,MAAM,IAAIke,GAAe3jB,EAAG,sCAAwCjQ,KAAKS,UAAUwP,MAKnG,MAAO+pB,GAASH,EAAM,CAAEn2B,MAAOs2B,GAC/B,QACI,IACQD,IAAUA,EAAMt2B,OAAS9E,EAAKm7B,EAAIjmB,SAASlV,EAAG2E,KAAKw2B,GAE3D,QAAU,GAAID,EAAK,MAAMA,EAAIn2B,OAEjC,OAAO,EAGX,IAoBIu2B,GApBAC,GAAa,CAAC,YAAa,UAAW,OAAQ,QAAS,MAAO,OAAQ,OAAQ,OAC9E,QAAS,OAAQ,OAAQ,OAAQ,OAAQ,SAAU,UAAW,SAAU,SAAU,MAAO,MACzF,SAAU,MAAO,UAAW,MAAO,MAAO,kBAAmB,UAAW,SAAU,OAClF,iBAAkB,kBAAmB,mBAAoB,MAAO,OAAQ,MAAO,OAAQ,YACvF,YAAa,KAAM,OAAQ,WAAY,KAAM,MAAO,KAAM,WAAY,KAAM,UAAW,UACvF,UAAW,MAAO,SAAU,KAAM,OAAQ,OAAQ,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAC3F,MAAO,MAAO,OAAQ,MAAO,MAAO,KAAM,OAAQ,OAAQ,QAAS,OAAQ,OAAQ,SACnF,SAAU,OAAQ,iBAAkB,MAAO,OAAQ,kBAAmB,eAAgB,OACtF,SAAU,MAAO,OAAQ,YAAa,UAAW,WAAY,QAAS,OAAQ,SAAU,OACxF,WAAY,MAAO,MAAO,WAAY,SAAU,OAAQ,MAAO,UAAW,MAAO,SAAU,KAC3F,OAAQ,MAAO,YAAa,SAAU,QAAS,QAAS,YAAa,OAAQ,YAC7E,UAAW,QAAS,MAAO,MAAO,gBAAiB,QAAS,WAAY,WAAY,QACpF,eAAgB,QAAS,QAAS,SAAU,eAAgB,qBAAsB,SAClF,OAAQ,gBAAiB,eAAgB,eAAgB,eAAgB,gBACzE,sBAAuB,sBAAuB,wBAAyB,SAAU,SACjF,cAAe,eAAgB,eAAgB,kBAC/CC,GAAWjqB,OAAOU,OAAOI,MAAMd,OAAQvM,GAAc,CAAC,IAAKd,GAAOq3B,GAAW5yB,KAAI,SAAUsC,EAAGvG,GAC9F,IAAI1E,EACJ,OAAQA,EAAK,GAAIA,EAAGiL,GAAKvG,EAAG1E,SAGhC,SAAWs7B,GACPA,EAAIA,EAAI,OAAS,GAAK,MACtBA,EAAIA,EAAI,UAAY,GAAK,SACzBA,EAAIA,EAAI,YAAc,GAAK,WAC3BA,EAAIA,EAAI,SAAW,GAAK,QACxBA,EAAIA,EAAI,cAAgB,GAAK,aAC7BA,EAAIA,EAAI,SAAW,GAAK,QACxBA,EAAIA,EAAI,cAAgB,GAAK,aAC7BA,EAAIA,EAAI,SAAW,GAAK,QACxBA,EAAIA,EAAI,cAAgB,GAAK,aAC7BA,EAAIA,EAAI,QAAU,GAAK,OACvBA,EAAIA,EAAI,SAAW,IAAM,SAX7B,CAYGA,KAAQA,GAAM,KACjB,IAiIIG,GAKAC,GAkFAC,GAxNAC,GAAwB,WACxB,SAASA,IACLp9B,KAAK+I,OAAS,GAsClB,OApCAgK,OAAOsE,eAAe+lB,EAAO/8B,UAAW,SAAU,CAC9C2W,IAAK,WACD,OAAOhX,KAAK+I,OAAOpK,QAEvB2Y,YAAY,EACZC,cAAc,IAElB6lB,EAAO/8B,UAAUg9B,WAAa,SAAUplB,GACpC,IAAIzW,GACHA,EAAKxB,KAAK+I,QAAQjI,KAAK+S,MAAMrS,EAAIgF,GAAc,GAAId,GAAOuS,EAAI9N,KAAI,SAAUsC,GAAK,OAAW,IAAJA,SAE7F2wB,EAAO/8B,UAAUi9B,WAAa,SAAUrlB,GACpC,IAAIxL,EAAU,EAANwL,EACRjY,KAAK+I,OAAOjI,KAAS,IAAJ2L,IAErB2wB,EAAO/8B,UAAUk9B,YAAc,SAAUtlB,GACrC,IAAIxL,EAAU,EAANwL,EACRjY,KAAK+I,OAAOjI,KAAM2L,GAAK,EAAK,KAC5BzM,KAAK+I,OAAOjI,KAAS,IAAJ2L,IAErB2wB,EAAO/8B,UAAUm9B,YAAc,SAAUvlB,GACrC,IAAIxL,EAAU,EAANwL,EACRjY,KAAK+I,OAAOjI,KAAM2L,GAAK,GAAM,KAC7BzM,KAAK+I,OAAOjI,KAAM2L,GAAK,GAAM,KAC7BzM,KAAK+I,OAAOjI,KAAM2L,GAAK,EAAK,KAC5BzM,KAAK+I,OAAOjI,KAAS,IAAJ2L,IAErB2wB,EAAO/8B,UAAUo9B,UAAY,SAAUxlB,GACnCjY,KAAKs9B,WAAWrlB,IAEpBmlB,EAAO/8B,UAAUq9B,WAAa,SAAUzlB,GACpCjY,KAAKu9B,YAAYtlB,IAErBmlB,EAAO/8B,UAAUs9B,WAAa,SAAU1lB,GACpCjY,KAAKw9B,YAAYvlB,IAEdmlB,EAxCgB,GA0CvBQ,GAAY,IAAI36B,MAAM,uBACtB46B,GAAwB,WACxB,SAASA,EAAO90B,EAAQmP,EAAK4lB,QACb,IAAR5lB,IAAkBA,EAAM,QAChB,IAAR4lB,IAAkBA,EAAM/0B,EAAOpK,QACnCqB,KAAK+I,OAASA,EACd/I,KAAKkY,IAAMA,EACXlY,KAAK89B,IAAMA,EA8Ef,OA5EA/qB,OAAOsE,eAAewmB,EAAOx9B,UAAW,SAAU,CAE9C2W,IAAK,WACD,OAAOhX,KAAK89B,IAAM99B,KAAKkY,KAE3BZ,YAAY,EACZC,cAAc,IAElBsmB,EAAOx9B,UAAU09B,UAAY,SAAU7yB,GACnC,GAAIlL,KAAK89B,IAAM99B,KAAKkY,IAAMhN,EACtB,MAAM0yB,GAEV,IAAI5K,EAAMhzB,KAAK+I,OAAOtB,MAAMzH,KAAKkY,IAAKlY,KAAKkY,IAAMhN,GAEjD,OADAlL,KAAKkY,KAAOhN,EACL8nB,GAEX6K,EAAOx9B,UAAU29B,OAAS,SAAU9yB,GAChC,GAAIlL,KAAK89B,IAAM99B,KAAKkY,IAAMhN,EACtB,MAAM0yB,GAEV,IAAI5K,EAAM,IAAI6K,EAAO79B,KAAK+I,OAAQ/I,KAAKkY,IAAKlY,KAAKkY,IAAMhN,GAEvD,OADAlL,KAAKkY,KAAOhN,EACL8nB,GAEX6K,EAAOx9B,UAAU49B,KAAO,WACpB,OAAO,IAAIJ,EAAO79B,KAAK+I,OAAQ/I,KAAKkY,IAAKlY,KAAK89B,MAElDD,EAAOx9B,UAAU69B,UAAY,WACzB,GAAIl+B,KAAK89B,IAAM99B,KAAKkY,IAAM,EACtB,MAAM0lB,GAEV,OAAO59B,KAAK+I,OAAO/I,KAAKkY,SAAW,GAEvC2lB,EAAOx9B,UAAU89B,WAAa,WAC1B,GAAIn+B,KAAK89B,IAAM99B,KAAKkY,IAAM,EACtB,MAAM0lB,GAEV,IAAIQ,EAAKp+B,KAAK+I,OAAO/I,KAAKkY,OACtBmmB,EAAKr+B,KAAK+I,OAAO/I,KAAKkY,OAC1B,OAASkmB,GAAM,EAAKC,KAAQ,GAEhCR,EAAOx9B,UAAUi+B,WAAa,WAC1B,GAAIt+B,KAAK89B,IAAM99B,KAAKkY,IAAM,EACtB,MAAM0lB,GAEV,IAAIQ,EAAKp+B,KAAK+I,OAAO/I,KAAKkY,OACtBmmB,EAAKr+B,KAAK+I,OAAO/I,KAAKkY,OACtBqmB,EAAKv+B,KAAK+I,OAAO/I,KAAKkY,OACtBsmB,EAAKx+B,KAAK+I,OAAO/I,KAAKkY,OAC1B,OAASkmB,GAAM,GAAOC,GAAM,GAAOE,GAAM,EAAKC,KAAQ,GAE1DX,EAAOx9B,UAAUo+B,SAAW,WACxB,GAAIz+B,KAAK89B,IAAM99B,KAAKkY,IAAM,EACtB,MAAM0lB,GAEV,IAAI5wB,EAAIhN,KAAK+I,OAAO/I,KAAKkY,OACzB,OAAQlL,GAAK,IAAO,IAExB6wB,EAAOx9B,UAAUq+B,UAAY,WACzB,GAAI1+B,KAAK89B,IAAM99B,KAAKkY,IAAM,EACtB,MAAM0lB,GAEV,IAAIQ,EAAKp+B,KAAK+I,OAAO/I,KAAKkY,OACtBmmB,EAAKr+B,KAAK+I,OAAO/I,KAAKkY,OAC1B,OAAUkmB,GAAM,EAAKC,IAAO,IAAO,IAEvCR,EAAOx9B,UAAUs+B,UAAY,WACzB,GAAI3+B,KAAK89B,IAAM99B,KAAKkY,IAAM,EACtB,MAAM0lB,GAEV,IAAIQ,EAAKp+B,KAAK+I,OAAO/I,KAAKkY,OACtBmmB,EAAKr+B,KAAK+I,OAAO/I,KAAKkY,OACtBqmB,EAAKv+B,KAAK+I,OAAO/I,KAAKkY,OACtBsmB,EAAKx+B,KAAK+I,OAAO/I,KAAKkY,OAC1B,OAAQkmB,GAAM,GAAOC,GAAM,GAAOE,GAAM,EAAKC,GAE1CX,EApFgB,GAiG3B,SAASe,GAAkBC,GACvB,IAAIvvB,EACAwvB,EAAMD,EAAGX,YACb,OAAQY,GACJ,KAAK5B,GAAgB6B,QACjBzvB,EAAO,uBACP,MACJ,KAAK4tB,GAAgB8B,UACjB1vB,EAAO,yBACP,MACJ,KAAK4tB,GAAgB+B,KACjB3vB,EAAO,oBACP,MACJ,QACI,MAAM,IAAIrM,MAAM,gCAAkC67B,GAE1D,MAAO,CAAExvB,KAAMA,EAAMqd,KAAMkS,EAAGd,UAAU,KAE5C,SAASmB,GAAYL,GACjB,IAAIjiB,EACAkiB,EAAMD,EAAGX,YACb,OAAQY,GACJ,KAAK7B,GAAWkC,SACZviB,EAAUgiB,GAAkBC,GAC5B,MACJ,KAAK5B,GAAWmC,WACZxiB,EAAU,CACNtN,KAAM,eACNqd,KAAMkS,EAAGd,UAAU,KAEvBc,EAAGd,UAAU,GACb,MACJ,QACI,MAAM,IAAI96B,MAAM,wBAA0B67B,GAElD,GAAkB,IAAdD,EAAGlgC,OAAc,CAEjB,IAAI0gC,EAAM,IAAIC,YACd1iB,EAAQ2iB,WAAaF,EAAIl2B,OAAO,IAAIxF,WAAWk7B,EAAGd,UAAUc,EAAGlgC,UAEnE,OAAOie,EAEX,SAAS4iB,GAAmB9yB,EAAGsoB,GAC3B,IAAI8J,EACJ,OAAQpyB,EAAE4C,MACN,IAAK,uBACDwvB,EAAM5B,GAAgB6B,QACtB,MACJ,IAAK,yBACDD,EAAM5B,GAAgB8B,UACtB,MACJ,IAAK,oBACDF,EAAM5B,GAAgB+B,KACtB,MACJ,QACI,MAAM,IAAIh8B,MAAM,4BAA8ByJ,EAAE4C,MAExD0lB,EAAEsI,WAAWwB,GACb9J,EAAEqI,WAAWr8B,MAAM0F,KAAKgG,EAAEigB,OAE9B,SAAS8S,GAAa/yB,EAAGsoB,GAUrB,GATe,iBAAXtoB,EAAE4C,MACF0lB,EAAEsI,WAAWL,GAAWmC,YACxBpK,EAAEqI,WAAWr8B,MAAM0F,KAAKgG,EAAEigB,OAC1BqI,EAAEsI,WAAW,KAGbtI,EAAEsI,WAAWL,GAAWkC,UACxBK,GAAmB9yB,EAAGsoB,SAEL/1B,IAAjByN,EAAE6yB,YAA6C,KAAjB7yB,EAAE6yB,YAAsC,YAAjB7yB,EAAE6yB,WAA0B,CACjF,IAAIt2B,EAAM,IAAIy2B,YACVljB,EAAQvT,EAAIH,OAAO4D,EAAE6yB,YACzBvK,EAAEqI,WAAWr8B,MAAM0F,KAAK8V,KAShC,SAASmjB,GAAcd,GACnB,IAAIe,EACAtwB,EACAwvB,EAAMD,EAAGX,YACb,OAAQY,GACJ,KAAK3B,GAAY4B,QACbzvB,EAAO,mBACPswB,EAAK,GACL,MACJ,KAAKzC,GAAY6B,UACb1vB,EAAO,qBACPswB,EAAK,GACL,MACJ,KAAKzC,GAAY8B,KACb3vB,EAAO,gBACPswB,EAAK,GACL,MACJ,QACI,MAAM,IAAI38B,MAAM,2BAA6B67B,GAErD,MAAO,CAAExvB,KAAMA,EAAMuwB,UAAWhB,EAAGd,UAAU6B,IAEjD,SAASE,GAAeC,EAAI/K,GACxB,IAAI8J,EACJ,OAAQiB,EAAGzwB,MACP,IAAK,mBACDwvB,EAAM3B,GAAY4B,QAClB,MACJ,IAAK,qBACDD,EAAM3B,GAAY6B,UAClB,MACJ,IAAK,gBACDF,EAAM3B,GAAY8B,KAClB,MACJ,QACI,MAAM,IAAIh8B,MAAM,+BAAiC88B,EAAGzwB,MAE5D0lB,EAAEsI,WAAWwB,GACb9J,EAAEqI,WAAWr8B,MAAM0F,KAAKq5B,EAAGF,YAE/B,SAASG,GAAUtV,EAAMuV,EAAIC,GACzB,IAAI5pB,EAAK9U,EAAIqV,EAAK/U,EAAIiV,EAAK/U,EACvBE,EAAIqU,EACJC,EAAK9Q,GAAOw6B,EAAGxV,GAAO,GAAIzkB,EAAIuQ,EAAG,GAAIzB,EAAOyB,EAAG,GACnD,GAAIxV,MAAMC,QAAQgF,GAAI,CAClB,IAAI+uB,EAAI,IAAIoI,GACZ,IACI,IAAK,IAAI3lB,EAAM9C,GAAS1O,GAAIyR,EAAQD,EAAIpR,QAASqR,EAAMpR,KAAMoR,EAAQD,EAAIpR,OAAQ,CAC7E,IAAIoG,EAAIiL,EAAMvZ,MACVuO,EAAIqI,EAAK1O,OACb,GAAIqG,EAAEpG,KACF,MAAM,IAAIrD,MAAM,+BAEpB+8B,GAAUvzB,EAAGuoB,EAAGtoB,EAAEvO,QAG1B,MAAOkY,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQqB,IAAUA,EAAMpR,OAAS9E,EAAKiW,EAAIf,SAASlV,EAAG2E,KAAKsR,GAE3D,QAAU,GAAInB,EAAK,MAAMA,EAAI/P,OAKjC,OAHA05B,EAAG3C,WAAWR,GAAIqD,UAClBF,EAAGzC,YAAYxI,EAAEr2B,aACjBshC,EAAG5C,WAAWrI,EAAEjsB,QAGpB,GAAI,WAAY9C,EAAG,CACf,IAAIgD,EAAM,IAAIy2B,YACVljB,EAAQvT,EAAIH,OAAO7C,EAAEoW,QAIzB,OAHA4jB,EAAG3C,WAAWR,GAAIvwB,QAClB0zB,EAAGzC,YAAYhhB,EAAM7d,aACrBshC,EAAG5C,WAAWr8B,MAAM0F,KAAK8V,IAG7B,GAAI,QAASvW,EAAb,CACIg6B,EAAG3C,WAAWR,GAAIsD,KAClB,IAAInoB,EAAMooB,OAAOp6B,EAAE6T,KACfqd,EAAOlf,EAAM,EACbkf,IACAlf,GAAOA,GAEX,IAAI/R,EAAI,EACR,EAAG,CACC,IAAIo6B,EAAc,IAANp6B,EAAWm6B,OAAO,GAAKA,OAAO,GACtC71B,EAAOyN,GAAQooB,OAAO,IAAMC,GAAQD,OAAO,GAC/CpoB,IAAQqoB,EACJroB,IACAzN,GAAQ61B,OAAO,MAET,IAANn6B,GAAWixB,IACX3sB,GAAQ61B,OAAO,KAEnBJ,EAAG3C,WAAW/sB,OAAO/F,IACrBtE,UACK+R,OApBb,CAuBA,GAAI,UAAWhS,EAAG,CACVuW,EAAQ6d,GAASp0B,EAAEuW,OAIvB,OAHAyjB,EAAG3C,WAAWR,GAAIxN,OAClB2Q,EAAGzC,YAAYhhB,EAAM7d,aACrBshC,EAAG5C,WAAW7gB,GAGlB,IAAIjE,EAAOykB,GAAS/2B,EAAEsS,MACtB,QAAatZ,IAATsZ,EACA,MAAM,IAAIpF,UAAU,yBAA2BlN,EAAEsS,MAErD,IAAIumB,IAA0B,QAAjB58B,EAAK+D,EAAE8O,YAAyB,IAAP7S,OAAgB,EAASA,EAAGvD,SAAW,GAAK,EAC9Em+B,GAAIyD,MAAgF,IAApD,QAAjBhqB,EAAKtQ,EAAE8O,YAAyB,IAAPwB,OAAgB,EAASA,EAAG5X,SAAW,SAAuBM,IAAbgH,EAAEuS,QAA4C,IAApBvS,EAAEuS,OAAO7Z,OAAe,EAAI,GAC/Im+B,GAAI0D,KAGR,GAFAP,EAAG3C,WAAWwB,GACdmB,EAAG3C,WAAW/kB,QACCtZ,IAAXgH,EAAE8O,KACF,GAAI9O,EAAE8O,KAAKpW,OAAS,EAChB,IACI,IAAK,IAAIw1B,EAAKxf,GAAS1O,EAAE8O,MAAO0rB,EAAKtM,EAAG9tB,QAASo6B,EAAGn6B,KAAMm6B,EAAKtM,EAAG9tB,OAAQ,CAClEoG,EAAIg0B,EAAGtiC,MACPuO,EAAIqI,EAAK1O,OACb,GAAIqG,EAAEpG,KACF,MAAM,IAAIrD,MAAM,+BAEpB+8B,GAAUvzB,EAAGwzB,EAAIvzB,EAAEvO,QAG3B,MAAOyY,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQ6pB,IAAOA,EAAGn6B,OAASxE,EAAKqyB,EAAGzd,SAAS5U,EAAGqE,KAAKguB,GAEpD,QAAU,GAAItd,EAAK,MAAMA,EAAItQ,WAGhC,CACGyuB,EAAI,IAAIoI,GACZ,IACI,IAAK,IAAIsD,EAAK/rB,GAAS1O,EAAE8O,MAAO4rB,EAAKD,EAAGr6B,QAASs6B,EAAGr6B,KAAMq6B,EAAKD,EAAGr6B,OAAQ,CAClEoG,EAAIk0B,EAAGxiC,MACPuO,EAAIqI,EAAK1O,OACb,GAAIqG,EAAEpG,KACF,MAAM,IAAIrD,MAAM,+BAEpB+8B,GAAUvzB,EAAGuoB,EAAGtoB,EAAEvO,QAG1B,MAAO2Y,GAASC,EAAM,CAAExQ,MAAOuQ,GAC/B,QACI,IACQ6pB,IAAOA,EAAGr6B,OAAStE,EAAK0+B,EAAGhqB,SAAS1U,EAAGmE,KAAKu6B,GAEpD,QAAU,GAAI3pB,EAAK,MAAMA,EAAIxQ,OAEjC05B,EAAGzC,YAAYxI,EAAEr2B,QACjBshC,EAAG5C,WAAWrI,EAAEjsB,QAGxB,QAAiB9J,IAAbgH,EAAEuS,QAA4C,IAApBvS,EAAEuS,OAAO7Z,OAAc,CAC7CsK,EAAM,IAAIy2B,YACVljB,EAAQvT,EAAIH,OAAO7C,EAAEuS,OAAOnX,KAAK,MACrC4+B,EAAGzC,YAAYhhB,EAAM7d,QACrBshC,EAAG5C,WAAWr8B,MAAM0F,KAAK8V,cAETvd,IAAXgH,EAAE8O,MAAsB9O,EAAE8O,KAAKpW,QAAU,GAC9CshC,EAAGzC,YAAY,KAjQvB,SAAWP,GACPA,EAAWA,EAAW,YAAc,GAAK,WACzCA,EAAWA,EAAW,cAAgB,GAAK,cAF/C,CAGGA,KAAeA,GAAa,KAE/B,SAAWC,GACPA,EAAgBA,EAAgB,WAAa,GAAK,UAClDA,EAAgBA,EAAgB,aAAe,GAAK,YACpDA,EAAgBA,EAAgB,QAAU,GAAK,OAHnD,CAIGA,KAAoBA,GAAkB,KA8EzC,SAAWC,GACPA,EAAYA,EAAY,WAAa,GAAK,UAC1CA,EAAYA,EAAY,aAAe,GAAK,YAC5CA,EAAYA,EAAY,QAAU,GAAK,OAH3C,CAIGA,KAAgBA,GAAc,KA8SjC,IAAIyD,GAAW,SAAU36B,GAAK,MAAO,SAAUA,IAAiB,SAAXA,EAAEsS,MAA8B,UAAXtS,EAAEsS,OACxEsoB,GAAe,SAAU56B,GAAK,MAAO,SAAUA,IAAiB,SAAXA,EAAEsS,MAA8B,SAAXtS,EAAEsS,OAC5EuoB,GAAwB,SAAUptB,GAClC,GAAIsmB,GAAWtmB,GACX,OAAO,SAAUZ,GACb,IAAKmnB,GAAWnnB,GACZ,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,kBAAoBjQ,KAAKS,UAAUwP,IAE1E2pB,GAAoB3pB,GAEpB,IAAIiuB,EAAKjH,GAAW,OAAQpmB,GACxBstB,EAAKlH,GAAW,OAAQhnB,GAC5B,MAAO,CAACkuB,EAAI,WACJ,IAAIx/B,EAAIM,EAAI4K,EAAGmwB,EACXH,EAAK16B,EACT,OAAO,GAAYhC,MAAM,SAAUkC,GAC/B,OAAQA,EAAGiS,OACP,KAAK,EACDjS,EAAGmS,KAAKvT,KAAK,CAAC,EAAG,EAAG,EAAG,IACvBU,EAAKmT,GAASosB,EAAGhsB,MAAOjT,EAAKN,EAAG6E,OAChCnE,EAAGiS,MAAQ,EACf,KAAK,EACD,OAAMrS,EAAGwE,KAAa,CAAC,EAAa,IACpCoG,EAAI5K,EAAG3D,MACA,CAAC,EAAa2iC,GAAsBp0B,KAC/C,KAAK,EACDxK,EAAGkS,OACHlS,EAAGiS,MAAQ,EACf,KAAK,EAED,OADArS,EAAKN,EAAG6E,OACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFAw2B,EAAQ36B,EAAGkS,OACXsoB,EAAM,CAAEn2B,MAAOs2B,GACR,CAAC,EAAa,GACzB,KAAK,EACD,IACQ/6B,IAAOA,EAAGwE,OAAStE,EAAKR,EAAGkV,SAAS1U,EAAGmE,KAAK3E,GAEpD,QAAU,GAAIk7B,EAAK,MAAMA,EAAIn2B,MAC7B,MAAO,CAAC,GACZ,KAAK,EAAG,MAAO,CAAC,OA9BpB,KAoCpB,OAAQmN,EAAE6E,MACN,IAAK,KACD,OAAO,SAAUzF,GACb,IAAK8tB,GAAS9tB,GACV,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,gBAAkBjQ,KAAKS,UAAUwP,IAExE,MAAO,CAACA,EAAG,WACH,OAAO,GAAY9S,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAa2sB,GAAsBptB,EAAEqB,KAAgB,SAAXjC,EAAEyF,KAAkB,EAAI,KAClF,KAAK,EAED,OADA/W,EAAG4S,OACI,CAAC,OANjB,KAWnB,IAAK,SACD,OAAO,SAAUtB,GACb,IAAK+tB,GAAa/tB,GACd,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,oBAAsBjQ,KAAKS,UAAUwP,IAE5E,MAAO,CAACA,EAAG,WACH,IAAImuB,EACJ,OAAO,GAAYjhC,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAED,OADA8sB,EAAKnuB,EACa,SAAZmuB,EAAG1oB,KAAyB,CAAC,EAAa,GACzC,CAAC,EAAauoB,GAAsBptB,EAAEqB,KAAK,KACtD,KAAK,EACDvT,EAAG4S,OACH5S,EAAG2S,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,OAXrB,KAgBnB,IAAK,OACL,IAAK,MACD,OAAO,SAAUrB,GACb,IAAK9R,MAAMC,QAAQ6R,GACf,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAGY,EAAE6E,KAAO,cAAgB1V,KAAKS,UAAUwP,IAE/E,MAAO,CAACA,EAAG,WACH,IAAI6pB,EAAKC,EAAOsE,EACZC,EAAK3/B,EACT,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EACDrS,EAAGuS,KAAKvT,KAAK,CAAC,EAAG,EAAG,EAAG,IACvB67B,EAAMhoB,GAAS7B,GAAI8pB,EAAQD,EAAIt2B,OAC/BvE,EAAGqS,MAAQ,EACf,KAAK,EACD,OAAMyoB,EAAMt2B,KAAa,CAAC,EAAa,GAChC,CAAC,EAAaw6B,GAAsBptB,EAAEqB,KAAK,KACtD,KAAK,EACDjT,EAAGsS,OACHtS,EAAGqS,MAAQ,EACf,KAAK,EAED,OADAyoB,EAAQD,EAAIt2B,OACL,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFA66B,EAAQp/B,EAAGsS,OACX+sB,EAAM,CAAE56B,MAAO26B,GACR,CAAC,EAAa,GACzB,KAAK,EACD,IACQtE,IAAUA,EAAMt2B,OAAS9E,EAAKm7B,EAAIjmB,SAASlV,EAAG2E,KAAKw2B,GAE3D,QAAU,GAAIwE,EAAK,MAAMA,EAAI56B,MAC7B,MAAO,CAAC,GACZ,KAAK,EAAG,MAAO,CAAC,OA7BrB,KAkCnB,IAAK,MACD,OAAO,SAAUuM,GACb,IAAK9R,MAAMC,QAAQ6R,GACf,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,iBAAmBjQ,KAAKS,UAAUwP,IAEzE,MAAO,CAACA,EAAG,WACH,IAAIsuB,EAAKC,EAAOC,EACZC,EAAK//B,EACT,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EACDrS,EAAGuS,KAAKvT,KAAK,CAAC,EAAG,EAAG,EAAG,IACvBsgC,EAAMzsB,GAAS7B,GAAIuuB,EAAQD,EAAI/6B,OAC/BvE,EAAGqS,MAAQ,EACf,KAAK,EACD,OAAMktB,EAAM/6B,KAAa,CAAC,EAAa,GAChC,CAAC,EAAa,SAAUk7B,GACvB,KAAM,SAAUA,IAAqB,QAAbA,EAAIjpB,KACxB,MAAM,IAAIme,GAAmBhjB,EAAG8tB,EAAK,yBAA2B3+B,KAAKS,UAAUk+B,IAEnF,MAAO,CAACA,EAAK,WACL,IAAIhgC,EAAIM,EAAI4K,EAAG+0B,EACXC,EAAK1/B,EACT,OAAO,GAAYhC,MAAM,SAAUkC,GAC/B,OAAQA,EAAGiS,OACP,KAAK,EACDjS,EAAGmS,KAAKvT,KAAK,CAAC,EAAG,EAAG,EAAG,IACvBU,EAAKmT,GAASjB,EAAEqB,MAAOjT,EAAKN,EAAG6E,OAC/BnE,EAAGiS,MAAQ,EACf,KAAK,EACD,OAAMrS,EAAGwE,KAAa,CAAC,EAAa,IACpCoG,EAAI5K,EAAG3D,MACA,CAAC,EAAa2iC,GAAsBp0B,KAC/C,KAAK,EACDxK,EAAGkS,OACHlS,EAAGiS,MAAQ,EACf,KAAK,EAED,OADArS,EAAKN,EAAG6E,OACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFAo7B,EAAQv/B,EAAGkS,OACXstB,EAAM,CAAEn7B,MAAOk7B,GACR,CAAC,EAAa,GACzB,KAAK,EACD,IACQ3/B,IAAOA,EAAGwE,OAAStE,EAAKR,EAAGkV,SAAS1U,EAAGmE,KAAK3E,GAEpD,QAAU,GAAIkgC,EAAK,MAAMA,EAAIn7B,MAC7B,MAAO,CAAC,GACZ,KAAK,EAAG,MAAO,CAAC,OA9BnB,MAmCzB,KAAK,EACDzE,EAAGsS,OACHtS,EAAGqS,MAAQ,EACf,KAAK,EAED,OADAktB,EAAQD,EAAI/6B,OACL,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFAi7B,EAAQx/B,EAAGsS,OACXmtB,EAAM,CAAEh7B,MAAO+6B,GACR,CAAC,EAAa,GACzB,KAAK,EACD,IACQD,IAAUA,EAAM/6B,OAAS9E,EAAK4/B,EAAI1qB,SAASlV,EAAG2E,KAAKi7B,GAE3D,QAAU,GAAIG,EAAK,MAAMA,EAAIh7B,MAC7B,MAAO,CAAC,GACZ,KAAK,EAAG,MAAO,CAAC,OAnErB,KAwEnB,IAAK,WACD,OAAO,SAAUuM,GACb,KAAM,UAAWA,MAAQ,WAAYA,GACjC,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,sBAAwBjQ,KAAKS,UAAUwP,IAE9E,IAAI0J,EACJ,GAAI,WAAY1J,EAAG,CACf,IAAI+S,EAAK4T,GAAmB3mB,EAAEuJ,OAAQ,WACtC,GAAW,OAAPwJ,EACA,MAAM,IAAI6Q,GAAmBhjB,EAAGZ,EAAG,6BAA+BA,EAAEuJ,QAExEG,EAAQ,CAAEA,MAAO+d,GAAS1U,EAAG,UAG7BrJ,EAAQ1J,EAEZ,MAAO,CAAC0J,EAAO,GAAG1W,OAAOC,cAEjC,IAAK,YACD,OAAO,SAAU+M,GACb,KAAM,UAAWA,MAAQ,WAAYA,GACjC,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,uBAAyBjQ,KAAKS,UAAUwP,IAE/E,IAAI0J,EACJ,GAAI,WAAY1J,EAAG,CACf,IAAIsH,EAAMqf,GAAmB3mB,EAAEuJ,OAAQ,mBAAoB,qBAAsB,gBAAiB,oBAClG,GAAY,OAARjC,EACA,MAAM,IAAIsc,GAAmBhjB,EAAGZ,EAAG,8BAAgCA,EAAEuJ,QAEzEG,EAAQ,CAAEA,MAAO+d,GAASngB,EAAI,UAG9BoC,EAAQ1J,EAEZ,MAAO,CAAC0J,EAAO,GAAG1W,OAAOC,cAEjC,IAAK,WACD,OAAO,SAAU+M,GACb,KAAM,UAAWA,MAAQ,WAAYA,GACjC,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,sBAAwBjQ,KAAKS,UAAUwP,IAE9E,IAAI0J,EACJ,GAAI,WAAY1J,EAAG,CACf,IAAI6uB,EAAMlI,GAAmB3mB,EAAEuJ,OAAQ,uBAAwB,yBAA0B,qBACzF,GAAY,OAARslB,EACA,MAAM,IAAIjL,GAAmBhjB,EAAGZ,EAAG,6BAA+BA,EAAEuJ,QAExE,IAAI2Y,EAAI,IAAIoI,GACZoC,GAAmB,CAAElwB,KAAMqyB,EAAI,GAAIhV,KAAMgV,EAAI,IAAM3M,GACnDxY,EAAQ,CAAEA,MAAO+d,GAASvF,EAAEjsB,cAG5ByT,EAAQ1J,EAEZ,MAAO,CAAC0J,EAAO,GAAG1W,OAAOC,cAEjC,IAAK,MACD,OAAO,SAAU+M,GACb,KAAM,UAAWA,MAAQ,WAAYA,GACjC,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,wBAA0BjQ,KAAKS,UAAUwP,IAEhF,IAAI0J,EACJ,GAAI,WAAY1J,EAAG,CACf,IAAIhU,EAAM26B,GAAmB3mB,EAAEuJ,OAAQ,mBAAoB,qBAAsB,iBACjF,GAAY,OAARvd,EACA,MAAM,IAAI43B,GAAmBhjB,EAAGZ,EAAG,+BAAiCA,EAAEuJ,QAE1E,IAAI2Y,EAAI,IAAIoI,GACZ0C,GAAe,CAAExwB,KAAMxQ,EAAI,GAAI+gC,UAAW/gC,EAAI,IAAMk2B,GACpDxY,EAAQ,CAAEA,MAAO+d,GAASvF,EAAEjsB,cAG5ByT,EAAQ1J,EAEZ,MAAO,CAAC0J,EAAO,GAAG1W,OAAOC,cAEjC,IAAK,UACD,OAAO,SAAU+M,GACb,KAAM,UAAWA,MAAQ,WAAYA,GACjC,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,qBAAuBjQ,KAAKS,UAAUwP,IAE7E,IAAI0J,EACJ,GAAI,WAAY1J,EAAG,CACf,IAAIa,EAAIb,EAAEuJ,OAAOulB,MAAM,KACnBhlB,EAAU6c,GAAmB9lB,EAAE,GAAI,uBAAwB,yBAA0B,oBAAqB,gBAC9G,GAAgB,OAAZiJ,EACA,MAAM,IAAI8Z,GAAmBhjB,EAAGZ,EAAG,4BAA8BA,EAAEuJ,QAEvE,IAAI2Y,EAAI,IAAIoI,GACZqC,GAAa,CAAEnwB,KAAMsN,EAAQ,GAAI+P,KAAM/P,EAAQ,GAAI2iB,WAAY5rB,EAAEhV,OAAS,EAAIgV,EAAE,QAAK1U,GAAa+1B,GAClGxY,EAAQ,CAAEA,MAAO+d,GAASvF,EAAEjsB,cAG5ByT,EAAQ1J,EAEZ,MAAO,CAAC0J,EAAO,GAAG1W,OAAOC,cAEjC,IAAK,YACD,OAAO,SAAU+M,GACb,KAAM,WAAYA,MAAQ,QAASA,GAC/B,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,uBAAyBjQ,KAAKS,UAAUwP,IAE/E,IAAIgH,EACJ,GAAI,WAAYhH,EAAG,CACf,IAAIpS,EAAIy5B,GAAUrnB,GAClB,GAAU,OAANpS,EACA,MAAM,IAAIg2B,GAAmBhjB,EAAGZ,EAAG,qBAAuBA,EAAEuJ,QAEhEvC,EAAM,CAAEA,IAAKvN,OAAO0E,KAAKkB,MAAMzR,EAAEmhC,UAAY,YAG7C/nB,EAAMhH,EAEV,MAAO,CAACgH,EAAK,GAAGhU,OAAOC,cAE/B,QACI,OAAO+7B,KAGfC,GAAoB,SAAU97B,GAAK,MAAO,SAAUA,GAAgB,SAAXA,EAAEsS,MAC3DupB,GAAmB,SAAU77B,GAC7B,OAAI87B,GAAkB97B,IAClBo1B,GAA2Bp1B,GAEpB,CAACA,EAAG,WACH,OAAO,GAAYjG,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAa2tB,IAC7B,KAAK,EAED,OADAtgC,EAAG4S,OACI,CAAC,EAAa0sB,GAAsB76B,EAAE8O,KAAK,KACtD,KAAK,EAED,OADAvT,EAAG4S,OACI,CAAC,OATjB,KAcR,CAACnO,EAAG,WACH,OAAO,GAAYjG,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,MAAO,CAAC,EAAa2tB,IACzB,KAAK,EAED,OADAtgC,EAAG4S,OACI,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,OARrB,KAgDf,SAAS8X,GAASpZ,EAAGY,GACjB,IAAIshB,EAAI,IAAIoI,GAGZ,OAFApI,EAAEsI,WAAW,GACb0C,GAAUltB,EAAGkiB,OAAS/1B,IAANyU,EAAkBotB,GAAsBptB,GAAKouB,IACtD9M,EAAEjsB,OAwBb,SAASi5B,GAAclvB,EAAGY,GACtB,MAAO,CAAE8I,MAAO+d,GAASrO,GAASpZ,EAAGY,KAiYzC,SAASuuB,GAAmBt1B,GACxB,IAAI6P,EAAQua,GAAWpqB,EAAE6P,OACzB,GAAc,OAAVA,EACA,MAAM,IAAIvZ,MAAM,wBAA0B0J,EAAE6P,MAAQ,KAExD,IAAIqiB,EAAK,IAAIhB,GAAO,IAAIl6B,WAAW6Y,IACnC,OAAO0iB,GAAYL,GAEvB,SAASqD,GAAyBv1B,GAC9B,IAAI6P,EAAQua,GAAWpqB,EAAE6P,OACzB,GAAc,OAAVA,EACA,MAAM,IAAIvZ,MAAM,wBAA0B0J,EAAE6P,MAAQ,KAExD,IAAIqiB,EAAK,IAAIhB,GAAO,IAAIl6B,WAAW6Y,IACnC,OAAOoiB,GAAkBC,GAE7B,SAASsD,GAAqBx1B,GAC1B,IAAI6P,EAAQua,GAAWpqB,EAAE6P,OACzB,GAAc,OAAVA,EACA,MAAM,IAAIvZ,MAAM,wBAA0B0J,EAAE6P,MAAQ,KAExD,IAAIqiB,EAAK,IAAIhB,GAAO,IAAIl6B,WAAW6Y,IACnC,OAAOmjB,GAAcd,GAGzB,IAAIuD,GAA2C,SAAUtpB,GAOrD,SAASspB,EAA0BnqB,EAAKoqB,EAAY1iC,GAChD,IAAI+B,EAAQoX,EAAO3S,KAAKnG,KAAMiY,EAAKtY,IAAYK,KAG/C,OAFA0B,EAAM2gC,WAAaA,EACnBtvB,OAAOC,eAAetR,EAAO0gC,EAA0B/hC,WAChDqB,EAEX,OAZAwR,GAAUkvB,EAA2BtpB,GAY9BspB,EAbmC,CAc5C3L,IAEF,SAAS6L,GAAO5uB,GACZ,OAAO1S,MAAMC,QAAQyS,GAAK,OAASA,EAAE6E,KAEzC,SAASgqB,GAAS7uB,GACd,MAAQ,SAAUA,EAAIA,EAAEqB,KAAOrB,EAEnC,SAAS8uB,GAAuB91B,EAAGC,EAAG2qB,GAElC,QADc,IAAVA,IAAoBA,GAAQ,GAC5BgL,GAAO51B,KAAO41B,GAAO31B,GACrB,MAAM,IAAI+pB,GAAmBhqB,OAAGzN,EAAW,mBAAqBqjC,GAAO51B,GAAK,OAAS41B,GAAO31B,IAEhG,IAAI2jB,EAAM,CAAC+G,GAAkB3qB,GAAI2qB,GAAkB1qB,IACnD,GAAI2jB,EAAI,GAAG5c,GAAK4c,EAAI,GAAG5c,GAAK4c,EAAI,GAAG5c,EAAE,KAAO4c,EAAI,GAAG5c,EAAE,GACjD,MAAM,IAAIgjB,GAAmBhqB,OAAGzN,EAAWqjC,GAAO51B,GAAK,0BAA4B4jB,EAAI,GAAG5c,EAAE,GAAK,OAAS4c,EAAI,GAAG5c,EAAE,IAEvH,GAAI4jB,GACChH,EAAI,GAAGtc,GAAKsc,EAAI,GAAGtc,GAAKsc,EAAI,GAAGtc,EAAE,KAAOsc,EAAI,GAAGtc,EAAE,GAClD,MAAM,IAAI0iB,GAAmBhqB,OAAGzN,EAAWqjC,GAAO51B,GAAK,2BAA6B4jB,EAAI,GAAGtc,EAAE,GAAK,OAASsc,EAAI,GAAGtc,GAEtH,GAAIgmB,GAAWttB,GAAI,CACf,IAAI+1B,EAAQ3I,GAAW,OAAQptB,GAC3Bg2B,EAAQ5I,GAAW,OAAQntB,GAG/B,OAFA61B,GAAuBC,EAAM1tB,KAAK,GAAI2tB,EAAM3tB,KAAK,IAAI,QACrDytB,GAAuBC,EAAM1tB,KAAK,GAAI2tB,EAAM3tB,KAAK,IAAI,GAGzD,OAAQrI,EAAE6L,MACN,IAAK,SACL,IAAK,OACL,IAAK,WACL,IAAK,MACL,IAAK,SACDiqB,GAAuB91B,EAAEqI,KAAK,GAAIpI,EAAEoI,KAAK,IACzC,MACJ,IAAK,KACDytB,GAAuB91B,EAAEqI,KAAK,GAAIpI,EAAEoI,KAAK,IAAI,GAC7CytB,GAAuB91B,EAAEqI,KAAK,GAAIpI,EAAEoI,KAAK,IAAI,GAC7C,MACJ,IAAK,SACL,IAAK,MACL,IAAK,UACDytB,GAAuB91B,EAAEqI,KAAK,GAAIpI,EAAEoI,KAAK,IACzCytB,GAAuB91B,EAAEqI,KAAK,GAAIpI,EAAEoI,KAAK,IACzC,MACJ,IAAK,gBACL,IAAK,sBACD,GAAI1K,SAASqC,EAAEqI,KAAK,GAAG+E,IAAK,MAAQzP,SAASsC,EAAEoI,KAAK,GAAG+E,IAAK,IACxD,MAAM,IAAI4c,GAAmBhqB,OAAGzN,EAAWqjC,GAAO51B,GAAK,6BAA+BA,EAAEqI,KAAK,GAAG+E,IAAM,OAASnN,EAAEoI,KAAK,GAAG+E,MAIzI,SAAS6oB,GAAkBj2B,EAAGC,GAC1B,GAAID,EAAE/N,SAAWgO,EAAEhO,OACf,MAAM,IAAI+3B,GAAmBhqB,OAAGzN,EAAW,0BAA4ByN,EAAE/N,OAAS,OAASgO,EAAEhO,QAEjG,IAAK,IAAIuH,EAAI,EAAGA,EAAIwG,EAAE/N,OAAQuH,IAC1Bs8B,GAAuB91B,EAAExG,GAAIyG,EAAEzG,IAGvC,SAAS08B,GAA2BlvB,EAAG4jB,GACnC,IAAIhhB,EAAK9U,EAAIqV,EAAK/U,EACdE,EAAIE,EAAIqU,EAEZ,QADc,IAAV+gB,IAAoBA,GAAQ,IAC3Bt2B,MAAMC,QAAQyS,GAAI,CACnB,IAAI4c,EAAM+G,GAAkB3jB,GAC5B,KAAuB,QAAhB1R,EAAKsuB,EAAI5c,SAAsB,IAAP1R,OAAgB,EAASA,EAAGrD,SAAW,GAAK,EACvE,MAAM,IAAI+3B,GAAmBhjB,OAAGzU,EAAWyU,EAAE6E,KAAO,0CAA4C7E,EAAE8E,QAEtG,GAAI8e,GACA,KAAuB,QAAhBp1B,EAAKouB,EAAItc,SAAsB,IAAP9R,OAAgB,EAASA,EAAGvD,SAAW,GAAK,EACvE,MAAM,IAAI+3B,GAAmBhjB,OAAGzU,EAAWyU,EAAE6E,KAAO,2CAA6C7E,EAAE8E,aAIvG,KAAuB,QAAhBjC,EAAK+Z,EAAItc,SAAsB,IAAPuC,OAAgB,EAASA,EAAG5X,SAAW,GAAK,EACvE,MAAM,IAAI+3B,GAAmBhjB,OAAGzU,EAAWyU,EAAE6E,KAAO,uCAAyC7E,EAAE8E,QAI3G,GAAIwhB,GAAWtmB,GAAf,CACI,IAAIqB,EAAOwtB,GAAS7uB,GACpB,IACI,IAAK,IAAImvB,EAASluB,GAASI,GAAO+tB,EAAWD,EAAOx8B,QAASy8B,EAASx8B,KAAMw8B,EAAWD,EAAOx8B,OAAQ,CAClG,IAAIqG,EAAIo2B,EAAS3kC,MACjBykC,GAA2Bl2B,GAAG,IAGtC,MAAO2J,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQysB,IAAaA,EAASx8B,OAAS9E,EAAKqhC,EAAOnsB,SAASlV,EAAG2E,KAAK08B,GAEpE,QAAU,GAAIvsB,EAAK,MAAMA,EAAI/P,aAIrC,OAAQmN,EAAE6E,MACN,IAAK,SACL,IAAK,OACL,IAAK,WACL,IAAK,MACDqqB,GAA2BlvB,EAAEqB,KAAK,IAClC,MACJ,IAAK,KACD,IACI,IAAK,IAAIyB,EAAK7B,GAASjB,EAAEqB,MAAOof,EAAK3d,EAAGnQ,QAAS8tB,EAAG7tB,KAAM6tB,EAAK3d,EAAGnQ,OAAQ,CAClEqG,EAAIynB,EAAGh2B,MACXykC,GAA2Bl2B,GAAG,IAGtC,MAAOkK,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQud,IAAOA,EAAG7tB,OAASxE,EAAK0U,EAAGE,SAAS5U,EAAGqE,KAAKqQ,GAEpD,QAAU,GAAIK,EAAK,MAAMA,EAAItQ,OAEjC,MACJ,IAAK,SACL,IAAK,MACL,IAAK,UACDq8B,GAA2BlvB,EAAEqB,KAAK,IAClC6tB,GAA2BlvB,EAAEqB,KAAK,KAI9C,SAASguB,GAAqBrvB,EAAGhH,EAAGC,GAChC,GAAIqtB,GAAWtmB,IACX,GAAIumB,GAAWvtB,IAAMutB,GAAWttB,GAAI,CAChC8vB,GAAoB/vB,GACpB+vB,GAAoB9vB,GACpB,IAAIq2B,EAAQlJ,GAAW,OAAQpmB,GAC3BuvB,EAAQnJ,GAAW,OAAQptB,GAC3Bw2B,EAAQpJ,GAAW,OAAQntB,GAC3BK,EAAI+1B,GAAqBC,EAAMjuB,KAAK,GAAIkuB,EAAMluB,KAAK,GAAImuB,EAAMnuB,KAAK,IACtE,OAAU,IAAN/H,EACOA,EAEJ+1B,GAAqBC,EAAMjuB,KAAK,GAAIkuB,EAAMluB,KAAK,GAAImuB,EAAMnuB,KAAK,UAIzE,OAAQrB,EAAE6E,MACN,IAAK,MACL,IAAK,MACL,IAAK,QACD,GAAK,QAAS7L,GAAO,QAASC,EAC1B,OAAO,IAAIgqB,GAAYjqB,EAAEoN,KAAKgd,IAAI,IAAIH,GAAYhqB,EAAEmN,MAExD,MACJ,IAAK,SACD,GAAK,WAAYpN,GAAO,WAAYC,EAAI,CAChCK,EAAIN,EAAE2P,OAAO8mB,cAAcx2B,EAAE0P,QACjC,OAAOrP,EAAI,GAAK,EAAIA,EAAI,EAAI,EAAI,EAEpC,MACJ,IAAK,QACD,GAAK,UAAWN,GAAO,UAAWC,EAAI,CAClC,IAAIy2B,EAAKrM,GAAWrqB,EAAE8P,OAClB6mB,EAAKtM,GAAWpqB,EAAE6P,OACtB,GAAW,OAAP4mB,GAAsB,OAAPC,EACf,OAAOrM,GAAaoM,EAAIC,GAGhC,MACJ,IAAK,OACD,GAAK,SAAU32B,GAAO,SAAUC,IAAkB,SAAXD,EAAE6L,MAA8B,UAAX7L,EAAE6L,QAAiC,SAAX5L,EAAE4L,MAA8B,UAAX5L,EAAE4L,MACvG,OAAO7L,EAAE6L,OAAS5L,EAAE4L,KAAO,EAAe,UAAX7L,EAAE6L,MAAoB,EAAI,EAE7D,MACJ,IAAK,MACL,IAAK,WACL,IAAK,UACL,IAAK,YACL,IAAK,WACD,IAAK,WAAY7L,GAAK,UAAWA,KAAO,WAAYC,GAAK,UAAWA,GAChE,OAAOqqB,GAAa,WAAYtqB,EAAI6pB,GAAkB7pB,EAAE2P,QAAU0a,GAAWrqB,EAAE8P,QAAU,GAAI,WAAY7P,EAAI4pB,GAAkB5pB,EAAE0P,QAAU0a,GAAWpqB,EAAE6P,QAAU,IAEtK,MACJ,IAAK,YACD,IAAM,WAAY9P,GAAO,QAASA,KAAS,WAAYC,GAAO,QAASA,GAAK,CACpEy2B,EAAKjJ,GAAUztB,GACf22B,EAAKlJ,GAAUxtB,GACnB,GAAW,OAAPy2B,GAAsB,OAAPC,EAAa,CACxBr2B,EAAIo2B,EAAGhJ,UAAYiJ,EAAGjJ,UAC1B,OAAOptB,EAAI,GAAK,EAAIA,EAAI,EAAI,EAAI,GAGxC,MACJ,IAAK,OACD,GAAK,SAAUN,GAAO,SAAUC,GAAiB,SAAXD,EAAE6L,MAA8B,SAAX5L,EAAE4L,KACzD,OAAO,EAKvB,MAAM,IAAIme,GAAmBhjB,OAAGzU,EAAWqjC,GAAO5uB,GAAK,4BAA8B7Q,KAAKS,UAAUoJ,GAAK,KAAO7J,KAAKS,UAAUqJ,IAGnI,SAAS22B,GAAWxwB,GAChB,IAAIiE,EAAKvV,EACT,IAAKR,MAAMC,QAAQ6R,GACf,OAAO,EAEX,IACI,IAAK,IAAI6pB,EAAMhoB,GAAS7B,GAAI8pB,EAAQD,EAAIt2B,QAASu2B,EAAMt2B,KAAMs2B,EAAQD,EAAIt2B,OAAQ,CAC7E,IAAIoG,EAAImwB,EAAMz+B,MACd,KAAM6C,MAAMC,QAAQwL,IAAM62B,GAAW72B,IAChC,SAAUA,GAAM+vB,GAAc/vB,IAC/B,OAAO,GAInB,MAAOqK,GAASC,EAAM,CAAExQ,MAAOuQ,GAC/B,QACI,IACQ8lB,IAAUA,EAAMt2B,OAAS9E,EAAKm7B,EAAIjmB,SAASlV,EAAG2E,KAAKw2B,GAE3D,QAAU,GAAI5lB,EAAK,MAAMA,EAAIxQ,OAEjC,OAAO,EAEX,SAASg9B,GAAwBzwB,EAAGY,EAAG8vB,GACnC,IAAI/rB,EAAKjW,EAAIk7B,EAAK56B,EAClB,GAAIk4B,GAAWtmB,GAAI,CACf,GAAIumB,GAAWnnB,GAAI,CACf2pB,GAAoB3pB,GACpB,IAAIkuB,EAAKlH,GAAW,OAAQhnB,GACxBiuB,EAAKjH,GAAW,OAAQpmB,GAG5B,OAFA6vB,GAAwBvC,EAAGjsB,KAAK,GAAIgsB,EAAGhsB,KAAK,GAAIyuB,QAChDD,GAAwBvC,EAAGjsB,KAAK,GAAIgsB,EAAGhsB,KAAK,GAAIyuB,GAGpD,MAAM,IAAI9M,GAAmBhjB,EAAGZ,EAAG,kBAAoBjQ,KAAKS,UAAUwP,IAE1E,OAAQY,EAAE6E,MAEN,IAAK,MACD,GAAK,QAASzF,GAAMmkB,GAAUnkB,EAAEgH,KAC5B,OAEJ,MAAM,IAAI4c,GAAmBhjB,EAAGZ,EAAG,2BAA6BjQ,KAAKS,UAAUwP,IACnF,IAAK,MACL,IAAK,QACD,GAAK,QAASA,GAAMokB,GAAUpkB,EAAEgH,KAC5B,OAEJ,MAAM,IAAI4c,GAAmBhjB,EAAGZ,EAAG,2BAA6BjQ,KAAKS,UAAUwP,IACnF,IAAK,SACD,GAAI,WAAYA,EACZ,OAEJ,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,0BAA4BjQ,KAAKS,UAAUwP,IAClF,IAAK,QACL,IAAK,eACL,IAAK,eACD,GAAI,UAAWA,GAA6B,OAAxBikB,GAAWjkB,EAAE0J,OAC7B,OAEJ,MAAM,IAAIka,GAAmBhjB,EAAGZ,EAAG,yBAA2BjQ,KAAKS,UAAUwP,IACjF,IAAK,OACD,GAAK,SAAUA,IAAkB,SAAXA,EAAEyF,MAA8B,UAAXzF,EAAEyF,MACzC,OAEJ,MAAM,IAAIme,GAAmBhjB,EAAGZ,EAAG,2BAA6BjQ,KAAKS,UAAUwP,IACnF,IAAK,WACD,GAAK,WAAYA,GAC2F,OAAxG2mB,GAAmB3mB,EAAEuJ,OAAQ,uBAAwB,yBAA0B,qBAC/E,OAEC,GAAI,UAAWvJ,EAChB,IAEI,YADAovB,GAAyBpvB,GAG7B,MAAO1P,IAIX,MAAM,IAAIszB,GAAmBhjB,EAAGZ,EAAG,sBAAwBjQ,KAAKS,UAAUwP,IAC9E,IAAK,YACD,IAAM,WAAYA,GAAO,QAASA,IAAwB,OAAjBqnB,GAAUrnB,GAC/C,OAEJ,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,uBAAyBjQ,KAAKS,UAAUwP,IAC/E,IAAK,UACD,GAAI,WAAYA,EAAG,CACf,IAAI8J,EAAU9J,EAAEuJ,OACZonB,EAAK3wB,EAAEuJ,OAAOsL,QAAQ,KAK1B,GAJI8b,GAAM,IAEN7mB,EAAU9J,EAAEuJ,OAAO5U,MAAM,EAAGg8B,IAE2F,OAAvHhK,GAAmB7c,EAAS,uBAAwB,yBAA0B,oBAAqB,gBACnG,YAGH,GAAI,UAAW9J,EAChB,IAEI,YADAmvB,GAAmBnvB,GAGvB,MAAO1P,IAIX,MAAM,IAAIszB,GAAmBhjB,EAAGZ,EAAG,qBAAuBjQ,KAAKS,UAAUwP,IAC7E,IAAK,MACD,GAAK,WAAYA,GAC+E,OAA5F2mB,GAAmB3mB,EAAEuJ,OAAQ,mBAAoB,qBAAsB,iBACvE,OAEC,GAAI,UAAWvJ,EAChB,IAEI,YADAqvB,GAAqBrvB,GAGzB,MAAO1P,IAIX,MAAM,IAAIszB,GAAmBhjB,EAAGZ,EAAG,wBAA0BjQ,KAAKS,UAAUwP,IAChF,IAAK,OACD,GAAK,SAAUA,GAAiB,SAAXA,EAAEyF,KACnB,OAEJ,MAAM,IAAIme,GAAmBhjB,EAAGZ,EAAG,wBAA0BjQ,KAAKS,UAAUwP,IAChF,IAAK,YACD,GAAK,UAAWA,GAAO,WAAYA,GACiF,OAAhH2mB,GAAmB3mB,EAAEuJ,OAAQ,mBAAoB,qBAAsB,gBAAiB,oBACxF,OAEJ,MAAM,IAAIqa,GAAmBhjB,EAAGZ,EAAG,uBAAyBjQ,KAAKS,UAAUwP,IAC/E,IAAK,WACD,GAAI,UAAWA,GAAK,WAAYA,EAAG,CAC/B,IAAI9F,EAAI,WAAY8F,EAAIyjB,GAAkBzjB,EAAEuJ,QAAU0a,GAAWjkB,EAAE0J,OACnE,GAAU,OAANxP,EACA,OAGR,MAAM,IAAI0pB,GAAmBhjB,EAAGZ,EAAG,sBAAwBjQ,KAAKS,UAAUwP,IAC9E,IAAK,YACD,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,0DACvC,IAAK,WACD,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,yDAEvC,IAAK,SACD,GAAI,SAAUA,EAAG,CACb,GAAe,SAAXA,EAAEyF,KACF,OAEC,GAAe,SAAXzF,EAAEyF,KAEP,YADAgrB,GAAwBzwB,EAAEiC,KAAK,GAAIrB,EAAEqB,KAAK,GAAIyuB,GAItD,MAAM,IAAI9M,GAAmBhjB,EAAGZ,EAAG,oBAAsBjQ,KAAKS,UAAUwP,IAC5E,IAAK,OACL,IAAK,MACD,GAAI2pB,GAAoB3pB,GAAI,CACxB,IAAI0K,OAAO,EACX,IACI,IAAK,IAAI4jB,EAAMzsB,GAAS7B,GAAIuuB,EAAQD,EAAI/6B,QAASg7B,EAAM/6B,KAAM+6B,EAAQD,EAAI/6B,OAAQ,CAC7E,IAAIoG,EAAI40B,EAAMljC,MAEd,GADAolC,GAAwB92B,EAAGiH,EAAEqB,KAAK,GAAIyuB,GACvB,QAAX9vB,EAAE6E,KACF,QAAatZ,IAATue,EACAA,EAAO/Q,OAEN,GAAIs2B,GAAqBrvB,EAAEqB,KAAK,GAAIyI,EAAM/Q,GAAK,EAChD,MAAM,IAAIiqB,GAAmBhjB,EAAGZ,EAAG,iCAAmCjQ,KAAKS,UAAUwP,KAKrG,MAAO4E,GAASD,EAAM,CAAElR,MAAOmR,GAC/B,QACI,IACQ2pB,IAAUA,EAAM/6B,OAAS9E,EAAK4/B,EAAI1qB,SAASlV,EAAG2E,KAAKi7B,GAE3D,QAAU,GAAI3pB,EAAK,MAAMA,EAAIlR,OAEjC,OAEJ,MAAM,IAAImwB,GAAmBhjB,EAAGZ,EAAGY,EAAE6E,KAAO,cAAgB1V,KAAKS,UAAUwP,IAC/E,IAAK,KACD,GAAI,SAAUA,EAAG,CACb,GAAe,SAAXA,EAAEyF,KAEF,YADAgrB,GAAwBzwB,EAAEiC,KAAK,GAAIrB,EAAEqB,KAAK,GAAIyuB,GAG7C,GAAe,UAAX1wB,EAAEyF,KAEP,YADAgrB,GAAwBzwB,EAAEiC,KAAK,GAAIrB,EAAEqB,KAAK,GAAIyuB,GAItD,MAAM,IAAI9M,GAAmBhjB,EAAGZ,EAAG,wBAA0BjQ,KAAKS,UAAUwP,IAChF,IAAK,SACD,GAAIwwB,GAAWxwB,GAAI,CACf,IAAIkgB,EAAM0Q,GAAqB5wB,EAAG,CAACY,EAAEqB,KAAK,IAAKyuB,GAC/C,GAAI,WAAYxQ,EACZ,MAAM,IAAI0D,GAAmBhjB,EAAGZ,EAAG,uCAAyCkgB,EAAI2Q,QAEpF,GAAmB,IAAf3Q,EAAIr0B,OACJ,MAAM,IAAI+3B,GAAmBhjB,EAAGZ,EAAG,gCAGvC,YADA0vB,GAAuB9uB,EAAEqB,KAAK,GAAIie,EAAI,IAG1C,MAAM,IAAI0D,GAAmBhjB,EAAGZ,EAAG,sBAAwBjQ,KAAKS,UAAUwP,IAC9E,IAAK,MACL,IAAK,UACD,GAAI9R,MAAMC,QAAQ6R,GAAI,CACd0K,OAAO,EACX,IACI,IAAK,IAAIomB,EAAMjvB,GAAS7B,GAAI+wB,EAAQD,EAAIv9B,QAASw9B,EAAMv9B,KAAMu9B,EAAQD,EAAIv9B,OAAQ,CACzEoG,EAAIo3B,EAAM1lC,MACd,KAAM,SAAUsO,IAAiB,QAAXA,EAAE8L,KACpB,MAAM,IAAIme,GAAmBhjB,EAAGZ,EAAG,0BAA4BjQ,KAAKS,UAAUwP,IAIlF,GAFAywB,GAAwB92B,EAAEsI,KAAK,GAAIrB,EAAEqB,KAAK,GAAIyuB,GAC9CD,GAAwB92B,EAAEsI,KAAK,GAAIrB,EAAEqB,KAAK,GAAIyuB,QACjCvkC,IAATue,EACAA,EAAO/Q,OAEN,GAAIs2B,GAAqBrvB,EAAEqB,KAAK,GAAIyI,EAAKzI,KAAK,GAAItI,EAAEsI,KAAK,IAAM,EAChE,MAAM,IAAI2hB,GAAmBhjB,EAAGZ,EAAG,iCAAmCjQ,KAAKS,UAAUwP,KAIjG,MAAO+pB,GAASH,EAAM,CAAEn2B,MAAOs2B,GAC/B,QACI,IACQgH,IAAUA,EAAMv9B,OAASxE,EAAK8hC,EAAIltB,SAAS5U,EAAGqE,KAAKy9B,GAE3D,QAAU,GAAIlH,EAAK,MAAMA,EAAIn2B,OAEjC,OAEJ,MAAM,IAAImwB,GAAmBhjB,EAAGZ,EAAGY,EAAE6E,KAAO,cAAgB1V,KAAKS,UAAUwP,IAC/E,IAAK,eACD,GAAI,QAASA,GAAKmkB,GAAUnkB,EAAEgH,MAAQ,UAAWhH,GAA6B,OAAxBikB,GAAWjkB,EAAE0J,OAC/D,OAEJ,MAAM,IAAIka,GAAmBhjB,EAAGZ,EAAG,+BAAiCjQ,KAAKS,UAAUwP,IACvF,IAAK,gBACD,GAAI9R,MAAMC,QAAQ6R,GACd,OAEJ,MAAM,IAAI4jB,GAAmBhjB,EAAGZ,EAAG,2BAA6BjQ,KAAKS,UAAUwP,IACnF,IAAK,SAQD,YAPAywB,GAAwBzwB,EAAG,CACvByF,KAAM,OAAQxD,KAAM,CAChB,CAAEwD,KAAM,WACR7E,EAAEqB,KAAK,GACP,CAAEwD,KAAM,SAEbirB,GAEP,QACI,MAAM,IAAI9M,GAAmBhjB,EAAGZ,EAAG,oBAAsBwvB,GAAO5uB,KAG5E,SAASowB,GAAoBC,EAAMC,EAAOR,GACtC,IAAIrC,EAAK3/B,EACLwxB,EAAMgR,EACNrwB,EAAIqwB,EACJ99B,EAAI,EACR,IACI,IAAK,IAAI+9B,EAAStvB,GAASovB,GAAOG,EAAWD,EAAO59B,QAAS69B,EAAS59B,KAAM49B,EAAWD,EAAO59B,OAAQ,CAClG,IAAIoO,EAAKyvB,EAAS/lC,MACdgmC,EAAKT,GAAqBjvB,EAAId,EAAG6vB,GAErC,GADAxQ,EAAMmR,EACF,WAAYA,EACZ,MAEJxwB,EAAIwwB,EACJj+B,KAGR,MAAOg7B,GAASC,EAAM,CAAE56B,MAAO26B,GAC/B,QACI,IACQgD,IAAaA,EAAS59B,OAAS9E,EAAKyiC,EAAOvtB,SAASlV,EAAG2E,KAAK89B,GAEpE,QAAU,GAAI9C,EAAK,MAAMA,EAAI56B,OAEjC,GAAK,WAAYysB,GAAQ9sB,IAAM69B,EAAKplC,OAAS,EACzC,MAAM,IAAIyjC,GAA0B2B,EAAM/Q,EAAK,uCAEnD,QAAsE/zB,KAAzD,OAARukC,QAAwB,IAARA,OAAiB,EAASA,EAAIY,eAA8B,CAC7E,IAAIC,EAAQ,CACR5vB,GAAIsvB,EACJO,GAAIN,EACJO,IAAKvR,GAETwQ,EAAIY,cAAcC,GAEtB,OAAOrR,EAEX,SAAS0Q,GAAqBK,EAAMC,EAAOR,GACvC,IAAIx4B,GAAiB,OAARw4B,QAAwB,IAARA,OAAiB,EAASA,EAAI3R,WAAanC,GACxE,GAAI1uB,MAAMC,QAAQ8iC,GACd,OAAOD,GAAoBC,EAAMC,EAAOR,GAE5C,IAAIgB,EAAcT,EAElB,SAAShvB,EAAKnP,GAGV,IAFA,IAAI27B,EAAK//B,EACLijC,EAAU,GACLtkB,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCskB,EAAQtkB,EAAK,GAAKvM,UAAUuM,GAEhC,GAAI6jB,EAAMrlC,OAAS8lC,EAAQ9lC,OAASiH,EAChC,MAAM,IAAIw8B,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,8BAAgCksB,EAAQ9lC,OAAS,eAEhI,IAAIuH,EAAIN,EACR,IACI,IAAK,IAAI8+B,EAAY/vB,GAAS8vB,GAAUE,EAAcD,EAAUr+B,QAASs+B,EAAYr+B,KAAMq+B,EAAcD,EAAUr+B,OAAQ,CACvH,IAAIu+B,EAAMD,EAAYxmC,MACtB,GAAY,OAARymC,GAA+B,IAAfA,EAAIjmC,OAAc,CAClC,IAAIqwB,EAAK,EACT,MAAOA,EAAK4V,EAAIjmC,QAAUimC,EAAI5V,KAAQsT,GAAO0B,EAAM99B,IAC/C8oB,IAEJ,GAAIA,IAAO4V,EAAIjmC,OACX,MAAM,IAAIyjC,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,2BAA6BrS,EAAI,oBAAsB0+B,EAAM,SAAWtC,GAAO0B,EAAM99B,IAAM,YAG9KA,KAGR,MAAOo7B,GAASC,EAAM,CAAEh7B,MAAO+6B,GAC/B,QACI,IACQqD,IAAgBA,EAAYr+B,OAAS9E,EAAKkjC,EAAUhuB,SAASlV,EAAG2E,KAAKu+B,GAE7E,QAAU,GAAInD,EAAK,MAAMA,EAAIh7B,OAEjC,OAAOy9B,EAAMv8B,MAAM7B,EAAG6+B,EAAQ9lC,OAASiH,GAE3C,SAASi/B,EAAQC,GACb,OAAO,WAEH,IADA,IAAI/vB,EAAO,GACFoL,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCpL,EAAKoL,GAAMvM,UAAUuM,GAEzB,IACI,OAAO2kB,EAAGjxB,WAAM,EAAQrN,GAAc,GAAId,GAAOqP,KAErD,MAAO3R,GACH,MAAIA,aAAeqzB,GACT,IAAI2L,GAA0BoC,EAAaR,EAAO5gC,EAAIzD,SAGtDyD,IAKtB,SAAS2hC,EAAiBD,GACtB,OAAO,SAAU9U,GACb,IACI,OAAO8U,EAAG9U,GAEd,MAAO5sB,GACH,MAAIA,aAAeqzB,GACT,IAAI2L,GAA0BoC,EAAaR,EAAO5gC,EAAIzD,SAGtDyD,IAKtB,IAAI4hC,EAASH,EAAQxN,IACjB4N,EAAoBJ,EAAQlC,IAC5BuC,EAAmBL,EAAQrC,IAC3B2C,EAAuBJ,EAAiBlJ,IACxCuJ,EAAqBL,EAAiBvJ,IACtC6J,EAAqBN,EAAiB/I,IACtCsJ,EAAqBP,EAAiBpJ,IACtC4J,EAA2BR,EAAiBjJ,IAEhD,SAAS0J,EAAeC,EAAK7T,GACzB,IAAIllB,EAAIs4B,EAAOR,EAAa,GAAS,GAAS,GAAI5S,GAAM,CAAE8F,iBAAuBz4B,IAAVwmC,EAAIzxB,GAAmByxB,EAAIzxB,EAAI,EAAG2jB,cAAoB14B,IAAVwmC,EAAIh5B,GAAmBg5B,EAAIh5B,EAAI,KAC9Ii5B,EAAY,SAAUh5B,EAAG9G,EAAG0J,GAC5B,GAAI5C,GAAKA,EAAE/N,QAAUiH,GAAK,GACtB,MAAM,IAAIw8B,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,cAAgB3S,GAAK,GAAK,IAAM0J,EAAO,yBAM1H,OAHAo2B,EAAUh5B,EAAEsH,EAAGyxB,EAAIzxB,EAAG,SACtB0xB,EAAUh5B,EAAEgH,EAAG+xB,EAAI/xB,EAAG,QACtBgyB,EAAUh5B,EAAED,EAAGg5B,EAAIh5B,EAAG,YACfC,EAGX,SAASi5B,EAASC,EAAIl5B,GAClB,IAAI0W,EAAKwiB,EACLlyB,EAAI1S,MAAMC,QAAQmiB,GAAM,CAAE7K,KAAM,OAAQxD,KAAMqO,GAAOA,EACrDmL,EAAMyW,EAAOtxB,GACb4c,OAAerxB,IAARyN,EAAED,QAA2BxN,IAARyN,EAAEgH,QAA2BzU,IAARyN,EAAEsH,EAAmBxN,GAAcA,GAAcA,GAAc,GAAId,IAAiB,OAARgH,EAAED,EAAa8hB,EAAI9hB,EAAIC,EAAED,IAAM,KAAO/G,IAAiB,OAARgH,EAAEgH,EAAa6a,EAAI7a,EAAIhH,EAAEgH,IAAM,KAAOhO,IAAiB,OAARgH,EAAEsH,EAAaua,EAAIva,EAAItH,EAAEsH,IAAM,UAAQ/U,EACtQyU,EAAE8E,OAAQ,IAAIiV,EAAO,GAAO/Z,EAAG,CAAC,WAChC,OAAO,GAAS,GAAS,GAAI+Z,GAAQ6C,GAAsB,IAAfA,EAAI3xB,QAAgB,CAAE6Z,OAAQ8X,IAG9E,SAASuV,EAAYnyB,EAAGoyB,GACpB,IAAIC,EAAKP,EAAe,CAAE/4B,EAAG,IAC7B,OAAOk5B,EAASjyB,EAAG,CAAEjH,OAAYxN,IAAT8mC,EAAGt5B,EAAkBs5B,EAAGt5B,OAAYxN,IAAR6mC,EAAoB,CAACA,GAAO,KAAMpyB,EAAG,OAG7F,SAASsyB,EAAchW,EAAKsH,EAAO2O,EAAQrgC,EAAGsgC,GAC1C,IAAI1kC,EAAIM,EAAIE,EAAIE,EACZikC,EAAsC,QAA1B3kC,EAAKwjC,EAAO1N,GAAOtjB,SAAsB,IAAPxS,OAAgB,EAASA,EAAG,GAC1E4kC,EAAkC,QAAnBtkC,EAAKmkC,EAAOjyB,SAAsB,IAAPlS,OAAgB,EAASA,EAAG8D,GAC1E,QAAoB3G,IAAhBmnC,GAA6C,MAAhBA,QAAoCnnC,IAAbknC,GAA0BC,IAAgBD,EAC9F,MAAM,IAAI/D,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,gCAAkC6tB,EAAc,QAAUD,GAEzI,IAAIE,EAAgC,QAAnBrkC,EAAKikC,EAAOx5B,SAAsB,IAAPzK,OAAgB,EAASA,EAAG4D,GACpE0gC,EAAkC,QAAxBpkC,EAAK8iC,EAAOhV,GAAKvjB,SAAsB,IAAPvK,OAAgB,EAASA,EAAG,GAC1E,OAAOyjC,EAASrO,EAAO,CACnB5jB,EAAG,KACHjH,EAAG45B,EACe,OAAdA,EACIF,EAAW,CAAC,IAAMA,EAAS1+B,MAAM,SAAMxI,EACzB,QAAdonC,EACIC,EACI,CAAC,IAAMA,EAAO7+B,MAAM,GAAK,KAAO0+B,EAAWA,EAAS1+B,MAAM,GAAKy+B,IAC/DC,EAAW,CAAC,IAAMA,EAAS1+B,MAAM,SAAMxI,EAC3C,CAAConC,GACT,OAIZ,SAASE,EAAKhY,EAAK3oB,EAAGM,QACR,IAANA,IAAgBA,EAAIN,GACxB,IAAIlF,EAAIo5B,GAAW,OAAQvL,GAC3B,GAAU,IAANroB,EACA,MAAO,CAACxF,EAAEqU,KAAK,IAEd,GAAU,IAAN7O,EACL,OAAOxF,EAAEqU,KAEb,IAAIhF,EAAQrP,EAAEqU,KAAK,GACnB,GAAIilB,GAAWjqB,GACX,OAAOvJ,GAAc,CAAC9F,EAAEqU,KAAK,IAAKrP,GAAO6gC,EAAKx2B,EAAOnK,EAAGM,EAAI,KAG5D,MAAM,IAAIk8B,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,cAAgB3S,EAAI,wBAGvG,SAAS4gC,EAAOjY,EAAK3oB,EAAGM,GAEpB,QADU,IAANA,IAAgBA,EAAIN,GACd,IAANM,EACA,OAAOqoB,EAEX,IAAI7tB,EAAIo5B,GAAW,OAAQvL,GAC3B,GAAU,IAANroB,EACA,OAAOxF,EAAEqU,KAAK,GAElB,IAAIhF,EAAQrP,EAAEqU,KAAK,GACnB,GAAIilB,GAAWjqB,GACX,OAAOy2B,EAAOz2B,EAAOnK,EAAGM,EAAI,GAE3B,GAAU,IAANA,EACL,OAAO6J,EAEX,MAAM,IAAIqyB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,eAAiB3S,EAAI,GAAK,wBAEzG,SAAS6gC,EAAUlY,EAAKvhB,EAAGpH,EAAGM,GAE1B,QADU,IAANA,IAAgBA,EAAIN,GACd,IAANM,EACA,OAAO8G,EAEX,IAAItM,EAAIo5B,GAAW,OAAQvL,GAC3B,GAAU,IAANroB,EACA,OAAO,GAAS,GAAS,GAAIxF,GAAI,CAAEqU,KAAM,CAAC/H,EAAGtM,EAAEqU,KAAK,MAExD,IAAIhF,EAAQrP,EAAEqU,KAAK,GACnB,GAAIilB,GAAWjqB,GACX,OAAO,GAAS,GAAS,GAAIrP,GAAI,CAAEqU,KAAM,CAACrU,EAAEqU,KAAK,GAAI0xB,EAAU12B,EAAO/C,EAAGpH,EAAGM,EAAI,MAE/E,GAAU,IAANA,EACL,OAAO,GAAS,GAAS,GAAIxF,GAAI,CAAEqU,KAAM,CAACrU,EAAEqU,KAAK,GAAI/H,KAEzD,MAAM,IAAIo1B,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,eAAiB3S,EAAI,GAAK,wBAEzG,IAAI8gC,EAAY,SAAUh6B,EAAGi6B,GAAU,MAAO,CAAC,KAAOj6B,EAAED,EAAIC,EAAED,EAAE,GAAGhF,MAAM,GAAK,IAAM,IAAMk/B,IAC1F,SAASC,EAAWC,EAAKC,GACrB,KAAK,WAAYD,MAAS,WAAYC,GAiBlC,OADA7B,EAAkB4B,EAAKC,GAChBD,EAfP,KAAK,WAAYA,MAAS,WAAYC,GAUlC,MAAQ,WAAYD,EAAOC,EAAMD,EATjC,IAEI,OADArE,GAAuBqE,EAAIlD,OAAQmD,EAAInD,QAChCkD,EAEX,MAAOrlC,GACH,MAAO,CAAEmiC,OAAQ,CAAEprB,KAAM,KAAMxD,KAAM,CAAC8xB,EAAIlD,OAAQmD,EAAInD,WAYtE,IAAIoD,EAAW,SAAWvC,GACtB,IAAIhjC,EAAIM,EACJE,EAAIE,EAAIqU,EAAIC,EAAI2d,EACpB,OAAQqQ,EAAYjsB,MAChB,IAAK,MAEG,IAAI3S,EAAI4+B,EAAYzvB,KAAO1K,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAAM,EACnE,GAAU,IAANlU,EACA,MAAM,IAAIw8B,GAA0BoC,EAAaR,EAAO,sBAE5D,IAAIgD,EAAMjyB,EAAKnP,EAAI,EAAG,MAAM,GAC5B,GAAoB,WAAhB08B,GAAO0E,GACP,MAAM,IAAI5E,GAA0BoC,EAAaR,EAAO,yBAE5D,OAAOx9B,GAAc,CAACwgC,GAAMthC,GAAOs+B,IAE3C,IAAK,OAEG,IAAIiD,EAAMlyB,EAAK,EAAG,KAAM,MAExB,OADAywB,EAAe,IACRh/B,GAAc,CAACygC,EAAI,GAAIA,EAAI,IAAKvhC,GAAOs+B,EAAMv8B,MAAM,KAElE,IAAK,OACD,OAAOjB,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,SAAUxD,KAAM,CAACA,EAAK,EAAG,MAAM,KAAOywB,EAAe,CAAE9xB,EAAG,EAAGjH,EAAG,MAAQ/G,GAAOs+B,EAAMv8B,MAAM,KACtI,IAAK,OACD,OAAOjB,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,QAAUitB,EAAe,CAAE/4B,EAAG,EAAGiH,EAAG,MAAQhO,GAAOs+B,IAC9F,IAAK,OAEOp+B,EAAI4+B,EAAYzvB,KAAO1K,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAAM,EACnE,GAAIlU,EAAI,EACJ,MAAM,IAAIw8B,GAA0BoC,EAAaR,EAAO,QAAUp+B,EAAI,iBAE1E,IAAIshC,EAAMnyB,EAAKlB,WAAM,EAAQrN,GAAc,CAAC,GAAId,GAAO,IAAI1E,MAAM4E,GAAGkvB,KAAK,SACrEqS,EAAO3B,EAAe,CAAExxB,EAAGpO,EAAG8N,EAAG,EAAGjH,EAAG,GAAK,CAAEgrB,eAAe,IAC7D2P,EAAS,SAAUzzB,GACnB,IAAIzN,EAAIyN,EAAE0zB,YAAY,KACtB,OAAO1zB,EAAElM,MAAMvB,EAAI,EAAIA,EAAI,EAAI,IAE/BohC,EAAUJ,EAAI/8B,KAAI,SAAUsC,EAAGvG,GAC/B,IAAI1E,EACA+lC,EAAKvC,EAAOv4B,GACZuH,EAAImzB,EAAKnzB,GAAKmzB,EAAKnzB,EAAErV,OAASuH,GAAmB,MAAdihC,EAAKnzB,EAAE9N,GAC5B,OAAdihC,EAAKnzB,EAAE9N,GACHqhC,EAAG96B,EAAI,CAAC,IAAM26B,GAAwB,QAAf5lC,EAAK+lC,EAAG96B,SAAsB,IAAPjL,OAAgB,EAASA,EAAG,KAAO,UAAOvC,EACxF,CAACkoC,EAAKnzB,EAAE9N,SACZjH,EACJ,OAAO0mC,EAASl5B,EAAG,CAAEA,EAAG,KAAMiH,EAAG,KAAMM,EAAGA,OAE9C,OAAOxN,GAAc,CACjBm/B,EAAS,CACLptB,KAAM,OACNxD,KAAMuyB,GACP,CAAE5zB,EAAGyzB,EAAKzzB,EAAGjH,EAAG06B,EAAK16B,KACzB/G,GAAOs+B,EAAMv8B,MAAM7B,KAE9B,IAAK,SAEOA,EAAI4+B,EAAYzvB,KAAO1K,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAAM,EACnE,GAAIlU,EAAI,EACJ,MAAM,IAAIw8B,GAA0BoC,EAAaR,EAAO,UAAYp+B,EAAI,iBAE5E,IAAI4hC,EAAMzyB,EAAK,EAAG,CAAC,SAAS,GACxB0yB,EAAOjC,EAAe,CAAExxB,EAAG,EAAGvH,EAAG,GAAK,CAAE+qB,YAAY,IACpDxG,EAASuV,EAAKiB,EAAK5hC,GACvB,OAAOY,GAAcA,GAAc,GAAId,GAAOsrB,EAAO7mB,KAAI,SAAUmtB,EAAOpxB,GAAK,OAAO8/B,EAAcwB,EAAKlQ,EAAOmQ,EAAMvhC,EAAS,IAANA,EAAU,MAAQ,YAAcR,GAAOs+B,EAAMv8B,MAAM,KAEpL,IAAK,MACL,IAAK,MAEG,IAAIigC,EAAM5N,GAAW,OAAQ/kB,EAAK,EAAG,CAAC,SAAS,IAC3CuiB,EAAQoQ,EAAI3yB,KAA0B,QAArByvB,EAAYjsB,KAAiB,EAAI,GAClDwtB,EAAKP,EAAe,CAAExxB,EAAG,EAAGvH,EAAG,GAAK,CAAE+qB,YAAY,IACtD,OAAOhxB,GAAc,CAACw/B,EAAc0B,EAAKpQ,EAAOyO,EAAI,EAAGvB,EAAYjsB,KAAKovB,sBAAuBjiC,GAAOs+B,EAAMv8B,MAAM,KAE1H,IAAK,OAEG,IAAImgC,EAAM7yB,EAAK,EAAG,KAAM,CAAC,SAEzB,OADAmwB,EAAiB0C,EAAI,GAAIA,EAAI,GAAG7yB,KAAK,IAC9BvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,OAAQxD,KAAM,CAAC6yB,EAAI,GAAG7yB,KAAK,OAASrP,GAAOs+B,EAAMv8B,MAAM,KAEzG,IAAK,OAED,OADAsN,EAAK,EAAG,CAAC,SAAU,OAAQ,MAAO,MAAO,UAClCvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAC5E,IAAK,MAEG,IAAIogC,EAAM9yB,EAAK,EAAG,KAAM,CAAC,MAAO,MAAO,YAGvC,OAFAowB,EAAqB0C,EAAI,IACzB3C,EAAiB2C,EAAI,GAAIA,EAAI,GAAG9yB,KAAK,IAC9BvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,UAAY7S,GAAOs+B,EAAMv8B,MAAM,KAEjF,IAAK,MACD,GAAI+8B,EAAYzvB,KAAM,CAEdnP,EAAIyE,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAA1C,IACIguB,EAAM/yB,EAAK,EAAG,CAAC,SAAS,GAC5B,OAAOvO,GAAc,CAACq/B,EAAYW,EAAOsB,EAAKliC,KAAMF,GAAOs+B,EAAMv8B,MAAM,KAIvE,IAAIsgC,EAAMhzB,EAAK,EAAG,KAAM,CAAC,MAAO,YAGhC,OAFAowB,EAAqB4C,EAAI,IACzB7C,EAAiB6C,EAAI,GAAIA,EAAI,GAAGhzB,KAAK,IAC9BvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAUxD,KAAM,CAACgzB,EAAI,GAAGhzB,KAAK,OAASrP,GAAOs+B,EAAMv8B,MAAM,KAE3G,IAAK,SACD,GAAI+8B,EAAYzvB,KAAM,CAEdnP,EAAIyE,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAA1C,IACIkuB,EAAOjzB,EAAK,EAAG,KAAM,CAAC,SAC1B,OAAOvO,GAAc,CAACq/B,EAAYY,EAAUuB,EAAK,GAAIA,EAAK,GAAIpiC,KAAMF,GAAOs+B,EAAMv8B,MAAM,KAIvF,IAAI0tB,EAAKpgB,EAAK,EAAG,KAAM,CAAC,OAAQ,WAEhC,GADAowB,EAAqBhQ,EAAG,IACL,SAAfA,EAAG,GAAG5c,KAAiB,CACvB,IAAI0vB,EAAOlzB,EAAK,EAAG,CAAC,QAEpB,OADAmwB,EAAiB/P,EAAG,GAAI8S,EAAK,GAAGlzB,KAAK,IAC9BvO,GAAc,CAACq/B,EAAY,CAC1BttB,KAAM,MACNxD,KAAM,CAAC4wB,EAASxQ,EAAG,GAAI,CAAEzhB,EAAG,WAC3BhO,GAAOs+B,EAAMv8B,MAAM,KAEhC,IAAI2tB,EAAKrgB,EAAK,EAAG,CAAC,MAAO,YAEzB,OADAmwB,EAAiB/P,EAAG,GAAIC,EAAG,GAAGrgB,KAAK,IAChB,QAAfqgB,EAAG,GAAG7c,KACC/R,GAAc,CAACq/B,EAAY,CAC1BttB,KAAM,MACNxD,KAAM,CACF4wB,EAASxQ,EAAG,GAAI,CAAEzhB,EAAG,OACrBiyB,EAASxQ,EAAG,GAAGpgB,KAAK,GAAI,CAAErB,EAAG,WAEhChO,GAAOs+B,EAAMv8B,MAAM,MAEhC89B,EAAyBpQ,EAAG,GAAGpgB,KAAK,IAC7BvO,GAAc,CAACq/B,EAAY,CAC1BttB,KAAM,UACNxD,KAAM,CACF4wB,EAASxQ,EAAG,GAAI,CAAEzhB,EAAG,OACrBiyB,EAASxQ,EAAG,GAAGpgB,KAAK,GAAI,CAAErB,EAAG,WAEhChO,GAAOs+B,EAAMv8B,MAAM,MAEpC,IAAK,iBAEOs+B,EAAKP,EAAe,CAAE/4B,EAAG,IAA7B,IACIy7B,EAAOnzB,EAAK,EAAG,KAAM,CAAC,UAAW,CAAC,MAAO,YAC7CowB,EAAqB+C,EAAK,IAC1BhD,EAAiBgD,EAAK,GAAIA,EAAK,GAAGnzB,KAAK,IACvCmwB,EAAiBgD,EAAK,GAAGnzB,KAAK,GAAImzB,EAAK,GAAGnzB,KAAK,IAC/C,IAAIwyB,EAAqB,QAAfvlC,EAAK+jC,EAAGt5B,SAAsB,IAAPzK,OAAgB,EAASA,EAAGmI,KAAI,SAAUsC,GAAK,MAAa,MAANA,EAAY,CAACA,QAAKxN,KACzG,MAAqB,QAAjBipC,EAAK,GAAG3vB,KACD/R,GAAc,CACjBm/B,EAAS,CAAEptB,KAAM,SAAUxD,KAAM,CAACmzB,EAAK,GAAGnzB,KAAK,KAAO,CAAEtI,EAAU,OAAP86B,QAAsB,IAAPA,OAAgB,EAASA,EAAG,KACtG5B,EAAS,CACLptB,KAAM,MACNxD,KAAM,CACF4wB,EAASuC,EAAK,GAAI,CAAEx0B,EAAG,OACvBiyB,EAASuC,EAAK,GAAGnzB,KAAK,GAAI,CAAErB,EAAG,SAEpC,CAAEjH,EAAU,OAAP86B,QAAsB,IAAPA,OAAgB,EAASA,EAAG,MACpD7hC,GAAOs+B,EAAMv8B,MAAM,MAE1B89B,EAAyB2C,EAAK,GAAGnzB,KAAK,IAC/BvO,GAAc,CACjBm/B,EAAS,CAAEptB,KAAM,SAAUxD,KAAM,CAACmzB,EAAK,GAAGnzB,KAAK,KAAO,CAAEtI,EAAU,OAAP86B,QAAsB,IAAPA,OAAgB,EAASA,EAAG,KACtG5B,EAAS,CACLptB,KAAM,UACNxD,KAAM,CACF4wB,EAASuC,EAAK,GAAI,CAAEx0B,EAAG,OACvBiyB,EAASuC,EAAK,GAAGnzB,KAAK,GAAI,CAAErB,EAAG,SAEpC,CAAEjH,EAAU,OAAP86B,QAAsB,IAAPA,OAAgB,EAASA,EAAG,MACpD7hC,GAAOs+B,EAAMv8B,MAAM,MAE9B,IAAK,OAEG,IAAI0gC,EAAOpzB,EAAK,EAAG,KAAM,CAAC,WAE1B,OADAmwB,EAAiBiD,EAAK,GAAIA,EAAK,GAAGpzB,KAAK,IAChCvO,GAAc,CAACq/B,EAAYsC,EAAK,GAAGpzB,KAAK,KAAMrP,GAAOs+B,EAAMv8B,MAAM,KAEhF,IAAK,QAEG,IAAI2gC,EAAOrzB,EAAK,EAAG,KAAM,CAAC,WAG1B,GAFAswB,EAAmB+C,EAAK,IACxB9C,EAAmB8C,EAAK,KACnBpO,GAAWoO,EAAK,GAAGrzB,KAAK,IACzB,MAAM,IAAIqtB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,yCAA2C+pB,GAAO8F,EAAK,GAAGrzB,KAAK,KAE9I,IAAIszB,GAAKD,EAAK,GAAGrzB,KAAK,GAEtB,OADAmwB,EAAiBkD,EAAK,GAAI7F,GAAS8F,IAAI,IAChC7hC,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAUxD,KAAM,CAACwtB,GAAS8F,IAAI,GAAID,EAAK,GAAGrzB,KAAK,OAASrP,GAAOs+B,EAAMv8B,MAAM,KAE7H,IAAK,WAEG,IAAI6gC,GAAOvzB,EAAK,EAAG,MAAM,GAIzB,OAHI/J,IAAUwkB,GAAS2C,UAAYnnB,IAAUwkB,GAAS4C,WAAapnB,IAAUwkB,GAAS6C,WAClF+S,EAAmBkD,IAEhB,CAAE3E,OAAQ2E,IAEzB,IAAK,QAED,OADAvzB,EAAK,EAAG,CAAC,UACF,CAAE4uB,OAAQ,CAAEprB,KAAM,UAC7B,IAAK,SACD,OAAO/R,GAAc,CAACq/B,EAAY9wB,EAAK,EAAG,MAAM,KAAMrP,GAAOs+B,EAAMv8B,MAAM,KAC7E,IAAK,SAEO0tB,EAAKpgB,EAAK,EAAG,CAAC,SAAU,OAAQ,UACpC,GAAmB,SAAfogB,EAAG,GAAG5c,KAAiB,CACvB,GAA8B,WAA1B+pB,GAAOnN,EAAG,GAAGpgB,KAAK,KAA8C,UAA1ButB,GAAOnN,EAAG,GAAGpgB,KAAK,IACxD,MAAM,IAAIqtB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,+BAAiC+pB,GAAOnN,EAAG,GAAGpgB,KAAK,IAAM,MAExI,OAAOvO,GAAc,CAACq/B,EAAY1Q,EAAG,GAAGpgB,KAAK,KAAMrP,GAAOs+B,EAAMv8B,MAAM,KAEtE2tB,EAAKrgB,EAAK,EAAG,CAAC,SAAU,UAC5B,GAAIogB,EAAG,GAAG5c,OAAS6c,EAAG,GAAG7c,KACrB,MAAM,IAAI6pB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,uBAAyB4c,EAAG,GAAG5c,KAAO,SAAW6c,EAAG,GAAG7c,MAEtI,OAAO/R,GAAc,CAACq/B,EAAYzQ,EAAG,KAAM1vB,GAAOs+B,EAAMv8B,MAAM,KAEtE,IAAK,QACD,OAAOjB,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAUxD,KAAM,CAACA,EAAK,EAAG,CAAC,OAAQ,CAAC,OAAQ,CAAC,SAAU,UAAU,KAAO,WAAYrP,GAAOs+B,EAAMv8B,MAAM,KACpJ,IAAK,OAEG,IAAI8gC,GAAOxzB,EAAK,EAAG,MAAM,GAEzB,OADAqwB,EAAmBmD,IACZ/hC,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW,YAAa7S,GAAOs+B,EAAMv8B,MAAM,KAE7F,IAAK,MAEG,IAAI+gC,GAAOzzB,EAAK,EAAG,CAAC,MAAO,MAAO,YAAa,QAAS,eAAgB,eAAgB,gBAAiB,CAAC,MAAO,MAAO,YAAa,QAAS,eAAgB,eAAgB,iBAC9K,GAAqB,QAAjByzB,GAAK,GAAGjwB,MAAmC,QAAjBiwB,GAAK,GAAGjwB,MAAmC,QAAjBiwB,GAAK,GAAGjwB,MAAmC,QAAjBiwB,GAAK,GAAGjwB,KACtF,OAAO/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAEvE,GAAqB,QAAjB+gC,GAAK,GAAGjwB,MAAmC,cAAjBiwB,GAAK,GAAGjwB,MAAyC,cAAjBiwB,GAAK,GAAGjwB,MAAyC,QAAjBiwB,GAAK,GAAGjwB,KACvG,OAAO/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,eAAiB7S,GAAOs+B,EAAMv8B,MAAM,KAE7E,IAAsB,QAAjB+gC,GAAK,GAAGjwB,MAAmC,QAAjBiwB,GAAK,GAAGjwB,MAAmC,UAAjBiwB,GAAK,GAAGjwB,MAAqC,iBAAjBiwB,GAAK,GAAGjwB,MAA4C,iBAAjBiwB,GAAK,GAAGjwB,MAA4C,iBAAjBiwB,GAAK,GAAGjwB,OAA4BiwB,GAAK,GAAGjwB,OAASiwB,GAAK,GAAGjwB,KACzN,OAAO/R,GAAc,CAACq/B,EAAY2C,GAAK,KAAM9iC,GAAOs+B,EAAMv8B,MAAM,KAEpE,MAAM,IAAI26B,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,eAAiBiwB,GAAK,GAAGjwB,KAAO,OAASiwB,GAAK,GAAGjwB,MAEpI,IAAK,MAEG,IAAIkwB,GAAO1zB,EAAK,EAAG,CAAC,MAAO,MAAO,YAAa,SAAU,CAAC,MAAO,MAAO,YAAa,UACrF,IAAuB,QAAjB0zB,GAAK,GAAGlwB,MAAmC,QAAjBkwB,GAAK,GAAGlwB,QAAqC,QAAjBkwB,GAAK,GAAGlwB,MAAmC,QAAjBkwB,GAAK,GAAGlwB,OACzE,cAAjBkwB,GAAK,GAAGlwB,MAAyC,cAAjBkwB,GAAK,GAAGlwB,KACxC,OAAO/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAEvE,GAAqB,cAAjBghC,GAAK,GAAGlwB,MAAyC,QAAjBkwB,GAAK,GAAGlwB,KAC7C,OAAO/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,eAAiB7S,GAAOs+B,EAAMv8B,MAAM,KAE7E,GAAqB,UAAjBghC,GAAK,GAAGlwB,MAAqC,UAAjBkwB,GAAK,GAAGlwB,KACzC,OAAO/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,WAAa7S,GAAOs+B,EAAMv8B,MAAM,KAE9E,MAAM,IAAI26B,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,oBAAsBkwB,GAAK,GAAGlwB,KAAO,SAAWkwB,GAAK,GAAGlwB,MAE3I,IAAK,MAEG,IAAImwB,GAAO3zB,EAAK,EAAG,CAAC,MAAO,MAAO,QAAS,eAAgB,eAAgB,gBAAiB,CAAC,MAAO,MAAO,QAAS,eAAgB,eAAgB,iBACpJ,GAAqB,QAAjB2zB,GAAK,GAAGnwB,MAAmC,QAAjBmwB,GAAK,GAAGnwB,MAAmC,QAAjBmwB,GAAK,GAAGnwB,MAAmC,QAAjBmwB,GAAK,GAAGnwB,KACtF,OAAO/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAEvE,GAAqB,QAAjBihC,GAAK,GAAGnwB,MAAmC,UAAjBmwB,GAAK,GAAGnwB,MAAqC,UAAjBmwB,GAAK,GAAGnwB,MAAqC,QAAjBmwB,GAAK,GAAGnwB,KAC/F,OAAO/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,WAAa7S,GAAOs+B,EAAMv8B,MAAM,KAEzE,IAAsB,iBAAjBihC,GAAK,GAAGnwB,MAA4C,iBAAjBmwB,GAAK,GAAGnwB,MAA4C,iBAAjBmwB,GAAK,GAAGnwB,OAA6C,iBAAjBmwB,GAAK,GAAGnwB,OACtG,QAAjBmwB,GAAK,GAAGnwB,MAAmC,QAAjBmwB,GAAK,GAAGnwB,OAAmBmwB,GAAK,GAAGnwB,OAASmwB,GAAK,GAAGnwB,KAC/E,OAAO/R,GAAc,CAACq/B,EAAY6C,GAAK,KAAMhjC,GAAOs+B,EAAMv8B,MAAM,KAE/D,IAAsB,QAAjBihC,GAAK,GAAGnwB,MAAmC,QAAjBmwB,GAAK,GAAGnwB,OAAoC,iBAAjBmwB,GAAK,GAAGnwB,OACjD,QAAjBmwB,GAAK,GAAGnwB,MAAmC,QAAjBmwB,GAAK,GAAGnwB,OAAoC,iBAAjBmwB,GAAK,GAAGnwB,KAC9D,OAAO/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,kBAAoB7S,GAAOs+B,EAAMv8B,MAAM,KAErF,MAAM,IAAI26B,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,oBAAsBmwB,GAAK,GAAGnwB,KAAO,OAASmwB,GAAK,GAAGnwB,MAEzI,IAAK,OAEG,IAAIqC,GAAM,SAAUlO,EAAGC,GAAK,MAAO,CAAG4L,KAAM,SAAUxD,KAAM,CAAC,CAAEwD,KAAM,OAAQxD,KAAM,CAAC,CAAEwD,KAAM7L,GAAK,CAAE6L,KAAM5L,QACrGg8B,GAAO5zB,EAAK,EAAG,CAAC,MAAO,MAAO,SAAU,CAAC,MAAO,MAAO,UAC3D,GAAqB,QAAjB4zB,GAAK,GAAGpwB,MAAmC,QAAjBowB,GAAK,GAAGpwB,KAClC,OAAO/R,GAAc,CAACq/B,EAAYjrB,GAAI,MAAO,SAAUlV,GAAOs+B,EAAMv8B,MAAM,KAEzE,KAAsB,QAAjBkhC,GAAK,GAAGpwB,MAAmC,QAAjBowB,GAAK,GAAGpwB,MAAqC,QAAjBowB,GAAK,GAAGpwB,MAAmC,QAAjBowB,GAAK,GAAGpwB,MAC9F,OAAO/R,GAAc,CAACq/B,EAAYjrB,GAAI,MAAO,SAAUlV,GAAOs+B,EAAMv8B,MAAM,KAEzE,GAAqB,UAAjBkhC,GAAK,GAAGpwB,MAAqC,QAAjBowB,GAAK,GAAGpwB,KACzC,OAAO/R,GAAc,CAACq/B,EAAYjrB,GAAI,QAAS,WAAYlV,GAAOs+B,EAAMv8B,MAAM,KAE7E,GAAqB,UAAjBkhC,GAAK,GAAGpwB,MAAqC,UAAjBowB,GAAK,GAAGpwB,KACzC,OAAO/R,GAAc,CAACq/B,EAAYjrB,GAAI,MAAO,WAAYlV,GAAOs+B,EAAMv8B,MAAM,KAEhF,MAAM,IAAI26B,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,8BAAgCowB,GAAK,GAAGpwB,KAAO,OAASowB,GAAK,GAAGpwB,MAEnJ,IAAK,MAED,OADAxD,EAAK,EAAG,CAAC,QACFvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAC5E,IAAK,QAED,OADAsN,EAAK,EAAG,CAAC,QACFvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAUxD,KAAM,CAAC,CAAEwD,KAAM,WAAc7S,GAAOs+B,EAAMv8B,MAAM,KACxG,IAAK,MAED,OADAsN,EAAK,EAAG,CAAC,MAAO,iBACTvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAC5E,IAAK,MAEG,IAAImhC,GAAO7zB,EAAK,EAAG,CAAC,MAAO,MAAO,eAAgB,eAAgB,iBAAiB,GACnF,MAAkB,QAAd6zB,GAAKrwB,MAAgC,QAAdqwB,GAAKrwB,KACrB/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAErEjB,GAAc,CAACq/B,EAAY+C,KAAQljC,GAAOs+B,EAAMv8B,MAAM,KAErE,IAAK,MACL,IAAK,MAED,OADAsN,EAAK,EAAG,CAAC,OAAQ,CAAC,QACXvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAC5E,IAAK,KACL,IAAK,MAEG,IAAIohC,GAAO9zB,EAAK,EAAG,CAAC,MAAO,QAAS,CAAC,MAAO,SAC5C,GAAI8zB,GAAK,GAAGtwB,OAASswB,GAAK,GAAGtwB,KACzB,MAAM,IAAI6pB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,8CAAgDswB,GAAK,GAAGtwB,KAAO,KAAOswB,GAAK,GAAGtwB,MAE7J,OAAO/R,GAAc,CAACq/B,EAAYgD,GAAK,KAAMnjC,GAAOs+B,EAAMv8B,MAAM,KAExE,IAAK,MAEG,IAAIqhC,GAAO/zB,EAAK,EAAG,CAAC,MAAO,OAAQ,OAAQ,CAAC,MAAO,SACnD,IAAsB,QAAjB+zB,GAAK,GAAGvwB,MAAmC,QAAjBuwB,GAAK,GAAGvwB,OAAmBuwB,GAAK,GAAGvwB,OAASuwB,GAAK,GAAGvwB,KAC/E,MAAM,IAAI6pB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,8CAAgDuwB,GAAK,GAAGvwB,KAAO,KAAOuwB,GAAK,GAAGvwB,MAE7J,OAAO/R,GAAc,CAACq/B,EAAYiD,GAAK,KAAMpjC,GAAOs+B,EAAMv8B,MAAM,KAExE,IAAK,MAEG,IAAIshC,GAAOh0B,EAAK,EAAG,CAAC,MAAO,OAAQ,QAAQ,GAC3C,MAAkB,SAAdg0B,GAAKxwB,KACE/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,UAAY7S,GAAOs+B,EAAMv8B,MAAM,KAEtEjB,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAEhF,IAAK,UAEG,IAAIuhC,GAAOj0B,EAAK,EAAG,KAAM,MAGzB,OAFAowB,EAAqB6D,GAAK,IAC1B7D,EAAqB6D,GAAK,IACnBxiC,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAEhF,IAAK,KACL,IAAK,MACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KAED,OADAsN,EAAK,EAAG,CAAC,QACFvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,UAAY7S,GAAOs+B,EAAMv8B,MAAM,KAC7E,IAAK,OAEG,QAAiExI,KAApD,OAARukC,QAAwB,IAARA,OAAiB,EAASA,EAAI1X,UAC/C,MAAM,IAAIsW,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,uBAE3EwtB,EAAKP,EAAe,CAAExxB,EAAG,EAAGvH,EAAG,IAAnC,IACIg3B,GAAKwF,GAAmBzF,EAAI1X,SAA0B,QAAf5pB,EAAK6jC,EAAG/xB,SAAsB,IAAP9R,OAAgB,EAASA,EAAG,IAC9F,GAAW,OAAPuhC,GACA,MAAM,IAAIrB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,gCAAkCkrB,IAEjH,OAAOj9B,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,WAAYxD,KAAM,CAAC0uB,KAAO,CAAEh3B,EAAGs5B,EAAGt5B,EAAIs5B,EAAGt5B,EAAI,CAAC,YAAc/G,GAAOs+B,IAElH,IAAK,kBAEG,IAAIkF,GAAOn0B,EAAK,EAAG,KAAM,CAAC,SAAU,CAAC,aAErC,OADAmwB,EAAiBgE,GAAK,GAAIA,GAAK,GAAGn0B,KAAK,IAChCvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,eAAiB7S,GAAOs+B,EAAMv8B,MAAM,KAEtF,IAAK,eAEG,IAAI0hC,GAAOp0B,EAAK,EAAG,CAAC,WAAW,GAC/B,GAA6B,aAAzButB,GAAO6G,GAAKp0B,KAAK,IACjB,MAAM,IAAIqtB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,wBAA0B+pB,GAAO6G,GAAKp0B,KAAK,KAE1H,OAAOvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,eAAiB7S,GAAOs+B,EAAMv8B,MAAM,KAEtF,IAAK,mBAED,OADAsN,EAAK,EAAG,CAAC,aACFvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,WAAYxD,KAAM,CAAC,CAAEwD,KAAM,YAAe7S,GAAOs+B,EAAMv8B,MAAM,KAC3G,IAAK,MACD,OAAOjB,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,aAAe,SAAU7S,GAAOs+B,IAC9E,IAAK,SACD,OAAOx9B,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW,YAAa7S,GAAOs+B,IAC7E,IAAK,UACD,OAAOx9B,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW,aAAc7S,GAAOs+B,IAC9E,IAAK,kBAED,OADAjvB,EAAK,EAAG,CAAC,OAAQ,CAAC,aAAc,CAAC,UAC1BvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,UAAY7S,GAAOs+B,EAAMv8B,MAAM,KAC7E,IAAK,UACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OAED,OADAsN,EAAK,EAAG,CAAC,UACFvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,WAAa7S,GAAOs+B,EAAMv8B,MAAM,KAC9E,IAAK,WAED,OADAsN,EAAK,EAAG,CAAC,QACFvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,cAAgB7S,GAAOs+B,EAAMv8B,MAAM,KACjF,IAAK,SACD,OAAOjB,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,WAAa,YAAa7S,GAAOs+B,IAC/E,IAAK,SACD,OAAOx9B,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,WAAa,YAAa7S,GAAOs+B,IAC/E,IAAK,UAEG,IAAIoF,GAAOr0B,EAAK,EAAG,CAAC,aAAa,GAC7BgxB,EAAKP,EAAe,CAAE/4B,EAAG,IAC7B,OAAOjG,GAAc,CACjBm/B,GAAUnkC,EAAK,CAAE+W,KAAM,WAAa/W,EAAGiuB,IAAe2Z,GAAM5nC,GAAK,CAAEiL,EAAGs5B,EAAGt5B,EAAIs5B,EAAGt5B,EAAIi6B,EAAU1B,EAAOoE,IAAO,cAC7G1jC,GAAOs+B,EAAMv8B,MAAM,KAE9B,IAAK,eAEG,IAAI4hC,GAAO,CAAE9wB,KAAM,WAInB,YAHiEtZ,KAApD,OAARukC,QAAwB,IAARA,OAAiB,EAASA,EAAI1X,YAC/Cud,GAAK5Z,IAAe,CAAElX,KAAM,WAAYxD,KAAM,CAACu0B,GAAgB9F,EAAI1X,SAAU,aAAa/W,KAAK,MAE5FvO,GAAc,CAACq/B,EAAYwD,GAAM,aAAc3jC,GAAOs+B,IAErE,IAAK,WACD,OAAOx9B,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,cAAgB7S,GAAOs+B,IACrE,IAAK,OAEGwB,EAAe,IACX5/B,OAAyB3G,IAArBulC,EAAYzvB,KAAqB1K,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAAM,EAEjF,OADA/E,EAAKnP,EAAI,EAAG,MACLo+B,EAAMv8B,MAAM7B,GAE3B,IAAK,MAEG4/B,EAAe,IACX5/B,EAAIyE,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAC1C,OAAOtT,GAAcA,GAAc,CAACuO,EAAKnP,EAAG,MAAM,IAAKF,GAAOs+B,EAAMv8B,MAAM,EAAG7B,KAAMF,GAAOs+B,EAAMv8B,MAAM7B,EAAI,KAElH,IAAK,MAEG4/B,EAAe,IACX5/B,EAAIyE,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAC1C,OAAOtT,GAAcA,GAAcA,GAAc,GAAId,GAAOs+B,EAAMv8B,MAAM,EAAG7B,EAAI,KAAM,CAACmP,EAAK,EAAG,MAAM,KAAMrP,GAAOs+B,EAAMv8B,MAAM7B,EAAI,KAEzI,IAAK,OAED,OADAg9B,GAA2B4B,EAAYzvB,KAAK,IACrCvO,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,SAAUxD,KAAM,CAACyvB,EAAYzvB,KAAK,KAAOywB,EAAe,CAAE9xB,EAAG,EAAGjH,EAAG,MAAQ/G,GAAOs+B,IAC7H,IAAK,OACL,IAAK,QAEG,IAAIuF,GAAOx0B,EAAK,EAAG,MAAM,GAGrBy0B,IAFAzD,EAAKP,EAAe,CAAExxB,EAAG,EAAGN,EAAG,EAAGjH,EAAG,GAAK,CAAEgrB,eAAe,IAC3D8P,EAAKvC,EAAOuE,IACD,CACX5D,EAAS4D,GAAM,CACX71B,EAAG,KACHjH,EAAG,KACHuH,EAAG+xB,EAAG/xB,GAAK+xB,EAAG/xB,EAAErV,OAAS,GAAiB,MAAZonC,EAAG/xB,EAAE,GACnB,OAAZ+xB,EAAG/xB,EAAE,GACDuzB,EAAG96B,EAAI,CAAC,IAAM86B,EAAG96B,EAAE,GAAGhF,MAAM,SAAMxI,EAClC8mC,EAAG/xB,OACP/U,IAER0mC,EAASnB,EAAYzvB,KAAK,GAAI,CAC1BrB,EAAG,KACHM,EAAG+xB,EAAG/xB,GAAK+xB,EAAG/xB,EAAErV,OAAS,GAAiB,MAAZonC,EAAG/xB,EAAE,GAAa+xB,EAAG/xB,OAAI/U,MAG/D,OAAOuH,GAAc,CAACm/B,EAAS,CACvBptB,KAAM,KAAMxD,KAA2B,SAArByvB,EAAYjsB,KAAkBixB,GAAW,CAACA,GAAS,GAAIA,GAAS,KACnF,CAAE91B,EAAGqyB,EAAGryB,EAAGjH,EAAGs5B,EAAGt5B,KAAO/G,GAAOs+B,EAAMv8B,MAAM,KAE1D,IAAK,MAED,OADAm7B,GAA2B4B,EAAYzvB,KAAK,IACrCvO,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,OAAQxD,KAAM,CAACyvB,EAAYzvB,KAAK,KAAOywB,EAAe,CAAE9xB,EAAG,EAAGjH,EAAG,MAAQ/G,GAAOs+B,IAC3H,IAAK,SAGD,OAFAjvB,EAAK,EAAG,CAAC,UACT6tB,GAA2B4B,EAAYzvB,KAAK,IACrCvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAUxD,KAAM,CAACyvB,EAAYzvB,KAAK,KAAO,cAAerP,GAAOs+B,EAAMv8B,MAAM,KACzH,IAAK,WAEG,IAAIgiC,GAAO10B,EAAK,EAAG,CAAC,YAAY,GAChC6tB,GAA2B4B,EAAYzvB,KAAK,IACxCgxB,EAAKP,EAAe,CAAE/4B,EAAG,EAAGuH,EAAG,IAAnC,IACI8X,GAAW2d,GAAKha,IACpB,QAAiBxwB,IAAb6sB,GAAwB,CACpB2X,GAAKwF,GAAmBnd,GAA0B,QAAfvV,EAAKwvB,EAAG/xB,SAAsB,IAAPuC,OAAgB,EAASA,EAAG,IAC1F,GAAW,OAAPktB,GACA,MAAM,IAAIrB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,gCAAkCkrB,IAEjHyB,EAAiBzB,GAAIe,EAAYzvB,KAAK,IAE1C,OAAOvO,GAAc,CACjBm/B,EAAS,CAAEptB,KAAM,SAAUxD,KAAM,CAAC,CAAEwD,KAAM,WAAYxD,KAAM,CAACyvB,EAAYzvB,KAAK,OAAU,CAAEtI,EAAGs5B,EAAGt5B,EAAIs5B,EAAGt5B,EAAIi6B,EAAU1B,EAAOyE,IAAO,eACpI/jC,GAAOs+B,EAAMv8B,MAAM,KAE9B,IAAK,OACD+9B,EAAe,IACf,IAAI7xB,GAAIoB,EAAK,EAAG,MAAM,GAGtB,OAFA6tB,GAA2B4B,EAAYzvB,KAAK,IAC5CmwB,EAAiBV,EAAYzvB,KAAK,GAAIpB,IAC/BnN,GAAc,CAACg+B,EAAYzvB,KAAK,IAAKrP,GAAOs+B,EAAMv8B,MAAM,KACnE,IAAK,UAEG+9B,EAAe,IACf,IAAIkE,GAAO30B,EAAK,EAAG,CAAC,WAAW,GAC3B40B,GAAO3F,EAAMv8B,MAAM,GACnBo/B,GAAMnD,GAAqBc,EAAYzvB,KAAK,GAAI40B,GAAMnG,GACtDsD,GAAMpD,GAAqBc,EAAYzvB,KAAK,GAAIvO,GAAc,CAACm/B,EAAS+D,GAAK30B,KAAK,GAAI,CAAErB,EAAG,KAAMjH,EAAGi6B,EAAU1B,EAAO0E,IAAO,WAAahkC,GAAOikC,KAAQnG,GAC5J,OAAOoD,EAAWC,GAAKC,IAE/B,IAAK,UAEGtB,EAAe,IACf,IAAIoE,GAAO70B,EAAK,EAAG,CAAC,OAAO,GAEvB80B,IADAtC,EAAKvC,EAAO4E,IACJ5E,EAAO4E,GAAK70B,KAAK,KACzB+0B,GAAS9E,EAAO4E,GAAK70B,KAAK,IAC1B40B,GAAO3F,EAAMv8B,MAAM,GACnBo/B,GAAMnD,GAAqBc,EAAYzvB,KAAK,GAAIvO,GAAc,CAC9Dm/B,EAASiE,GAAK70B,KAAK,GAAI,CAAErB,EAAG,KAAMjH,EAAGi6B,EAAUa,EAAIsC,GAAM71B,EAAI61B,GAAM71B,EAAE,GAAGvM,MAAM,GAAK,WACpF/B,GAAOikC,KAAQnG,GACdsD,GAAMpD,GAAqBc,EAAYzvB,KAAK,GAAIvO,GAAc,CAC9Dm/B,EAASiE,GAAK70B,KAAK,GAAI,CAAErB,EAAG,KAAMjH,EAAGi6B,EAAUa,EAAIuC,GAAO91B,EAAI81B,GAAO91B,EAAE,GAAGvM,MAAM,GAAK,YACtF/B,GAAOikC,KAAQnG,GAClB,OAAOoD,EAAWC,GAAKC,IAE/B,IAAK,UAEGtB,EAAe,IACf,IAAIuE,GAAOh1B,EAAK,EAAG,CAAC,SAAS,GACzBwyB,EAAKvC,EAAO+E,IACZJ,GAAO3F,EAAMv8B,MAAM,GACnBo/B,GAAMnD,GAAqBc,EAAYzvB,KAAK,GAAIvO,GAAc,CAC9Dm/B,EAASoE,GAAKh1B,KAAK,GAAI,CAAErB,EAAG,KAAMjH,EAAGi6B,EAAUa,EAAI,QACnD5B,EAASoE,GAAM,CAAEr2B,EAAG,KAAMjH,EAAGi6B,EAAUa,EAAI,SAC5C7hC,GAAOikC,KAAQnG,GACdsD,GAAMpD,GAAqBc,EAAYzvB,KAAK,GAAI40B,GAAMnG,GAC1D,OAAOoD,EAAWC,GAAKC,IAE/B,IAAK,KAEGtB,EAAe,IACfzwB,EAAK,EAAG,CAAC,SACL40B,GAAO3F,EAAMv8B,MAAM,GACnBo/B,GAAMnD,GAAqBc,EAAYzvB,KAAK,GAAI40B,GAAMnG,GACtDsD,GAAMpD,GAAqBc,EAAYzvB,KAAK,GAAI40B,GAAMnG,GAC1D,OAAOoD,EAAWC,GAAKC,IAE/B,IAAK,MAEG,IAAIkD,GAAOj1B,EAAK,EAAG,CAAC,OAAQ,QAAQ,GAEhCysB,IADAmI,GAAO3F,EAAMv8B,MAAM,GACC,QAAduiC,GAAKzxB,KAAiB,CAAEA,KAAM,OAAQxD,KAAMi1B,GAAKj1B,MAASi1B,GAAKj1B,KAAK,IAC1EjV,GAAO4jC,GAAqBc,EAAYzvB,KAAK,GAAIvO,GAAc,CAACm/B,EAASnE,GAAK,CAAE9tB,EAAG,KAAMjH,EAAGi6B,EAAU1B,EAAOgF,IAAO,UAAYtkC,GAAOikC,KAAQnG,GACnJ,GAAI,WAAY1jC,GACZ,OAAOA,GAEX,GAAIA,GAAKnB,OAAS,EACd,MAAM,IAAIyjC,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,kCAG/E,OADA0sB,EAAkBnlC,GAAK2H,MAAM,GAAIkiC,IACf,SAAdK,GAAKzxB,KACE/R,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,OAAQxD,KAAM,CAACjV,GAAK,OAAS4F,GAAOikC,KAE3EnjC,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,MAAOxD,KAAM,CAACi1B,GAAKj1B,KAAK,GAAIjV,GAAK,OAAS4F,GAAOikC,KAEnG,IAAK,OAEGnE,EAAe,IACf,IAAIyE,GAAOl1B,EAAK,EAAG,CAAC,MAAO,OAAQ,QAAQ,GACvC40B,GAAO3F,EAAMv8B,MAAM,GACnB+5B,GAAoB,QAAdyI,GAAK1xB,KAAiB,CAAEA,KAAM,OAAQxD,KAAMk1B,GAAKl1B,MAASk1B,GAAKl1B,KAAK,GAC1EjV,GAAO4jC,GAAqBc,EAAYzvB,KAAK,GAAIvO,GAAc,CAACm/B,EAASnE,GAAK,CAAE9tB,EAAG,KAAMjH,EAAGi6B,EAAU1B,EAAOiF,IAAO,UAAYvkC,GAAOikC,KAAQnG,GACnJ,MAAI,WAAY1jC,GACLA,IAEXmlC,EAAkBnlC,GAAM6pC,IACjBA,IAEf,IAAK,OAEGnE,EAAe,IACfzwB,EAAK,EAAG,CAAC,SACL40B,GAAO3F,EAAMv8B,MAAM,GACnB3H,GAAO4jC,GAAqBc,EAAYzvB,KAAK,GAAI40B,GAAMnG,GAC3D,MAAI,WAAY1jC,GACLA,IAEXmlC,EAAkBnlC,GAAM0G,GAAc,CAAC,CAAE+R,KAAM,SAAW7S,GAAOikC,MAC1DA,IAEf,IAAK,YAEGnE,EAAe,IACf,IAAI0E,GAAOn1B,EAAK,EAAG,CAAC,OAAO,GACvB40B,GAAO3F,EAAMv8B,MAAM,GACnB3H,GAAO4jC,GAAqBc,EAAYzvB,KAAK,GAAIvO,GAAc,CAACm/B,EAASuE,GAAKn1B,KAAK,GAAI,CAAErB,EAAG,KAAMjH,EAAGi6B,EAAU1B,EAAOkF,IAAO,WAAaxkC,GAAOikC,KAAQnG,GAC7J,MAAI,WAAY1jC,GACLA,IAEXmlC,EAAkBnlC,GAAM0G,GAAc,CAAC0jC,IAAOxkC,GAAOikC,MAC9CnjC,GAAc,CAACm/B,EAASuE,GAAKn1B,KAAK,GAAI,CAAErB,EAAG,KAAMjH,EAAG+4B,EAAe,CAAE/4B,EAAG,IAAKA,KAAO/G,GAAOikC,MAE1G,IAAK,MAEGnE,EAAe,IACX5/B,EAAgC,IAA5B4+B,EAAYzvB,KAAKpW,OAAe0L,SAASm6B,EAAYzvB,KAAK,GAAG+E,IAAK,IAAM,EAChF/E,EAAKnP,EAAI,EAAG,MACZ,IAAIukC,GAAOnG,EAAMv8B,MAAM,EAAG7B,GACtB+jC,GAAO3F,EAAMv8B,MAAM7B,GAEnB9F,GAAmC,IAA5B0kC,EAAYzvB,KAAKpW,OACxB+kC,GAAqBc,EAAYzvB,KAAK,GAAI40B,GAAMnG,GAChDE,GAAqBc,EAAYzvB,KAAK,GAAI40B,GAAMnG,GACpD,MAAI,WAAY1jC,GACLA,GAEJ0G,GAAcA,GAAc,GAAId,GAAOykC,KAAQzkC,GAAO5F,KAErE,IAAK,kBAEOimC,EAAKP,EAAe,CAAE/4B,EAAG,IAA7B,IACI29B,GAAOr1B,EAAK,EAAG,CAAC,UAAW,CAAC,SAAU,MAC1C,GAAgC,aAA5ButB,GAAO8H,GAAK,GAAGr1B,KAAK,IACpB,MAAM,IAAIqtB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,wBAA0B+pB,GAAO8H,GAAK,GAAGr1B,KAAK,KAEzHswB,EAAmB+E,GAAK,MACxBC,GAAoB7F,EAAYzvB,KAAK,IACrCytB,GAAuB8G,GAAgB9E,EAAYzvB,KAAK,GAAI,WAAWA,KAAK,GAAIq1B,GAAK,KAErF7C,EAAqB,QAAf/wB,EAAKuvB,EAAGt5B,SAAsB,IAAP+J,OAAgB,EAASA,EAAGrM,KAAI,SAAUsC,GAAK,MAAa,MAANA,EAAY,CAACA,QAAKxN,KACzG,OAAOuH,GAAc,CACjBm/B,EAAS,CAAEptB,KAAM,aAAe,CAAE9L,EAAU,OAAP86B,QAAsB,IAAPA,OAAgB,EAASA,EAAG,KAChF5B,GAAU7jC,EAAK,CACPyW,KAAM,WAEVzW,EAAG2tB,IAAe,CAAElX,KAAM,WAAYxD,KAAM,CAACu0B,GAAgB9E,EAAYzvB,KAAK,GAAI,aAAaA,KAAK,KACpGjT,GAAK,CAAE2K,EAAU,OAAP86B,QAAsB,IAAPA,OAAgB,EAASA,EAAG,MAC1D7hC,GAAOs+B,EAAMv8B,MAAM,KAE9B,IAAK,OAGD,OAFAm7B,GAA2B4B,EAAYzvB,KAAK,IAC5CwuB,GAAwBiB,EAAYzvB,KAAK,GAAIyvB,EAAYzvB,KAAK,GAAI,GAAS,GAAS,GAAIyuB,GAAM,CAAE1X,cAAU7sB,KACnGuH,GAAc,CAACq/B,EAAYrB,EAAYzvB,KAAK,KAAMrP,GAAOs+B,IACpE,IAAK,YAGD,OAFApB,GAA2B4B,EAAYzvB,KAAK,IAC5CowB,EAAqBX,EAAYzvB,KAAK,IAC/BvO,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,MAAOxD,KAAMyvB,EAAYzvB,MAAQywB,EAAe,CAAE9xB,EAAG,EAAGjH,EAAG,MAAQ/G,GAAOs+B,IACrH,IAAK,YAID,OAHApB,GAA2B4B,EAAYzvB,KAAK,IAC5CowB,EAAqBX,EAAYzvB,KAAK,IACtC6tB,GAA2B4B,EAAYzvB,KAAK,IACrCvO,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,MAAOxD,KAAMyvB,EAAYzvB,MAAQywB,EAAe,CAAE9xB,EAAG,EAAGjH,EAAG,MAAQ/G,GAAOs+B,IACrH,IAAK,gBAKD,OAJApB,GAA2B4B,EAAYzvB,KAAK,IAC5CowB,EAAqBX,EAAYzvB,KAAK,IACtC6tB,GAA2B4B,EAAYzvB,KAAK,IAC5CwwB,EAAyBf,EAAYzvB,KAAK,IACnCvO,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,UAAWxD,KAAMyvB,EAAYzvB,MAAQywB,EAAe,CAAE9xB,EAAG,EAAGjH,EAAG,MAAQ/G,GAAOs+B,IACzH,IAAK,SAEGpB,GAA2B4B,EAAYzvB,KAAK,IAC5C6tB,GAA2B4B,EAAYzvB,KAAK,IACxCjV,GAAO4jC,GAAqBc,EAAYzvB,KAAK,GAAI,CAACyvB,EAAYzvB,KAAK,IAAK,GAAS,GAAS,GAAIyuB,GAAM,CAAE1X,cAAU7sB,KACpH,GAAI,WAAYa,GACZ,OAAOA,GAEX,GAAoB,IAAhBA,GAAKnB,OACL,MAAM,IAAIyjC,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,kCAG/E,OADA2sB,EAAiBV,EAAYzvB,KAAK,GAAIjV,GAAK,IACpC0G,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAUxD,KAAM,CAACyvB,EAAYzvB,KAAK,GAAIyvB,EAAYzvB,KAAK,OAASrP,GAAOs+B,IAEzH,IAAK,QACD,OAAOx9B,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,OAAS,WAAY7S,GAAOs+B,IAC1E,IAAK,qBACD,OAAOx9B,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,IAChE,IAAK,eAED,OADAjvB,EAAK,EAAG,CAAC,aACFvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,SAAW7S,GAAOs+B,EAAMv8B,MAAM,KAC5E,IAAK,SAEG,IAAI6iC,GAAOv1B,EAAK,EAAG,KAAM,CAAC,QAAQ,GAElC,OADAowB,EAAqBmF,IACd9jC,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,SAAUxD,KAAM,CAACu1B,KAAS9E,EAAe,CAAE9xB,EAAG,EAAGjH,EAAG,MAAQ/G,GAAOs+B,EAAMv8B,MAAM,KAE9H,IAAK,eAEG,IAAI8iC,GAAOzQ,GAAW,OAAQ/kB,EAAK,EAAG,CAAC,SAAS,IAChD,GAA6B,WAAzButB,GAAOiI,GAAKx1B,KAAK,IACjB,MAAM,IAAIqtB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,sBAAwB+pB,GAAOiI,GAAKx1B,KAAK,KAGxH,OADAmwB,EAAiBqF,GAAKx1B,KAAK,GAAIw1B,GAAKx1B,KAAK,IAClCvO,GAAc,CAACq/B,EAAY,CAC1BttB,KAAM,SACNxD,KAAM,CAAC4wB,EAAS4E,GAAKx1B,KAAK,GAAI,CAAErB,EAAG,WAClChO,GAAOs+B,EAAMv8B,MAAM,KAEpC,IAAK,eAEG,IAAI+iC,GAAOz1B,EAAK,EAAG,CAAC,UAAW,CAAC,SAC5BrU,GAAIo5B,GAAW,OAAQ0Q,GAAK,IAChC,GAA0B,QAAtBlI,GAAO5hC,GAAEqU,KAAK,IACd,MAAM,IAAIqtB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,mBAAqB+pB,GAAO5hC,GAAEqU,KAAK,KAGlH,OADAmwB,EAAiBxkC,GAAEqU,KAAK,GAAIrU,GAAEqU,KAAK,IAC5BvO,GAAc,CAACq/B,EAAY,CAC1BttB,KAAM,SACNxD,KAAM,CAAC,CACCwD,KAAM,OACNxD,KAAM,CACF4wB,EAAS6E,GAAK,GAAI,CAAE92B,EAAG,OACvBiyB,EAAS6E,GAAK,GAAI,CAAE92B,EAAG,aAGlChO,GAAOs+B,EAAMv8B,MAAM,KAEpC,IAAK,cAEOs+B,EAAKP,EAAe,CAAE/4B,EAAG,IAA7B,IACIg+B,GAAO11B,EAAK,EAAG,CAAC,WAAW,GAC3BwyB,EAAqB,QAAfpT,EAAK4R,EAAGt5B,SAAsB,IAAP0nB,OAAgB,EAASA,EAAGhqB,KAAI,SAAUsC,GAAK,MAAa,MAANA,EAAY,CAACA,QAAKxN,KACzG,OAAOuH,GAAc,CACjBm/B,EAAS,CACLptB,KAAM,OACNxD,KAAM,CACF,CAAEwD,KAAM,WACRotB,EAAS8E,GAAK11B,KAAK,GAAI,CAAErB,EAAG,OAC5B,CAAE6E,KAAM,SAEb,CAAE9L,EAAU,OAAP86B,QAAsB,IAAPA,OAAgB,EAASA,EAAG,KACnD5B,EAAS8E,GAAM,CAAEh+B,EAAU,OAAP86B,QAAsB,IAAPA,OAAgB,EAASA,EAAG,GAAI7zB,EAAG,QACvEhO,GAAOs+B,EAAMv8B,MAAM,KAE9B,IAAK,gBAEO/G,GAAIqU,EAAK,EAAG,CAAC,SAAS,GAAGA,KAAK,GAClC,IAAKilB,GAAWt5B,IACZ,MAAM,IAAI0hC,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,oBAAsB+pB,GAAO5hC,KAE5G,IAAI8vB,GAAIsJ,GAAW,OAAQp5B,IAC3B,GAA0B,iBAAtB4hC,GAAO9R,GAAEzb,KAAK,IACd,MAAM,IAAIqtB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,4BAA8B+pB,GAAO9R,GAAEzb,KAAK,KAE3H,GAA0B,iBAAtButB,GAAO9R,GAAEzb,KAAK,IACd,MAAM,IAAIqtB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,4BAA8B+pB,GAAO9R,GAAEzb,KAAK,KAE3H,OAAOvO,GAAc,CAACq/B,EAAY,CAAEttB,KAAM,UAAY7S,GAAOs+B,EAAMv8B,MAAM,KAEjF,IAAK,sBACD,OAAOjB,GAAc,CAACm/B,EAAS,CAAEptB,KAAM,gBAAiBxD,KAAM,CAACyvB,EAAYzvB,KAAK,KAAOywB,EAAe,CAAE/4B,EAAG,EAAGiH,EAAG,MAAQhO,GAAOs+B,IACpI,IAAK,wBAEG,IAAI0G,GAAO31B,EAAK,EAAG,CAAC,uBAAwB,CAAC,kBAC7C,GAAI1K,SAASqgC,GAAK,GAAG31B,KAAK,GAAG+E,IAAK,MAAQzP,SAASqgC,GAAK,GAAG31B,KAAK,GAAG+E,IAAK,IACpE,MAAM,IAAIsoB,GAA0BoC,EAAaR,EAAOQ,EAAYjsB,KAAO,iCAAmCmyB,GAAK,GAAG31B,KAAK,GAAG+E,IAAM,OAAS4wB,GAAK,GAAG31B,KAAK,GAAG+E,KAEjK,OAAOtT,GAAc,CAACq/B,EAAY,CAC1BttB,KAAM,SACNxD,KAAM,CAAC,CACCwD,KAAM,OACNxD,KAAM,CACF,CAAEwD,KAAM,OACRotB,EAAS+E,GAAK,GAAI,CAAEh3B,EAAG,aAGlChO,GAAOs+B,EAAMv8B,MAAM,KAEpC,QACI,MAAM,IAAIgvB,GAAe+N,EAAa,2BAA6BA,EAAYjsB,OAnwB5E,CAqwBZisB,GACH,QAAsEvlC,KAAzD,OAARukC,QAAwB,IAARA,OAAiB,EAASA,EAAIY,eAA8B,CAC7E,IAAIC,EAAQ,CACR5vB,GAAI+vB,EACJF,GAAIN,EACJO,IAAKwC,GAETvD,EAAIY,cAAcC,GAEtB,OAAO0C,EAEX,SAASuC,GAAgBxd,EAAU6e,GAC/B,IAAIjJ,EAAKlgC,EACT,IACI,IAAK,IAAIopC,EAAaj2B,GAASmX,GAAW+e,EAAeD,EAAWvkC,QAASwkC,EAAavkC,KAAMukC,EAAeD,EAAWvkC,OAAQ,CAC9H,IAAIsN,EAAIk3B,EAAa1sC,MACrB,GAAIwV,EAAE4E,OAASoyB,EACX,OAAOh3B,GAInB,MAAO8tB,GAASC,EAAM,CAAEn7B,MAAOk7B,GAC/B,QACI,IACQoJ,IAAiBA,EAAavkC,OAAS9E,EAAKopC,EAAWl0B,SAASlV,EAAG2E,KAAKykC,GAEhF,QAAU,GAAIlJ,EAAK,MAAMA,EAAIn7B,OAEjC,MAAM,IAAIkwB,GAAe3K,EAAU,6BAA+B6e,GAEtE,SAASG,GAAWr+B,GAChB,IAAIs+B,EAAKvpC,EACT,GAAIR,MAAMC,QAAQwL,GACd,IACI,IAAK,IAAIspB,EAAMphB,GAASlI,GAAIu+B,EAAQjV,EAAI1vB,QAAS2kC,EAAM1kC,KAAM0kC,EAAQjV,EAAI1vB,OAAQ,CAC7E,IAAIsN,EAAIq3B,EAAM7sC,MACd,GAAI,SAAUwV,IAAiB,cAAXA,EAAE4E,MAAmC,YAAX5E,EAAE4E,MAAiC,SAAX5E,EAAE4E,MACpE,OAAO,GAInB,MAAO0yB,GAASF,EAAM,CAAExkC,MAAO0kC,GAC/B,QACI,IACQD,IAAUA,EAAM1kC,OAAS9E,EAAKu0B,EAAIrf,SAASlV,EAAG2E,KAAK4vB,GAE3D,QAAU,GAAIgV,EAAK,MAAMA,EAAIxkC,OAGrC,OAAO,EAEX,SAAS0iC,GAAmB1a,EAAKkV,GAC7BA,EAAKA,GAAM,WACX,IAAIlE,EAAa2L,GAAoB3c,GAAK1M,MAAK,SAAU7U,GAAK,OAAOA,EAAE,KAAOy2B,KAC9E,YAAmBxkC,IAAfsgC,EACOA,EAAW,GAEN,aAAPkE,EACEqH,GAAWvc,GAAO+a,GAAgB/a,EAAK,aAAaxZ,KAAK,GAAKwZ,EAElE,KAEX,SAAS4c,GAASz3B,GACd,OAAO1S,MAAMC,QAAQyS,IAAiB,OAAXA,EAAE6E,KAEjC,SAAS2yB,GAAoB3c,GACzB,GAAIuc,GAAWvc,GAAM,CACjB,IAAI9E,EAAQ6f,GAAgB/a,EAAK,aAC7B6c,EAAKF,GAAoBzhB,EAAM1U,KAAK,IACpCrI,EAAI2qB,GAAkB5N,GAC1B,OAAO/c,EAAEsH,EAAIxN,GAAc,CAAC,CAACkG,EAAEsH,EAAE,GAAIyV,EAAM1U,KAAK,KAAMrP,GAAO0lC,IAAOA,EAExE,GAAID,GAAS5c,GAAM,CACf,IAAI8c,EAAS9I,GAAShU,GAClB+c,EAAS,SAAU1lC,GACnB,IAAI8G,EAAI2qB,GAAkBgU,EAAOzlC,IACjC,GAA0B,OAAtB08B,GAAO+I,EAAOzlC,IAAc,CAC5B,IAAIwlC,EAAKF,GAAoBG,EAAOzlC,IACpC,OAAO8G,EAAEsH,EAAIxN,GAAc,CAAC,CAACkG,EAAEsH,EAAE,GAAIq3B,EAAOzlC,KAAMF,GAAO0lC,IAAOA,EAEpE,OAAO1+B,EAAEsH,EAAI,CAAC,CAACtH,EAAEsH,EAAE,GAAIq3B,EAAOzlC,KAAO,IAEzC,OAAOY,GAAcA,GAAc,GAAId,GAAO4lC,EAAO,KAAM5lC,GAAO4lC,EAAO,KAE7E,MAAO,GAGX,SAASjB,GAAoBve,EAAU0X,GACnC,IAAIxf,EAAYslB,GAAgBxd,EAAU,aAAa/W,KAAK,GAC5D6tB,GAA2B5e,GAAW,GACtC,IAAItB,EAAU4mB,GAAgBxd,EAAU,WAAW/W,KAAK,GACxD6tB,GAA2BlgB,GAC3B,IAAIsN,EAAM,CACN,KAAQ,OACRjb,KAAM,CACF,GAAS,GAAS,GAAIiP,GAAY,CAAExL,OAAQ,CAAC,gBAC7C,GAAS,GAAS,GAAIkK,GAAU,CAAElK,OAAQ,CAAC,gBAG/CpM,EAAOk9B,GAAgBxd,EAAU,QAAQ/W,KAAK,GAC9Cie,EAAM0Q,GAAqBt3B,EAAM,CAAC4jB,GAAM,GAAS,GAAS,GAAIwT,GAAM,CAAE1X,SAAUA,KACpF,GAAI,WAAYkH,EACZ,OAAOA,EAEX,IAAIuY,EAAW,CACX,KAAQ,OACRx2B,KAAM,CACF,CAAE,KAAQ,OAAQA,KAAM,CAAC,CAAE,KAAQ,eACnC2N,IAGR,IACIigB,GAAkB3P,EAAK,CAACuY,IAE5B,MAAOnoC,GACH,MAAIA,aAAeqzB,GACT,IAAI2L,GAA0Bh2B,EAAM4mB,EAAK5vB,EAAIzD,SAG7CyD,EAGd,OAAO4vB,EAGX,SAASwY,GAAgB14B,EAAGY,EAAG8vB,GAC3BZ,GAA2BlvB,GAC3B6vB,GAAwBzwB,EAAGY,EAAG8vB,GAAO,MAEzC,SAASiI,GAAa1H,EAAMC,EAAOR,GAC/B,IAAIkI,EAAMlqC,EAAImqC,EAAM7pC,EACpB,IACI,IAAK,IAAI8pC,EAAUj3B,GAASqvB,GAAQ6H,EAAYD,EAAQvlC,QAASwlC,EAAUvlC,KAAMulC,EAAYD,EAAQvlC,OAAQ,CACzG,IAAIqN,EAAIm4B,EAAU1tC,MAClBykC,GAA2BlvB,IAGnC,MAAOo4B,GAAUJ,EAAO,CAAEnlC,MAAOulC,GACjC,QACI,IACQD,IAAcA,EAAUvlC,OAAS9E,EAAKoqC,EAAQl1B,SAASlV,EAAG2E,KAAKylC,GAEvE,QAAU,GAAIF,EAAM,MAAMA,EAAKnlC,OAEnC,QAAiEtH,KAApD,OAARukC,QAAwB,IAARA,OAAiB,EAASA,EAAI1X,UAC/C,IACI,IAAK,IAAI9pB,EAAK2S,GAAS,CAAC,YAAa,YAAazS,EAAKF,EAAGqE,QAASnE,EAAGoE,KAAMpE,EAAKF,EAAGqE,OAAQ,CACxF,IAAI0lC,EAAU7pC,EAAG/D,MACbo+B,EAAM+M,GAAgB9F,EAAI1X,SAAUigB,GAASh3B,KAAK,GACtD6tB,GAA2BrG,IAGnC,MAAOyP,GAAUL,EAAO,CAAEplC,MAAOylC,GACjC,QACI,IACQ9pC,IAAOA,EAAGoE,OAASxE,EAAKE,EAAG0U,SAAS5U,EAAGqE,KAAKnE,GAEpD,QAAU,GAAI2pC,EAAM,MAAMA,EAAKplC,OAGvC,OAAOm9B,GAAqBK,EAAMC,EAAOR,GAAO,MA0DpD,SAASyI,GAAYn5B,EAAGY,EAAG8vB,GACvB,IAEI,OADAgI,GAAgB14B,EAAGY,EAAG8vB,IACf,EAEX,MAAOhiC,GACH,OAAO,GAcf,IAAI0qC,GAA0B,WAC1B,SAASA,EAASpgB,EAAU8F,GACxB5xB,KAAK8rB,SAAWA,EAChB9rB,KAAKwjC,IAAM,GAAS,CAAE1X,SAAUA,GAAY8F,GAC5C5xB,KAAKmsC,OAAS9B,GAAoBve,EAAU9rB,KAAKwjC,KAoErD,OAlEA0I,EAASppC,MAAQ,SAAUyrB,EAAKqD,GAC5B,IAAIlxB,EAAI,IAAIoyB,GAAOlB,GACflH,EAAsB,kBAAR6D,EAAmB7tB,EAAEozB,YAAYvF,GAAO7tB,EAAEszB,UAAUzF,GACtE,GAAa,OAAT7D,EACA,MAAM,IAAIznB,MAAM,kBAEpB,GAAIy4B,GAAwBhR,GACxB,OAAO,IAAIwhB,EAASxhB,EAAMkH,IAGlCsa,EAASE,oBAAsB,SAAU7d,EAAKqD,GAC1C,IAAIlxB,EAAI,IAAIoyB,GAAOlB,GACflH,EAAsB,kBAAR6D,EAAmB7tB,EAAEozB,YAAYvF,GAAO7tB,EAAEszB,UAAUzF,GACtE,GAAa,OAAT7D,EACA,MAAM,IAAIznB,MAAM,yBAEpB,GAAIs4B,GAAoB7Q,IAASkY,GAA2BlY,GACxD,OAAOA,EAEX,WAAMzrB,GAEVitC,EAASG,oBAAsB,SAAU9d,EAAKqD,GAC1C,IAAIlxB,EAAI,IAAIoyB,GAAOlB,GACflH,EAAsB,kBAAR6D,EAAmB7tB,EAAEozB,YAAYvF,GAAO7tB,EAAEszB,UAAUzF,GACtE,GAAa,OAAT7D,EACA,MAAM,IAAIznB,MAAM,yBAEpB,GAAI24B,GAAoBlR,GACpB,OAAOA,EAEX,WAAMzrB,GAEVitC,EAAS7rC,UAAUsqC,QAAU,SAAUA,GACnC,OAAOrB,GAAgBtpC,KAAK8rB,SAAU6e,IAE1CuB,EAAS7rC,UAAUisC,YAAc,WAC7B,OAAOpB,GAAoBlrC,KAAK8rB,WAEpCogB,EAAS7rC,UAAUk/B,WAAa,SAAUkE,GACtC,OAAOwF,GAAmBjpC,KAAK8rB,SAAU2X,IAE7CyI,EAAS7rC,UAAUmrC,gBAAkB,SAAU14B,EAAGY,GAC9C83B,GAAgB14B,EAAGY,EAAG1T,KAAKwjC,MAE/B0I,EAAS7rC,UAAU4rC,YAAc,SAAUn5B,EAAGY,GAC1C,OAAOu4B,GAAYn5B,EAAGY,EAAG1T,KAAKwjC,MAElC0I,EAAS7rC,UAAUksC,qBAAuB,SAAU9I,EAAI3wB,GACpD,IAAIY,EAAI1T,KAAKu/B,WAAWkE,QAAMxkC,GAC9B,GAAU,OAANyU,EACA,MAAM,IAAIzQ,MAAM,oCAAsCwgC,GAE1DzjC,KAAKwrC,gBAAgB14B,EAAGY,IAE5Bw4B,EAAS7rC,UAAUmsC,iBAAmB,SAAU/I,EAAI3wB,GAChD,IAEI,OADA9S,KAAKusC,qBAAqB9I,EAAI3wB,IACvB,EAEX,MAAOtR,GACH,OAAO,IAGf0qC,EAAS7rC,UAAUorC,aAAe,SAAU1H,EAAMC,GAC9C,OAAOyH,GAAa1H,EAAMC,EAAOhkC,KAAKwjC,MAEnC0I,EAxEkB,GA0ET,IAAIA,GAAS,CAC7B,CAAE3zB,KAAM,YAAaxD,KAAM,CAAC,CAAEwD,KAAM,UACpC,CAAEA,KAAM,UAAWxD,KAAM,CAAC,CAAEwD,KAAM,UAClC,CACIA,KAAM,OAAQxD,KAAM,CAChB,CACI,CAAEwD,KAAM,OACR,CAAEA,KAAM,MAAOxD,KAAM,CAAC,CAAEwD,KAAM,eAC9B,CAAEA,KAAM,aA6CxB,IC/tLI,GAAgB,SAASzF,EAAGnG,GAI5B,OAHA,GAAgBoG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBjS,OAAS,SAAU8R,EAAGnG,GAAKmG,EAAEG,UAAYtG,IACvE,SAAUmG,EAAGnG,GAAK,IAAK,IAAIjM,KAAKiM,EAAOoG,OAAO1S,UAAUM,eAAewF,KAAKwG,EAAGjM,KAAIoS,EAAEpS,GAAKiM,EAAEjM,KACzF,GAAcoS,EAAGnG;;;;;;;;;;;;;;gFAG5B,SAAS,GAAUmG,EAAGnG,GAClB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIwG,UAAU,uBAAyB5G,OAAOI,GAAK,iCAE7D,SAASyG,IAAOpT,KAAKqT,YAAcP,EADnC,GAAcA,EAAGnG,GAEjBmG,EAAEzS,UAAkB,OAANsM,EAAaoG,OAAOO,OAAO3G,IAAMyG,EAAG/S,UAAYsM,EAAEtM,UAAW,IAAI+S,GAGnF,IAAI,GAAW,WAQX,OAPA,GAAWL,OAAOU,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGzN,EAAI,EAAGN,EAAIgO,UAAUjV,OAAQuH,EAAIN,EAAGM,IAE5C,IAAK,IAAIxF,KADTiT,EAAIC,UAAU1N,GACAyN,EAAOZ,OAAO1S,UAAUM,eAAewF,KAAKwN,EAAGjT,KAAIgT,EAAEhT,GAAKiT,EAAEjT,IAE9E,OAAOgT,GAEJ,GAASG,MAAM7T,KAAM4T,YAGhC,SAAS,GAAOD,EAAG1N,GACf,IAAIyN,EAAI,GACR,IAAK,IAAIhT,KAAKiT,EAAOZ,OAAO1S,UAAUM,eAAewF,KAAKwN,EAAGjT,IAAMuF,EAAE0hB,QAAQjnB,GAAK,IAC9EgT,EAAEhT,GAAKiT,EAAEjT,IACb,GAAS,MAALiT,GAAqD,oBAAjCZ,OAAO6U,sBACtB,KAAI1hB,EAAI,EAAb,IAAgBxF,EAAIqS,OAAO6U,sBAAsBjU,GAAIzN,EAAIxF,EAAE/B,OAAQuH,IAC3DD,EAAE0hB,QAAQjnB,EAAEwF,IAAM,GAAK6M,OAAO1S,UAAUwnB,qBAAqB1hB,KAAKwN,EAAGjT,EAAEwF,MACvEwN,EAAEhT,EAAEwF,IAAMyN,EAAEjT,EAAEwF,KAE1B,OAAOwN,EAGX,SAAS,GAAUK,EAASgU,EAAY3iB,EAAG4iB,GACvC,SAASC,EAAM9pB,GAAS,OAAOA,aAAiBiH,EAAIjH,EAAQ,IAAIiH,GAAE,SAAU/C,GAAWA,EAAQlE,MAC/F,OAAO,IAAKiH,IAAMA,EAAIhD,WAAU,SAAUC,EAASC,GAC/C,SAAS4lB,EAAU/pB,GAAS,IAAMqW,EAAKwT,EAAU3hB,KAAKlI,IAAW,MAAO8H,GAAK3D,EAAO2D,IACpF,SAASkiB,EAAShqB,GAAS,IAAMqW,EAAKwT,EAAU,SAAS7pB,IAAW,MAAO8H,GAAK3D,EAAO2D,IACvF,SAASuO,EAAKlI,GAAUA,EAAOhG,KAAOjE,EAAQiK,EAAOnO,OAAS8pB,EAAM3b,EAAOnO,OAAOiqB,KAAKF,EAAWC,GAClG3T,GAAMwT,EAAYA,EAAUnU,MAAME,EAASgU,GAAc,KAAK1hB,WAItE,SAAS,GAAY0N,EAASjU,GAC1B,IAAsGkU,EAAG/G,EAAGyG,EAAGO,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPV,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOW,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAE5N,KAAMkO,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXzO,SAA0BmO,EAAEnO,OAAOC,UAAY,WAAa,OAAO/F,OAAUiU,EACvJ,SAASM,EAAK3O,GAAK,OAAO,SAAU6G,GAAK,OAAO+H,EAAK,CAAC5O,EAAG6G,KACzD,SAAS+H,EAAKC,GACV,GAAIT,EAAG,MAAM,IAAIb,UAAU,mCAC3B,MAAOe,EAAG,IACN,GAAIF,EAAI,EAAG/G,IAAMyG,EAAY,EAARe,EAAG,GAASxH,EAAE,UAAYwH,EAAG,GAAKxH,EAAE,YAAcyG,EAAIzG,EAAE,YAAcyG,EAAEvN,KAAK8G,GAAI,GAAKA,EAAE5G,SAAWqN,EAAIA,EAAEvN,KAAK8G,EAAGwH,EAAG,KAAKnO,KAAM,OAAOoN,EAE3J,OADIzG,EAAI,EAAGyG,IAAGe,EAAK,CAAS,EAARA,EAAG,GAAQf,EAAEvV,QACzBsW,EAAG,IACP,KAAK,EAAG,KAAK,EAAGf,EAAIe,EAAI,MACxB,KAAK,EAAc,OAAXP,EAAEC,QAAgB,CAAEhW,MAAOsW,EAAG,GAAInO,MAAM,GAChD,KAAK,EAAG4N,EAAEC,QAASlH,EAAIwH,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKP,EAAEI,IAAII,MAAOR,EAAEG,KAAKK,MAAO,SACxC,QACI,GAAMhB,EAAIQ,EAAEG,OAAMX,EAAIA,EAAE/U,OAAS,GAAK+U,EAAEA,EAAE/U,OAAS,MAAkB,IAAV8V,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEP,EAAI,EAAG,SACjG,GAAc,IAAVO,EAAG,MAAcf,GAAMe,EAAG,GAAKf,EAAE,IAAMe,EAAG,GAAKf,EAAE,IAAM,CAAEQ,EAAEC,MAAQM,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYP,EAAEC,MAAQT,EAAE,GAAI,CAAEQ,EAAEC,MAAQT,EAAE,GAAIA,EAAIe,EAAI,MAC7D,GAAIf,GAAKQ,EAAEC,MAAQT,EAAE,GAAI,CAAEQ,EAAEC,MAAQT,EAAE,GAAIQ,EAAEI,IAAIxT,KAAK2T,GAAK,MACvDf,EAAE,IAAIQ,EAAEI,IAAII,MAChBR,EAAEG,KAAKK,MAAO,SAEtBD,EAAK3U,EAAKqG,KAAK4N,EAASG,GAC1B,MAAOjO,GAAKwO,EAAK,CAAC,EAAGxO,GAAIgH,EAAI,EAAK,QAAU+G,EAAIN,EAAI,EACtD,GAAY,EAARe,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEtW,MAAOsW,EAAG,GAAKA,EAAG,QAAK,EAAQnO,MAAM,IAIlF,SAAS,GAASX,GACd,IAAIgO,EAAsB,oBAAX7N,QAAyBA,OAAOC,SAAUF,EAAI8N,GAAKhO,EAAEgO,GAAIzN,EAAI,EAC5E,GAAIL,EAAG,OAAOA,EAAEM,KAAKR,GACrB,GAAIA,GAAyB,kBAAbA,EAAEhH,OAAqB,MAAO,CAC1C0H,KAAM,WAEF,OADIV,GAAKO,GAAKP,EAAEhH,SAAQgH,OAAI,GACrB,CAAExH,MAAOwH,GAAKA,EAAEO,KAAMI,MAAOX,KAG5C,MAAM,IAAIwN,UAAUQ,EAAI,0BAA4B,mCAGxD,SAAS,GAAOhO,EAAGC,GACf,IAAIC,EAAsB,oBAAXC,QAAyBH,EAAEG,OAAOC,UACjD,IAAKF,EAAG,OAAOF,EACf,IAAmBK,EAAYC,EAA3BC,EAAIL,EAAEM,KAAKR,GAAOS,EAAK,GAC3B,IACI,YAAc,IAANR,GAAgBA,KAAM,MAAQI,EAAIE,EAAEG,QAAQC,KAAMF,EAAGtF,KAAKkF,EAAE7H,OAExE,MAAOoI,GAASN,EAAI,CAAEM,MAAOA,GAC7B,QACI,IACQP,IAAMA,EAAEM,OAAST,EAAIK,EAAE,YAAYL,EAAEM,KAAKD,GAElD,QAAU,GAAID,EAAG,MAAMA,EAAEM,OAE7B,OAAOH,EAGX,SAAS,GAAcK,EAAIC,GACvB,IAAK,IAAIR,EAAI,EAAGS,EAAKD,EAAK/H,OAAQiI,EAAIH,EAAG9H,OAAQuH,EAAIS,EAAIT,IAAKU,IAC1DH,EAAGG,GAAKF,EAAKR,GACjB,OAAOO,EAGX,IAiEIgmC,GAOAC,GAOAC,GAOAC,GAtFAC,GAA2B,WAC3B,SAASA,EAAU/9B,GACf9O,KAAK8O,QAAUA,EAMnB,OAJA+9B,EAAUxsC,UAAUysC,MAAQ,SAAUtrC,GAClC,IAAIurC,EAASvrC,EAAGurC,OAAQzpB,EAAW9hB,EAAG8hB,SACtC,OAAOtjB,KAAK8O,QAAQk+B,IAAIvhB,gBAAgB,CAAEshB,OAAQA,EAAQzpB,SAAUA,KAEjEupB,EARmB,GAW1BI,GAA6B,WAC7B,SAASA,EAAYn+B,GACjB9O,KAAK8O,QAAUA,EAKnB,OAHAm+B,EAAY5sC,UAAU6sC,OAAS,SAAUC,GACrC,OAAOntC,KAAK8O,QAAQk+B,IAAIthB,gBAAgByhB,IAErCF,EAPqB,GAU5BG,GAAyC,WACzC,SAASA,IACLptC,KAAKC,KAAO,0BACZD,KAAKL,QAAU,sHAEnB,OAAOytC,EALiC,GAUxCC,GAA4B,WAC5B,SAASA,KA8BT,OA5BAA,EAAWhtC,UAAUw/B,UAAY,WAC7B,OAAO,GAAU7/B,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAM,IAAI4rC,UAItBC,EAAWhtC,UAAUitC,cAAgB,WACjC,OAAO,GAAUttC,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAM,IAAI4rC,UAItBC,EAAWhtC,UAAUktC,UAAY,WAC7B,OAAO,GAAUvtC,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAM,IAAI4rC,UAItBC,EAAWhtC,UAAU82B,KAAO,SAAUqW,EAAQC,GAC1C,OAAO,GAAUztC,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAM,IAAI4rC,UAIfC,EA/BoB,IAmC/B,SAAWZ,GACPA,EAAkBA,EAAkB,cAAgB,OAAS,aAC7DA,EAAkBA,EAAkB,eAAiB,OAAS,cAC9DA,EAAkBA,EAAkB,YAAc,OAAS,WAC3DA,EAAkBA,EAAkB,UAAY,MAAQ,UAJ5D,CAKGA,KAAsBA,GAAoB,KAE7C,SAAWC,GACPA,EAAYA,EAAY,cAAgB,MAAQ,aAChDA,EAAYA,EAAY,eAAiB,KAAS,cAClDA,EAAYA,EAAY,YAAc,KAAS,WAC/CA,EAAYA,EAAY,UAAY,KAAO,SAJ/C,CAKGA,KAAgBA,GAAc,KAEjC,SAAWC,GACPA,EAAsBA,EAAsB,cAAgB,GAAK,aACjEA,EAAsBA,EAAsB,eAAiB,KAAO,cACpEA,EAAsBA,EAAsB,YAAc,KAAO,WACjEA,EAAsBA,EAAsB,UAAY,GAAK,SAJjE,CAKGA,KAA0BA,GAAwB,KAErD,SAAWC,GACPA,EAAU,YAAc,sDACxBA,EAAU,YAAc,sDACxBA,EAAU,YAAc,sDACxBA,EAAU,YAAc,sDACxBA,EAAU,YAAc,sDACxBA,EAAU,YAAc,sDACxBA,EAAU,aAAe,sDACzBA,EAAU,aAAe,sDACzBA,EAAU,YAAc,sDAT5B,CAUGA,KAAcA,GAAY,KAC7B,IAUIc,GAUAC,GAnBQf,GAAUgB,SACVhB,GAAUiB,SAAUjB,GAAUkB,SAC9BlB,GAAUmB,SACVnB,GAAUjd,SACVid,GAAUza,SACVya,GAAUxa,UACVwa,GAAUva,UACVua,GAAUta,UAGtB,SAAWob,GACPA,EAAuB,WAAa,uCACpCA,EAAuB,eAAiB,uCACxCA,EAAuB,aAAe,uCACtCA,EAAuB,UAAY,uCACnCA,EAAuB,eAAiB,uCACxCA,EAAuB,cAAgB,uCACvCA,EAAuB,eAAiB,wCAP5C,CAQGA,KAA2BA,GAAyB,KAEvD,SAAWC,GACPA,EAAS,WAAa,kBACtBA,EAAS,eAAiB,kBAC1BA,EAAS,aAAe,kBACxBA,EAAS,UAAY,kBACrBA,EAAS,eAAiB,kBAC1BA,EAAS,cAAgB,kBACzBA,EAAS,eAAiB,kBAP9B,CAQGA,KAAaA,GAAW,KAE3B,IAAIK,GAAc,EACdC,GAAe,EACnB,SAASC,GAAWC,GAChB,OAAQA,GACJ,IAAK,KACD,OAAOH,GACX,IAAK,MACD,OAAOC,GACX,IAAK,QACL,QACI,OAAO,GAGnB,SAASE,GAAOznC,EAAMD,EAAIqa,QACT,IAATpa,IAAmBA,EAAO,cACnB,IAAPD,IAAiBA,EAAK,SAC1B,IAAI2nC,EAAS,IAAI,IAAUttB,GAC3B,OAAIstB,EAAOv9B,QACAiQ,EAEJstB,EACFC,aAAap9B,KAAKq9B,IAAI,GAAIJ,GAAWxnC,KACrC6nC,UAAUt9B,KAAKq9B,IAAI,GAAIJ,GAAWznC,KAG3C,IAAI+nC,GAAuC,WACvC,SAASA,EAAsBC,EAAyBC,EAAM35B,GAC1D/U,KAAKyuC,wBAA0BA,EAC/BzuC,KAAK0uC,KAAOA,EACZ1uC,KAAK+U,KAAOA,EACZ/U,KAAKC,KAAO,2BACZD,KAAKL,QAAU8uC,EAA0B,aAAe15B,EAAKpW,OAAS,+DAAiEkE,KAAKS,UAAUorC,GAAQ,IAElK,OAAOF,EAR+B,GAUtCG,GAA8C,WAC9C,SAASA,IACL3uC,KAAKC,KAAO,iCACZD,KAAKL,QAAU,mIAEnB,OAAOgvC,EALsC,GAO7CC,GAAyC,WACzC,SAASA,EAAwBC,GAC7B7uC,KAAK6uC,OAASA,EACd7uC,KAAKC,KAAO,kCACZD,KAAKL,QAAU,uEAAyEkvC,EAAS,oEAErG,OAAOD,EANiC,GAQxCE,GAAsC,WACtC,SAASA,EAAqBnvC,EAAS8B,GACnCzB,KAAKL,QAAUA,EACfK,KAAKyB,KAAOA,EACZzB,KAAKC,KAAO,uBAEhB,OAAO6uC,EAN8B,GAQrCC,GAAsC,WACtC,SAASA,EAAqBpvC,EAAS8B,GACnCzB,KAAKL,QAAUA,EACfK,KAAKyB,KAAOA,EACZzB,KAAKC,KAAO,uBAEhB,OAAO8uC,EAN8B,GASrCC,GAA6B,SAAUxtC,GACvC,IAAI4K,EAAO5K,EAAG4K,KAAM6iC,EAAOztC,EAAGytC,KAAMntC,EAAKN,EAAGqrB,QAASA,OAAiB,IAAP/qB,EAAgB,IAAMA,EAAIirB,EAAWvrB,EAAGurB,SAAUrK,EAAUlhB,EAAGkhB,QAAS1gB,EAAKR,EAAG0tC,IAAKA,OAAa,IAAPltC,EAAgB0qC,GAAYyC,YAAcntC,EAAIE,EAAKV,EAAG4tC,SAAUA,OAAkB,IAAPltC,EAAgBuqC,GAAkB0C,YAAcjtC,EAAIqU,EAAK/U,EAAG6tC,aAAcA,OAAsB,IAAP94B,EAAgBo2B,GAAsBwC,YAAc54B,EAAIC,EAAKhV,EAAG8tC,MAAOA,OAAe,IAAP94B,GAAwBA,EACra,OAAO,QAAU,OAAQ,OAAQ,GAAQ,WACrC,IAAI+4B,EAAiBC,EAAalyB,EAAQqF,EAAQ8sB,EAClD,OAAO,GAAYzvC,MAAM,SAAUm0B,GAE/B,QAAgBl1B,IAAZyjB,QAAkCzjB,IAATgwC,EACzB,MAAM,IAAIhsC,MAAM,mGAEpB,IAAKjC,MAAMC,QAAQmL,GACf,MAAM,IAAI0iC,GAAqB,+CAAgD1iC,GAEnF,QAAgBnN,IAAZyjB,EAAuB,CAEvB,GADA8sB,EAAcpjC,EAAKyV,MAAK,SAAUnhB,GAAK,MAAQ,SAAUA,GAAiB,YAAXA,EAAE6X,aACoBtZ,KAAhE,OAAhBuwC,QAAwC,IAAhBA,OAAyB,EAASA,EAAYz6B,MACvE,MAAM,IAAI+5B,GAAqB,iDAAkD1iC,GAErFkR,EAAS,IAAI,QAAOkyB,EAAYz6B,KAAK,IACrCw6B,EAAkBjyB,EAAO9D,OAAOkJ,OAE/B,SAAazjB,IAATgwC,GAAsC,kBAATA,EAIlC,MAAM,IAAIF,GAAqB,qDAAsDE,GAHrFM,EAAkBN,EAsBtB,OAjBAtsB,EAAS,CACLvW,KAAMA,EACNsW,QAAS6sB,GAEbE,EAAY,CACRC,KAAM/mB,EAAOwmB,YACbD,IAAKA,EACLS,UAAWP,EACXQ,cAAeP,EACfxiB,QAASyiB,EACHziB,EAAQpjB,WACR0kC,GAAO,KAAM,QAASthB,GAASpjB,WACrCkZ,OAAQA,GAERoK,IACA0iB,EAAU1iB,SAAWA,GAElB,CAAC,EAAc0iB,UAI9BI,GAA0B,SAAUruC,GACpC,IAAIiF,EAAKjF,EAAGiF,GAAIqa,EAAStf,EAAGsf,OAAQkD,EAAYxiB,EAAGwiB,UAAWliB,EAAKN,EAAG0tC,IAAKA,OAAa,IAAPptC,EAAgB4qC,GAAYoD,SAAWhuC,EAAIE,EAAKR,EAAG4tC,SAAUA,OAAkB,IAAPptC,EAAgByqC,GAAkBqD,SAAW9tC,EAAIE,EAAKV,EAAG6tC,aAAcA,OAAsB,IAAPntC,EAAgByqC,GAAsBmD,SAAW5tC,EAAIqU,EAAK/U,EAAG8tC,MAAOA,OAAe,IAAP/4B,GAAwBA,EACnV,OAAO,QAAU,OAAQ,OAAQ,GAAQ,WACrC,IAAIk5B,EACJ,OAAO,GAAYzvC,MAAM,SAAUwW,GAY/B,OAXAi5B,EAAY,CACRC,KAAM/mB,EAAOonB,YACbb,IAAKA,EACLS,UAAWP,EACXQ,cAAeP,EACfvuB,OAAQwuB,EACFxuB,EAAOrX,WACP0kC,GAAO,KAAM,QAASrtB,GAAQrX,WACpCumC,YAAavpC,EACbuZ,WAAYgE,GAET,CAAC,EAAcyrB,UAI9BQ,GAA6B,SAAUzuC,GACvC,IAAIurB,EAAWvrB,EAAGurB,SAAU8hB,EAASrtC,EAAGqtC,OAAQ/sC,EAAKN,EAAG0tC,IAAKA,OAAa,IAAPptC,EAAgB4qC,GAAYwD,WAAapuC,EAAIE,EAAKR,EAAG4tC,SAAUA,OAAkB,IAAPptC,EAAgByqC,GAAkByD,WAAaluC,EAAIE,EAAKV,EAAG6tC,aAAcA,OAAsB,IAAPntC,EAAgByqC,GAAsBuD,WAAahuC,EACxR,OAAO,QAAU,OAAQ,OAAQ,GAAQ,WACrC,IAAIutC,EACJ,OAAO,GAAYzvC,MAAM,SAAUuW,GAS/B,OARAk5B,EAAY,CACRC,KAAM/mB,EAAOunB,WACbrB,OAAQA,EACRK,IAAKA,EACLS,UAAWP,EACXQ,cAAeP,EACftiB,SAAUA,GAEP,CAAC,EAAc0iB,UAI9BU,GAAkC,SAAU3uC,EAAIqtC,GAChD,IAAI/sC,EAAKN,EAAG0tC,IAAKA,OAAa,IAAPptC,EAAgB4qC,GAAYwD,WAAapuC,EAAIE,EAAKR,EAAG4tC,SAAUA,OAAkB,IAAPptC,EAAgByqC,GAAkByD,WAAaluC,EAAIE,EAAKV,EAAG6tC,aAAcA,OAAsB,IAAPntC,EAAgByqC,GAAsBuD,WAAahuC,EAC5O,OAAO,QAAU,OAAQ,OAAQ,GAAQ,WACrC,OAAO,GAAYlC,MAAM,SAAUuW,GAC/B,MAAO,CAAC,EAAc,CACdm5B,KAAM/mB,EAAOunB,WACbhB,IAAKA,EACLS,UAAWP,EACXQ,cAAeP,EACftiB,SAAU8hB,WAK1BuB,GAAwB,SAAU5uC,EAAIqtC,EAAQhP,GAC9C,IAAI/9B,EAAKN,EAAG0tC,IAAKA,OAAa,IAAPptC,EAAgB4qC,GAAY2D,OAASvuC,EAAIE,EAAKR,EAAG4tC,SAAUA,OAAkB,IAAPptC,EAAgByqC,GAAkB4D,OAASruC,EAAIE,EAAKV,EAAG6tC,aAAcA,OAAsB,IAAPntC,EAAgByqC,GAAsB0D,OAASnuC,EAChO,OAAO,QAAU,OAAQ,OAAQ,GAAQ,WACrC,OAAO,GAAYlC,MAAM,SAAUuW,GAC/B,MAAO,CAAC,EAAc,CACdm5B,KAAM/mB,EAAO0nB,OACbnB,IAAKA,EACLoB,WAAYzQ,EACZgP,OAAQA,EACRc,UAAWP,EACXQ,cAAeP,WAM/BkB,GAAa,SAAU97B,EAAIi7B,GAC3B,OAAO,GAAS,GAAS,GAAIj7B,GAAK,CAAEi7B,KAAMA,KAE1Cc,GAAe,SAAUC,EAAKf,GAC9B,GAAI1uC,MAAMC,QAAQwvC,GAAM,CACpB,IAAIC,EAAQD,EAAI5uB,MAAK,SAAUpN,GAAM,OAAOA,EAAGi7B,OAASA,KACxD,GAAIgB,GAASC,GAAOD,EAAOhB,GACvB,OAAOgB,IAIfC,GAAS,SAAUl8B,EAAIi7B,GACvB,OAAOj7B,EAAGi7B,OAASA,GAEnBkB,GAAc,SAAUn8B,GACxB,OAAoF,IAA7E,CAAC,cAAe,aAAc,cAAe,UAAUkT,QAAQlT,EAAGi7B,OAEzEmB,GAAoB,SAAUp8B,GAC9B,OAA0E,IAAnE,CAAC,cAAe,aAAc,eAAekT,QAAQlT,EAAGi7B,OAE/DoB,GAAc,SAAUr8B,GACxB,MAAO,aAAcA,GAErBs8B,GAAwB,SAAUt8B,GAClC,OAAOq8B,GAAYr8B,IAAO,qBAAsBA,EAAG8O,UAEnDytB,GAAyC,SAAUv8B,GACnD,OAAOq8B,GAAYr8B,IAAO,+BAAgCA,EAAG8O,UAG7D0tB,GAAqB,SAAU1qC,GAC/B,MAAO,SAAUA,GAEjB2qC,GAAqC,WACrC,SAASA,EAAoBC,GACzBnxC,KAAKmxC,OAASA,EACdnxC,KAAKC,KAAO,sBAEZ,IAAImxC,EAAYD,EAAOA,EAAOxyC,OAAS,GACvCqB,KAAK6lB,GAAKurB,EAAUvrB,GACpB7lB,KAAK0vC,KAAO0B,EAAU1B,KACtB1vC,KAAKL,QAAU,IAAMK,KAAK0vC,KAAO,KAAO1vC,KAAK6lB,GACzCorB,GAAmBG,IAAcA,EAAUC,KAAKh1B,SAChDrc,KAAKL,QAAUyxC,EAAUC,KAAKh1B,QAGtC,OAAO60B,EAb6B,GAepCI,GAA2C,WAC3C,SAASA,EAA0BhlC,GAC/BtM,KAAKsM,OAASA,EACdtM,KAAKC,KAAO,4BACZD,KAAKL,QAAU,yCAEnB,OAAO2xC,EANmC,GAa1CC,GAAyB,SAAUxuC,GAGnC,IAFA,IAAIyuC,EAAUxwC,MAAMC,QAAQ8B,GAAYA,EAAW,CAACA,GAChD0uC,EAAkB,GACbvrC,EAAI,EAAGA,EAAIsrC,EAAQ7yC,OAAQuH,IAChC,IAAK,IAAIU,EAAI,EAAGA,EAAI4qC,EAAQtrC,GAAGod,SAAS3kB,OAAQiI,IAAK,CACjD,IAAIwJ,EAAUohC,EAAQtrC,GAAGod,SAAS1c,GAC9BmqC,GAAsB3gC,KACtBqhC,EAAgB3wC,KAAK,GAAS,CAAEouC,IAAK9+B,EAAQ8+B,KAAO9+B,EAAQmT,SAASC,mBACjExiB,MAAMC,QAAQmP,EAAQmT,SAASmuB,6BAC/BthC,EAAQmT,SAASmuB,2BAA2BxwC,SAAQ,SAAU8L,GAAK,OAAOykC,EAAgB3wC,KAAKkM,EAAEV,YAKjH,OAAOmlC,GAKPE,GAAgB,SAAU5uC,EAAUnD,GACpC,IAAI0W,EAAK9U,OACM,IAAX5B,IAAqBA,EAAS,UAIlC,IAHA,IAAI4xC,EAAUxwC,MAAMC,QAAQ8B,GAAYA,EAAW,CAACA,GAChDouC,EAAS,GAEJjrC,EAAI,EAAGA,EAAIsrC,EAAQ7yC,OAAQuH,IAChC,IAAK,IAAIU,EAAI,EAAGA,EAAI4qC,EAAQtrC,GAAGod,SAAS3kB,OAAQiI,IAAK,CACjD,IAAIwJ,EAAUohC,EAAQtrC,GAAGod,SAAS1c,GAClC,GAAIkqC,GAAY1gC,KACR2gC,GAAsB3gC,IAAYA,EAAQmT,SAASC,iBAAiB5jB,SAAWA,IAC/EuxC,EAASA,EAAO12B,OAAOrK,EAAQmT,SAASC,iBAAiB2tB,QAAU,KAEnEH,GAAuC5gC,IACvCpP,MAAMC,QAAQmP,EAAQmT,SAASmuB,6BAC/B,IACI,IAAK,IAAI5vC,GAAMwU,OAAM,EAAQ,GAASlG,EAAQmT,SAASmuB,6BAA8B1vC,EAAKF,EAAGuE,QAASrE,EAAGsE,KAAMtE,EAAKF,EAAGuE,OAAQ,CAC3H,IAAIurC,EAAiB5vC,EAAG7D,MACpB,WAAYyzC,GAAkBA,EAAetlC,OAAO1M,SAAWA,IAC/DuxC,EAASA,EAAO12B,OAAOm3B,EAAetlC,OAAO6kC,QAAU,MAInE,MAAO96B,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQrU,IAAOA,EAAGsE,OAAS9E,EAAKM,EAAG4U,SAASlV,EAAG2E,KAAKrE,GAEpD,QAAU,GAAIwU,EAAK,MAAMA,EAAI/P,QAMjD,OAAO4qC,GAMP,GAA2B,WAO3B,SAASU,EAAUllB,EAAMmlB,EAAKN,EAAS1iC,GACnC,IAAIpN,EAAQ1B,KACZA,KAAK2sB,KAAOA,EACZ3sB,KAAK8xC,IAAMA,EACX9xC,KAAKwxC,QAAUA,EACfxxC,KAAK8O,QAAUA,EACf9O,KAAK+xC,gBAAkB,IAAIC,EAAA,KAAc,GACzChyC,KAAKiyC,yBAAsBhzC,EAE3Be,KAAKkyC,aAAe,OAAAC,EAAA,OAAM,WAStB,OARKzwC,EAAMuwC,sBACPvwC,EAAMuwC,oBAAsBvwC,EAAMoN,QAAQk+B,IAAIniB,WAC9C,OAAAunB,EAAA,MAAM,KACDC,KAAK,OAAAljB,GAAA,SACLmjB,WAAU,WACX5wC,EAAMuwC,yBAAsBhzC,MAG7B,eAAKyC,EAAMuwC,wBAGtBjyC,KAAKuyC,SAAW,OAAAJ,EAAA,OAAM,WAClB,OAAOzwC,EAAMqwC,gBAAgBM,KAAK,OAAAG,GAAA,OAAI,SAAUhxC,GAC5C,IAAII,EAAUJ,EAAGI,QAAS6wC,EAAWjxC,EAAGixC,SACxC,GAAI7wC,GAAW,EACX,MAAM,IAAIqB,MAAM,+BAEpB,GAAIwvC,GAAY,EACZ,MAAM,IAAIxvC,MAAM,mCAEpB,OAAAkH,GAAA,OAAI,SAAUuoC,GAAU,OAAQ,GAAS,GAAS,GAAIA,GAAS,CAAEC,UAAW1hC,KAAKC,KAAKwhC,EAAO9wC,QAAU8wC,EAAOD,UAAY,EAAGG,MAAO,OAAW,OAAAC,GAAA,OAAU,SAAUH,GAAU,OAAO,OAAAN,EAAA,MAAM,EAAqB,IAAlBM,EAAOD,UAAiBJ,KAAK,OAAAS,GAAA,MAAMJ,OAAc,OAAAF,GAAA,OAAI,SAAUE,GAE5P,GADAA,EAAOE,QACHF,EAAOE,MAAQF,EAAOC,UACtB,MAAM,IAAI1vC,MAAM,yCAK5BjD,KAAK+yC,WAAa/yC,KAAKuyC,SAASF,KAAK,OAAAW,GAAA,MAAYhzC,KAAKkyC,cAAe,OAAA/nC,GAAA,OAAI,SAAUggC,GAC/E,IAAK,IAAIjkC,EAAI,EAAGA,GAAK,EAAGA,IACpBikC,EAAK8I,WAAW/sC,GAAGhF,SAAQ,SAAUuT,GAC7BA,EAAGkY,OAASjrB,EAAMirB,OAClBjrB,EAAMwxC,SAAW/I,EAAK1kB,OAAO0tB,UAIzC,GAAIhJ,EAAK1kB,OAAO0tB,MAAQzxC,EAAMwxC,UAAY,EACtC,OAAOxxC,EAAMwxC,YAEjB,iBAAO,SAAUlmC,GAAK,YAAa/N,IAAN+N,KAAqB,OAAAmiB,GAAA,QAAS,OAAAikB,GAAA,SAC/DpzC,KAAKkzC,SAAW3iC,OAAO8iC,kBACvBrzC,KAAK+yC,WAAWV,KAAK,OAAAljB,GAAA,QAAS,OAAAmkB,GAAA,OAAW,WACrC,OAAO,OAAAC,GAAA,MAAG,aACVjB,YAqFR,OAnFAv/B,OAAOsE,eAAew6B,EAAUxxC,UAAW,kBAAmB,CAC1D2W,IAAK,WACD,OAAOhX,KAAKkzC,UAEhB57B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAew6B,EAAUxxC,UAAW,kBAAmB,CAC1D2W,IAAK,WACD,OAAQhW,MAAMC,QAAQjB,KAAKwxC,UACvBxxC,KAAKwxC,QAAQ3vB,MAAK,SAAUpN,GAAM,MAAmB,WAAZA,EAAGi7B,SAEpDp4B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAew6B,EAAUxxC,UAAW,eAAgB,CACvD2W,IAAK,WACD,OAAIhX,KAAKwzC,gBACExzC,KAAKwzC,gBAAgBjwB,SAASC,iBAAiB5jB,OAG/C,WAGf0X,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAew6B,EAAUxxC,UAAW,SAAU,CACjD2W,IAAK,WACD,OAAQhX,KAAKwxC,QAAQrnC,KAAI,SAAUmC,GAC/B,OAAIykC,GAAsBzkC,GACfA,EAAOiX,SAASC,iBAAiB5jB,OAGjC,aAEZ,IAAM,WAEb0X,YAAY,EACZC,cAAc,IAQlBs6B,EAAUxxC,UAAUozC,aAAe,SAAUC,EAAejB,EAAU7wC,GAClE,OAAO,GAAU5B,UAAM,OAAQ,GAAQ,WACnC,IAAI2zC,EAAmCnyC,EAAIM,EAAI8xC,EAA0BC,EAAkCC,EACvGpyC,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EACD,GAA6B,qBAAlBu/B,GAAiCA,EAAgB,EACxD,MAAM,IAAIzwC,MAAM,yCAEpB,YAAgEhE,IAA1De,KAAK8O,QAAQ4jC,OAAOiB,kCAAyD,CAAC,EAAa,IACjGnyC,EAAKxB,KAAK8O,QAAQ4jC,OAAOiB,kCAClB,CAAC,EAAa,IACzB,KAAK,EAAG,MAAO,CAAC,EAAa3zC,KAAK8O,QAAQilC,kCAC1C,KAAK,EACDvyC,EAAKQ,EAAGoS,OACRpS,EAAGmS,MAAQ,EACf,KAAK,EAQD,OAPAw/B,EAAoCnyC,EACpCM,EAAK9B,KAAK8O,QAAQ4jC,OAAQkB,EAA2B9xC,EAAG8xC,yBAA0BC,EAAmC/xC,EAAG+xC,iCACxH7zC,KAAK+xC,gBAAgB1rC,KAAK,CACtBosC,SAAUA,GAAYkB,EACtB/xC,QAASA,GAAWiyC,IAExBC,OAAyB70C,IAAlBy0C,EAA8BA,EAAgBE,EAC9C,CAAC,EAAc,IAAIxxC,SAAQ,SAAUC,EAASC,GAC7CZ,EAAMqxC,WACDV,KAAK,OAAAQ,GAAA,OAAU,WAAc,OAAOnxC,EAAM6wC,YAAc,OAAAM,GAAA,OAAU,WAAc,OAAOnxC,EAAMwwC,gBAAkB,iBAAO,SAAU/H,GAAQ,OAAOA,EAAK1kB,OAAO0tB,MAAQzxC,EAAMwxC,UAAYY,EAAO,KAAO,OAAA3kB,GAAA,SACnMmjB,WAAU,SAAUp+B,GACrB7R,EAAQX,EAAMwxC,UAAYY,EAAO,MAClCxxC,eAMxBuvC,EAjJmB,GAoJ1BmC,GAAgC,SAAUl7B,GAE1C,SAASk7B,EAAernB,EAAMsnB,EAAQpF,EAAQiD,EAAKN,EAAS1iC,GACxD,IAAIpN,EAAQoX,EAAO3S,KAAKnG,KAAM2sB,EAAMmlB,EAAKN,EAAS1iC,IAAY9O,KAG9D,OAFA0B,EAAMuyC,OAASA,EACfvyC,EAAMmtC,OAASA,EACRntC,EAiEX,OAtEA,GAAUsyC,EAAgBl7B,GAO1Bk7B,EAAe3zC,UAAU6zC,QAAU,SAAUzD,EAAK7vC,GAC9C,OAAO6vC,EAAIlzB,QAAO,SAAUC,EAAM5N,GAC9B,OAAOhP,KAAQgP,EAAUW,OAAOX,EAAQhP,IAAS4c,EAAOA,IACzD,IAEPzK,OAAOsE,eAAe28B,EAAe3zC,UAAW,SAAU,CACtD2W,IAAK,WACD,OAAQhX,KAAKwxC,QACR2C,QAAO,SAAU7nC,GAAU,OAA6C,IAAtC8nC,GAAYzsB,QAAQrb,EAAOojC,SAC7DvlC,KAAI,SAAUmC,GACf,OAAIykC,GAAsBzkC,GACfA,EAAOiX,SAASC,iBAAiB5jB,OAGjC,aAEZ,IAAM,WAEb0X,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe28B,EAAe3zC,UAAW,MAAO,CACnD2W,IAAK,WACD,OAAOhX,KAAKk0C,QAAQl0C,KAAKi0C,OAAQ,QAErC38B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe28B,EAAe3zC,UAAW,WAAY,CACxD2W,IAAK,WACD,OAAOhX,KAAKk0C,QAAQl0C,KAAKi0C,OAAQ,cAErC38B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe28B,EAAe3zC,UAAW,eAAgB,CAC5D2W,IAAK,WACD,OAAOhX,KAAKk0C,QAAQl0C,KAAKi0C,OAAQ,kBAErC38B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe28B,EAAe3zC,UAAW,cAAe,CAC3D2W,IAAK,WACD,OAAOzK,OAAOvM,KAAKk0C,QAAQ3C,GAAuB,CAAEjuB,SAAUtjB,KAAKwxC,UAAY,kBAEnFl6B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe28B,EAAe3zC,UAAW,cAAe,CAC3D2W,IAAK,WACD,OAAOzK,OAAOvM,KAAKk0C,QAAQ3C,GAAuB,CAAEjuB,SAAUtjB,KAAKwxC,UAAY,4BAEnFl6B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAe28B,EAAe3zC,UAAW,SAAU,CACtD2W,IAAK,WACD,OAAO26B,GAAc,CAAEruB,SAAUtjB,KAAKwxC,WAE1Cl6B,YAAY,EACZC,cAAc,IAEXy8B,EAvEwB,CAwEjC,IAEE,GAAkC,WAClC,SAASK,EAAiBvlC,GACtB9O,KAAK8O,QAAUA,EAsRnB,OApRAiE,OAAOsE,eAAeg9B,EAAiBh0C,UAAW,MAAO,CACrD2W,IAAK,WACD,OAAOhX,KAAK8O,QAAQk+B,KAExB11B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeg9B,EAAiBh0C,UAAW,SAAU,CACxD2W,IAAK,WACD,OAAOhX,KAAK8O,QAAQwlC,QAExBh9B,YAAY,EACZC,cAAc,IAElB88B,EAAiBh0C,UAAUk0C,iBAAmB,SAAU9/B,EAAIktB,GACxD,OAAO,GAAU3hC,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKw0C,wBAAwB7S,IAC1D,KAAK,EAAG,MAAO,CAAC,KAAiBngC,EAAG4S,SAAYpU,KAAKy0C,0BAA0BhgC,aAK/F4/B,EAAiBh0C,UAAUm0C,wBAA0B,SAAUlH,GAC3D,OAAO,GAAUttC,UAAM,OAAQ,GAAQ,WACnC,IAAI00C,EAASC,EACb,OAAO,GAAY30C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKgtC,IAAI3iB,cAAcijB,IACpD,KAAK,EAGD,OAFAoH,EAAUlzC,EAAG4S,OACbugC,EAAcD,GAA8B,kBAAZA,IAAyBA,EAAQ51C,MAAQ41C,EAClE,CAAC,GAAeC,WAK3CN,EAAiBh0C,UAAUo0C,0BAA4B,SAAUhgC,GAC7D,IAAI6B,EAAK9U,EACLozC,GAAkB,EACtB,IACI,IAAK,IAAIC,EAAO,GAASpgC,GAAKqgC,EAASD,EAAKxuC,QAASyuC,EAAOxuC,KAAMwuC,EAASD,EAAKxuC,OAAQ,CACpF,IAAIopC,EAAYqF,EAAO32C,MACnB0yC,GAAkBpB,KAClBmF,GAAkB,IAI9B,MAAOv+B,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQy+B,IAAWA,EAAOxuC,OAAS9E,EAAKqzC,EAAKn+B,SAASlV,EAAG2E,KAAK0uC,GAE9D,QAAU,GAAIv+B,EAAK,MAAMA,EAAI/P,OAEjC,OAAOquC,GAGXP,EAAiBh0C,UAAU00C,iBAAmB,SAAUvzC,GACpD,IAAIiuC,EAAYjuC,EAAGiuC,UAAWZ,EAASrtC,EAAGqtC,OAC1C,OAAO,GAAU7uC,UAAM,OAAQ,GAAQ,WACnC,IAAIg1C,EAASC,EAAU3gC,EAAK61B,EAAM+K,EAAoBC,EAAkB7H,EAAe8H,EAAgBlvC,EAAGmvC,EAAWvzC,EAAI2jB,EAAQlC,EAAU+xB,EAAaC,EAAQC,EAAWC,EAAc1I,EAAQzpB,EAAUuO,EAC3M,OAAO,GAAY7xB,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAWD,OAVA8gC,EAAW,GACX3gC,EAAM,GACN4gC,EAAqBl1C,KAAKgtC,IAAIliB,iBAC9BqqB,EAAmBn1C,KAAKgtC,IAAIjiB,mBAExBzW,EADAtT,MAAMC,QAAQwuC,GACR,GAAc,GAAI,GAAOA,IAGzB,CAACA,GAEJ,CAAC,EAAazvC,KAAKs0C,OAAOhH,iBACrC,KAAK,EACDA,EAAgBtrC,EAAGoS,OACnBghC,EAAiBhzC,QAAQC,aAAQpD,GACjCiH,EAAI,EACJlE,EAAGmS,MAAQ,EACf,KAAK,EACD,OAAMjO,EAAIoO,EAAI3V,OACRkyC,GAAkBv8B,EAAIpO,KAAuB,WAAhBoO,EAAIpO,GAAGwpC,KACnC,CAAC,EAAa1vC,KAAKgtC,IAAI5iB,YAAYkjB,IAD2B,CAAC,EAAa,GADrD,CAAC,EAAa,GAGhD,KAAK,EAGD,OAFA+H,EAAarzC,EAAGoS,OAAQ4gC,QACxBI,EAAiBhzC,QAAQC,QAAQgzC,GAC1B,CAAC,EAAa,GACzB,KAAK,EAED,OADAnvC,IACO,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa9D,QAAQkjB,IAAI,CACjC4vB,EACAC,EACAC,KAER,KAAK,EAED,GADAtzC,EAAK,GAAO+R,WAAM,EAAQ,CAAC7R,EAAGoS,OAAQ,IAAKqR,EAAS3jB,EAAG,GAAIyhB,EAAWzhB,EAAG,GAAIwzC,EAAcxzC,EAAG,IACzF2jB,EACD,MAAM,IAAIxiB,MAAM,uCAEpB,IAAKsgB,EACD,MAAM,IAAItgB,MAAM,mCAkDpB,OAhDAknC,EAAO1kB,EACPuvB,EAAU3qC,SAASirC,GAAe,IAAK,MAClCL,EAAS3H,IAAkB2H,EAAS3H,GAAiB0H,KACtDC,EAAS3H,GAAiB0H,GAE9BO,EAAS,SAAU9gC,GACf,IAAIihC,IAAcT,EAAS3H,GAC3B,MAAO,CACH0H,QAAS,GAAKU,EAEdxG,IAAuB,qBAAXz6B,EAAGy6B,IAAsB,IAAM,GAAKz6B,EAAGy6B,IAEnDS,UAAmC,qBAAjBl7B,EAAGk7B,UAA4B,IAAM,GAAKl7B,EAAGk7B,UAE/DC,cAA2C,qBAArBn7B,EAAGm7B,cAAgC,IAAM,GAAKn7B,EAAGm7B,gBAG/E4F,EAAY,SAAU/gC,GAClB,MAAO,CACHo6B,OAA6B,qBAAdp6B,EAAGo6B,OAAyBA,GAAUvB,EAAgB74B,EAAGo6B,SAGhF4G,EAAe,SAAUE,GAErB,OAAOA,EAAKxrC,KAAI,SAAUsK,GACtB,OAAQA,EAAGi7B,MACP,KAAK/mB,EAAOitB,WACR,OAAO,GAAS,GAAInhC,GACxB,KAAKkU,EAAO0nB,OACR,OAAO,GAAS,GAAS,GAAS,GAAI57B,GAAK+gC,EAAU/gC,IAAM8gC,EAAO9gC,IACtE,KAAKkU,EAAOwmB,YACR,OAAO,GAAS,GAAS,GAAS,GAAS,GAAI16B,GAAK,CAAEoY,QAA+B,qBAAfpY,EAAGoY,QAA0B,GAAKpY,EAAGoY,QAAU,MAAQ2oB,EAAU/gC,IAAM8gC,EAAO9gC,IACxJ,KAAKkU,EAAOonB,YACR,IAAI8F,EAAO,GAAS,GAAS,GAAS,GAAS,GAAIphC,GAAK,CAAEqM,OAA6B,qBAAdrM,EAAGqM,OAAyB,GAAKrM,EAAGqM,OAAS,MAAQ00B,EAAU/gC,IAAM8gC,EAAO9gC,IACrJ,GAAIohC,EAAKhH,OAAO5xB,cAAcJ,WAAW,OACrC,MAAM,IAAI5Z,MAAM,mDAAqD2pC,GAAUkB,UAEnF,OAAO+H,EACX,KAAKltB,EAAOunB,WACR,OAAO,GAAS,GAAS,GAAS,GAAIz7B,GAAK+gC,EAAU/gC,IAAM8gC,EAAO9gC,IACtE,QACI,MAAM,IAAIxR,MAAM,8BAIhC8pC,EAAS5C,EAAKxd,KACdrJ,EAAWmyB,EAAanhC,GACxBud,EAAWtO,EAASuyB,cACb,CAAC,EAAc,CACdC,KAAM,CACFhJ,OAAQA,EACRzpB,SAAUA,EACVuO,SAAUA,GAEdmjB,QAASA,YAMrCX,EAAiBh0C,UAAUysC,MAAQ,SAAUtrC,GACzC,IAAIM,EAAKN,EAAGu0C,KAAMhJ,EAASjrC,EAAGirC,OAAQzpB,EAAWxhB,EAAGwhB,SAAUuO,EAAW/vB,EAAG+vB,SAAUmjB,EAAUxzC,EAAGwzC,QACnG,OAAO,GAAUh1C,UAAM,OAAQ,GAAQ,WACnC,IAAIg2C,EACJ,OAAO,GAAYh2C,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK8O,QAAQmnC,OAAOnJ,MAAM,CAAEC,OAAQA,EAAQzpB,SAAUA,KACnF,KAAK,EAED,OADA0yB,EAAch0C,EAAGoS,OACV,CAAC,EAAc,CACd8hC,QAASF,EACTD,KAAM,CACFhJ,OAAQA,EACRzpB,SAAUA,EACVuO,SAAUA,GAEdmjB,QAASA,YAMrCX,EAAiBh0C,UAAU81C,SAAW,SAAU1hC,GAC5C,OAAO,GAAUzU,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EACJ,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAED,OADA3S,EAAK,GACE,CAAC,EAAaxB,KAAKgtC,IAAIjhB,aAAatX,IAC/C,KAAK,EAAG,MAAO,CAAC,GAAejT,EAAG40C,WAAat0C,EAAGsS,OAC1C5S,EAAGiT,GAAKA,EACRjT,EAAGsN,QAAU9O,KAAK8O,QAAQunC,QAC1B70C,YAKxB6yC,EAAiBh0C,UAAUi2C,SAAW,SAAU90C,EAAI+0C,GAChD,IAAIrH,EAAM1tC,EAAG0tC,IAAKE,EAAW5tC,EAAG4tC,SAAUC,EAAe7tC,EAAG6tC,aAAc5hB,EAAO,GAAOjsB,EAAI,CAAC,MAAO,WAAY,iBAChH,OAAO,GAAUxB,UAAM,OAAQ,GAAQ,WACnC,IAAIw2C,EAAeC,EAAeC,EAAmBC,EACrD,OAAO,GAAY32C,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAID,OAHAqiC,EAAgBtH,EAChBuH,EAAgBrH,EAChBsH,EAAoBrH,OACNpwC,IAARiwC,QAAkCjwC,IAAbmwC,QAA2CnwC,IAAjBowC,EAAoC,CAAC,EAAa,GAChG,CAAC,EAAakH,EAAU,GAAS,CAAErH,IAAKA,EAAKE,SAAUA,EAAUC,aAAcA,GAAgB5hB,KAC1G,KAAK,EACDkpB,EAAa70C,EAAGsS,YACMnV,IAAlBu3C,IACAA,EAAgBG,EAAWC,wBAET33C,IAAlBw3C,IACAA,EAAgBE,EAAWvH,eAELnwC,IAAtBy3C,IACAA,EAAoBC,EAAWtH,cAEnCvtC,EAAGqS,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAc,CACtB+6B,IAAKsH,EACLpH,SAAUqH,EACVpH,aAAcqH,YAMtCrC,EAAiBh0C,UAAUw2C,cAAgB,SAAUb,GACjD,OAAO,GAAUh2C,UAAM,OAAQ,GAAQ,WACnC,IAAI82C,EAAQV,EAAY5E,EAAStrC,EAAGU,EAAGuqC,EACnC3vC,EACJ,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOnd,KAAK6e,EAAYE,QAAS,IAAIvyC,WAAW,CAAC,MACnF,KAAK,EAKD,OAJAmzC,EAASh1C,EAAGsS,OACZ4hC,EAAYE,QAAUY,EAAOC,OAC7Bf,EAAYD,KAAKiB,UAAYF,EAAOG,UACpCb,EAAa,GACN,CAAC,EAAap2C,KAAKgtC,IAAIphB,mBAAmB,CAACoqB,EAAYD,QAClE,KAAK,EAED,GADAvE,EAAU1vC,EAAGsS,QACRpT,MAAMC,QAAQuwC,GACf,MAAM,IAAIF,GAA0BE,GAExC,IAAKtrC,EAAI,EAAGA,EAAIsrC,EAAQ7yC,OAAQuH,IAC5B,IAAKU,EAAI,EAAGA,EAAI4qC,EAAQtrC,GAAGod,SAAS3kB,OAAQiI,IACxCwvC,EAAWt1C,KAAK0wC,EAAQtrC,GAAGod,SAAS1c,IAI5C,GADAuqC,EAASQ,GAAcH,GACnBL,EAAOxyC,OAEP,MAAM,IAAIuyC,GAAoBC,GAGlC,OADA3vC,EAAK,GACE,CAAC,EAAaxB,KAAK8O,QAAQooC,SAAShK,OAAO8I,EAAYE,UAClE,KAAK,EAAG,MAAO,CAAC,GAAe10C,EAAGmrB,KAAO7qB,EAAGsS,OACpC5S,EAAGw0C,YAAcA,EACjBx0C,EAAG40C,WAAaA,EAChB50C,EAAGsN,QAAU9O,KAAK8O,QAAQunC,QAC1B70C,YAKjB6yC,EAxR0B,GA2RjCD,GAAc,CACdzrB,EAAOitB,WACPjtB,EAAOwmB,YACPxmB,EAAOonB,YACPpnB,EAAOunB,YAEP,GAAgC,SAAUp3B,GAE1C,SAASq+B,EAAeroC,EAASynC,GAC7B,IAAI70C,EAAQoX,EAAO3S,KAAKnG,KAAM8O,IAAY9O,KAG1C,OAFA0B,EAAM60C,UAAYA,EAClB70C,EAAMuxC,WAAa,GACZvxC,EAsNX,OA3NA,GAAUy1C,EAAgBr+B,GAa1Bq+B,EAAe92C,UAAU+2C,aAAe,SAAUnD,GAE9C,OADAj0C,KAAKizC,WAAWnyC,KAAK,GAAS,CAAE4uC,KAAM/mB,EAAOonB,aAAekE,IACrDj0C,MAQXm3C,EAAe92C,UAAUg3C,iBAAmB,SAAUpD,GAClD,OAAOj0C,KAAKo3C,aAAanD,EAAOqD,qBAQpCH,EAAe92C,UAAUk3C,eAAiB,SAAUtD,GAEhD,OADAj0C,KAAKizC,WAAWnyC,KAAK,GAAS,CAAE4uC,KAAM/mB,EAAOunB,YAAc+D,IACpDj0C,MAQXm3C,EAAe92C,UAAUm3C,eAAiB,SAAUh2C,GAChD,IAAImgC,EAAMngC,EAAGmgC,IAAK8V,EAASj2C,EAAGi2C,OAE9B,OADAz3C,KAAKizC,WAAWnyC,KAAK,CAAE4uC,KAAM/mB,EAAOitB,WAAYjU,IAAKA,EAAK8V,OAAQA,IAC3Dz3C,MAQXm3C,EAAe92C,UAAUq3C,gBAAkB,SAAUzD,GAEjD,OADAj0C,KAAKizC,WAAWnyC,KAAK,GAAS,CAAE4uC,KAAM/mB,EAAOwmB,aAAe8E,IACrDj0C,MAEXm3C,EAAe92C,UAAUs3C,SAAW,SAAUluB,GAC1C,OAAO,GAAUzpB,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EAAIM,EACR,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAED,OADA3S,EAAKioB,EAAMimB,KACHluC,GACJ,KAAKmnB,EAAOonB,YAAa,MAAO,CAAC,EAAa,GAC9C,KAAKpnB,EAAOwmB,YAAa,MAAO,CAAC,EAAa,GAC9C,KAAKxmB,EAAOunB,WAAY,MAAO,CAAC,EAAa,GAC7C,KAAKvnB,EAAOitB,WAAY,MAAO,CAAC,EAAa,GAEjD,MAAO,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAc/F,GAAwB,GAAS,GAAIpmB,KACnE,KAAK,EAED,OADA3nB,EAAKktC,GACE,CAAC,EAAahvC,KAAK8O,QAAQ8oC,OAAOC,uBAAuB,GAAS,GAAIpuB,KACjF,KAAK,EAAG,MAAO,CAAC,EAAc3nB,EAAG+R,WAAM,EAAQ,CAAC7R,EAAGoS,UACnD,KAAK,EAAG,MAAO,CAAC,EAAc67B,GAA2B,GAAS,GAAIxmB,KACtE,KAAK,EAAG,MAAO,CAAC,EAAc,GAAS,GAAIA,IAC3C,KAAK,EAAG,MAAM,IAAIxmB,MAAM,+BAAiCwmB,EAAMimB,cAW/EyH,EAAe92C,UAAUgxC,KAAO,SAAU4C,GACtC,IAAI39B,EAAK9U,EACT,IACI,IAAK,IAAIs2C,EAAW,GAAS7D,GAAS8D,EAAaD,EAASzxC,QAAS0xC,EAAWzxC,KAAMyxC,EAAaD,EAASzxC,OAAQ,CAChH,IAAIojB,EAAQsuB,EAAW55C,MACvB,OAAQsrB,EAAMimB,MACV,KAAK/mB,EAAOonB,YACR/vC,KAAKo3C,aAAa3tB,GAClB,MACJ,KAAKd,EAAOwmB,YACRnvC,KAAK03C,gBAAgBjuB,GACrB,MACJ,KAAKd,EAAOunB,WACRlwC,KAAKu3C,eAAe9tB,GACpB,MACJ,KAAKd,EAAOitB,WACR51C,KAAKw3C,eAAe/tB,GACpB,MACJ,QACI,MAAM,IAAIxmB,MAAM,+BAAiCwmB,EAAMimB,QAIvE,MAAOr5B,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQ0hC,IAAeA,EAAWzxC,OAAS9E,EAAKs2C,EAASphC,SAASlV,EAAG2E,KAAK2xC,GAE1E,QAAU,GAAIxhC,EAAK,MAAMA,EAAI/P,OAEjC,OAAOvG,MAQXm3C,EAAe92C,UAAUkD,KAAO,SAAU0wC,GACtC,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIstC,EAAezN,EAAWmY,EAAWC,EAAc/xC,EAAGoO,EAAK9S,EAAIM,EAAI2S,EAAIyjC,EAAWl2C,EAAIE,EAAI0U,EAAOuhC,EAAQC,EAAiB7hC,EAAIC,EAAIq4B,EAAQwJ,EAAUC,EAASnkB,EAAIxH,EAAM7d,EAASknC,EAAaI,EAC7Lv/B,EAAK4pB,EACL/+B,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAU0gC,GAC/B,OAAQA,EAAGvsB,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAED,OADAA,EAAgB5M,EAAGtsB,OACZ,CAAC,EAAapU,KAAKs0C,OAAOzU,aACrC,KAAK,EAED,OADAA,EAAYa,EAAGtsB,OACR,CAAC,EAAapU,KAAKu2C,UAAUgC,MAAMv4C,KAAKizC,aACnD,KAAK,EAED,OADA+E,EAAYtX,EAAGtsB,OACR,CAAC,EAAapU,KAAKu0C,iBAAiBv0C,KAAKizC,WAAY3F,IAChE,KAAK,EACD2K,EAAevX,EAAGtsB,OAClBlO,EAAI+xC,EAAe,EAAI,EACvB3jC,EAAM,GACNosB,EAAGvsB,MAAQ,EACf,KAAK,EACDusB,EAAGrsB,KAAKvT,KAAK,CAAC,EAAG,GAAI,GAAI,KACzBU,EAAK,GAASxB,KAAKizC,YAAanxC,EAAKN,EAAG6E,OACxCq6B,EAAGvsB,MAAQ,EACf,KAAK,EACD,OAAMrS,EAAGwE,KAAa,CAAC,EAAa,KACpCmO,EAAK3S,EAAG3D,MACHyyC,GAAYn8B,GACV,CAAC,EAAazU,KAAKs2C,SAAS7hC,GAAI,WAAc,OAAO,GAAU/S,OAAO,OAAQ,GAAQ,WAAc,OAAO,GAAY1B,MAAM,SAAUwB,GACtI,MAAO,CAAC,EAAcw2C,EAAU9xC,cAFX,CAAC,EAAa,IAI/C,KAAK,EAGD,OAFAgyC,EAAYxX,EAAGtsB,OACflS,GAAMF,EAAKsS,GAAKxT,KACT,CAAC,EAAad,KAAK23C,SAAS,GAAS,GAAS,GAAIljC,GAAKyjC,KAClE,KAAK,EAED,OADAh2C,EAAG2R,MAAM7R,EAAI,CAAC0+B,EAAGtsB,SACV,CAAC,EAAa,IACzB,KAAK,EACDE,EAAIxT,KAAK,GAAS,GAAI2T,IACtBisB,EAAGvsB,MAAQ,GACf,KAAK,GACDjO,IACAw6B,EAAGvsB,MAAQ,GACf,KAAK,GAED,OADArS,EAAKN,EAAG6E,OACD,CAAC,EAAa,GACzB,KAAK,GAAI,MAAO,CAAC,EAAa,IAC9B,KAAK,GAGD,OAFAuQ,EAAQ8pB,EAAGtsB,OACXyC,EAAM,CAAEtQ,MAAOqQ,GACR,CAAC,EAAa,IACzB,KAAK,GACD,IACQ9U,IAAOA,EAAGwE,OAASm6B,EAAKj/B,EAAGkV,SAAS+pB,EAAGt6B,KAAK3E,GAEpD,QAAU,GAAIqV,EAAK,MAAMA,EAAItQ,MAC7B,MAAO,CAAC,GACZ,KAAK,GACD,OAAK0xC,GACLE,EAAS,CAAEzI,KAAM/mB,EAAO0nB,QACjB,CAAC,EAAarwC,KAAKs2C,SAAS6B,GAAQ,WAAc,OAAO,GAAUz2C,OAAO,OAAQ,GAAQ,WAAc,OAAO,GAAY1B,MAAM,SAAUwB,GAC1I,MAAO,CAAC,EAAcw2C,EAAU,eAHd,CAAC,EAAa,IAK5C,KAAK,GAGD,OAFAI,EAAkB1X,EAAGtsB,OACrBoC,GAAMD,EAAKjC,GAAKkkC,QACT,CAAC,EAAapI,GAAsB,GAAS,GAAIgI,GAAkB9K,EAAezN,IAC7F,KAAK,GACDrpB,EAAG3C,MAAM0C,EAAI,CAACmqB,EAAGtsB,SACjBssB,EAAGvsB,MAAQ,GACf,KAAK,GAED,OADA06B,EAAUoF,GAAUA,EAAOpF,QAAWvB,EAC/B,CAAC,EAAattC,KAAK+0C,iBAAiB,CACnCtF,UAAWn7B,EACXu6B,OAAQA,KAEpB,KAAK,GAED,OADAwJ,EAAW3X,EAAGtsB,OACP,CAAC,EAAapU,KAAK8sC,MAAMuL,IACpC,KAAK,GAED,OADAC,EAAU5X,EAAGtsB,OACN,CAAC,EAAapU,KAAK62C,cAAcyB,IAC5C,KAAK,GAED,OADAnkB,EAAKuM,EAAGtsB,OAAQuY,EAAOwH,EAAGxH,KAAM7d,EAAUqlB,EAAGrlB,QAASknC,EAAc7hB,EAAG6hB,YAAaI,EAAajiB,EAAGiiB,WAC7F,CAAC,EAAc,IAAIpC,GAAernB,EAAMrY,EAAKu6B,EAAQmH,EAAaI,EAAYtnC,YAKlGqoC,EA5NwB,CA6NjC,IACEsB,GAAkC,WAClC,SAASA,EAAiB3pC,EAASynC,GAC/Bv2C,KAAK8O,QAAUA,EACf9O,KAAKu2C,UAAYA,EAerB,OAPAkC,EAAiBp4C,UAAUk4C,MAAQ,SAAUtE,GACzC,IAAIsE,EAAQ,IAAI,GAAev4C,KAAK8O,QAAS9O,KAAKu2C,WAIlD,OAHIv1C,MAAMC,QAAQgzC,IACdsE,EAAMlH,KAAK4C,GAERsE,GAEJE,EAlB0B,GAqBjCC,GAAuB,SAAUjkC,EAAIjT,GACrC,IAAIM,OAAY,IAAPN,EAAgB,CACrBm3C,gBAAiB,IACjBC,iBAAkB,KAClBp3C,EAAIm3C,EAAkB72C,EAAG62C,gBAAiBC,EAAmB92C,EAAG82C,iBAChEC,EAAmBtH,GAAuB,CAAEjuB,SAAU7O,IACtDqkC,EAAW,IAAI,IAAU,GACzBC,EAAe,IAAI,IAAU,GAC7BC,EAAW,IAAI,IAAU,GACzBC,EAAuB,IAAI,IAAU,GACrCC,EAAsB,IAAI,IAAU,GACpCC,EAAuB,IAAI,IAAU,GAczC,OAbAN,EAAiB33C,SAAQ,SAAUoL,GAC/B0sC,EAAWA,EAASI,KAAK9sC,EAAO4iC,KAAO,GACvC+J,EAAuBA,EAAqBG,KAAKp4C,MAAMC,QAAQqL,EAAO+sC,sBAChE/sC,EAAO+sC,qBAAqB16C,OAASi6C,EACrC,GACNM,EAAsBA,EAAoBE,KAAK,mCAAoC9sC,EAASqsC,EAAkB,GAC9GG,EAAWA,EAASM,KAAK9sC,EAAOgtC,cAAgB,GAChDH,EAAuBA,EAAqBC,KAAK,2BAA4B9sC,GAASiE,OAAOjE,EAAOitC,yBAA+B,MAEvIR,EAAeA,EACVK,KAAKF,GACLE,KAAKH,GACLG,KAAKD,GACH,CACHH,SAAUA,EACVF,SAAUA,EACVC,aAAcA,EACdG,oBAAqBA,EACrBD,qBAAsBA,EACtBE,qBAAsBA,EACtBK,iBAAkB,IAAI,IAAUT,EAAa1K,aAAa,QAI9DoL,GAAoD,WACpD,SAASA,IACLz5C,KAAKC,KAAO,qCACZD,KAAKL,QAAU,yGAEnB,OAAO85C,EAL4C,GAOnDC,GAAuB,GAIvB,GAAiC,WAOjC,SAASC,EAAgBC,EAAQ9qC,EAAS+qC,GACtC,IAAIn4C,EAAQ1B,KACZA,KAAK45C,OAASA,EACd55C,KAAK8O,QAAUA,EACf9O,KAAK65C,UAAYA,EACjB75C,KAAK85C,iBAAmB,IAAI9H,EAAA,KAAc,GAC1ChyC,KAAK+5C,iBAAmB,IAAI/H,EAAA,KAAc,GAC1ChyC,KAAKg6C,WAAY,EACjBh6C,KAAKi6C,SAAWj6C,KAAK65C,UAAUxH,KAAK,OAAAG,GAAA,OAAI,SAAU0H,GAC9C,IAAKx4C,EAAMs4C,WACPt4C,EAAMy4C,UACND,EAAQz0B,OAAO0tB,MAAQzxC,EAAMy4C,SAAS10B,OAAO0tB,MAAQ,EACrD,MAAM,IAAIsG,GAEd/3C,EAAMy4C,SAAWD,KACjB,OAAA9G,GAAA,MAAY,CAAEgH,WAAY,EAAGC,UAAU,KAE3Cr6C,KAAK+yC,WAAa/yC,KAAKi6C,SAAS5H,KAAK,OAAAloC,GAAA,OAAI,SAAUggC,GAC/C,IAAI7zB,EAAK9U,EAAIqV,EAAK/U,EAClB,IACI,IAAK,IAAIE,EAAK,GAASmoC,EAAK8I,YAAa/wC,EAAKF,EAAGqE,QAASnE,EAAGoE,KAAMpE,EAAKF,EAAGqE,OAAQ,CAC/E,IAAIi0C,EAAUp4C,EAAG/D,MACjB,IACI,IAAK,IAAIo8C,GAAa1jC,OAAM,EAAQ,GAASyjC,IAAWE,EAAcD,EAAUl0C,QAASm0C,EAAYl0C,KAAMk0C,EAAcD,EAAUl0C,OAAQ,CACvI,IAAIoO,EAAK+lC,EAAYr8C,MACrB,GAAIsW,EAAGkY,OAASjrB,EAAMk4C,OAKlB,OAJAl4C,EAAMs4C,WAAY,EAClBt4C,EAAMq4C,iBAAiB1zC,KAAK8jC,GAC5BzoC,EAAMo4C,iBAAiBzzC,KAAKoO,EAAG6O,UAExB6mB,GAInB,MAAOvzB,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQ4jC,IAAgBA,EAAYl0C,OAASxE,EAAKy4C,EAAU7jC,SAAS5U,EAAGqE,KAAKo0C,GAE7E,QAAU,GAAI1jC,EAAK,MAAMA,EAAItQ,SAIzC,MAAO8P,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQnU,IAAOA,EAAGoE,OAAS9E,EAAKQ,EAAG0U,SAASlV,EAAG2E,KAAKnE,GAEpD,QAAU,GAAIsU,EAAK,MAAMA,EAAI/P,WAEjC,iBAAO,SAAUyG,GACjB,MAAoB,qBAANA,KACd,OAAAmiB,GAAA,QAAS,OAAAikB,GAAA,MAAY,CAAEgH,WAAY,EAAGC,UAAU,KACpDr6C,KAAK+yC,WAAWV,KAAK,OAAAljB,GAAA,QAAS,OAAAmkB,GAAA,OAAW,WAAc,OAAO,OAAAC,GAAA,WAAGt0C,OAAgBqzC,YA4GrF,OA1GAqH,EAAgBt5C,UAAUw4C,iBAAmB,WACzC,OAAO,GAAU74C,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAK85C,iBAAiBzH,KAAK,OAAAljB,GAAA,SAASsrB,oBAQtEd,EAAgBt5C,UAAUq6C,QAAU,WAChC,OAAO,GAAU16C,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EACJ,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAED,OADA3S,EAAKk3C,GACE,CAAC,EAAa14C,KAAK64C,oBAC9B,KAAK,EAAG,MAAO,CAAC,EAAcr3C,EAAGqS,WAAM,EAAQ,CAAC/R,EAAGsS,kBAKnEulC,EAAgBt5C,UAAUs6C,uBAAyB,WAC/C,OAAO,GAAU36C,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,OAAKxB,KAAKg6C,UAGH,CAAC,EAAc,OAAAY,GAAA,MAAc,CAAC56C,KAAK+5C,iBAAkB,eAAK/5C,KAAK8O,QAAQk+B,IAAIniB,cACzEwnB,KAAK,OAAAloC,GAAA,OAAI,SAAU3I,GACpB,IAAIM,EAAK,GAAON,EAAI,GAAIq5C,EAAe/4C,EAAG,GAAIqoC,EAAOroC,EAAG,GACxD,OAAOqoC,EAAK1kB,OAAO0tB,MAAQ0H,EAAap1B,OAAO0tB,MAAQ,KACvD,OAAAhkB,GAAA,SACCsrB,aAPE,CAAC,EAAc,UAWtCd,EAAgBt5C,UAAUy6C,kBAAoB,SAAUC,GAEpD,YAD2B,IAAvBA,IAAiCA,EAAqB,QACnD,GAAU/6C,UAAM,OAAQ,GAAQ,WACnC,IAAIg7C,EAAgBC,EAAgBC,EAAWC,EAAevuB,EAAQprB,EACtE,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAED,OAAKnU,KAAKg6C,UAGH,CAAC,EAAah6C,KAAK8O,QAAQk+B,IAAIliB,eAAe,CAAEnG,MAAOo2B,KAFnD,CAAC,GAAc,GAG9B,KAAK,EAED,OADAC,EAAiBl5C,EAAGsS,OACb,CAAC,EAAapU,KAAK+5C,iBAAiB1H,KAAK,OAAAljB,GAAA,SAASsrB,aAC7D,KAAK,EAID,OAHAQ,EAAiBn5C,EAAGsS,OACpB8mC,EAAYF,EAAe7H,MAAQ8H,EAAex1B,OAAO0tB,MAErD+H,GAAa,EACN,CAAC,GAAc,IAE1BC,EAAgBlqC,KAAKmqC,IAAIH,EAAex1B,OAAO0tB,MAAQ+H,EAAWD,EAAex1B,OAAO0tB,MAAQuG,IAChGl4C,EAAK65C,IAAIC,KACF,CAAC,EAAat7C,KAAK8O,QAAQk+B,IAAIhjB,cAAc,CAAErF,MAAOpY,OAAO4uC,OACxE,KAAK,EAED,OADAvuB,EAAS,IAAKprB,EAAGqS,MAAMwnC,IAAK,MAAC,EAAQv5C,EAAGsS,UACjC,CAAC,EAAcwY,EAAOzV,IAAI8jC,EAAetuB,eAKpEgtB,EAAgBt5C,UAAUk7C,uBAAyB,SAAU7H,GACzD,IAAIhyC,EAAQ1B,KACZ,GAA6B,qBAAlB0zC,GAAiCA,EAAgB,EACxD,MAAM,IAAIzwC,MAAM,yCAEpB,IAAI2wC,EAA2B5zC,KAAK8O,QAAQ4jC,OAAOkB,yBAC/CE,OAAyB70C,IAAlBy0C,EAA8BA,EAAgBE,EACzD,QAAa30C,IAAT60C,EACA,MAAM,IAAI7wC,MAAM,oDAEpB,OAAO,OAAA23C,GAAA,MAAc,CAAC56C,KAAK+5C,iBAAkB/5C,KAAKi6C,WAAW5H,KAAK,OAAAmJ,GAAA,OAAqB,SAAUh6C,EAAIM,GACjG,IAAIE,EAAK,GAAOR,EAAI,GAAIi6C,EAAez5C,EAAG,GACtCE,EAAK,GAAOJ,EAAI,GAAIo4C,EAAUh4C,EAAG,GACrC,OAAOu5C,EAAa9uB,OAASutB,EAAQvtB,QACrC,OAAAxiB,GAAA,OAAI,SAAU3I,GACd,IAAIM,EAAK,GAAON,EAAI,GAAIq5C,EAAe/4C,EAAG,GAAIqoC,EAAOroC,EAAG,GACxD,MAAO,CACH6iB,MAAOwlB,EACPuR,qBAAsB5H,EACtB6H,oBAAqBxR,EAAK1kB,OAAO0tB,MAAQ0H,EAAap1B,OAAO0tB,MAAQ,EACrEyI,UAAWzR,EAAK1kB,OAAO0tB,MAAQ0H,EAAap1B,OAAO0tB,OAASW,EAAO,EACnEgH,kBAAmB,WAAc,OAAOp5C,EAAMo5C,kBAAkB3Q,EAAKxd,WAEzE,OAAAkvB,GAAA,OAAU,SAAUr6C,GACpB,IAAIo6C,EAAYp6C,EAAGo6C,UACnB,OAAQA,KACT,KAMPjC,EAAgBt5C,UAAUozC,aAAe,SAAUC,GAC/C,OAAO1zC,KAAKu7C,uBAAuB7H,GAAe+G,aAE/Cd,EAxKyB,GA2KhC,GAAsC,SAAU7gC,GAEhD,SAASgjC,EAAqBlC,EAAQ9qC,EAASmrC,GAC3C,IAAIv4C,EAAQoX,EAAO3S,KAAKnG,KAAM45C,EAAQ9qC,EAASmrC,IAAaj6C,KAG5D,OAFA0B,EAAMk4C,OAASA,EACfl4C,EAAMoN,QAAUA,EACTpN,EAyCX,OA9CA,GAAUo6C,EAAsBhjC,GAOhCgjC,EAAqBz7C,UAAUmzC,gBAAkB,WAC7C,OAAO,GAAUxzC,UAAM,OAAQ,GAAQ,WACnC,IAAI+7C,EACJ,OAAO,GAAY/7C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK64C,oBAClC,KAAK,EAED,OADAkD,EAAkBv6C,EAAG4S,OACd,CAAC,EAAc2nC,EAAgBl6B,MAAK,SAAU7U,GAAK,OAAOA,EAAE0iC,OAAS/mB,EAAO0nB,mBAKvGyL,EAAqBz7C,UAAUT,OAAS,WACpC,OAAO,GAAUI,UAAM,OAAQ,GAAQ,WACnC,IAAIyU,EACJ,OAAO,GAAYzU,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,OAAKnU,KAAKg6C,UAGH,CAAC,EAAah6C,KAAK64C,oBAFf,CAAC,EAAc,WAG9B,KAAK,EAED,OADApkC,EAAKjT,EAAG4S,OACD,CAAC,EAAeK,EACd0/B,QAAO,SAAU7nC,GAAU,OAA6C,IAAtC8nC,GAAYzsB,QAAQrb,EAAOojC,SAC7DvlC,KAAI,SAAUmC,GACf,OAAIykC,GAAsBzkC,GACfA,EAAOiX,SAASC,iBAAiB5jB,OAGjC,aAEZ,IAAM,mBAK1Bk8C,EA/C8B,CAgDvC,IAEE,GAA2C,SAAUhjC,GAErD,SAASkjC,EAA0BpC,EAAQ9qC,EAASmrC,GAChD,IAAIv4C,EAAQoX,EAAO3S,KAAKnG,KAAM45C,EAAQ9qC,EAASmrC,IAAaj6C,KAG5D,OAFA0B,EAAMk4C,OAASA,EACfl4C,EAAMoN,QAAUA,EACTpN,EAgDX,OArDA,GAAUs6C,EAA2BljC,GAOrCkjC,EAA0B37C,UAAUmzC,gBAAkB,WAClD,OAAO,GAAUxzC,UAAM,OAAQ,GAAQ,WACnC,IAAI+7C,EACJ,OAAO,GAAY/7C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK64C,oBAClC,KAAK,EAED,OADAkD,EAAkBv6C,EAAG4S,OACd,CAAC,EAAc2nC,EAAgBl6B,MAAK,SAAU7U,GAAK,OAAOA,EAAE0iC,OAAS/mB,EAAO0nB,mBAKvG2L,EAA0B37C,UAAU47C,oBAAsB,WACtD,OAAO,GAAUj8C,UAAM,OAAQ,GAAQ,WACnC,IAAI+7C,EACJ,OAAO,GAAY/7C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK64C,oBAClC,KAAK,EAED,OADAkD,EAAkBv6C,EAAG4S,OACd,CAAC,EAAc2nC,EAAgBl6B,MAAK,SAAU7U,GAAK,OAAOA,EAAE0iC,OAAS/mB,EAAOunB,uBAKvG8L,EAA0B37C,UAAUT,OAAS,WACzC,OAAO,GAAUI,UAAM,OAAQ,GAAQ,WACnC,IAAIyU,EACJ,OAAO,GAAYzU,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,OAAKnU,KAAKg6C,UAGH,CAAC,EAAah6C,KAAKi8C,uBAFf,CAAC,EAAc,WAG9B,KAAK,EAED,OADAxnC,EAAKjT,EAAG4S,OACHK,EAGE,CAAC,EAAcA,EAAG8O,SAASC,iBAAiB5jB,QAFxC,CAAC,EAAc,mBAOvCo8C,EAtDmC,CAuD5C,IAEE,GAA4C,SAAUljC,GAEtD,SAASojC,EAA2BtC,EAAQ9qC,EAASmrC,GACjD,IAAIv4C,EAAQoX,EAAO3S,KAAKnG,KAAM45C,EAAQ9qC,EAASmrC,IAAaj6C,KAG5D,OAFA0B,EAAMk4C,OAASA,EACfl4C,EAAMoN,QAAUA,EACTpN,EA8DX,OAnEA,GAAUw6C,EAA4BpjC,GAOtCojC,EAA2B77C,UAAU87C,qBAAuB,WACxD,OAAO,GAAUn8C,UAAM,OAAQ,GAAQ,WACnC,IAAI+7C,EACJ,OAAO,GAAY/7C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK64C,oBAClC,KAAK,EAED,OADAkD,EAAkBv6C,EAAG4S,OACd,CAAC,EAAco8B,GAAauL,EAAiBpzB,EAAOwmB,sBAK/E+M,EAA2B77C,UAAUmzC,gBAAkB,WACnD,OAAO,GAAUxzC,UAAM,OAAQ,GAAQ,WACnC,IAAI+7C,EACJ,OAAO,GAAY/7C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK64C,oBAClC,KAAK,EAED,OADAkD,EAAkBv6C,EAAG4S,OACd,CAAC,EAAco8B,GAAauL,EAAiBpzB,EAAO0nB,iBAK/E6L,EAA2B77C,UAAUT,OAAS,WAC1C,OAAO,GAAUI,UAAM,OAAQ,GAAQ,WACnC,IAAIyU,EACJ,OAAO,GAAYzU,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,OAAKnU,KAAKg6C,UAGH,CAAC,EAAah6C,KAAKm8C,wBAFf,CAAC,EAAc,WAG9B,KAAK,EAED,OADA1nC,EAAKjT,EAAG4S,OACHK,EAGE,CAAC,EAAcA,EAAG8O,SAASC,iBAAiB5jB,QAFxC,CAAC,EAAc,mBAO9Cs8C,EAA2B77C,UAAUyrB,SAAW,WAC5C,OAAO,GAAU9rB,UAAM,OAAQ,GAAQ,WACnC,IAAIyU,EAAImI,EACR,OAAO,GAAY5c,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKm8C,wBAClC,KAAK,EAGD,OAFA1nC,EAAKjT,EAAG4S,OACRwI,GAAWnI,EAAG8O,SAASC,iBAAiB61B,sBAAwB,IAAI,GAC7D,CAAC,EAAcr5C,KAAK8O,QAAQstC,OAAOnxC,GAAG2R,YAK1Ds/B,EApEoC,CAqE7C,IAEE,GAA4C,SAAUpjC,GAEtD,SAASujC,EAA2BzC,EAAQ9qC,EAASmrC,GACjD,IAAIv4C,EAAQoX,EAAO3S,KAAKnG,KAAM45C,EAAQ9qC,EAASmrC,IAAaj6C,KAG5D,OAFA0B,EAAMk4C,OAASA,EACfl4C,EAAMoN,QAAUA,EACTpN,EAgDX,OArDA,GAAU26C,EAA4BvjC,GAOtCujC,EAA2Bh8C,UAAUmzC,gBAAkB,WACnD,OAAO,GAAUxzC,UAAM,OAAQ,GAAQ,WACnC,IAAI+7C,EACJ,OAAO,GAAY/7C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK64C,oBAClC,KAAK,EAED,OADAkD,EAAkBv6C,EAAG4S,OACd,CAAC,EAAc2nC,EAAgBl6B,MAAK,SAAU7U,GAAK,OAAOA,EAAE0iC,OAAS/mB,EAAO0nB,mBAKvGgM,EAA2Bh8C,UAAUi8C,qBAAuB,WACxD,OAAO,GAAUt8C,UAAM,OAAQ,GAAQ,WACnC,IAAI+7C,EACJ,OAAO,GAAY/7C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK64C,oBAClC,KAAK,EAED,OADAkD,EAAkBv6C,EAAG4S,OACd,CAAC,EAAc2nC,EAAgBl6B,MAAK,SAAU7U,GAAK,OAAOA,EAAE0iC,OAAS/mB,EAAOonB,wBAKvGsM,EAA2Bh8C,UAAUT,OAAS,WAC1C,OAAO,GAAUI,UAAM,OAAQ,GAAQ,WACnC,IAAIyU,EACJ,OAAO,GAAYzU,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,OAAKnU,KAAKg6C,UAGH,CAAC,EAAah6C,KAAKs8C,wBAFf,CAAC,EAAc,WAG9B,KAAK,EAED,OADA7nC,EAAKjT,EAAG4S,OACHK,EAGE,CAAC,EAAcA,EAAG8O,SAASC,iBAAiB5jB,QAFxC,CAAC,EAAc,mBAOvCy8C,EAtDoC,CAuD7C,IAEEE,GAAa,SAAUC,GAAiB,OAAO,SAAU3N,GACzD,IAAI4N,EAAU,KACd,OAAO,OAAAtK,EAAA,OAAM,WAQT,OAPKsK,IACDA,EAAU,IAAIzK,EAAA,KACdnD,EAAOwD,KAAK,OAAAljB,GAAA,SAASmjB,UAAUmK,GAC/BD,EAAcnK,KAAK,OAAAljB,GAAA,SAASmjB,WAAU,WAClCmK,EAAU,SAGXA,OAGXC,GAAsC,SAAUC,EAAcC,EAAc9tC,EAAS+tC,GACrF,OAAOF,EAAatK,KAAK,OAAAQ,GAAA,OAAU,WAAc,OAAO+J,KAAkB,OAAAE,GAAA,MAAwB,QAAS,OAAAC,GAAA,MAA8D,IAAlDjuC,EAAQ4jC,OAAOmB,iCAAyC,OAAAmJ,GAAA,MAAW,IAAI/5C,MAAM,mCAAoC45C,GAAY,OAAAzJ,GAAA,MAAY,CAC5PiH,UAAU,EACVwC,UAAWA,MAGf,GAAkC,WAClC,SAASI,EAAiBnuC,GACtB,IAAIpN,EAAQ1B,KACZA,KAAK8O,QAAUA,EAEf9O,KAAKk9C,cAAgB,OAAA/K,EAAA,OAAM,WAAc,OAAO,eAAKzwC,EAAMoN,QAAQk+B,IAAIniB,eAAgBwnB,KAAKkK,GAAW,OAAAnK,EAAA,MAAM,EAAG,OAwIpH,OAtIA6K,EAAiB58C,UAAU88C,wBAA0B,WACjD,OAAO,GAAUn9C,UAAM,OAAQ,GAAQ,WACnC,IAAI2zC,EAAmCnyC,EACvC,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EACD,YAAgElV,IAA1De,KAAK8O,QAAQ4jC,OAAOiB,kCAAyD,CAAC,EAAa,IACjGnyC,EAAKxB,KAAK8O,QAAQ4jC,OAAOiB,kCAClB,CAAC,EAAa,IACzB,KAAK,EAAG,MAAO,CAAC,EAAa3zC,KAAK8O,QAAQilC,kCAC1C,KAAK,EACDvyC,EAAKM,EAAGsS,OACRtS,EAAGqS,MAAQ,EACf,KAAK,EAED,OADAw/B,EAAoCnyC,EAC7B,CAAC,EAAck7C,GAAoC,OAAAtK,EAAA,MAAM,EAAuC,IAApCuB,GAA2C3zC,KAAKk9C,cAAel9C,KAAK8O,kBAK3JmuC,EAAiB58C,UAAU+8C,sBAAwB,SAAUC,EAAYzK,GACrE,IAAIlxC,EAAQ1B,KAEZ,YADc,IAAV4yC,IAAoBA,EAAQ,GACzB,eAAK5yC,KAAK8O,QAAQk+B,IAAIniB,SAAS,CAAElG,MAAO04B,KAAehL,KAAK,OAAAQ,GAAA,OAAU,SAAUluB,GACnF,OAAc,IAAViuB,EACO,OAAAW,GAAA,MAAG5uB,GAEP,OAAA24B,GAAA,MAAM34B,EAAMc,OAAO0tB,MAAOP,EAAQ,GAAGP,KAAK,OAAAkL,GAAA,MAAU54B,GAAQ,OAAA64B,GAAA,OAAU,SAAUrK,GAAS,OAAO,GAAUzxC,OAAO,OAAQ,GAAQ,WACpI,OAAO,GAAY1B,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAK8O,QAAQk+B,IAAIniB,SAAS,CAAElG,MAAOpY,OAAO4mC,qBAKhF8J,EAAiB58C,UAAUo9C,+BAAiC,SAAUj8C,GAClE,IAAIk8C,EAAkBl8C,EAAGk8C,gBACzB,OAAO,GAAU19C,UAAM,OAAQ,GAAQ,WACnC,IAAI29C,EAAoB77C,EAAIE,EAC5B,OAAO,GAAYhC,MAAM,SAAUkC,GAC/B,OAAQA,EAAGiS,OACP,KAAK,EAMD,OALAwpC,EAAqB,GACjBD,GACAC,EAAmB78C,KAAKd,KAAKo9C,sBAAsBM,IAEvD17C,GAAMF,EAAK67C,GAAoB78C,KACxB,CAAC,EAAad,KAAKm9C,2BAC9B,KAAK,EAED,OADAn7C,EAAG6R,MAAM/R,EAAI,CAACI,EAAGkS,SACV,CAAC,EAAcqG,GAAA,KAAO5G,WAAM,EAAQ,GAAc,GAAI,GAAO8pC,cAKxFV,EAAiB58C,UAAUu9C,gBAAkB,SAAUjxB,EAAM+lB,GAEzD,YADe,IAAXA,IAAqBA,EAAS,IAC3B,GAAU1yC,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EAAIM,EACR,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAID,OAHA3S,EAAK,GAAgB85C,KACrBx5C,EAAK,MAAC,EAAQ6qB,EACV3sB,KAAK8O,QAAQunC,SACV,CAAC,EAAar2C,KAAKy9C,+BAA+B/K,IAC7D,KAAK,EAAG,MAAO,CAAC,EAAc,IAAKlxC,EAAGqS,MAAM,GAAiB/R,EAAG2Y,OAAO,CAACzY,EAAGoS,oBAK3F6oC,EAAiB58C,UAAUw9C,qBAAuB,SAAUlxB,EAAM+lB,GAE9D,YADe,IAAXA,IAAqBA,EAAS,IAC3B,GAAU1yC,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EAAIM,EACR,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAID,OAHA3S,EAAK,GAAqB85C,KAC1Bx5C,EAAK,MAAC,EAAQ6qB,EACV3sB,KAAK8O,QAAQunC,SACV,CAAC,EAAar2C,KAAKy9C,+BAA+B/K,IAC7D,KAAK,EAAG,MAAO,CAAC,EAAc,IAAKlxC,EAAGqS,MAAM,GAAsB/R,EAAG2Y,OAAO,CAACzY,EAAGoS,oBAKhG6oC,EAAiB58C,UAAUy9C,2BAA6B,SAAUnxB,EAAM+lB,GAEpE,YADe,IAAXA,IAAqBA,EAAS,IAC3B,GAAU1yC,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EAAIM,EACR,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAID,OAHA3S,EAAK,GAA2B85C,KAChCx5C,EAAK,MAAC,EAAQ6qB,EACV3sB,KAAK8O,QAAQunC,SACV,CAAC,EAAar2C,KAAKy9C,+BAA+B/K,IAC7D,KAAK,EAAG,MAAO,CAAC,EAAc,IAAKlxC,EAAGqS,MAAM,GAA4B/R,EAAG2Y,OAAO,CAACzY,EAAGoS,oBAKtG6oC,EAAiB58C,UAAU09C,0BAA4B,SAAUpxB,EAAM+lB,GAEnE,YADe,IAAXA,IAAqBA,EAAS,IAC3B,GAAU1yC,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EAAIM,EACR,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAID,OAHA3S,EAAK,GAA0B85C,KAC/Bx5C,EAAK,MAAC,EAAQ6qB,EACV3sB,KAAK8O,QAAQunC,SACV,CAAC,EAAar2C,KAAKy9C,+BAA+B/K,IAC7D,KAAK,EAAG,MAAO,CAAC,EAAc,IAAKlxC,EAAGqS,MAAM,GAA2B/R,EAAG2Y,OAAO,CAACzY,EAAGoS,oBAKrG6oC,EAAiB58C,UAAU2uC,2BAA6B,SAAUriB,EAAM+lB,GAEpE,YADe,IAAXA,IAAqBA,EAAS,IAC3B,GAAU1yC,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EAAIM,EACR,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAID,OAHA3S,EAAK,GAA2B85C,KAChCx5C,EAAK,MAAC,EAAQ6qB,EACV3sB,KAAK8O,QAAQunC,SACV,CAAC,EAAar2C,KAAKy9C,+BAA+B/K,IAC7D,KAAK,EAAG,MAAO,CAAC,EAAc,IAAKlxC,EAAGqS,MAAM,GAA4B/R,EAAG2Y,OAAO,CAACzY,EAAGoS,oBAK/F6oC,EA7I0B,GAgJjC,GAA+B,SAAUnkC,GAEzC,SAASklC,EAAclvC,GACnB,OAAOgK,EAAO3S,KAAKnG,KAAM8O,IAAY9O,KA0CzC,OA5CA,GAAUg+C,EAAellC,GAIzBklC,EAAc39C,UAAU4pB,WAAa,SAAUrN,GAC3C,OAAO,GAAU5c,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAKgtC,IAAI/iB,WAAWrN,WAItDohC,EAAc39C,UAAUiqB,YAAc,SAAU1N,GAC5C,OAAO,GAAU5c,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAKgtC,IAAI1iB,YAAY1N,WAIvDohC,EAAc39C,UAAU49C,SAAW,SAAUtc,EAAK8V,GAC9C,OAAO,GAAUz3C,UAAM,OAAQ,GAAQ,WACnC,IAAIyvC,EAAW4I,EAAUrC,EAAax5B,EAAOhb,EAC7C,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAMD,OALAs7B,EAAY,CACRC,KAAM/mB,EAAOitB,WACbjU,IAAKA,EACL8V,OAAQA,GAEL,CAAC,EAAaz3C,KAAK+0C,iBAAiB,CAAEtF,UAAW,CAACA,GAAYZ,OAAQlN,KACjF,KAAK,EAED,OADA0W,EAAWv2C,EAAGsS,OACP,CAAC,EAAapU,KAAK8sC,MAAMuL,IACpC,KAAK,EAID,OAHArC,EAAcl0C,EAAGsS,OACjBoI,EAAQw5B,EAAYE,QAAU,mIAC9B10C,EAAK,GAAU85C,KACR,CAAC,EAAat7C,KAAKgtC,IAAIthB,gBAAgBlP,IAClD,KAAK,EAAG,MAAO,CAAC,EAAc,IAAKhb,EAAGqS,MAAM,GAAW,MAAC,EAAQ/R,EAAGsS,OAAQ,GAAS,GAAS,GAAI4hC,GAAc,CAAEE,QAAS15B,IAAU,GAC5Hxc,KAAK8O,QAAQunC,oBAK9B2H,EA7CuB,CA8ChC,IAEEE,GAAoB,IACpBC,GAA6B,EAC7BC,GAA4B,GAC5BC,GAAa,IAoCbC,GAA0B,WAC1B,SAASA,EAASC,EAAgBC,EAAeC,EAAQC,EAIzDC,QACyB,IAAjBA,IAA2BA,EAAeT,IAC9Cl+C,KAAKu+C,eAAiBA,EACtBv+C,KAAKw+C,cAAgBA,EACrBx+C,KAAKy+C,OAASA,EACdz+C,KAAK0+C,8BAAgCA,EACrC1+C,KAAK2+C,aAAeA,EAkHxB,OAhHA5rC,OAAOsE,eAAeinC,EAASj+C,UAAW,eAAgB,CAItD2W,IAAK,WACD,OAAOhX,KAAK4+C,QAAQruC,OAAOvQ,KAAKqvC,cAAgB9+B,OAAOvQ,KAAK0+C,iCAEhEpnC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeinC,EAASj+C,UAAW,eAAgB,CAItD2W,IAAK,WACD,IAAIvG,EAAQQ,KAAK4tC,IAAItuC,OAAOvQ,KAAKw+C,eAAgB,GACjD,OAAO/tC,EAAQ,EAAIA,EAAQ,GAE/B6G,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeinC,EAASj+C,UAAW,WAAY,CAIlD2W,IAAK,WACD,OAAOhX,KAAK4+C,QAAQruC,OAAOvQ,KAAKu+C,gBAAkB,IAAOF,KAE7D/mC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeinC,EAASj+C,UAAW,oBAAqB,CAC3D2W,IAAK,WACD,OAASzG,OAAOvQ,KAAKu+C,gBAAkB,IAAOF,IAAcD,GAA4B7tC,OAAOvQ,KAAKy+C,QAAUN,IAElH7mC,YAAY,EACZC,cAAc,IAElB+mC,EAASj+C,UAAUu+C,QAAU,SAAUE,GACnC,OAAO7tC,KAAKC,KAAKX,OAAOuuC,KAE5B/rC,OAAOsE,eAAeinC,EAASj+C,UAAW,kBAAmB,CAIzD2W,IAAK,WACD,OAAOhX,KAAK4+C,QAAQV,GAAoBl+C,KAAK++C,oBAEjDznC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeinC,EAASj+C,UAAW,oBAAqB,CAI3D2W,IAAK,WACD,OAAOhX,KAAK4+C,QAAQ5+C,KAAK++C,kBAAwC,EAApBb,KAEjD5mC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeinC,EAASj+C,UAAW,oBAAqB,CAI3D2W,IAAK,WACD,OAAQ/F,KAAK4tC,IAAItuC,OAAOvQ,KAAK2+C,cAAeT,IAAqBl+C,KAAK4+C,QAAQ5+C,KAAK++C,oBAEvFznC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeinC,EAASj+C,UAAW,YAAa,CAInD2W,IAAK,WACD,OAAOhX,KAAKg/C,gBAAkBh/C,KAAKi/C,cAEvC3nC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeinC,EAASj+C,UAAW,mBAAoB,CAK1D2W,IAAK,WACD,OAAOzG,OAAOvQ,KAAKu+C,iBAEvBjnC,YAAY,EACZC,cAAc,IAElB+mC,EAASY,qCAAuC,SAAUC,GACtD,IAIIR,EAJAS,EAAgB,EAChB/P,EAAe,EACfoP,EAAS,EACTC,EAAgC,EAWpC,OATAS,EAAmBj+C,SAAQ,SAAUo1C,GACjC8I,GAAiB9I,EAAS8I,cAC1B/P,GAAgBiH,EAASjH,aACzBoP,GAAUnI,EAASmI,OACnBC,EAAgCztC,KAAK4tC,IAAIvI,EAASoI,8BAA+BA,GAC7EpI,EAASqI,eACTA,EAAeA,EAAeA,EAAerI,EAASqI,aAAerI,EAASqI,iBAG/E,IAAIL,EAASc,EAAe/P,EAAcoP,EAAQC,EAA+BC,IAE5FL,EAASe,2CAA6C,SAAUF,GAC5D,OAAOA,EAAmBh1C,KAAI,SAAU6C,GAAK,OAAO,IAAIsxC,EAAStxC,EAAEoyC,cAAepyC,EAAEqiC,aAAcriC,EAAEyxC,OAAQzxC,EAAE0xC,8BAA+B1xC,EAAE2xC,kBAE5IL,EA7HkB,GAgIzBgB,GAAc,SAAUC,EAAkBC,GAC1C,MAAO,CACHtQ,IAAqC,qBAAzBqQ,EAAiBrQ,IAAsBsQ,EAActQ,IAAMqQ,EAAiBrQ,IACxFE,SAA+C,qBAA9BmQ,EAAiBnQ,SAC5BoQ,EAAcpQ,SACdmQ,EAAiBnQ,SACvBC,aAAuD,qBAAlCkQ,EAAiBlQ,aAChCmQ,EAAcnQ,aACdkQ,EAAiBlQ,eAI3BoQ,GAAiB,sGACjB,GAAqC,SAAU3mC,GAE/C,SAAS4mC,IACL,IAAIh+C,EAAmB,OAAXoX,GAAmBA,EAAOjF,MAAM7T,KAAM4T,YAAc5T,KAIhE,OAHA0B,EAAMi+C,mBAAqB,IAC3Bj+C,EAAMk+C,oBAAsB,IAC5Bl+C,EAAMm+C,eAAiB,IAChBn+C,EA2dX,OAjeA,GAAUg+C,EAAqB5mC,GAS/B4mC,EAAoBr/C,UAAUy/C,iBAAmB,SAAUne,EAAKoe,EAAWC,GACvE,OAAO,GAAUhgD,UAAM,OAAQ,GAAQ,WACnC,IAAI6sB,EAASozB,EAA8BC,EAA0BC,EAAkCC,EACvG,OAAO,GAAYpgD,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKgtC,IAAI/iB,WAAW0X,IACjD,KAAK,EAGD,OAFA9U,EAAUrrB,EAAG4S,OACb6rC,EAA+BF,EAAUE,6BAA8BC,EAA2BH,EAAUG,yBAA0BC,EAAmCJ,EAAUI,iCAAkCC,EAAgBL,EAAUK,cACxO,CAAC,EAAc,CACdlR,IAAK,EACLE,SAAU4Q,EACJ/uC,KAAKkB,MAAMnS,KAAKqgD,0BAA0BH,EAA0BD,EAA8BD,GAAaM,YAC/GL,EAA6BK,WACnCjR,aAAcp+B,KAAKkB,MAAM,IAAUipC,IAAIvuB,EAAQ0hB,UAAU6R,GAAgBD,GAAkCG,sBAUvIZ,EAAoBr/C,UAAUggD,0BAA4B,SAAUE,EAAeC,EAAYR,GAC3F,OAAO,IAAU5E,IAAIoF,EAAYD,EAAcE,IAAIT,EAAc,KAErEN,EAAoBr/C,UAAUqgD,4CAA8C,SAAUtwC,EAAShC,EAAMuyC,GACjG,IAAIj/C,EAAQ1B,KACR64C,EAAmBtH,GAAuB,CAAEjuB,SAAU,CAAClT,KACvD0oC,EAAW,EACX8H,EAAgB,EAChB7H,EAAe,EAgBnB,OAfAF,EAAiB33C,SAAQ,SAAUoL,GAC/BysC,GACI,yBAA0BzsC,GAAiD,qBAAhCA,EAAO+sC,qBAC5C/sC,EAAO+sC,qBAAqB16C,OAAS+C,EAAMk+C,oBAC3C,EACV7G,GAAgB,mCAAoCzsC,EAAS5K,EAAMi+C,mBAAqB,EACxF7G,GAAYvoC,OAAOjE,EAAOgtC,eAAiB,EAC3CsH,GAAiBrwC,OAAOjE,EAAOu0C,oBAAsB,EACrD9H,GACI,2BAA4BzsC,GAASiE,OAAOjE,EAAOitC,yBAA+B,KAEzE,IAAbT,GAAoC,IAAlB8H,IAElBA,EAA2B,IAAX9H,GAEhBlI,GAAYxgC,GACL,CACHgvC,cAAewB,GAAiB,EAChCvR,aAAc9+B,OAAOwoC,GAAgB,GACrC0F,OAAQrwC,EACRswC,8BAA+BiC,EAAYL,YAIxC,CACHlB,cAAe,EACf/P,aAAc,EACdoP,OAAQrwC,EACRswC,8BAA+BiC,EAAYL,WAC3C3B,aAAc,IAI1Be,EAAoBr/C,UAAUygD,gBAAkB,SAAU7M,EAAQ8L,GAC9D,OAAO,GAAU//C,UAAM,OAAQ,GAAQ,WACnC,IAAIq4C,EAAU72C,EAAI00C,EAASp0C,EAAIirC,EAAQzpB,EAAUmsB,EAAW2G,EAAYgK,EAAejP,EAAQ6O,EAC3Fh+C,EACAN,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAUkC,GAC/B,OAAQA,EAAGiS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK+0C,iBAAiBd,IACnD,KAAK,EAED,OADAoE,EAAWn2C,EAAGkS,OACP,CAAC,EAAapU,KAAK8sC,MAAMuL,IACpC,KAAK,EAKD,OAJA72C,EAAKU,EAAGkS,OAAQ8hC,EAAU10C,EAAG00C,QAASp0C,EAAKN,EAAGu0C,KAAMhJ,EAASjrC,EAAGirC,OAAQzpB,EAAWxhB,EAAGwhB,SACtFthB,EAAK,CACDytC,UAAW,CAAE1C,OAAQA,EAAQzpB,SAAUA,EAAU0zB,UAAWyI,KAEzD,CAAC,EAAaz/C,KAAKgtC,IAAI/gB,cAClC,KAAK,EAGD,OAFajqB,EAAG++C,SAAW7+C,EAAGkS,OAA9Bq7B,EACIztC,EACG,CAAC,EAAahC,KAAKm2C,SAAS1G,IACvC,KAAK,EAKD,GAJA2G,EAAcl0C,EAAGkS,OAAQgiC,WACzBgK,EAAgBL,EAAUK,cAC1BjP,EAAS,GAAc,GAAc,GAAI,GAAOQ,GAAcyE,EAAY,iBAAkB,GAAOzE,GAAcyE,KAE7GjF,EAAOxyC,OACP,MAAM,IAAIuyC,GAAoBC,GASlC,OAPA6O,EAAc,EACVh/C,MAAMC,QAAQgzC,EAAOxE,YAAcwE,EAAOxE,UAAU9wC,OAAS,IAC7DqhD,EACoC,WAAhC5J,EAAW9yB,SAAS,GAAGosB,KACjBuE,EAAOxE,UAAU9wC,OAAS,EAC1Bs1C,EAAOxE,UAAU9wC,QAExB,CAAC,EAAcy3C,EAAW9yB,SAASnZ,KAAI,SAAU6C,GAChD,OAAOtL,EAAMg/C,4CAA4C1zC,EAE9C,WAAXA,EAAE0iC,KAAoBhuC,EAAMm+C,eAAiB,EAAI3J,EAAQv3C,OAAS,EAAIqhD,EAAaI,eAc/GV,EAAoBr/C,UAAU2gD,UAAY,SAAUx/C,GAChD,IAAI0tC,EAAM1tC,EAAG0tC,IAAKG,EAAe7tC,EAAG6tC,aAAcD,EAAW5tC,EAAG4tC,SAAU3hB,EAAO,GAAOjsB,EAAI,CAAC,MAAO,eAAgB,aACpH,OAAO,GAAUxB,UAAM,OAAQ,GAAQ,WACnC,IAAI2hC,EAAKsf,EAAmBC,EAAgBzsC,EAAI3S,EAAIq/C,EAAgB7sC,EAAKtS,EAAIm9C,EAC7E,OAAO,GAAYn/C,MAAM,SAAUkC,GAC/B,OAAQA,EAAGiS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAED,OADA3L,EAAMz/B,EAAGkS,OACF,CAAC,EAAapU,KAAKgtC,IAAIpiB,gBAClC,KAAK,EAED,OADAq2B,EAAoB/+C,EAAGkS,OAChB,CAAC,EAAapU,KAAK8/C,iBAAiBne,EAAKsf,IACpD,KAAK,EAGD,OAFAC,EAAiBh/C,EAAGkS,OACpBtS,EAAKktC,GACE,CAAC,EAAahvC,KAAK8O,QAAQ8oC,OAAOC,uBAAuB,GAAS,GAAS,GAAIpqB,GAAO6xB,GAAY,CAAEpQ,IAAKA,EAAKG,aAAcA,EAAcD,SAAUA,GAAY8R,MAC3K,KAAK,EAAG,MAAO,CAAC,EAAap/C,EAAG+R,WAAM,EAAQ,CAAC3R,EAAGkS,UAClD,KAAK,EAED,OADAK,EAAKvS,EAAGkS,OACD,CAAC,EAAapU,KAAKu0C,iBAAiB,CAAC9/B,GAAKktB,IACrD,KAAK,EAED,OADAwf,EAAiBj/C,EAAGkS,OACf+sC,EACE,CAAC,EAAanhD,KAAKohD,YAAY,CAAC3sC,GAAKktB,IADhB,CAAC,EAAa,GAE9C,KAAK,EAED,OADA3/B,EAAKE,EAAGkS,OACD,CAAC,EAAa,GACzB,KAAK,EACDpS,EAAKyS,EACLvS,EAAGiS,MAAQ,EACf,KAAK,EAED,OADAG,EAAMtS,EACC,CAAC,EAAahC,KAAK8gD,gBAAgB,CAAErR,UAAWn7B,EAAKu6B,OAAQlN,GAAOsf,IAC/E,KAAK,GAKD,OAJA9B,EAAqBj9C,EAAGkS,OACpB+sC,GACAhC,EAAmBkC,QAEhB,CAAC,EAAc/C,GAASY,qCAAqCC,YAaxFO,EAAoBr/C,UAAUihD,SAAW,SAAU9/C,GAC/C,IAAI0tC,EAAM1tC,EAAG0tC,IAAKG,EAAe7tC,EAAG6tC,aAAcD,EAAW5tC,EAAG4tC,SAAU3hB,EAAO,GAAOjsB,EAAI,CAAC,MAAO,eAAgB,aACpH,OAAO,GAAUxB,UAAM,OAAQ,GAAQ,WACnC,IAAI2hC,EAAKsf,EAAmBC,EAAgBzsC,EAAI0sC,EAAgB7sC,EAAKxS,EAAIq9C,EACzE,OAAO,GAAYn/C,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAED,OADA3L,EAAM3/B,EAAGoS,OACF,CAAC,EAAapU,KAAKgtC,IAAIpiB,gBAClC,KAAK,EAED,OADAq2B,EAAoBj/C,EAAGoS,OAChB,CAAC,EAAapU,KAAK8/C,iBAAiBne,EAAKsf,IACpD,KAAK,EAED,OADAC,EAAiBl/C,EAAGoS,OACb,CAAC,EAAay7B,GAAwB,GAAS,GAAS,GAAIpiB,GAAO6xB,GAAY,CAAEpQ,IAAKA,EAAKG,aAAcA,EAAcD,SAAUA,GAAY8R,MACxJ,KAAK,EAED,OADAzsC,EAAKzS,EAAGoS,OACD,CAAC,EAAapU,KAAKu0C,iBAAiB,CAAC9/B,GAAKktB,IACrD,KAAK,EAED,OADAwf,EAAiBn/C,EAAGoS,OACf+sC,EACE,CAAC,EAAanhD,KAAKohD,YAAY,CAAC3sC,GAAKktB,IADhB,CAAC,EAAa,GAE9C,KAAK,EAED,OADA7/B,EAAKE,EAAGoS,OACD,CAAC,EAAa,GACzB,KAAK,EACDtS,EAAK2S,EACLzS,EAAGmS,MAAQ,EACf,KAAK,EAED,OADAG,EAAMxS,EACC,CAAC,EAAa9B,KAAK8gD,gBAAgB,CAAErR,UAAWn7B,EAAKu6B,OAAQlN,GAAOsf,IAC/E,KAAK,EAKD,OAJA9B,EAAqBn9C,EAAGoS,OACpB+sC,GACAhC,EAAmBkC,QAEhB,CAAC,EAAc/C,GAASY,qCAAqCC,YAaxFO,EAAoBr/C,UAAUkhD,YAAc,SAAU//C,GAClD,IAAI0tC,EAAM1tC,EAAG0tC,IAAKE,EAAW5tC,EAAG4tC,SAAUC,EAAe7tC,EAAG6tC,aAAc5hB,EAAO,GAAOjsB,EAAI,CAAC,MAAO,WAAY,iBAChH,OAAO,GAAUxB,UAAM,OAAQ,GAAQ,WACnC,IAAI2hC,EAAK6f,EAAiBP,EAAmBC,EAAgBzsC,EAAI0sC,EAAgB7sC,EAAKxS,EAAIq9C,EAC1F,OAAO,GAAYn/C,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAGD,OAFA3L,EAAM3/B,EAAGoS,OACTotC,EAAkB/zB,EAAKohB,QAAUlN,EAC1B,CAAC,EAAa3hC,KAAKgtC,IAAIpiB,gBAClC,KAAK,EAED,OADAq2B,EAAoBj/C,EAAGoS,OAChB,CAAC,EAAapU,KAAK8/C,iBAAiB0B,EAAiBP,IAChE,KAAK,EAED,OADAC,EAAiBl/C,EAAGoS,OACb,CAAC,EAAa67B,GAA2B,GAAS,GAAS,GAAIxiB,GAAO6xB,GAAY,CAAEpQ,IAAKA,EAAKG,aAAcA,EAAcD,SAAUA,GAAY8R,MAC3J,KAAK,EAED,OADAzsC,EAAKzS,EAAGoS,OACD,CAAC,EAAapU,KAAKu0C,iBAAiB,CAAC9/B,GAAKktB,IACrD,KAAK,EAED,OADAwf,EAAiBn/C,EAAGoS,OACf+sC,EACE,CAAC,EAAanhD,KAAKohD,YAAY,CAAC3sC,GAAKktB,IADhB,CAAC,EAAa,GAE9C,KAAK,EAED,OADA7/B,EAAKE,EAAGoS,OACD,CAAC,EAAa,GACzB,KAAK,EACDtS,EAAK2S,EACLzS,EAAGmS,MAAQ,EACf,KAAK,EAED,OADAG,EAAMxS,EACC,CAAC,EAAa9B,KAAK8gD,gBAAgB,CAAErR,UAAWn7B,EAAKu6B,OAAQlN,GAAOsf,IAC/E,KAAK,EAKD,OAJA9B,EAAqBn9C,EAAGoS,OACpB+sC,GACAhC,EAAmBkC,QAEhB,CAAC,EAAc/C,GAASY,qCAAqCC,YAWxFO,EAAoBr/C,UAAUk4C,MAAQ,SAAUtE,GAC5C,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAI2hC,EAAKsR,EAAYgO,EAAmBC,EAAgBpJ,EAAUC,EAAYtuB,EAAOjoB,EAAIM,EAAIE,EAAIE,EAAIqU,EAAIC,EAAI2d,EAAIsM,EAAIpqB,EAAO8qC,EAAgBzgB,EAAIye,EAC5I7oC,EAAKqqB,EACT,OAAO,GAAY3gC,MAAM,SAAUyhD,GAC/B,OAAQA,EAAGttC,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAGD,OAFA3L,EAAM8f,EAAGrtC,OACT6+B,EAAa,GACN,CAAC,EAAajzC,KAAKgtC,IAAIpiB,gBAClC,KAAK,EAED,OADAq2B,EAAoBQ,EAAGrtC,OAChB,CAAC,EAAapU,KAAK8/C,iBAAiBne,EAAKsf,EAAmBhN,EAAOt1C,SAC9E,KAAK,EACDuiD,EAAiBO,EAAGrtC,OACpBqtC,EAAGttC,MAAQ,EACf,KAAK,EACDstC,EAAGptC,KAAKvT,KAAK,CAAC,EAAG,GAAI,GAAI,KACzBg3C,EAAW,GAAS7D,GAAS8D,EAAaD,EAASzxC,OACnDo7C,EAAGttC,MAAQ,EACf,KAAK,EACD,GAAM4jC,EAAWzxC,KAAM,MAAO,CAAC,EAAa,IAG5C,OAFAmjB,EAAQsuB,EAAW55C,MACnBqD,EAAKioB,EAAMimB,KACHluC,GACJ,KAAKmnB,EAAOonB,YAAa,MAAO,CAAC,EAAa,GAC9C,KAAKpnB,EAAOwmB,YAAa,MAAO,CAAC,EAAa,GAC9C,KAAKxmB,EAAOunB,WAAY,MAAO,CAAC,EAAa,IAC7C,KAAKvnB,EAAOitB,WAAY,MAAO,CAAC,EAAa,IAEjD,MAAO,CAAC,EAAa,IACzB,KAAK,EAED,OADA5zC,GAAMF,EAAKmxC,GAAYnyC,KAChB,CAAC,EAAa+uC,GAAwB,GAAS,GAAS,GAAIpmB,GAAQ61B,GAAY71B,EAAOy3B,MAClG,KAAK,EAED,OADAl/C,EAAG6R,MAAM/R,EAAI,CAAC2/C,EAAGrtC,SACV,CAAC,EAAa,IACzB,KAAK,EAGD,OAFAmC,GAAMrU,EAAK+wC,GAAYnyC,KACvB0V,EAAKw4B,GACE,CAAC,EAAahvC,KAAK8O,QAAQ8oC,OAAOC,uBAAuB,GAAS,GAAS,GAAIpuB,GAAQ61B,GAAY71B,EAAOy3B,MACrH,KAAK,EAAG,MAAO,CAAC,EAAa1qC,EAAG3C,WAAM,EAAQ,CAAC4tC,EAAGrtC,UAClD,KAAK,GAED,OADAmC,EAAG1C,MAAM3R,EAAI,CAACu/C,EAAGrtC,SACV,CAAC,EAAa,IACzB,KAAK,GAED,OADAqsB,GAAMtM,EAAK8e,GAAYnyC,KAChB,CAAC,EAAamvC,GAA2B,GAAS,GAAS,GAAIxmB,GAAQ61B,GAAY71B,EAAOy3B,MACrG,KAAK,GAED,OADAzgB,EAAG5sB,MAAMsgB,EAAI,CAACstB,EAAGrtC,SACV,CAAC,EAAa,IACzB,KAAK,GAED,OADA6+B,EAAWnyC,KAAK,GAAS,GAAS,GAAI2oB,GAAQy3B,IACvC,CAAC,EAAa,IACzB,KAAK,GAAI,MAAM,IAAIj+C,MAAM,+BAAiCwmB,EAAMimB,MAChE,KAAK,GAED,OADAqI,EAAaD,EAASzxC,OACf,CAAC,EAAa,GACzB,KAAK,GAAI,MAAO,CAAC,EAAa,IAC9B,KAAK,GAGD,OAFAgQ,EAAQorC,EAAGrtC,OACXkC,EAAM,CAAE/P,MAAO8P,GACR,CAAC,EAAa,IACzB,KAAK,GACD,IACQ0hC,IAAeA,EAAWzxC,OAASq6B,EAAKmX,EAASphC,SAASiqB,EAAGx6B,KAAK2xC,GAE1E,QAAU,GAAIxhC,EAAK,MAAMA,EAAI/P,MAC7B,MAAO,CAAC,GACZ,KAAK,GAAI,MAAO,CAAC,EAAavG,KAAKu0C,iBAAiBtB,EAAYtR,IAChE,KAAK,GAED,OADAwf,EAAiBM,EAAGrtC,OACf+sC,EACE,CAAC,EAAanhD,KAAKohD,YAAYnO,EAAYtR,IADtB,CAAC,EAAa,IAE9C,KAAK,GAED,OADAjB,EAAK+gB,EAAGrtC,OACD,CAAC,EAAa,IACzB,KAAK,GACDssB,EAAKuS,EACLwO,EAAGttC,MAAQ,GACf,KAAK,GAED,OADA8+B,EAAavS,EACN,CAAC,EAAa1gC,KAAK8gD,gBAAgB,CAAErR,UAAWwD,EAAYpE,OAAQlN,GAAOsf,IACtF,KAAK,GAED,OADA9B,EAAqBsC,EAAGrtC,OACjB,CAAC,EAAckqC,GAASe,2CAA2CF,YAa9FO,EAAoBr/C,UAAUqhD,iBAAmB,SAAUzN,GACvD,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAI2hC,EAAKsf,EAAmBC,EAAgBzsC,EAAI0sC,EAAgB7sC,EAAK9S,EAAI29C,EACzE,OAAO,GAAYn/C,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAED,OADA3L,EAAM7/B,EAAGsS,OACF,CAAC,EAAapU,KAAKgtC,IAAIpiB,gBAClC,KAAK,EAED,OADAq2B,EAAoBn/C,EAAGsS,OAChB,CAAC,EAAapU,KAAK8/C,iBAAiBne,EAAKsf,IACpD,KAAK,EAED,OADAC,EAAiBp/C,EAAGsS,OACb,CAAC,EAAa+7B,GAAgC,GAAS,GAAS,GAAI8D,GAASiN,GAAiBvf,IACzG,KAAK,EAED,OADAltB,EAAK3S,EAAGsS,OACD,CAAC,EAAapU,KAAKu0C,iBAAiB,CAAC9/B,GAAKktB,IACrD,KAAK,EAED,OADAwf,EAAiBr/C,EAAGsS,OACf+sC,EACE,CAAC,EAAanhD,KAAKohD,YAAY,CAAC3sC,GAAKktB,IADhB,CAAC,EAAa,GAE9C,KAAK,EAED,OADAngC,EAAKM,EAAGsS,OACD,CAAC,EAAa,GACzB,KAAK,EACD5S,EAAKiT,EACL3S,EAAGqS,MAAQ,EACf,KAAK,EAED,OADAG,EAAM9S,EACC,CAAC,EAAaxB,KAAK8gD,gBAAgB,CAAErR,UAAWn7B,EAAKu6B,OAAQlN,GAAOsf,IAC/E,KAAK,EAKD,OAJA9B,EAAqBr9C,EAAGsS,OACpB+sC,GACAhC,EAAmBkC,QAEhB,CAAC,EAAc/C,GAASY,qCAAqCC,YAaxFO,EAAoBr/C,UAAU83C,OAAS,SAAUlE,GAC7C,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAI2hC,EAAKsf,EAAmBC,EAAgBzsC,EAAIjT,EAAIM,EAAIq9C,EACxD,OAAO,GAAYn/C,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAED,OADA3L,EAAM3/B,EAAGoS,OACF,CAAC,EAAapU,KAAKw0C,wBAAwB7S,IACtD,KAAK,EACD,OAAK3/B,EAAGoS,OACD,CAAC,EAAapU,KAAKgtC,IAAIpiB,gBADP,CAAC,EAAa,GAEzC,KAAK,EAED,OADAq2B,EAAoBj/C,EAAGoS,OAChB,CAAC,EAAapU,KAAK8/C,iBAAiBne,EAAKsf,IACpD,KAAK,EAID,OAHAC,EAAiBl/C,EAAGoS,OACpB5S,EAAK4uC,GACLtuC,EAAK,CAAC,GAAS,GAAS,GAAImyC,GAASiN,GAAiBvf,GAC/C,CAAC,EAAa3hC,KAAKs0C,OAAOzU,aACrC,KAAK,EAAG,MAAO,CAAC,EAAar+B,EAAGqS,WAAM,EAAQ/R,EAAG2Y,OAAO,CAACzY,EAAGoS,WAC5D,KAAK,EAED,OADAK,EAAKzS,EAAGoS,OACD,CAAC,EAAapU,KAAK8gD,gBAAgB,CAAErR,UAAWh7B,EAAIo6B,OAAQlN,GAAOsf,IAC9E,KAAK,EAED,OADA9B,EAAqBn9C,EAAGoS,OACjB,CAAC,EAAckqC,GAASY,qCAAqCC,IACxE,KAAK,EAAG,MAAO,CAAC,WAKhCO,EAAoBr/C,UAAU+gD,YAAc,SAAU3sC,EAAIktB,GACtD,OAAO,GAAU3hC,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EAAIM,EAAIE,EAAIE,EAChB,OAAO,GAAYlC,MAAM,SAAUuW,GAC/B,OAAQA,EAAGpC,OACP,KAAK,EAQD,OAPArS,GAAMN,EAAKiT,GAAI+jC,QACfx2C,EAAKouC,GACLluC,EAAK,CAAC,GAAS,CACPgtC,IAAKxC,GAAY2D,OACjBjB,SAAU3C,GAAkB4D,OAC5BhB,aAAc1C,GAAsB0D,SACpC1O,GACD,CAAC,EAAa3hC,KAAKs0C,OAAOzU,aACrC,KAAK,EAAG,MAAO,CAAC,EAAa79B,EAAG6R,WAAM,EAAQ3R,EAAGuY,OAAO,CAAClE,EAAGnC,WAC5D,KAAK,EAED,OADAtS,EAAG+R,MAAMrS,EAAI,CAAC+U,EAAGnC,SACV,CAAC,EAAcK,WAKnCirC,EAle6B,CAmetC,IAOEiC,GAAmC,SAAU7oC,GAE7C,SAAS6oC,EAAkBh1B,EAAMsnB,EAAQpF,EAAQiD,EAAKN,EAAS1iC,GAC3D,IAAIpN,EAAQoX,EAAO3S,KAAKnG,KAAM2sB,EAAMmlB,EAAKN,EAAS1iC,IAAY9O,KAG9D,OAFA0B,EAAMuyC,OAASA,EACfvyC,EAAMmtC,OAASA,EACRntC,EA2EX,OAhFA,GAAUigD,EAAmB7oC,GAO7B/F,OAAOsE,eAAesqC,EAAkBthD,UAAW,mBAAoB,CACnE2W,IAAK,WACD,IAAI4qC,EAAe5gD,MAAMC,QAAQjB,KAAKwxC,UAClCxxC,KAAKwxC,QAAQ3vB,MAAK,SAAUpN,GAAM,MAAmB,eAAZA,EAAGi7B,QAC5CpjC,EAASs1C,GAAgBA,EAAar+B,UAAYq+B,EAAar+B,SAASC,iBAC5E,OAAOlX,QAAkBrN,GAE7BqY,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAesqC,EAAkBthD,UAAW,SAAU,CACzD2W,IAAK,WACD,IAAI6hC,EAAmB74C,KAAK64C,iBAC5B,OAAIA,EACOA,EAAiBj5C,OAGjB,WAGf0X,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAesqC,EAAkBthD,UAAW,WAAY,CAC3D2W,IAAK,WACD,OAAOhX,KAAK+sB,UAEhBzV,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAesqC,EAAkBthD,UAAW,sBAAuB,CACtE2W,IAAK,WACD,OAAOhX,KAAK+sB,WAAa/sB,KAAK6uC,QAElCv3B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAesqC,EAAkBthD,UAAW,MAAO,CACtD2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAO/E,KAEvB53B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAesqC,EAAkBthD,UAAW,WAAY,CAC3D2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOtE,WAEvBr4B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAesqC,EAAkBthD,UAAW,eAAgB,CAC/D2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOrE,eAEvBt4B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAesqC,EAAkBthD,UAAW,cAAe,CAC9D2W,IAAK,WACD,IAAI6qC,EAAc7hD,KAAK64C,kBAAoB74C,KAAK64C,iBAAiBS,aACjE,OAAOuI,QAA4B5iD,GAEvCqY,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAesqC,EAAkBthD,UAAW,SAAU,CACzD2W,IAAK,WACD,OAAOhX,KAAK64C,kBAAoB74C,KAAK64C,iBAAiB1H,QAE1D75B,YAAY,EACZC,cAAc,IAEXoqC,EAjF2B,CAkFpC,IAOEG,GAAsC,SAAUhpC,GAEhD,SAASgpC,EAAqBn1B,EAAMsnB,EAAQnC,EAAKN,EAAS1iC,EAASizC,GAC/D,IAAIrgD,EAAQoX,EAAO3S,KAAKnG,KAAM2sB,EAAMmlB,EAAKN,EAAS1iC,IAAY9O,KAC9D0B,EAAMuyC,OAASA,EACfvyC,EAAMqgD,iBAAmBA,EACzB,IAAIC,EAAsBtgD,EAAMm3C,kBAAoBn3C,EAAMm3C,iBAAiBQ,qBAI3E,OAHIr4C,MAAMC,QAAQ+gD,KACdtgD,EAAM4F,gBAAkB06C,EAAoB,IAEzCtgD,EAkGX,OA3GA,GAAUogD,EAAsBhpC,GAWhC/F,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,SAAU,CAC5D2W,IAAK,WACD,IAAI6hC,EAAmB74C,KAAK64C,iBAC5B,OAAIA,EACOA,EAAiBj5C,OAGjB,WAGf0X,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,mBAAoB,CACtE2W,IAAK,WACD,IAAIirC,EAAgBjhD,MAAMC,QAAQjB,KAAKwxC,UACnCxxC,KAAKwxC,QAAQ3vB,MAAK,SAAUpN,GAAM,MAAmB,gBAAZA,EAAGi7B,QAC5CpjC,EAAS21C,GACTlR,GAAsBkR,IACtBA,EAAc1+B,SAASC,iBAC3B,OAAOlX,QAAkBrN,GAE7BqY,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,MAAO,CACzD2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAO/E,KAEvB53B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,WAAY,CAC9D2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOtE,WAEvBr4B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,eAAgB,CAClE2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOrE,eAEvBt4B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,cAAe,CACjE2W,IAAK,WACD,IAAI6qC,EAAc7hD,KAAK64C,kBAAoB74C,KAAK64C,iBAAiBS,aACjE,OAAOuI,QAA4B5iD,GAEvCqY,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,cAAe,CACjE2W,IAAK,WACD,IAAIkrC,EAAcliD,KAAK64C,kBAAoB74C,KAAK64C,iBAAiBU,uBACjE,OAAO2I,QAA4BjjD,GAEvCqY,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,cAAe,CACjE2W,IAAK,WACD,IAAImrC,EAAcniD,KAAK64C,kBAAoB74C,KAAK64C,iBAAiBuJ,aACjE,OAAOD,QAA4BljD,GAEvCqY,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeyqC,EAAqBzhD,UAAW,SAAU,CAC5D2W,IAAK,WACD,OAAOhX,KAAK64C,kBAAoB74C,KAAK64C,iBAAiB1H,QAE1D75B,YAAY,EACZC,cAAc,IAKlBuqC,EAAqBzhD,UAAUyrB,SAAW,SAAU4nB,EAAejB,EAAU7wC,GACzE,OAAO,GAAU5B,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,IAAKnU,KAAKsH,gBACN,MAAM,IAAIrE,MAAM,gDAEpB,MAAO,CAAC,EAAajD,KAAKyzC,aAAaC,EAAejB,EAAU7wC,IACpE,KAAK,EAED,OADAJ,EAAG4S,OACI,CAAC,EAAcpU,KAAK+hD,iBAAiB92C,GAAGjL,KAAKsH,0BAKjEw6C,EA5G8B,CA6GvC,IAKEO,GAAiC,SAAUvpC,GAE3C,SAASupC,EAAgB11B,EAAMsnB,EAAQpF,EAAQiD,EAAKN,EAAS1iC,GACzD,IAAIpN,EAAQoX,EAAO3S,KAAKnG,KAAM2sB,EAAMmlB,EAAKN,EAAS1iC,IAAY9O,KAG9D,OAFA0B,EAAMuyC,OAASA,EACfvyC,EAAMmtC,OAASA,EACRntC,EAsFX,OA3FA,GAAU2gD,EAAiBvpC,GAO3B/F,OAAOsE,eAAegrC,EAAgBhiD,UAAW,mBAAoB,CACjE2W,IAAK,WACD,IAAIsrC,EAAWthD,MAAMC,QAAQjB,KAAKwxC,UAC9BxxC,KAAKwxC,QAAQ3vB,MAAK,SAAUpN,GAAM,MAAmB,WAAZA,EAAGi7B,QAChD,OAAO4S,EAAW,CAACA,GAAY,IAEnChrC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAegrC,EAAgBhiD,UAAW,SAAU,CACvD2W,IAAK,WACD,IAAI6hC,EAAmB74C,KAAK64C,iBACxB0J,EAAW1J,EAAiB,GAChC,OAAI0J,EACOA,EAASh/B,SAASC,iBAAiB5jB,OAGnC,WAGf0X,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAegrC,EAAgBhiD,UAAW,MAAO,CACpD2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAO/E,KAEvB53B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAegrC,EAAgBhiD,UAAW,WAAY,CACzD2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOtE,WAEvBr4B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAegrC,EAAgBhiD,UAAW,eAAgB,CAC7D2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOrE,eAEvBt4B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAegrC,EAAgBhiD,UAAW,YAAa,CAC1D2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAO3D,YAEvBh5B,YAAY,EACZC,cAAc,IAElB8qC,EAAgBhiD,UAAU6zC,QAAU,SAAUzD,EAAK7vC,GAC/C,OAAO6vC,EAAIlzB,QAAO,SAAUC,EAAM5N,GAC9B,OAAOhP,KAAQgP,EAAUW,OAAOX,EAAQhP,IAAS4c,EAAOA,IACzD,IAEPzK,OAAOsE,eAAegrC,EAAgBhiD,UAAW,cAAe,CAC5D2W,IAAK,WACD,OAAOzK,OAAOvM,KAAKk0C,QAAQ3C,GAAuB,CAAEjuB,SAAUtjB,KAAK64C,mBAAqB,kBAE5FvhC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAegrC,EAAgBhiD,UAAW,cAAe,CAC5D2W,IAAK,WACD,OAAOzK,OAAOvM,KAAKk0C,QAAQ3C,GAAuB,CAAEjuB,SAAUtjB,KAAK64C,mBAAqB,4BAE5FvhC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAegrC,EAAgBhiD,UAAW,cAAe,CAC5D2W,IAAK,WACD,OAAOzK,OAAOvM,KAAKk0C,QAAQ3C,GAAuB,CAAEjuB,SAAUtjB,KAAK64C,mBAAqB,kBAE5FvhC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAegrC,EAAgBhiD,UAAW,SAAU,CACvD2W,IAAK,WACD,OAAO26B,GAAc,CAAEruB,SAAUtjB,KAAK64C,oBAE1CvhC,YAAY,EACZC,cAAc,IAEX8qC,EA5FyB,CA6FlC,IAOE,GAAsC,SAAUvpC,GAEhD,SAAS0pC,EAAqB71B,EAAMsnB,EAAQpF,EAAQiD,EAAKN,EAAS1iC,GAC9D,IAAIpN,EAAQoX,EAAO3S,KAAKnG,KAAM2sB,EAAMmlB,EAAKN,EAAS1iC,IAAY9O,KAG9D,OAFA0B,EAAMuyC,OAASA,EACfvyC,EAAMmtC,OAASA,EACRntC,EA6FX,OAlGA,GAAU8gD,EAAsB1pC,GAOhC/F,OAAOsE,eAAemrC,EAAqBniD,UAAW,mBAAoB,CACtE2W,IAAK,WACD,IAAIyrC,EAAgBzhD,MAAMC,QAAQjB,KAAKwxC,UACnCxxC,KAAKwxC,QAAQ3vB,MAAK,SAAUpN,GAAM,MAAmB,gBAAZA,EAAGi7B,QAChD,OAAO+S,EAAgB,CAACA,GAAiB,IAE7CnrC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,SAAU,CAC5D2W,IAAK,WACD,IAAI6hC,EAAmB74C,KAAK64C,iBACxB0J,EAAW1J,EAAiB,GAChC,OAAI0J,EACOA,EAASh/B,SAASC,iBAAiB5jB,OAGnC,WAGf0X,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,SAAU,CAC5D2W,IAAK,WACD,OAAO,IAAI,IAAUhX,KAAKi0C,OAAOnzB,SAErCxJ,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,cAAe,CACjE2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOjE,aAEvB14B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,MAAO,CACzD2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAO/E,KAEvB53B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,WAAY,CAC9D2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOtE,WAEvBr4B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,eAAgB,CAClE2W,IAAK,WACD,OAAOhX,KAAKi0C,OAAOrE,eAEvBt4B,YAAY,EACZC,cAAc,IAElBirC,EAAqBniD,UAAU6zC,QAAU,SAAUzD,EAAK7vC,GACpD,OAAO6vC,EAAIlzB,QAAO,SAAUC,EAAM5N,GAC9B,OAAOhP,KAAQgP,EAAUW,OAAOX,EAAQhP,IAAS4c,EAAOA,IACzD,IAEPzK,OAAOsE,eAAemrC,EAAqBniD,UAAW,cAAe,CACjE2W,IAAK,WACD,OAAOzK,OAAOvM,KAAKk0C,QAAQ3C,GAAuB,CAAEjuB,SAAUtjB,KAAK64C,mBAAqB,kBAE5FvhC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,cAAe,CACjE2W,IAAK,WACD,OAAOzK,OAAOvM,KAAKk0C,QAAQ3C,GAAuB,CAAEjuB,SAAUtjB,KAAK64C,mBAAqB,4BAE5FvhC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,cAAe,CACjE2W,IAAK,WACD,OAAOzK,OAAOvM,KAAKk0C,QAAQ3C,GAAuB,CAAEjuB,SAAUtjB,KAAK64C,mBAAqB,kBAE5FvhC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemrC,EAAqBniD,UAAW,SAAU,CAC5D2W,IAAK,WACD,OAAO26B,GAAc,CAAEruB,SAAUtjB,KAAK64C,oBAE1CvhC,YAAY,EACZC,cAAc,IAEXirC,EAnG8B,CAoGvC,IA4GF,IAAIE,GAAgC,WAChC,SAASA,EAAeC,EAAU/lC,EAASgmC,EAAiB3iD,EAAM8U,EAAM8tC,EAAsBC,QAC7D,IAAzBD,IAAmCA,GAAuB,QAC1C,IAAhBC,IAA0BA,GAAc,GAC5C9iD,KAAK2iD,SAAWA,EAChB3iD,KAAK4c,QAAUA,EACf5c,KAAK4iD,gBAAkBA,EACvB5iD,KAAKC,KAAOA,EACZD,KAAK+U,KAAOA,EACZ/U,KAAK6iD,qBAAuBA,EAC5B7iD,KAAK8iD,YAAcA,EA6EvB,OA3EAJ,EAAeriD,UAAU0iD,aAAe,SAAUhuC,EAAMuI,EAAQrd,GAC5D,IAAIyuC,EAAOpxB,EAAO6G,oBAClB,IAAKuqB,EAAK7sB,MAAK,SAAU7U,GAAK,OAAOA,EAAErO,SAAWoW,EAAKpW,UACnD,MAAM,IAAI6vC,GAAsBvuC,EAAMyuC,EAAM35B,IAGpDhC,OAAOsE,eAAeqrC,EAAeriD,UAAW,SAAU,CAItD2W,IAAK,WACD,OAAOhX,KAAK8iD,YACN9iD,KAAK4iD,gBAAgBhqC,gBAAgB5Y,KAAKC,MAC1CD,KAAK4iD,gBAAgBhqC,iBAE/BtB,YAAY,EACZC,cAAc,IAKlBmrC,EAAeriD,UAAU2iD,aAAe,WACpC,IAAIthD,EAAQ1B,KACZ,IAAIA,KAAK8iD,YAOJ,CACG1oC,EAAMpa,KAAK4iD,gBAAgBz+B,oBAC/B,OAAsB,GAAd/J,EAAIzb,OAAeyb,EAAI,GAAKA,EARpC,IAAIA,EAAMpa,KAAK4iD,gBAAgBz+B,oBAAoBtC,MAAK,SAAU7U,GAAK,OAAOA,EAAE,KAAOtL,EAAMzB,QAC7F,GAAIma,EAEA,OADAA,EAAIinC,QACGjnC,GAcnBsoC,EAAeriD,UAAUkD,KAAO,SAAU0wC,GAEtC,YADe,IAAXA,IAAqBA,EAAS,IAC9Bj0C,KAAK2iD,oBAAoBM,GAClBjjD,KAAK2iD,SAASrB,SAASthD,KAAKs3C,iBAAiBrD,IAAS1wC,OAGtDvD,KAAK2iD,SAASrB,SAASthD,KAAKs3C,iBAAiBrD,KAS5DyO,EAAeriD,UAAUi3C,iBAAmB,SAAU91C,GAClD,IAAIM,EAAIE,EACJE,OAAY,IAAPV,EAAgB,GAAKA,EAAI0tC,EAAMhtC,EAAGgtC,IAAKE,EAAWltC,EAAGktC,SAAUC,EAAentC,EAAGmtC,aAAcR,EAAS3sC,EAAG2sC,OAAQt4B,EAAKrU,EAAG4e,OAAQA,OAAgB,IAAPvK,EAAgB,EAAIA,EAAIC,EAAKtU,EAAGotC,MAAOA,OAAe,IAAP94B,GAAwBA,EACxN0sC,EAAqB,CACrBz8C,GAAIzG,KAAK4c,QACTkE,OAAQA,EACRouB,IAAKA,EACLI,MAAOA,EACPT,OAAQA,EACRO,SAAUA,EACVC,aAAcA,EACdrrB,UAAW,CACPm/B,WAAYnjD,KAAK6iD,qBAAuB7iD,KAAKC,KAAOmjD,GACpDjlD,MAAO6B,KAAK8iD,aACLhhD,EAAK9B,KAAK4iD,iBAAiBppC,OAAO3F,MAAM/R,EAAI,GAAc,CAAC9B,KAAKC,MAAO,GAAOD,KAAK+U,SAAW/S,EAAKhC,KAAK4iD,iBAAiBppC,OAAO3F,MAAM7R,EAAI,GAAc,GAAI,GAAOhC,KAAK+U,UAGvL,OAAOmuC,GAEJR,EAvFwB,GA0F/B,GAAsC,WACtC,SAASW,EAAqBC,EAAgBx0C,GAC1C9O,KAAKsjD,eAAiBA,EACtBtjD,KAAK8O,QAAUA,EACf9O,KAAKizC,WAAa,GAqJtB,OA7IAoQ,EAAqBhjD,UAAU+2C,aAAe,SAAUnD,GAEpD,OADAj0C,KAAKizC,WAAWnyC,KAAK,GAAS,CAAE4uC,KAAM/mB,EAAOonB,aAAekE,IACrDj0C,MAQXqjD,EAAqBhjD,UAAUg3C,iBAAmB,SAAUpD,GACxD,OAAOj0C,KAAKo3C,aAAanD,EAAOqD,qBAQpC+L,EAAqBhjD,UAAUk3C,eAAiB,SAAUtD,GAEtD,OADAj0C,KAAKizC,WAAWnyC,KAAK,GAAS,CAAE4uC,KAAM/mB,EAAOunB,YAAc+D,IACpDj0C,MAQXqjD,EAAqBhjD,UAAUq3C,gBAAkB,SAAUzD,GAEvD,OADAj0C,KAAKizC,WAAWnyC,KAAK,GAAS,CAAE4uC,KAAM/mB,EAAOwmB,aAAe8E,IACrDj0C,MAEXqjD,EAAqBhjD,UAAUkjD,aAAe,SAAU95B,GACpD,OAAO,GAAUzpB,UAAM,OAAQ,GAAQ,WACnC,IAAI0B,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,OAAQioB,EAAMimB,MACV,KAAK/mB,EAAOonB,YACR,MAAO,CAAC,EAAc/vC,KAAKsjD,eAAeE,iCAAgC,WAAc,OAAO,GAAU9hD,OAAO,OAAQ,GAAQ,WAAc,OAAO,GAAY1B,MAAM,SAAUwB,GACzK,MAAO,CAAC,EAAcioB,aAElC,KAAKd,EAAOwmB,YACR,MAAO,CAAC,EAAcnvC,KAAKsjD,eAAeG,kCAAiC,WAAc,OAAO,GAAU/hD,OAAO,OAAQ,GAAQ,WACzH,OAAO,GAAY1B,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAK8O,QAAQ8oC,OAAOC,uBAAuB,GAAS,GAAIpuB,eAG9F,KAAKd,EAAOunB,WACR,MAAO,CAAC,EAAclwC,KAAKsjD,eAAeI,iCAAgC,WAAc,OAAO,GAAUhiD,OAAO,OAAQ,GAAQ,WAAc,OAAO,GAAY1B,MAAM,SAAUwB,GACzK,MAAO,CAAC,EAAcioB,aAElC,QACI,MAAM,IAAIxmB,MAAM,+BAAiCwmB,EAAMimB,cAW3E2T,EAAqBhjD,UAAUgxC,KAAO,SAAU4C,GAC5C,IAAI39B,EAAK9U,EACT,IACI,IAAK,IAAIs2C,EAAW,GAAS7D,GAAS8D,EAAaD,EAASzxC,QAAS0xC,EAAWzxC,KAAMyxC,EAAaD,EAASzxC,OAAQ,CAChH,IAAIojB,EAAQsuB,EAAW55C,MACvB,OAAQsrB,EAAMimB,MACV,KAAK/mB,EAAOonB,YACR/vC,KAAKo3C,aAAa3tB,GAClB,MACJ,KAAKd,EAAOwmB,YACRnvC,KAAK03C,gBAAgBjuB,GACrB,MACJ,KAAKd,EAAOunB,WACRlwC,KAAKu3C,eAAe9tB,GACpB,MACJ,QACI,MAAM,IAAIxmB,MAAM,+BAAiCwmB,EAAMimB,QAIvE,MAAOr5B,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQ0hC,IAAeA,EAAWzxC,OAAS9E,EAAKs2C,EAASphC,SAASlV,EAAG2E,KAAK2xC,GAE1E,QAAU,GAAIxhC,EAAK,MAAMA,EAAI/P,OAEjC,OAAOvG,MAOXqjD,EAAqBhjD,UAAUkD,KAAO,WAClC,OAAO,GAAUvD,UAAM,OAAQ,GAAQ,WACnC,IAAIsU,EAAK9S,EAAIM,EAAI2S,EAAIzS,EAAIE,EAAI0U,EAAOgjC,EAChC/iC,EAAKN,EACT,OAAO,GAAYvW,MAAM,SAAUwW,GAC/B,OAAQA,EAAGrC,OACP,KAAK,EACDG,EAAM,GACNkC,EAAGrC,MAAQ,EACf,KAAK,EACDqC,EAAGnC,KAAKvT,KAAK,CAAC,EAAG,EAAG,EAAG,IACvBU,EAAK,GAASxB,KAAKizC,YAAanxC,EAAKN,EAAG6E,OACxCmQ,EAAGrC,MAAQ,EACf,KAAK,EACD,OAAMrS,EAAGwE,KAAa,CAAC,EAAa,IACpCmO,EAAK3S,EAAG3D,MACR+D,GAAMF,EAAKsS,GAAKxT,KACT,CAAC,EAAad,KAAKujD,aAAa9uC,KAC3C,KAAK,EACDvS,EAAG2R,MAAM7R,EAAI,CAACwU,EAAGpC,SACjBoC,EAAGrC,MAAQ,EACf,KAAK,EAED,OADArS,EAAKN,EAAG6E,OACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAGD,OAFAuQ,EAAQJ,EAAGpC,OACXyC,EAAM,CAAEtQ,MAAOqQ,GACR,CAAC,EAAa,GACzB,KAAK,EACD,IACQ9U,IAAOA,EAAGwE,OAASiQ,EAAK/U,EAAGkV,SAASH,EAAGpQ,KAAK3E,GAEpD,QAAU,GAAIqV,EAAK,MAAMA,EAAItQ,MAC7B,MAAO,CAAC,GACZ,KAAK,EAAG,MAAO,CAAC,EAAavG,KAAKsjD,eAAeK,eAAervC,IAChE,KAAK,EAED,OADAslC,EAASpjC,EAAGpC,OACL,CAAC,EAAcpU,KAAK8O,QAAQ80C,iBAAiB/F,qBAAqBjE,YAKtFyJ,EAzJ8B,GA2JrCJ,GAAwB,WACxB,SAASA,EAAOn0C,GACZ9O,KAAK8O,QAAUA,EACf9O,KAAK6jD,cAAgB,SAAUtgD,GAC3B,MAAO,CACHA,KAAMA,IAgNlB,OA5MAwP,OAAOsE,eAAe4rC,EAAO5iD,UAAW,iBAAkB,CACtD2W,IAAK,WACD,OAAOhX,KAAK8O,QAAQw0C,gBAExBhsC,YAAY,EACZC,cAAc,IAQlB0rC,EAAO5iD,UAAUshC,IAAM,SAAUngC,GAC7B,IAAIM,OAAY,IAAPN,EAAgB,GAAKA,EAAIsiD,EAAehiD,EAAGgiD,aACpD,OAAO,GAAU9jD,UAAM,OAAQ,GAAQ,WACnC,IAAIgC,EACJ,OAAO,GAAYhC,MAAM,SAAUkC,GAC/B,OAAQA,EAAGiS,OACP,KAAK,EACD,OAAOnU,KAAK+jD,OAAQD,EAAsB,CAAC,EAAa,IACxD9hD,EAAKhC,KACE,CAAC,EAAaA,KAAKsjD,eAAeU,WAC7C,KAAK,EACDhiD,EAAG+hD,KAAO7hD,EAAGkS,OACblS,EAAGiS,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAcnU,KAAK+jD,cAanDd,EAAO5iD,UAAU2gD,UAAY,SAAU/M,GACnC,IAAIvyC,EAAQ1B,KACZ,OAAOA,KAAK6jD,eAAc,WAAc,OAAO,GAAUniD,OAAO,OAAQ,GAAQ,WAC5E,IAAIuiD,EAAcrK,EAAQp4C,EACtBE,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKsjD,eAAeG,kCAAiC,WAC1E,OAAO/hD,EAAMoN,QAAQ8oC,OAAOC,uBAAuB,GAAS,GAAI5D,QAExE,KAAK,EAED,OADAgQ,EAAeniD,EAAGsS,OACX,CAAC,EAAapU,KAAKsjD,eAAeK,eAAe,CAACM,KAC7D,KAAK,EAED,OADArK,EAAS93C,EAAGsS,OACNpU,KAAK8O,QAAQ9D,MAAc,CAAC,EAAa,IAC/CxJ,EAAKxB,KAAK8O,QACH,CAAC,EAAa9O,KAAK8O,QAAQk+B,IAAIniB,aAC1C,KAAK,EACDrpB,EAAGwJ,MAASlJ,EAAGsS,OAAQyd,SACvB/vB,EAAGqS,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAcnU,KAAK8O,QAAQ80C,iBAAiB5U,2BAA2B4K,eAavGqJ,EAAO5iD,UAAUkhD,YAAc,SAAUtN,GACrC,IAAIvyC,EAAQ1B,KACZ,OAAOA,KAAK6jD,eAAc,WAAc,OAAO,GAAUniD,OAAO,OAAQ,GAAQ,WAC5E,IAAIuiD,EAAcrK,EACdl4C,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKsjD,eAAeI,iCAAgC,WAAc,OAAO,GAAUhiD,OAAO,OAAQ,GAAQ,WAAc,OAAO,GAAY1B,MAAM,SAAUwB,GAChL,MAAO,CAAC,EAAcyyC,aAE9B,KAAK,EAED,OADAgQ,EAAeziD,EAAG4S,OACX,CAAC,EAAapU,KAAKsjD,eAAeK,eAAe,CAACM,KAC7D,KAAK,EAED,OADArK,EAASp4C,EAAG4S,OACL,CAAC,EAAcpU,KAAK8O,QAAQ80C,iBAAiB7F,0BAA0BnE,eAYlGqJ,EAAO5iD,UAAUqhD,iBAAmB,WAChC,IAAIhgD,EAAQ1B,KACZ,OAAOA,KAAK6jD,eAAc,WAAc,OAAO,GAAUniD,OAAO,OAAQ,GAAQ,WAC5E,IAAIuiD,EAAcrK,EACdl4C,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKsjD,eAAeI,iCAAgC,WAAc,OAAO,GAAUhiD,OAAO,OAAQ,GAAQ,WAC/H,IAAIqrB,EACJ,OAAO,GAAY/sB,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK2hC,OAClC,KAAK,EAED,OADA5U,EAAWvrB,EAAG4S,OACP,CAAC,EAAc,CAAE2Y,SAAUA,eAItD,KAAK,EAED,OADAk3B,EAAeziD,EAAG4S,OACX,CAAC,EAAapU,KAAKsjD,eAAeK,eAAe,CAACM,KAC7D,KAAK,EAED,OADArK,EAASp4C,EAAG4S,OACL,CAAC,EAAcpU,KAAK8O,QAAQ80C,iBAAiB7F,0BAA0BnE,eAalGqJ,EAAO5iD,UAAUihD,SAAW,SAAUrN,GAClC,IAAIvyC,EAAQ1B,KACZ,OAAOA,KAAK6jD,eAAc,WAAc,OAAO,GAAUniD,OAAO,OAAQ,GAAQ,WAC5E,IAAIuiD,EAAcrK,EACdl4C,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKsjD,eAAeE,iCAAgC,WAAc,OAAO,GAAU9hD,OAAO,OAAQ,GAAQ,WAAc,OAAO,GAAY1B,MAAM,SAAUwB,GAChL,MAAO,CAAC,EAAcyyC,aAE9B,KAAK,EAED,OADAgQ,EAAeziD,EAAG4S,OACX,CAAC,EAAapU,KAAKsjD,eAAeK,eAAe,CAACM,KAC7D,KAAK,EAED,OADArK,EAASp4C,EAAG4S,OACL,CAAC,EAAcpU,KAAK8O,QAAQ80C,iBAAiB9F,2BAA2BlE,eAanGqJ,EAAO5iD,UAAUk4C,MAAQ,SAAUtE,GAC/B,IAAIsE,EAAQ,IAAI,GAAqBv4C,KAAKsjD,eAAgBtjD,KAAK8O,SAI/D,OAHI9N,MAAMC,QAAQgzC,IACdsE,EAAMlH,KAAK4C,GAERsE,GASX0K,EAAO5iD,UAAU4K,GAAK,SAAU2R,EAASsnC,GAIrC,YAHoC,IAAhCA,IAA0CA,EAA8B,SAAUl3C,GAClF,OAAOA,IAEJ,GAAUhN,UAAM,OAAQ,GAAQ,WACnC,IAAIgtC,EAAKrqB,EAAQwhC,EAAaC,EAAaC,EAASC,EACpD,OAAO,GAAYtkD,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAED,OADA64B,EAAMhtC,KAAK8O,QAAQy1C,iBAAiBvX,IAC7B,CAAC,EAAaA,EAAI7iB,UAAUvN,IACvC,KAAK,EAED,OADA+F,EAASnhB,EAAG4S,OACL,CAAC,EAAa44B,EAAInhB,eAAejP,IAC5C,KAAK,EAED,OADAunC,EAAc3iD,EAAG4S,OACV,CAAC,EAAapU,KAAK8O,QAAQk+B,IAAIliB,kBAC1C,KAAK,EAID,OAHAs5B,EAAc5iD,EAAG4S,OACjBiwC,EAAUD,EAAYrD,SACtBuD,EAAM,IAAI,GAAoB1nC,EAAS+F,EAAQ3iB,KAAMA,KAAK8O,QAAQgd,SAAUq4B,EAAaE,GAClF,CAAC,EAAcH,EAA4BI,EAAKtkD,KAAK8O,kBAKzEm0C,EArNgB,GAwNvB,GAAsC,WACtC,SAASuB,EAAqB11C,GAC1B9O,KAAK8O,QAAUA,EA6DnB,OA3DA01C,EAAqBnkD,UAAU2jD,OAAS,WACpC,OAAO,GAAUhkD,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAK8O,QAAQwlC,OAAOhH,wBAItDkX,EAAqBnkD,UAAUmjD,gCAAkC,SAAUvP,GACvE,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EACJ,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAED,OADA3S,EAAK+uC,GACE,CAAC,EAAa0D,KACzB,KAAK,EAAG,MAAO,CAAC,EAAczyC,EAAGqS,WAAM,EAAQ,CAAC/R,EAAGsS,OAAQuU,EAAOonB,uBAKlFyU,EAAqBnkD,UAAUojD,iCAAmC,SAAUxP,GACxE,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EACJ,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAED,OADA3S,EAAK+uC,GACE,CAAC,EAAa0D,KACzB,KAAK,EAAG,MAAO,CAAC,EAAczyC,EAAGqS,WAAM,EAAQ,CAAC/R,EAAGsS,OAAQuU,EAAOwmB,uBAKlFqV,EAAqBnkD,UAAUqjD,gCAAkC,SAAUzP,GACvE,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EACJ,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAED,OADA3S,EAAK+uC,GACE,CAAC,EAAa0D,KACzB,KAAK,EAAG,MAAO,CAAC,EAAczyC,EAAGqS,WAAM,EAAQ,CAAC/R,EAAGsS,OAAQuU,EAAOunB,sBAKlFsU,EAAqBnkD,UAAUsjD,eAAiB,SAAU1P,GACtD,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIyU,EACJ,OAAO,GAAYzU,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK8O,QAAQypC,MAAMA,MAAMtE,GAAQ1wC,QAC9D,KAAK,EAED,OADAkR,EAAKjT,EAAG4S,OACD,CAAC,EAAcK,EAAGkY,cAKtC63B,EA/D8B,GAsErCC,GAAsC,WACtC,SAASA,EAAqB9B,EAAU/lC,EAASgmC,EAAiB3iD,EAAM8U,EAAM8tC,EAAsBC,QACnF,IAAT/tC,IAAmBA,EAAO,aACD,IAAzB8tC,IAAmCA,GAAuB,QAC1C,IAAhBC,IAA0BA,GAAc,GAC5C9iD,KAAK2iD,SAAWA,EAChB3iD,KAAK4c,QAAUA,EACf5c,KAAK4iD,gBAAkBA,EACvB5iD,KAAKC,KAAOA,EACZD,KAAK+U,KAAOA,EACZ/U,KAAK6iD,qBAAuBA,EAC5B7iD,KAAK8iD,YAAcA,EAmDvB,OA9CA2B,EAAqBpkD,UAAU2iD,aAAe,WAC1C,OAAOhjD,KAAK8iD,YACN9iD,KAAK4iD,gBAAgBhqC,gBAAgB5Y,KAAKC,MAC1CD,KAAK4iD,gBAAgBhqC,iBAQ/B6rC,EAAqBpkD,UAAUkD,KAAO,SAAU0wC,GAE5C,YADe,IAAXA,IAAqBA,EAAS,IAC9Bj0C,KAAK2iD,oBAAoBM,GAClBjjD,KAAK2iD,SAASrB,SAASthD,KAAKs3C,iBAAiBrD,IAAS1wC,OAGtDvD,KAAK2iD,SAASrB,SAASthD,KAAKs3C,iBAAiBrD,KAS5DwQ,EAAqBpkD,UAAUi3C,iBAAmB,SAAU91C,GACxD,IAAIM,EACAE,OAAY,IAAPR,EAAgB,GAAKA,EAAI0tC,EAAMltC,EAAGktC,IAAKE,EAAWptC,EAAGotC,SAAUC,EAAertC,EAAGqtC,aAAcR,EAAS7sC,EAAG6sC,OAAQ3sC,EAAKF,EAAG8e,OAAQA,OAAgB,IAAP5e,EAAgB,EAAIA,EAAIqU,EAAKvU,EAAGstC,MAAOA,OAAe,IAAP/4B,GAAwBA,EACxN2sC,EAAqB,CACrBz8C,GAAIzG,KAAK4c,QACTkE,OAAQA,EACRouB,IAAKA,EACLI,MAAOA,EACPT,OAAQA,EACRO,SAAUA,EACVC,aAAcA,EACdrrB,UAAW,CACPm/B,WAAYnjD,KAAK6iD,qBAAuB7iD,KAAKC,KAAOmjD,GACpDjlD,MAAO6B,KAAK8iD,YACN9iD,KAAK4iD,gBAAgBnpC,cAAc3X,EAAK,GAAIA,EAAG9B,KAAKC,MAAQD,KAAK+U,KAAMjT,IACvE9B,KAAK4iD,gBAAgBnpC,aAAazZ,KAAK+U,QAGrD,OAAOmuC,GAEJuB,EA9D8B,GAiErCC,GAAuC,WACvC,SAASA,KAYT,OAVAA,EAAsBrkD,UAAUskD,+BAAiC,SAAUhC,EAAU/lC,EAASgoC,EAA2BnW,EAAyB15B,EAAM8tC,EAAsBC,GAG1K,YAF6B,IAAzBD,IAAmCA,GAAuB,QAC1C,IAAhBC,IAA0BA,GAAc,GACrC,IAAIJ,GAAeC,EAAU/lC,EAASgoC,EAA2BnW,EAAyB15B,EAAM8tC,EAAsBC,IAEjI4B,EAAsBrkD,UAAUwkD,gCAAkC,SAAUlC,EAAU/lC,EAASgoC,EAA2BnW,EAAyB15B,EAAM8tC,EAAsBC,GAG3K,YAF6B,IAAzBD,IAAmCA,GAAuB,QAC1C,IAAhBC,IAA0BA,GAAc,GACrC,IAAI2B,GAAqB9B,EAAU/lC,EAASgoC,EAA2BnW,EAAyB15B,EAAM8tC,EAAsBC,IAEhI4B,EAb+B,GAgBtCI,GAA4B,WAC5B,SAASA,EAAWC,EAAgBC,EAAcC,EAAYC,QACvC,IAAfD,IAAyBA,EAAa,gBAChB,IAAtBC,IAAgCA,EAAoB,CAAE3sC,KAAM,SAChEvY,KAAK+kD,eAAiBA,EACtB/kD,KAAKglD,aAAeA,EACpBhlD,KAAKilD,WAAaA,EAClBjlD,KAAKklD,kBAAoBA,EACzBllD,KAAKmlD,WAAanlD,KAAKolD,mBAgP3B,OA9OAN,EAAWzkD,UAAUglD,QAAU,WAC3B,OAAO,GAAUrlD,UAAM,OAAQ,GAAQ,WACnC,IAAIgtB,EAAMokB,EAAWkU,EACrB,OAAO,GAAYtlD,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAED,OADA3S,EAAG6S,KAAKvT,KAAK,CAAC,EAAG,EAAG,CAAE,IACf,CAAC,EAAad,KAAK+kD,eAAeQ,QAAQC,QAAQxlD,KAAKmlD,YAAY5hD,QAC9E,KAAK,EAED,OADA/B,EAAG4S,OACI,CAAC,EAAa,GACzB,KAAK,EAED,GADA4Y,EAAOxrB,EAAG4S,OACN4Y,aAAgBkkB,GAGhB,OAFAE,EAAYpkB,EAAKmkB,OAAOnkB,EAAKmkB,OAAOxyC,OAAS,GAC7C2mD,EAAalU,EAAUC,KAChB,CAAC,EAAciU,GAGtB,MAAMt4B,EAEd,KAAK,EAAG,MAAO,CAAC,WAKhC83B,EAAWzkD,UAAU+kD,iBAAmB,WACpC,IAAI5jD,EAAK,GAAOxB,KAAKylD,UAAW,GAAIzhC,EAAYxiB,EAAG,GAAIkkD,EAAWlkD,EAAG,GACjEmkD,EAAe,CACf,CACIptC,KAAM,OACNxD,KAAM,CAACiP,EAAW,CAAEzL,KAAM,WAAYxD,KAAM,CAAC2wC,OAMrD,MAHwB,YAApB1lD,KAAKilD,aACLU,EAAe,CAAC,CAAEtpC,OAAQ,aAAc5B,OAAOkrC,IAE5C,CACH,CAAEptC,KAAM,OAAQxD,KAAM,CAAC,CAAEwD,KAAM,SAAW,CAAEuB,IAAK,OACjD,CAAEvB,KAAM,OAAQxD,KAAM,CAAC,CAAEwD,KAAM,cAC/B,CACIA,KAAM,kBACNxD,KAAM,CACF,CACI,CAAEwD,KAAM,YAAaxD,KAAM,CAAC2wC,IAC5B,CAAEntC,KAAM,UAAWxD,KAAM,CAAC,CAAEwD,KAAM,UAClC,CACIA,KAAM,OACNxD,KAAM,CAAC,CAAC,CAAEwD,KAAM,OAAS,CAAEA,KAAM,kBAKjD,CACIA,KAAM,MACNxD,KAAM,CACF,CACI,CACIwD,KAAM,MACNxD,KAAM,CACF,CACI,CACIwD,KAAM,SACNxD,KAAM,CACF,CACIwD,KAAM,OACNxD,KAAM,CAAC,CAAEwD,KAAM,WAAa,CAAEA,KAAM,UAExC,CACIA,KAAM,OACNxD,KAAM,CAAC,CAAEwD,KAAM,OAAQxD,KAAM,CAAC,CAAEwD,KAAM,eAAkB,CAAEA,KAAM,UAEpE,CACI,CAAEA,KAAM,OACR,CAAEA,KAAM,WAAYxD,KAAM,CAAC2wC,IAC3B,CACIntC,KAAM,UACNxD,KAAM,CACF,CACI,CACIwD,KAAM,OACNxD,KAAM,CAAC,CAAEwD,KAAM,UAAY,CAAE8D,OAAQ,6BAEzC,CAAE9D,KAAM,aAEZ,KAGR,CACIA,KAAM,OACNxD,KAAM,CAACiP,EAAWhkB,KAAKklD,oBAE3B,CAAE3sC,KAAM,QACR,CACIA,KAAM,MACNxD,KAAM,CACF,CACI,CACIwD,KAAM,OACNxD,KAAM,CACF,CAAEwD,KAAM,WACR,CAAE8D,OAAQrc,KAAKglD,aAAapoC,QAAU,IAAM5c,KAAKilD,cAGzD,CAAE1sC,KAAM,OACR,CAAEA,KAAM,WAAYxD,KAAM4wC,GAC1B,CACIptC,KAAM,UACNxD,KAAM,CACF,CACI,CACIwD,KAAM,OACNxD,KAAM,CACF,CAAEwD,KAAM,UACR,CAAE8D,OAAQ,6BAGlB,CAAE9D,KAAM,aAEZ,CAAC,CAAEA,KAAM,MAAOxD,KAAM,CAAC,CAAC,CAAEwD,KAAM,cAGxC,CACIA,KAAM,OACNxD,KAAM,CAAC,CAAEwD,KAAM,SAAW,CAAEuB,IAAK,UAKjD,CAAEvB,KAAM,mBACR,CACIA,KAAM,MACNxD,KAAM,CAAC,CAAC,CAAEwD,KAAM,MAAOxD,KAAM,CAAC,CAAEwD,KAAM,kBAE1C,CAAEA,KAAM,QACR,CAAEA,KAAM,MAAOxD,KAAM,CAAC,CAAC,CAAEwD,KAAM,WAC/B,CAAEA,KAAM,cAOhC,CAAEA,KAAM,SACR,CACIA,KAAM,MACNxD,KAAM,CACF,CACI,CACIwD,KAAM,OACNxD,KAAM,CAAC,CAAEwD,KAAM,WAAa,CAAE8D,OAAQrc,KAAK+kD,eAAenoC,WAE9D,CAAErE,KAAM,OACR,CACIA,KAAM,WACNxD,KAAM,CACF,CACIwD,KAAM,SACNxD,KAAM,CACF,CAAEwD,KAAM,QACR,CACIA,KAAM,OACNxD,KAAM,CACF,CAAEwD,KAAM,OAAQxD,KAAM,CAAC,CAAEwD,KAAM,eAC/B,CAAEA,KAAM,cAOhC,CACIA,KAAM,UACNxD,KAAM,CACF,CACI,CACIwD,KAAM,OACNxD,KAAM,CAAC,CAAEwD,KAAM,UAAY,CAAE8D,OAAQ,8BAEzC,CAAE9D,KAAM,aAEZ,CAAC,CAAEA,KAAM,MAAOxD,KAAM,CAAC,CAAC,CAAEwD,KAAM,cAGxC,CAAEA,KAAM,OAAQxD,KAAM,CAAC,CAAEwD,KAAM,SAAW,CAAEuB,IAAK,UAI7D,CAAEvB,KAAM,mBACR,CACIA,KAAM,MACNxD,KAAM,CAAC,CAAC,CAAEwD,KAAM,MAAOxD,KAAM,CAAC,CAAEwD,KAAM,kBAE1C,CAAEA,KAAM,WAIpB,CAAEA,KAAM,QACR,CAAEA,KAAM,MAAOxD,KAAM,CAAC,CAAC,CAAEwD,KAAM,WAC/B,CAAEA,KAAM,UAGhBusC,EAAWzkD,UAAUolD,QAAU,WAC3B,IAAItB,EAAcnkD,KAAKglD,aAAab,YAAYA,YAC5ChB,EAAagB,EAAYnkD,KAAKilD,YAClC,IAAK9B,EACD,MAAMlgD,MAAM,eAAiBjD,KAAKglD,aAAapoC,QAAU,8BAAgC5c,KAAKilD,YAElG,KAAM,SAAU9B,KAAgBA,EAAWpuC,KAEvC,MAAM9R,MAAM,6BAEhB,IASItD,EATAoV,EAAO/T,MAAM0F,KAAKy8C,EAAWpuC,MAC7BvT,EAAK,GAAOuT,EAAM,GAAIiP,EAAYxiB,EAAG,GAAIokD,EAAmBpkD,EAAG,GAInE,GAHI,WAAYwiB,UACLA,EAAU,YAEf,SAAU4hC,KAAsBA,EAAiB7wC,KAEnD,MAAM9R,MAAM,oCAehB,GAZwB,SAApBkgD,EAAW5qC,KACX5Y,EAAU,oDAAsDwjD,EAAW5qC,KAAO,QAE7D,IAAhBxD,EAAKpW,OACVgB,EAAU,6CAA+CoV,EAE1B,aAA1B6wC,EAAiBrtC,KACtB5Y,EAAU,kDAAoDimD,EAAiBrtC,KAE1EqtC,EAAiB7wC,MAAyC,IAAjC6wC,EAAiB7wC,KAAKpW,SACpDgB,EAAU,wDAA0DimD,EAAiB7wC,MAErFpV,EACA,MAAMsD,MAAMtD,GAChB,MAAO,CAACqkB,EAAW4hC,EAAiB7wC,KAAK,KAEtC+vC,EAxPoB,GA2P3B1B,GAAqC,UAIrCyC,GAA8B,WAC9B,SAASA,EAAaC,EAAiBnD,EAAU1iD,EAAMokD,EAAS0B,EAA0BnD,EAAiB7tC,GACvG/U,KAAK8lD,gBAAkBA,EACvB9lD,KAAK2iD,SAAWA,EAChB3iD,KAAKC,KAAOA,EACZD,KAAKqkD,QAAUA,EACfrkD,KAAK+lD,yBAA2BA,EAChC/lD,KAAK4iD,gBAAkBA,EACvB5iD,KAAK+U,KAAOA,EAsDhB,OA3CA8wC,EAAaxlD,UAAU2lD,KAAO,SAAUC,GACpC,OAAO,GAAUjmD,UAAM,OAAQ,GAAQ,WACnC,IAAIkmD,EAAenB,EAAgB/0B,EAAKm2B,EAAYb,EAAYviD,EAC5DvB,EACJ,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAED,GAAI8xC,EACAC,EAAgBD,OAEf,GAAIjmD,KAAKqkD,UAAY1W,GAASyY,OAC/BF,EAAgBxY,GAAuB0Y,YAEtC,GAAIpmD,KAAKqkD,UAAY1W,GAAS0Y,YAC/BH,EAAgBxY,GAAuB2Y,iBAEtC,GAAIrmD,KAAKqkD,UAAY1W,GAAS2Y,WAC/BJ,EAAgBxY,GAAuB4Y,gBAEtC,GAAItmD,KAAKqkD,UAAY1W,GAAS4Y,YAC/BL,EAAgBxY,GAAuB6Y,gBAEtC,IAAIvmD,KAAKqkD,UAAY1W,GAAS6Y,QAI/B,MAAM,IAAI7X,GAHVuX,EAAgBxY,GAAuB8Y,QAK3C,MAAO,CAAC,EAAaxmD,KAAK2iD,SAAS13C,GAAGi7C,IAC1C,KAAK,EAID,OAHAnB,EAAiBjjD,EAAGsS,OACpB4b,GAAOxuB,EAAKxB,KAAK4iD,iBAAiBppC,OAAO3F,MAAMrS,EAAI,GAAc,GAAI,GAAOxB,KAAK+U,QACjFoxC,EAAa,IAAIrB,GAAWC,EAAgB/kD,KAAK8lD,gBAAiB9lD,KAAKC,KAAM+vB,GACtE,CAAC,EAAam2B,EAAWd,WACpC,KAAK,EAGD,OAFAC,EAAaxjD,EAAGsS,OAChBrR,EAAW/C,KAAK+lD,yBAAyBrsC,QAAQ4rC,GAC1C,CAAC,EAAcviD,WAKnC8iD,EA9DsB,GAgE7B9C,GAAe,SAAUhuC,EAAMuI,EAAQrd,GACvC,IAAIyuC,EAAOpxB,EAAO6G,oBAClB,IAAKuqB,EAAK7sB,MAAK,SAAU7U,GAAK,OAAOA,EAAErO,SAAWoW,EAAKpW,UACnD,MAAM,IAAI6vC,GAAsBvuC,EAAMyuC,EAAM35B,IAGhD0xC,GAAS,SAAUnpC,GACnB,IAAImpC,GAAS,EACT/X,EAAOpxB,EAAO6G,oBAIlB,MAHqC,aAAhCuqB,EAAK,GAAGA,EAAK,GAAG/vC,OAAS,KAC1B8nD,GAAS,GAENA,GAEPC,GAAqB,SAAUC,GAC/B,YAAsD1nD,IAA/C0nD,EAAgBC,4BAKvB,GAAqC,WACrC,SAASC,EAAoBjqC,EAAS+F,EAAQggC,EAAUmE,EAAiB3C,EAAaE,GAClFrkD,KAAK4c,QAAUA,EACf5c,KAAK2iB,OAASA,EACd3iB,KAAK8mD,gBAAkBA,EACvB9mD,KAAKmkD,YAAcA,EACnBnkD,KAAKqkD,QAAUA,EACfrkD,KAAK+mD,sBAAwB,IAAIrC,GAMjC1kD,KAAKulD,QAAU,GAOfvlD,KAAKgnD,cAAgB,GACrBhnD,KAAKinD,MAAQ,GACbjnD,KAAKsd,OAAS,QAAOmF,gBAAgB,CAAEE,OAAQ3iB,KAAK2iB,SACpD3iB,KAAK4iD,gBAAkB,QAAgBngC,gBAAgB,CAAEE,OAAQ3iB,KAAK2iB,SACtE3iB,KAAKknD,mBAAmBlnD,KAAM4c,EAAS+lC,EAAU3iD,KAAKmkD,YAAYA,YAAankD,KAAKqkD,SAuFxF,OArFAwC,EAAoBxmD,UAAU6mD,mBAAqB,SAAUpB,EAAiBlpC,EAAS+lC,EAAUwB,EAAaE,GAC1G,IAAI3iD,EAAQ1B,KACR4iD,EAAkB5iD,KAAK4iD,gBACvB9sC,EAAO/C,OAAO+C,KAAKquC,GACvB,GAAIvB,EAAgB3+B,qBAAsB,CACtCnO,EAAK5U,SAAQ,SAAUutC,GACnB,IAAImW,EAA4B,IAAI,QAAgBT,EAAY1V,IAWhE,GAVA/sC,EAAM6jD,QAAQ9W,GAA2B,WAErC,IADA,IAAI15B,EAAO,GACFoL,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCpL,EAAKoL,GAAMvM,UAAUuM,GAEzB,OAAO2lC,EAAgBiB,sBAAsBpC,+BAA+BhC,EAAU/lC,EAASgoC,EAA2BnW,EAAyB15B,IAEvJrT,EAAMslD,cAAcvY,GAA2B,SAAU15B,GACrD,OAAO+wC,EAAgBiB,sBAAsBlC,gCAAgClC,EAAU/lC,EAASgoC,EAA2BnW,EAAyB15B,IAEpJ2xC,GAAmB/D,IACf8D,GAAO7B,GAA4B,CACnC,IAAIuC,EAAO,WAEP,IADA,IAAIpyC,EAAO,GACFoL,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCpL,EAAKoL,GAAMvM,UAAUuM,GAEzB,IAAIinC,EAAiCjD,EAAY1V,GAAyB15B,KAAK,GAC3EsyC,EAA2C,IAAI,QAAgBD,GAC/DE,EAAqBnD,EAAY1V,GAAyB15B,KAAK,GAAGA,KAAK,GACvEwyC,EAAoC,IAAI,QAAgBD,GAE5D,OADAvE,GAAahuC,EAAMsyC,EAA0C5Y,GACtD,IAAIoX,GAAaC,EAAiBnD,EAAUlU,EAAyB4V,EAASkD,EAAmCF,EAA0CtyC,IAEtKrT,EAAMulD,MAAMxY,GAA2B0Y,MAMnD,IAAIK,EAAmBz0C,OAAO+C,KAAK8sC,EAAgBhqC,iBAAiBu7B,QAAO,SAAUr1C,GAAO,OAAkD,IAA3CiU,OAAO+C,KAAKquC,GAAax8B,QAAQ7oB,MACpI0oD,EAAiBtmD,SAAQ,SAAUutC,GAC/B/sC,EAAM6jD,QAAQ9W,GAA2B,WAErC,IADA,IAAI15B,EAAO,GACFoL,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCpL,EAAKoL,GAAMvM,UAAUuM,GAEzB,OAAO2lC,EAAgBiB,sBAAsBpC,+BAA+BhC,EAAU/lC,EAASgmC,EAAiBnU,EAAyB15B,GAAM,GAAO,IAE1JrT,EAAMslD,cAAcvY,GAA2B,SAAU15B,GACrD,OAAO+wC,EAAgBiB,sBAAsBlC,gCAAgClC,EAAU/lC,EAASgmC,EAAiBnU,EAAyB15B,GAAM,GAAO,WAI9J,CACD,IAAI0yC,EAA8BznD,KAAK4iD,gBACvC5iD,KAAKulD,QAAQnC,IAAsC,WAE/C,IADA,IAAIruC,EAAO,GACFoL,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCpL,EAAKoL,GAAMvM,UAAUuM,GAEzB,OAAO2lC,EAAgBiB,sBAAsBpC,+BAA+BhC,EAAU/lC,EAAS6qC,EAA6BrE,GAAoCruC,GAAM,IAE1K/U,KAAKgnD,cAAc5D,IAAsC,SAAUruC,GAC/D,OAAO+wC,EAAgBiB,sBAAsBlC,gCAAgClC,EAAU/lC,EAAS6qC,EAA6BrE,GAAoCruC,GAAM,MAOnL8xC,EAAoBxmD,UAAUqiB,QAAU,WACpC,OAAO1iB,KAAK8mD,gBAAgB58B,WAAWlqB,KAAK4c,QAAS5c,KAAKsd,SAY9DupC,EAAoBxmD,UAAUgiB,OAAS,SAAUvjB,GAE7C,OAAOkB,KAAK8mD,gBAAgBv8B,aAAavqB,KAAK4c,QAAS9d,EAAKkB,KAAKsd,SAE9DupC,EA/G6B,GAkHpC,GAAmC,WACnC,SAASa,EAAkB7hC,EAAIvI,EAAQqlC,GACnC3iD,KAAK6lB,GAAKA,EACV7lB,KAAKsd,OAASA,EACdtd,KAAK2iD,SAAWA,EA8DpB,OAnDA+E,EAAkBrnD,UAAU2W,IAAM,SAAU2wC,EAAahjC,GACrD,OAAO,GAAU3kB,UAAM,OAAQ,GAAQ,WACnC,IAAI6lB,EAAIvP,EACR,OAAO,GAAYtW,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAED,OADA3S,EAAG6S,KAAKvT,KAAK,CAAC,EAAG,EAAG,CAAE,IACf,CAAC,EAAad,KAAK2iD,SAASiF,iBAAiB5nD,KAAK6lB,GAAGpc,WAAYk+C,EAAa3nD,KAAKsd,OAAQqH,IACtG,KAAK,EAED,OADAkB,EAAKrkB,EAAG4S,OACD,CAAC,EAAcyR,GAC1B,KAAK,EAED,GADAvP,EAAM9U,EAAG4S,OACLkC,aAAe,QAAqBA,EAAI1W,SAAW,OAAYqtB,UAC/D,MAAO,CAAC,OAAchuB,GAGtB,MAAMqX,EAEd,KAAK,EAAG,MAAO,CAAC,WAkBhCoxC,EAAkBrnD,UAAUwnD,kBAAoB,SAAUC,EAAcnjC,EAAOojC,GAE3E,YADkB,IAAdA,IAAwBA,EAAY,GACjC,GAAU/nD,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAK2iD,SAASqF,kBAAkBhoD,KAAK6lB,GAAGpc,WAAYq+C,EAAc9nD,KAAKsd,OAAQqH,EAAOojC,WAIxHL,EAAkBrnD,UAAUQ,OAAS,WACjC,OAAOb,KAAK6lB,GAAGpc,YAEnBi+C,EAAkBrnD,UAAUoJ,SAAW,WACnC,OAAOzJ,KAAK6lB,GAAGpc,YAEZi+C,EAlE2B,GAqElCO,GAAyC,WACzC,SAASA,EAAwBpiC,EAAI88B,GACjC3iD,KAAK6lB,GAAKA,EACV7lB,KAAK2iD,SAAWA,EAoBpB,OAVAsF,EAAwB5nD,UAAU6nD,eAAiB,SAAUvjC,GACzD,OAAO,GAAU3kB,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAK2iD,SAASwF,mBAAmBnoD,KAAK6lB,GAAGpc,WAAYkb,WAIvFsjC,EAAwB5nD,UAAU+nD,MAAQ,WACtC,OAAOpoD,KAAK6lB,GAAGpc,YAEZw+C,EAvBiC,GA2BxCI,GAAmC,SAAU1F,GAAY,MAAO,CAEhEvpC,QAAS,SAAUnB,EAAK7L,GACpB,GAAK6L,GAAS,QAASA,QAAoBhZ,IAAZgZ,EAAI6B,IAI9B,CACD,IAAIwD,EAAS,IAAI,QAAOlR,GACxB,OAAO,IAAI,GAAkB,IAAI,IAAU6L,EAAI6B,KAAMwD,EAAQqlC,GAJ7D,MAAO,IAOf2F,cAAe,SAAUrwC,GACrB,OAAKA,GAAS,QAASA,QAAoBhZ,IAAZgZ,EAAI6B,IAKxB,IAAImuC,GAAwB,IAAI,IAAUhwC,EAAI6B,KAAM6oC,GAHpD,MAaf,GAAqC,SAAU7pC,GAE/C,SAASyvC,EAAoBz5C,EAASynC,GAClC,IAAI70C,EAAQoX,EAAO3S,KAAKnG,KAAM8O,IAAY9O,KAG1C,OAFA0B,EAAM60C,UAAYA,EAClB70C,EAAMklD,2BAA6B9gD,OAAO+O,IAAI,iCACvCnT,EAygBX,OA9gBA,GAAU6mD,EAAqBzvC,GAgB/ByvC,EAAoBloD,UAAU6pB,WAAa,SAAU4B,EAAUxO,GAC3D,OAAO,GAAUtd,UAAM,OAAQ,GAAQ,WACnC,IAAIwoD,EAAgB9lC,EACpB,OAAO,GAAY1iB,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,OAAMmJ,EAAe,CAAC,EAAa,GAC5B,CAAC,EAAatd,KAAKgtC,IAAI7iB,UAAU2B,IAC5C,KAAK,EACDxO,EAAS9b,EAAG4S,OACZ5S,EAAG2S,MAAQ,EACf,KAAK,EAOD,OALIq0C,EADA,QAAOhmC,SAASlF,GACCA,EAGA,QAAOmF,gBAAgB,CAAEE,OAAQrF,IAE/C,CAAC,EAAatd,KAAKgtC,IAAI9iB,WAAW4B,IAC7C,KAAK,EAED,OADApJ,EAAUlhB,EAAG4S,OACN,CAAC,EAAco0C,EAAe9uC,QAAQgJ,EAAS2lC,GAAiCroD,gBAiB3GuoD,EAAoBloD,UAAUkqB,aAAe,SAAUuB,EAAUhtB,EAAKwe,GAClE,OAAO,GAAUtd,UAAM,OAAQ,GAAQ,WACnC,IAAIwoD,EAAgBC,EAAYxwC,EAChC,OAAO,GAAYjY,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,OAAMmJ,EAAe,CAAC,EAAa,GAC5B,CAAC,EAAatd,KAAKgtC,IAAI7iB,UAAU2B,IAC5C,KAAK,EACDxO,EAAS9b,EAAG4S,OACZ5S,EAAG2S,MAAQ,EACf,KAAK,EAQD,OANIq0C,EADA,QAAOhmC,SAASlF,GACCA,EAGA,QAAOmF,gBAAgB,CAAEE,OAAQrF,IAEtDmrC,EAAaD,EAAevlC,gBAAgBnkB,GACrC,CAAC,EAAakB,KAAKgtC,IAAIziB,aAAauB,EAAU28B,IACzD,KAAK,EAED,OADAxwC,EAAMzW,EAAG4S,OACF,CAAC,EAAco0C,EAAexlC,qBAAqB/K,YAgB9EswC,EAAoBloD,UAAUunD,iBAAmB,SAAU/hC,EAAI8hC,EAAarqC,EAAQqH,GAChF,OAAO,GAAU3kB,UAAM,OAAQ,GAAQ,WACnC,IAAIwB,EAAI1C,EAAKwQ,EAAMo5C,EAAQC,EAAaC,EAAa9mD,EACrD,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAED,OADA3S,EAAK8b,EAAO2F,gBAAgB0kC,GAAc7oD,EAAM0C,EAAG1C,IAAKwQ,EAAO9N,EAAG8N,KAC3D,CAAC,EAAatP,KAAK8O,QAAQ+5C,OAAO38B,SAAS,CAAEzqB,KAAM3C,EAAKwQ,KAAMA,KACzE,KAAK,EAGD,OAFAo5C,EAAU1mD,EAAGoS,OAAQs0C,OACrBC,EAAc,gBAAWD,GACpB/jC,EACE,CAAC,EAAa3kB,KAAK8O,QAAQk+B,IAAIviB,cAAc5E,EAAGpc,WAAYk/C,EAAa,CAAEhkC,MAAOpY,OAAOoY,MAD7E,CAAC,EAAa,GAErC,KAAK,EAED,OADA7iB,EAAKE,EAAGoS,OACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAapU,KAAK8O,QAAQk+B,IAAIviB,cAAc5E,EAAGpc,WAAYk/C,IAC3E,KAAK,EACD7mD,EAAKE,EAAGoS,OACRpS,EAAGmS,MAAQ,EACf,KAAK,EAED,OADAy0C,EAAc9mD,EACP,CAAC,EAAcwb,EAAO0F,qBAAqB4lC,EAAaP,GAAiCroD,gBAoBpHuoD,EAAoBloD,UAAU2nD,kBAAoB,SAAUniC,EAAI/P,EAAMwH,EAAQqH,EAAOojC,GAEjF,YADkB,IAAdA,IAAwBA,EAAY,GACjC,GAAU/nD,UAAM,OAAQ,GAAQ,WACnC,IAAImzC,EAAO2V,EAAc54C,EAAUshC,EAASuX,EAAWxQ,EAAO/2C,EAAI0E,EAC9DxE,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKgpD,mBAAmBlzC,EAAM6O,IAC3D,KAAK,EACDwuB,EAAQrxC,EAAGsS,OACX00C,EAAe,IAAI,QACnB54C,EAAW,EACXshC,EAAU,GACV1vC,EAAGqS,MAAQ,EACf,KAAK,EACD,OAAMjE,EAAW4F,EAAKnX,QACtBoqD,EAAYjzC,EAAKrO,MAAMyI,EAAUA,EAAW63C,GAC5CxP,EAAQwQ,EAAU5+C,KAAI,SAAUw9C,GAAe,OAAOjmD,EAAMunD,0BAA0BtB,EAAa9hC,EAAIvI,EAAQ61B,MAC/G3xC,EAAK,CAAC,GAAc,GAAI,GAAOgwC,KACxB,CAAC,EAAapvC,QAAQkjB,IAAIizB,KAJK,CAAC,EAAa,GAKxD,KAAK,EAGD,OAFA/G,EAAU,GAAc39B,WAAM,EAAQrS,EAAGiZ,OAAO,CAAC,GAAO5G,WAAM,EAAQ,CAAC/R,EAAGsS,YAC1ElE,GAAY63C,EACL,CAAC,EAAa,GACzB,KAAK,EACD,IAAK7hD,EAAI,EAAGA,EAAIsrC,EAAQ7yC,OAAQuH,IAC5B4iD,EAAa9qD,IAAI8X,EAAK5P,GAAIsrC,EAAQtrC,IAEtC,MAAO,CAAC,EAAc4iD,WAK1CP,EAAoBloD,UAAU2oD,mBAAqB,SAAUlzC,EAAM6O,GAC/D,IAAInjB,EACJ,OAAO,GAAUxB,UAAM,OAAQ,GAAQ,WACnC,IAAI8B,EACJ,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EACD,OAAsB,IAAhB2B,EAAKnX,QAAiC,qBAAVgmB,EAA+B,CAAC,EAAa,IAC/E7iB,EAAK6iB,EACE,CAAC,EAAa,IACzB,KAAK,EAAG,MAAO,CAAC,EAAa3kB,KAAKgtC,IAAIniB,YACtC,KAAK,EACD/oB,EAA4B,QAAtBN,EAAMQ,EAAGoS,cAA4B,IAAP5S,OAAgB,EAASA,EAAGikB,OAAO0tB,MACvEnxC,EAAGmS,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAcrS,WAK9CymD,EAAoBloD,UAAU4oD,0BAA4B,SAAUtB,EAAa9hC,EAAIvI,EAAQ61B,GACzF,OAAO,GAAUnzC,UAAM,OAAQ,GAAQ,WACnC,IAAIgtB,EACJ,OAAO,GAAYhtB,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAED,OADA3S,EAAG6S,KAAKvT,KAAK,CAAC,EAAG,EAAG,CAAE,IACf,CAAC,EAAad,KAAK4nD,iBAAiB/hC,EAAI8hC,EAAarqC,EAAQ61B,IACxE,KAAK,EAAG,MAAO,CAAC,EAAc3xC,EAAG4S,QACjC,KAAK,EAED,GADA4Y,EAAOxrB,EAAG4S,OACN4Y,aAAgB,QAAqBA,EAAKptB,SAAW,OAAYqtB,UACjE,MAAO,CAAC,GAGR,MAAMD,EAEd,KAAK,EAAG,MAAO,CAAC,WAahCu7B,EAAoBloD,UAAU8nD,mBAAqB,SAAUtiC,EAAIlB,GAC7D,OAAO,GAAU3kB,UAAM,OAAQ,GAAQ,WACnC,IAAIkpD,EAAc1nD,EAClB,OAAO,GAAYxB,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EACD,OAAKwQ,EACE,CAAC,EAAa3kB,KAAK8O,QAAQk+B,IAAI3gB,mBAAmBxG,EAAGpc,WAAY,CAAEkb,MAAOpY,OAAOoY,MADrE,CAAC,EAAa,GAErC,KAAK,EAED,OADAnjB,EAAKM,EAAGsS,OACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAapU,KAAK8O,QAAQk+B,IAAI3gB,mBAAmBxG,EAAGpc,aACpE,KAAK,EACDjI,EAAKM,EAAGsS,OACRtS,EAAGqS,MAAQ,EACf,KAAK,EAED,OADA+0C,EAAe1nD,EACR,CAAC,EAAc0nD,WAK1CX,EAAoBloD,UAAU8oD,2BAA6B,SAAU1Z,EAAWnC,GAC5E,OAAO,GAAUttC,UAAM,OAAQ,GAAQ,WACnC,IAAIsU,EAAKurB,EAAWupB,EAAkBjR,EAAQC,EAAiB52C,EAAIM,EAC/DJ,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EACD,OAAK08B,GAAkBpB,IACvBn7B,EAAM,CAACm7B,GACA,CAAC,EAAazvC,KAAKs0C,OAAOzU,cAFS,CAAC,EAAa,GAG5D,KAAK,EAED,OADAA,EAAY79B,EAAGoS,OACR,CAAC,EAAapU,KAAKu2C,UAAU4B,UACxC,KAAK,EAED,OADAiR,EAAmBpnD,EAAGoS,OACjBg1C,GACLjR,EAAS,CAAEzI,KAAM/mB,EAAO0nB,QACjB,CAAC,EAAarwC,KAAKs2C,SAAS6B,GAAQ,WAAc,OAAO,GAAUz2C,OAAO,OAAQ,GAAQ,WAAc,OAAO,GAAY1B,MAAM,SAAUwB,GAC1I,MAAO,CAAC,EAAc4nD,cAHA,CAAC,EAAa,GAKhD,KAAK,EAGD,OAFAhR,EAAkBp2C,EAAGoS,OACrBtS,GAAMN,EAAK8S,GAAKkkC,QACT,CAAC,EAAapI,GAAsB,GAAS,GAAIgI,GAAkB9K,EAAezN,IAC7F,KAAK,EAED,OADA/9B,EAAG+R,MAAMrS,EAAI,CAACQ,EAAGoS,SACV,CAAC,EAAcE,GAC1B,KAAK,EAAG,MAAO,CAAC,EAAcm7B,WAe9C8Y,EAAoBloD,UAAU2gD,UAAY,SAAU/M,GAChD,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIs2C,EAAUhJ,EAAemC,EAAWjuC,EAAI8S,EAAK+0C,EAAqBC,EAAmBxnD,EAAI6qB,EAAM7d,EAASknC,EAAaI,EACzH,OAAO,GAAYp2C,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs2C,SAASrC,EAAQj0C,KAAKu2C,UAAUyK,UAAU1F,KAAKt7C,KAAKu2C,aACtF,KAAK,EAED,OADAD,EAAWt0C,EAAGoS,OACP,CAAC,EAAapU,KAAKs0C,OAAOhH,iBACrC,KAAK,EAGD,OAFAA,EAAgBtrC,EAAGoS,OACnB5S,EAAKwtC,GACE,CAAC,EAAahvC,KAAK8O,QAAQ8oC,OAAOC,uBAAuB,GAAS,GAAS,GAAI5D,GAASqC,KACnG,KAAK,EAAG,MAAO,CAAC,EAAa90C,EAAGqS,WAAM,EAAQ,CAAC7R,EAAGoS,UAClD,KAAK,EAED,OADAq7B,EAAYztC,EAAGoS,OACR,CAAC,EAAapU,KAAKmpD,2BAA2B1Z,EAAWnC,IACpE,KAAK,EAED,OADAh5B,EAAMtS,EAAGoS,OACF,CAAC,EAAapU,KAAK+0C,iBAAiB,CAAEtF,UAAWn7B,EAAKu6B,OAAQvB,KACzE,KAAK,EAED,OADA+b,EAAsBrnD,EAAGoS,OAClB,CAAC,EAAapU,KAAK8sC,MAAMuc,IACpC,KAAK,EAED,OADAC,EAAoBtnD,EAAGoS,OAChB,CAAC,EAAapU,KAAK62C,cAAcyS,IAC5C,KAAK,EAED,OADAxnD,EAAKE,EAAGoS,OAAQuY,EAAO7qB,EAAG6qB,KAAM7d,EAAUhN,EAAGgN,QAASknC,EAAcl0C,EAAGk0C,YAAaI,EAAat0C,EAAGs0C,WAC7F,CAAC,EAAc,IAAI0L,GAAqBn1B,EAAM8iB,EAAWuG,EAAaI,EAAYtnC,EAAS9O,eAatHuoD,EAAoBloD,UAAUkhD,YAAc,SAAUtN,GAClD,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIs2C,EAAUhJ,EAAemC,EAAW+R,EAAiBltC,EAAK+jC,EAAUC,EAAS92C,EAAImrB,EAAM7d,EAASknC,EAAaI,EACjH,OAAO,GAAYp2C,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAED,GAAI,OAAOtI,KAAKooC,EAAOpF,QACnB,MAAM,IAAID,GAAwBqF,EAAOpF,QAE7C,MAAO,CAAC,EAAa7uC,KAAKs2C,SAASrC,EAAQj0C,KAAKu2C,UAAUgL,YAAYjG,KAAKt7C,KAAKu2C,aACpF,KAAK,EAED,OADAD,EAAWx0C,EAAGsS,OACP,CAAC,EAAapU,KAAKs0C,OAAOhH,iBACrC,KAAK,EAED,OADAA,EAAgBxrC,EAAGsS,OACZ,CAAC,EAAa67B,GAA2B,GAAS,GAAS,GAAIgE,GAASqC,KACnF,KAAK,EAGD,OAFA7G,EAAY3tC,EAAGsS,OACfotC,EAAkBvN,EAAOpF,QAAUvB,EAC5B,CAAC,EAAattC,KAAKmpD,2BAA2B1Z,EAAWnC,IACpE,KAAK,EAED,OADAh5B,EAAMxS,EAAGsS,OACF,CAAC,EAAapU,KAAK+0C,iBAAiB,CACnCtF,UAAWn7B,EACXu6B,OAAQ2S,KAEpB,KAAK,EAED,OADAnJ,EAAWv2C,EAAGsS,OACP,CAAC,EAAapU,KAAK8sC,MAAMuL,IACpC,KAAK,EAED,OADAC,EAAUx2C,EAAGsS,OACN,CAAC,EAAapU,KAAK62C,cAAcyB,IAC5C,KAAK,EAED,OADA92C,EAAKM,EAAGsS,OAAQuY,EAAOnrB,EAAGmrB,KAAM7d,EAAUtN,EAAGsN,QAASknC,EAAcx0C,EAAGw0C,YAAaI,EAAa50C,EAAG40C,WAC7F,CAAC,EAAc,IAAIuL,GAAkBh1B,EAAM8iB,EAAW+R,EAAiBxL,EAAaI,EAAYtnC,YAa3Hy5C,EAAoBloD,UAAUqhD,iBAAmB,SAAUzN,GACvD,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIs2C,EAAUzH,EAAQY,EAAWn7B,EAAK+jC,EAAUC,EAAS92C,EAAImrB,EAAM7d,EAASknC,EAAaI,EACzF,OAAO,GAAYp2C,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs2C,SAASrC,EAAQj0C,KAAKu2C,UAAUmL,iBAAiBpG,KAAKt7C,KAAKu2C,aAC7F,KAAK,EAED,OADAD,EAAWx0C,EAAGsS,OACP,CAAC,EAAapU,KAAKs0C,OAAOhH,iBACrC,KAAK,EAED,OADAuB,EAAS/sC,EAAGsS,OACL,CAAC,EAAa+7B,GAAgC,GAAS,GAAS,GAAI8D,GAASqC,GAAWzH,IACnG,KAAK,EAED,OADAY,EAAY3tC,EAAGsS,OACR,CAAC,EAAapU,KAAKmpD,2BAA2B1Z,EAAWZ,IACpE,KAAK,EAED,OADAv6B,EAAMxS,EAAGsS,OACF,CAAC,EAAapU,KAAK+0C,iBAAiB,CAAEtF,UAAWn7B,KAC5D,KAAK,EAED,OADA+jC,EAAWv2C,EAAGsS,OACP,CAAC,EAAapU,KAAK8sC,MAAMuL,IACpC,KAAK,EAED,OADAC,EAAUx2C,EAAGsS,OACN,CAAC,EAAapU,KAAK62C,cAAcyB,IAC5C,KAAK,EAED,OADA92C,EAAKM,EAAGsS,OAAQuY,EAAOnrB,EAAGmrB,KAAM7d,EAAUtN,EAAGsN,QAASknC,EAAcx0C,EAAGw0C,YAAaI,EAAa50C,EAAG40C,WAC7F,CAAC,EAAc,IAAIuL,GAAkBh1B,EAAM8iB,EAAWZ,EAAQmH,EAAaI,EAAYtnC,YAalHy5C,EAAoBloD,UAAUihD,SAAW,SAAUrN,GAC/C,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIupD,EAAgBjT,EAAU7G,EAAWZ,EAAQv6B,EAAK+jC,EAAUC,EAAS92C,EAAImrB,EAAM7d,EAASknC,EAAaI,EACzG,OAAO,GAAYp2C,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAED,OADAic,EAAiBznD,EAAGsS,OACb,CAAC,EAAapU,KAAKs2C,SAASrC,EAAQj0C,KAAKu2C,UAAU+K,SAAShG,KAAKt7C,KAAKu2C,aACjF,KAAK,EAED,OADAD,EAAWx0C,EAAGsS,OACP,CAAC,EAAay7B,GAAwB,GAAS,GAAS,GAAIoE,GAASqC,KAChF,KAAK,EAGD,OAFA7G,EAAY3tC,EAAGsS,OACfy6B,EAASoF,EAAOpF,QAAU0a,EACnB,CAAC,EAAavpD,KAAKmpD,2BAA2B1Z,EAAW8Z,IACpE,KAAK,EAED,OADAj1C,EAAMxS,EAAGsS,OACF,CAAC,EAAapU,KAAK+0C,iBAAiB,CAAEtF,UAAWn7B,EAAKu6B,OAAQoF,EAAOpF,UAChF,KAAK,EAED,OADAwJ,EAAWv2C,EAAGsS,OACP,CAAC,EAAapU,KAAK8sC,MAAMuL,IACpC,KAAK,EAED,OADAC,EAAUx2C,EAAGsS,OACN,CAAC,EAAapU,KAAK62C,cAAcyB,IAC5C,KAAK,EAED,OADA92C,EAAKM,EAAGsS,OAAQuY,EAAOnrB,EAAGmrB,KAAM7d,EAAUtN,EAAGsN,QAASknC,EAAcx0C,EAAGw0C,YAAaI,EAAa50C,EAAG40C,WAC7F,CAAC,EAAc,IAAI,GAAqBzpB,EAAM8iB,EAAWZ,EAAQmH,EAAaI,EAAYtnC,YAarHy5C,EAAoBloD,UAAU83C,OAAS,SAAUlE,GAC7C,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAIstC,EAAekc,EAAgBtR,EAAWzI,EAAWjuC,EAAIM,EAAIu2C,EAAUC,EAASt2C,EAAI2qB,EAAM7d,EAASknC,EAAaI,EAChH10C,EAAQ1B,KACZ,OAAO,GAAYA,MAAM,SAAUkC,GAC/B,OAAQA,EAAGiS,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAKs0C,OAAOhH,iBACzC,KAAK,EAED,OADAA,EAAgBprC,EAAGkS,OACZ,CAAC,EAAapU,KAAKu2C,UAAU4B,OAAOlE,IAC/C,KAAK,EAED,OADAuV,EAAiBtnD,EAAGkS,OACfo1C,EACE,CAAC,EAAaxpD,KAAKs2C,SAASrC,GAAQ,WAAc,OAAO,GAAUvyC,OAAO,OAAQ,GAAQ,WAAc,OAAO,GAAY1B,MAAM,SAAUwB,GAC1I,MAAO,CAAC,EAAcgoD,aAFF,CAAC,EAAa,GAI9C,KAAK,EAID,OAHAtR,EAAYh2C,EAAGkS,OACf5S,EAAK4uC,GACLtuC,EAAK,CAAC,GAAS,GAAIo2C,GAAY5K,GACxB,CAAC,EAAattC,KAAKs0C,OAAOzU,aACrC,KAAK,EAAG,MAAO,CAAC,EAAar+B,EAAGqS,WAAM,EAAQ/R,EAAG2Y,OAAO,CAACvY,EAAGkS,WAC5D,KAAK,EAED,OADAq7B,EAAYvtC,EAAGkS,OACR,CAAC,EAAapU,KAAK+0C,iBAAiB,CAAEtF,UAAWA,EAAWZ,OAAQvB,KAC/E,KAAK,EAED,OADA+K,EAAWn2C,EAAGkS,OACP,CAAC,EAAapU,KAAK8sC,MAAMuL,IACpC,KAAK,EAED,OADAC,EAAUp2C,EAAGkS,OACN,CAAC,EAAapU,KAAK62C,cAAcyB,IAC5C,KAAK,EAED,OADAt2C,EAAKE,EAAGkS,OAAQuY,EAAO3qB,EAAG2qB,KAAM7d,EAAU9M,EAAG8M,QAASknC,EAAch0C,EAAGg0C,YAAaI,EAAap0C,EAAGo0C,WAC7F,CAAC,EAAc,IAAIiM,GAAgB11B,EAAM8iB,EAAWnC,EAAe0I,EAAaI,EAAYtnC,IACvG,KAAK,EAAG,MAAM,IAAI7L,MAAM,oDAKxCslD,EAAoBloD,UAAU4K,GAAK,SAAU2R,EAASsnC,GAElD,YADoC,IAAhCA,IAA0CA,EAA8B,SAAUl3C,GAAK,OAAOA,IAC3F,GAAUhN,UAAM,OAAQ,GAAQ,WACnC,IAAIgtC,EAAKrqB,EAAQwhC,EAAaC,EAAaC,EAASC,EACpD,OAAO,GAAYtkD,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAED,OADA64B,EAAMhtC,KAAK8O,QAAQy1C,iBAAiBvX,IAC7B,CAAC,EAAaA,EAAI7iB,UAAUvN,IACvC,KAAK,EAED,OADA+F,EAASnhB,EAAG4S,OACL,CAAC,EAAa44B,EAAInhB,eAAejP,IAC5C,KAAK,EAED,OADAunC,EAAc3iD,EAAG4S,OACV,CAAC,EAAapU,KAAKgtC,IAAIliB,kBAClC,KAAK,EAID,OAHAs5B,EAAc5iD,EAAG4S,OACjBiwC,EAAUD,EAAYrD,SACtBuD,EAAM,IAAI,GAAoB1nC,EAAS+F,EAAQ3iB,KAAMA,KAAMmkD,EAAaE,GACjE,CAAC,EAAcH,EAA4BI,EAAKtkD,KAAK8O,kBAahFy5C,EAAoBloD,UAAUk4C,MAAQ,SAAUtE,GAC5C,IAAIsE,EAAQ,IAAI,GAAev4C,KAAK8O,QAAS9O,KAAKu2C,WAIlD,OAHIv1C,MAAMC,QAAQgzC,IACdsE,EAAMlH,KAAK4C,GAERsE,GAEJgQ,EA/gB6B,CAghBtC,IAEE,GAAmC,WACnC,SAASkB,EAAkB36C,GACvB9O,KAAK8O,QAAUA,EA2InB,OAzIA26C,EAAkBppD,UAAUqpD,aAAe,WACvC,OAAO,GAAU1pD,UAAM,OAAQ,GAAQ,WACnC,IAAI81C,EACJ,OAAO,GAAY91C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EAAG,MAAO,CAAC,EAAanU,KAAK8O,QAAQk+B,IAAIjiB,oBAC9C,KAAK,EAED,OADA+qB,EAAiBt0C,EAAG4S,OAAQ0hC,cACrB,CAAC,EAAcA,WAK1C2T,EAAkBppD,UAAUyzB,YAAc,SAAUvF,GAChD,OAAO,GAAUvuB,UAAM,OAAQ,GAAQ,WACnC,IAAI43C,EAAQp2C,EACRM,EACJ,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAGD,OAFA3S,EAAKsxB,GAAOwoB,KACZx5C,EAAK,GACE,CAAC,EAAa9B,KAAK0pD,gBAC9B,KAAK,EAED,OADA9R,EAAS,IAAKp2C,EAAGqS,MAAMif,GAAQ,MAAC,GAAShxB,EAAG+vB,SAAW7vB,EAAGoS,OAAQtS,MAC3D,CAAC,EAAc81C,EAAO9jB,YAAYvF,YAK7Dk7B,EAAkBppD,UAAUwzB,yBAA2B,SAAUtF,GAC7D,OAAO,GAAUvuB,UAAM,OAAQ,GAAQ,WACnC,IAAI43C,EAAQp2C,EACRM,EACJ,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAGD,OAFA3S,EAAKsxB,GAAOwoB,KACZx5C,EAAK,GACE,CAAC,EAAa9B,KAAK0pD,gBAC9B,KAAK,EAED,OADA9R,EAAS,IAAKp2C,EAAGqS,MAAMif,GAAQ,MAAC,GAAShxB,EAAG+vB,SAAW7vB,EAAGoS,OAAQtS,MAC3D,CAAC,EAAc81C,EAAO/jB,yBAAyBtF,YAK1Ek7B,EAAkBppD,UAAU2zB,UAAY,SAAUzF,GAC9C,OAAO,GAAUvuB,UAAM,OAAQ,GAAQ,WACnC,IAAI43C,EAAQp2C,EACRM,EACJ,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAGD,OAFA3S,EAAKsxB,GAAOwoB,KACZx5C,EAAK,GACE,CAAC,EAAa9B,KAAK0pD,gBAC9B,KAAK,EAED,OADA9R,EAAS,IAAKp2C,EAAGqS,MAAMif,GAAQ,MAAC,GAAShxB,EAAG+vB,SAAW7vB,EAAGoS,OAAQtS,MAC3D,CAAC,EAAc81C,EAAO5jB,UAAUzF,YAK3Dk7B,EAAkBppD,UAAUw3C,uBAAyB,SAAU5D,GAC3D,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,IAAI2pD,EAAcnoD,EAAIM,EACtB,OAAO,GAAY9B,MAAM,SAAUgC,GAC/B,OAAQA,EAAGmS,OACP,KAAK,EAGD,OAFAw1C,EAAe1V,EACfzyC,EAAKmoD,EACE,CAAC,EAAa3pD,KAAK4pD,gBAAgB3V,EAAO7nC,OACrD,KAAK,EAED,OADA5K,EAAG4K,KAAOpK,EAAGoS,OACR6/B,EAAOhF,MACZntC,EAAK6nD,EACE,CAAC,EAAa3pD,KAAK6pD,gBAAgB5V,EAAOhF,QAFxB,CAAC,EAAa,GAG3C,KAAK,EACDntC,EAAGmtC,KAAOjtC,EAAGoS,OACbpS,EAAGmS,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAcw1C,WAK9CF,EAAkBppD,UAAUupD,gBAAkB,SAAUx9C,GACpD,OAAO,GAAUpM,UAAM,OAAQ,GAAQ,WACnC,IAAI8pD,EAAet5B,EAAGu5B,EACtB,OAAO,GAAY/pD,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,MAAsB,kBAAT/H,EAA2B,CAAC,EAAa,GAC/C,CAAC,EAAapM,KAAK8zB,YAAY1nB,IAC1C,KAAK,EAED,GADAokB,EAAIhvB,EAAG4S,OACG,OAANoc,EACA,MAAM,IAAIse,GAAqB,yBAA0B1iC,GAG7D,OADA09C,EAAat5B,EACN,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAaxwB,KAAKg0B,UAAU5nB,IAC5C,KAAK,EACDokB,EAAIhvB,EAAG4S,OACP21C,EAAU,CAAC,YAAa,UAAW,QAEnCD,EAAat5B,EAAEzkB,MAAK,SAAUW,EAAGC,GAAK,OAAOo9C,EAAQpiC,QAAQjb,EAAE6L,MAAQwxC,EAAQpiC,QAAQhb,EAAE4L,SACzF/W,EAAG2S,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAc21C,WAK9CL,EAAkBppD,UAAUwpD,gBAAkB,SAAU5a,GACpD,OAAO,GAAUjvC,UAAM,OAAQ,GAAQ,WACnC,IAAIgqD,EAAYx5B,EAChB,OAAO,GAAYxwB,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,MAAsB,kBAAT86B,EAA2B,CAAC,EAAa,GAC/C,CAAC,EAAajvC,KAAK6zB,yBAAyBob,IACvD,KAAK,EAED,GADAze,EAAIhvB,EAAG4S,OACG,OAANoc,EACA,MAAM,IAAIue,GAAqB,yBAA0BE,GAG7D,OADA+a,EAAax5B,EACN,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAaxwB,KAAKg0B,UAAUib,IAC5C,KAAK,EACD+a,EAAaxoD,EAAG4S,OAChB5S,EAAG2S,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAc61C,WAKvCP,EA7I2B,GAgJlCQ,GAA2B,WAC3B,SAASA,EAAUn7C,GACf9O,KAAK8O,QAAUA,EASnB,OAPAm7C,EAAU5pD,UAAU6rB,SAAW,SAAUzqB,GACrC,OAAO,GAAUzB,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcxB,KAAK8O,QAAQk+B,IAAI9gB,SAASzqB,WAIrDwoD,EAXmB,GAc1BC,GAA4B,CAC5BtW,yBAA0B,EAC1BC,iCAAkC,KAElCsW,GAAwB,CACxBC,oCAAqC,IACrCC,mCAAmC,EACnCC,oCAAqC,OAAAC,GAAA,SAKrC,GAAyB,WACzB,SAASC,EAAQC,EAAMC,EAASC,EAAQC,EAAS3U,EAAQiB,EAAU2R,EAAQzM,EAAQxE,QAC/D,IAAZ8S,IAAsBA,EAAU,IAAIrd,SACxB,IAAZud,IAAsBA,EAAU,IAAIC,GAAA,KAAgB,GAAS,GAAS,GAAIV,IAAwBD,MACtGlqD,KAAKyqD,KAAOA,EACZzqD,KAAK0qD,QAAUA,EACf1qD,KAAK2qD,OAASA,EACd3qD,KAAK4qD,QAAUA,EACf5qD,KAAK8qD,YAAc,GACnB9qD,KAAK+qD,kBAAoB,GACzB/qD,KAAKgrD,GAAK,IAAI,GAAchrD,MAC5BA,KAAKs2C,SAAW,IAAI,GAAoBt2C,MACxCA,KAAK8rB,SAAW,IAAI,GAAoB9rB,KAAMA,KAAKs2C,UACnDt2C,KAAKu4C,MAAQ,IAAIE,GAAiBz4C,KAAMA,KAAKs2C,UAC7Ct2C,KAAKo8C,OAAS,IAAI6G,GAAOjjD,MACA,kBAAdA,KAAKyqD,KACZzqD,KAAKirD,WAAa,IAAI,EAAUjrD,KAAKyqD,MAGrCzqD,KAAKirD,WAAajrD,KAAKyqD,KAE3BzqD,KAAKkrD,QAAUjV,GAAkB,IAAIpJ,GAAU7sC,MAC/CA,KAAKmrD,UAAYjU,GAAsB,IAAIjK,GAAYjtC,MACvDA,KAAK4jD,iBAAmB,IAAI,GAAiB5jD,MAC7CA,KAAKorD,gBAAkBhP,GAAkB,IAAI,GAAqBp8C,MAClEA,KAAKqrD,QAAUzT,GAAkB,IAAI,GAAkB53C,MACvDA,KAAKsrD,QAAUzC,GAAkB,IAAIoB,GAAUjqD,MA8KnD,OA5KA+S,OAAOsE,eAAemzC,EAAQnqD,UAAW,SAAU,CAC/C2W,IAAK,WACD,OAAOhX,KAAK4qD,QAAQhvC,YAExB5d,IAAK,SAAUG,GACX6B,KAAK4qD,QAAQvkD,KAAK,GAAS,GAAIlI,KAEnCmZ,YAAY,EACZC,cAAc,IAElBizC,EAAQnqD,UAAUkrD,iBAAmB,SAAUptD,GAC3C6B,KAAK4qD,QAAQvkD,KAAK,GAAS,GAAS,GAAIrG,KAAK4qD,QAAQhvC,YAAazd,KAEtE4U,OAAOsE,eAAemzC,EAAQnqD,UAAW,MAAO,CAC5C2W,IAAK,WACD,OAAOhX,KAAKirD,YAEhBjtD,IAAK,SAAUG,GACX6B,KAAKirD,WAAa9sD,GAEtBmZ,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemzC,EAAQnqD,UAAW,WAAY,CACjD2W,IAAK,WACD,OAAOhX,KAAKmrD,WAEhBntD,IAAK,SAAUG,GACX6B,KAAKmrD,UAAYhtD,GAErBmZ,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemzC,EAAQnqD,UAAW,SAAU,CAC/C2W,IAAK,WACD,OAAOhX,KAAKkrD,SAEhBltD,IAAK,SAAUG,GACX6B,KAAKkrD,QAAU/sD,GAEnBmZ,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemzC,EAAQnqD,UAAW,SAAU,CAC/C2W,IAAK,WACD,OAAOhX,KAAK0qD,SAEhB1sD,IAAK,SAAUG,GACX6B,KAAK0qD,QAAUvsD,GAEnBmZ,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemzC,EAAQnqD,UAAW,iBAAkB,CACvD2W,IAAK,WACD,OAAOhX,KAAKorD,iBAEhBptD,IAAK,SAAUG,GACX6B,KAAKorD,gBAAkBjtD,GAE3BmZ,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemzC,EAAQnqD,UAAW,QAAS,CAC9C2W,IAAK,WACD,OAAOhX,KAAK2qD,QAEhB3sD,IAAK,SAAUG,GACX6B,KAAK2qD,OAASxsD,GAElBmZ,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemzC,EAAQnqD,UAAW,SAAU,CAC/C2W,IAAK,WACD,OAAOhX,KAAKqrD,SAEhBrtD,IAAK,SAAUG,GACX6B,KAAKqrD,QAAUltD,GAEnBmZ,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAemzC,EAAQnqD,UAAW,SAAU,CAC/C2W,IAAK,WACD,OAAOhX,KAAKsrD,SAEhBttD,IAAK,SAAUG,GACX6B,KAAKsrD,QAAUntD,GAEnBmZ,YAAY,EACZC,cAAc,IAElBizC,EAAQnqD,UAAUmrD,oBAAsB,SAAU35B,GAE9C,YADiB,IAAbA,IAAuBA,EAAW,IAC/B,GAAU7xB,UAAM,OAAQ,GAAQ,WACnC,IAAI81C,EACJ,OAAO,GAAY91C,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACD,OAAKnU,KAAK2qD,OACH,CAAC,EAAc94B,EAAS45B,SAASzrD,KAAK2qD,SADpB,CAAC,EAAa,GAE3C,KAAK,EAAG,MAAO,CAAC,EAAa3qD,KAAKgtC,IAAIjiB,oBACtC,KAAK,EAED,OADA+qB,EAAiBt0C,EAAG4S,OAAQ0hC,cACrB,CAAC,EAAcjkB,EAAS45B,SAAS3V,YAK5D0U,EAAQnqD,UAAU0zC,+BAAiC,WAC/C,OAAO,GAAU/zC,UAAM,OAAQ,GAAQ,WACnC,IAAI0rD,EAAiB3L,EAAW4L,EAAWC,EAC3C,OAAO,GAAY5rD,MAAM,SAAUwB,GAC/B,OAAQA,EAAG2S,OACP,KAAK,EACDu3C,EAAkB,EAClBlqD,EAAG2S,MAAQ,EACf,KAAK,EAED,OADA3S,EAAG6S,KAAKvT,KAAK,CAAC,EAAG,EAAG,CAAE,IACf,CAAC,EAAad,KAAKgtC,IAAIpiB,gBAClC,KAAK,EAeD,OAdAm1B,EAAYv+C,EAAG4S,OACfu3C,EAAY5L,EAAU8L,oBAAoB,QACJ5sD,IAAlC8gD,EAAU+L,sBACVH,EAAY5L,EAAU+L,qBAE1BF,EAA8B,IAAUp1B,IAAIm1B,EAAW,IAAI,IAAU5L,EAAUgM,+BAC1E1d,aAAap9B,KAAK4tC,IAAI,EAAGkB,EAAUiM,kBAAoBjM,EAAUkM,uBAItEL,EAA8BA,EAA4Brd,UAAU,GACpEvuC,KAAK0yC,OAAOiB,kCAA+E,IAA3CiY,EAA4BtL,WACxE,GACAsL,EAA4BtL,WACzB,CAAC,EAActgD,KAAK0yC,OAAOiB,mCACtC,KAAK,EAKD,OAJAnyC,EAAG4S,OAII,CAAC,EAAcs3C,GAC1B,KAAK,EAAG,MAAO,CAAC,WAQhClB,EAAQnqD,UAAUg2C,MAAQ,WACtB,OAAO,IAAImU,EAAQxqD,KAAKgtC,IAAKhtC,KAAKs0C,OAAQt0C,KAAKgL,MAAOhL,KAAK4qD,QAAS5qD,KAAKi2C,OAAQj2C,KAAKmrD,UAAWnrD,KAAK6oD,SAK1G2B,EAAQnqD,UAAU6rD,0BAA4B,SAAUC,GACpDnsD,KAAK+qD,kBAAkBjqD,KAAKqrD,IAOhC3B,EAAQnqD,UAAUkkD,eAAiB,WAC/B,IAAI6H,EAAiBpsD,KAIrB,OAHAA,KAAK+qD,kBAAkB7pD,SAAQ,SAAUmrD,GACrCD,EAAiBC,EAAUD,EAAe/V,YAEvC+V,GAEJ5B,EAxMiB,GA2MxB8B,GAAe,SAAU73C,EAAI0/B,GAAU,OAAO1/B,EAAGkY,OAASwnB,EAAOyF,QACjE2S,GAAe,SAAUv/C,EAAGmnC,GAC5B,OAAQnnC,EAAE0iC,MACN,IAAK,cACD,MAAO,aAAc1iC,GAAKA,EAAEuW,SAASwJ,WAAaonB,EAAOtF,OAC7D,IAAK,mBACD,MAAO,aAAc7hC,GAAKA,EAAE20B,MAAQwS,EAAOtF,OAC/C,QACI,MAAO,WAAY7hC,GAAKA,EAAE6hC,SAAWsF,EAAOtF,SAGpD2d,GAAa,SAAUx/C,EAAGmnC,GAAU,MAAO,SAAUnnC,GAAKA,EAAE0iC,OAASyE,EAAOzE,MAC5E+c,GAAoB,SAAUz/C,EAAGmnC,GACjC,OAAQnnC,EAAE0iC,MACN,IAAK,aACD,OAAO1iC,EAAE+f,WAAaonB,EAAOnE,YACjC,IAAK,cACD,GAAI,aAAchjC,GACd,qBAAsBA,EAAEuW,UACxB,yBAA0BvW,EAAEuW,SAASC,kBACrCxiB,MAAMC,QAAQ+L,EAAEuW,SAASC,iBAAiB61B,sBAC1C,OAAOrsC,EAAEuW,SAASC,iBAAiB61B,qBAAqBqT,MAAK,SAAU5gC,GAAY,OAAOA,IAAaqoB,EAAOnE,eAElH,MACJ,IAAK,cACD,OAAOhjC,EAAEgjC,cAAgBmE,EAAOnE,YACpC,QACI,OAAO,IAGf2c,GAAmB,SAAUl4C,EAAI0/B,GACjC,MAAI,WAAYA,EACLmY,GAAa73C,EAAI0/B,GAEnB,WAAYA,EACVoY,GAAa93C,EAAI0/B,GAEnB,SAAUA,EACRqY,GAAW/3C,EAAI0/B,GAEjB,gBAAiBA,GACfsY,GAAkBh4C,EAAI0/B,IAIjCyY,GAAqB,SAAUn4C,EAAI8N,GACnC,GAAIvhB,MAAMC,QAAQshB,EAAIsqC,KAClB,OAAOtqC,EAAIsqC,IAAI1qC,OAAM,SAAUnV,GAAK,OAAO8/C,GAAer4C,EAAIzH,MAE7D,GAAIhM,MAAMC,QAAQshB,EAAIwqC,IACvB,OAAOxqC,EAAIwqC,GAAGL,MAAK,SAAU1/C,GAAK,OAAO8/C,GAAer4C,EAAIzH,MAG5D,MAAM,IAAI/J,MAAM,2DAGpB6pD,GAAiB,SAAUr4C,EAAI0/B,GAC/B,IAAI6Y,EAAU,GAOd,OANKhsD,MAAMC,QAAQkzC,GAIf6Y,EAAQlsD,KAAK+S,MAAMm5C,EAAS,GAAc,GAAI,GAAO7Y,KAHrD6Y,EAAQlsD,KAAKqzC,GAKV6Y,EAAQ7qC,OAAM,SAAU8qC,GAC3B,MAAI,QAASA,GAAe,OAAQA,EACzBL,GAAmBn4C,EAAIw4C,GAGvBN,GAAiBl4C,EAAIw4C,OAKpC,GAAwC,WACxC,SAASC,EAAuBC,EAAKC,EAAaC,GAC9C,IAAI3rD,EAAQ1B,UACQ,IAAhBotD,IAA0BA,GAAc,QACnB,IAArBC,IAA+BA,EAAmB,OAAA9C,GAAA,SACtDvqD,KAAKotD,YAAcA,EACnBptD,KAAKqtD,iBAAmBA,EACxBrtD,KAAKstD,eAAiB,GACtBttD,KAAKutD,iBAAmB,GACxBvtD,KAAKwtD,eAAiB,GACtBxtD,KAAKytD,WAAa,IAAIC,GAAA,KACtBP,EACK9a,KAAK,OAAAsb,GAAA,MAAU3tD,KAAKytD,YAAa,OAAAjb,GAAA,OAAI,SAAU/wC,GAChDC,EAAMyE,KAAKzE,EAAM6rD,iBAAkB9rD,MACpC,SAAU8E,GACT7E,EAAMyE,KAAKzE,EAAM4rD,eAAgB/mD,MAClC,WACC7E,EAAMyE,KAAKzE,EAAM8rD,mBACjBxtD,KAAKotD,YAAcC,EAAmB,OAAA7a,GAAA,QAAO,OAAAc,GAAA,OAAW,WAAc,OAAO,YAC5EhB,YA8DT,OA5DA4a,EAAuB7sD,UAAU8F,KAAO,SAAUynD,EAAWzvD,GACzD,IAAImY,EAAK9U,EACT,IACI,IAAK,IAAIqsD,EAAc,GAASD,GAAYE,EAAgBD,EAAYxnD,QAASynD,EAAcxnD,KAAMwnD,EAAgBD,EAAYxnD,OAAQ,CACrI,IAAIyqB,EAAIg9B,EAAc3vD,MACtB,IACI2yB,EAAE3yB,GAEN,MAAO6E,GACH+qD,QAAQxnD,MAAMvD,KAI1B,MAAOqT,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQy3C,IAAkBA,EAAcxnD,OAAS9E,EAAKqsD,EAAYn3C,SAASlV,EAAG2E,KAAK0nD,GAEnF,QAAU,GAAIv3C,EAAK,MAAMA,EAAI/P,SAGrC2mD,EAAuB7sD,UAAUwpB,OAAS,SAAU+jC,EAAWzvD,GAC3D,IAAI+Z,EAAM01C,EAAUjmC,QAAQxpB,IACf,IAAT+Z,GACA01C,EAAUI,OAAO91C,EAAK,IAG9Bg1C,EAAuB7sD,UAAU4tD,GAAK,SAAU3+C,EAAMkI,GAClD,OAAQlI,GACJ,IAAK,OACDtP,KAAKutD,iBAAiBzsD,KAAK0W,GAC3B,MACJ,IAAK,QACDxX,KAAKstD,eAAexsD,KAAK0W,GACzB,MACJ,IAAK,QACDxX,KAAKwtD,eAAe1sD,KAAK0W,GACzB,MACJ,QACI,MAAM,IAAIvU,MAAM,+CAAiDqM,KAG7E49C,EAAuB7sD,UAAU6tD,IAAM,SAAU5+C,EAAMkI,GACnD,OAAQlI,GACJ,IAAK,OACDtP,KAAK6pB,OAAO7pB,KAAKutD,iBAAkB/1C,GACnC,MACJ,IAAK,QACDxX,KAAK6pB,OAAO7pB,KAAKstD,eAAgB91C,GACjC,MACJ,IAAK,QACDxX,KAAK6pB,OAAO7pB,KAAKwtD,eAAgBh2C,GACjC,MACJ,QACI,MAAM,IAAIvU,MAAM,iDAAmDqM,KAG/E49C,EAAuB7sD,UAAU8tD,MAAQ,WACrCnuD,KAAKytD,WAAWpnD,QAEb6mD,EAjFgC,GAoFvCkB,GAAe,SAAUt/C,GACzB,OAAO,eAAKA,EAAQk+B,IAAIniB,YAAYwnB,KAAK,OAAAljB,GAAA,UAEzCk/B,GAAc,SAAUla,GACxB,OAAO,OAAAqJ,GAAA,OAAU,SAAU74B,GACvB,OAAO,IAAI2pC,GAAA,MAAW,SAAUC,GAC5B,IAAIj4C,EAAK9U,EAAIqV,EAAK/U,EAAIiV,EAAK/U,EAC3B,IACI,IAAK,IAAIE,EAAK,GAASyiB,EAAMsuB,YAAa18B,EAAKrU,EAAGmE,QAASkQ,EAAGjQ,KAAMiQ,EAAKrU,EAAGmE,OAAQ,CAChF,IAAIiO,EAAMiC,EAAGpY,MACb,IACI,IAAK,IAAIqwD,GAAS33C,OAAM,EAAQ,GAASvC,IAAOm6C,EAAUD,EAAMnoD,QAASooD,EAAQnoD,KAAMmoD,EAAUD,EAAMnoD,OAAQ,CAC3G,IAAIoO,EAAKg6C,EAAQtwD,MACjB,IACI,IAAK,IAAIqY,GAAMO,OAAM,EAAQ,GAAStC,EAAG6O,WAAY6Q,EAAK3d,EAAGnQ,QAAS8tB,EAAG7tB,KAAM6tB,EAAK3d,EAAGnQ,OAAQ,CAC3F,IAAI+J,EAAU+jB,EAAGh2B,MACb2uD,GAAe,GAAS,CAAEngC,KAAMlY,EAAGkY,MAAQvc,GAAU+jC,IACrDoa,EAAIloD,KAAK,GAAS,CAAEsmB,KAAMlY,EAAGkY,MAAQvc,KAIjD,MAAO0G,GAASC,EAAM,CAAExQ,MAAOuQ,GAC/B,QACI,IACQqd,IAAOA,EAAG7tB,OAAStE,EAAKwU,EAAGE,SAAS1U,EAAGmE,KAAKqQ,GAEpD,QAAU,GAAIO,EAAK,MAAMA,EAAIxQ,SAIzC,MAAOqQ,GAASC,EAAM,CAAEtQ,MAAOqQ,GAC/B,QACI,IACQ63C,IAAYA,EAAQnoD,OAASxE,EAAK0sD,EAAM93C,SAAS5U,EAAGqE,KAAKqoD,GAEjE,QAAU,GAAI33C,EAAK,MAAMA,EAAItQ,SAIzC,MAAO8P,GAASC,EAAM,CAAE/P,MAAO8P,GAC/B,QACI,IACQE,IAAOA,EAAGjQ,OAAS9E,EAAKU,EAAGwU,SAASlV,EAAG2E,KAAKjE,GAEpD,QAAU,GAAIoU,EAAK,MAAMA,EAAI/P,OAEjCgoD,EAAIG,kBAIZ,GAA0C,WAC1C,SAASC,EAAyB7/C,GAC9B,IAAIpN,EAAQ1B,KACZA,KAAK8O,QAAUA,EAEf9O,KAAK4uD,OAAS5uD,KAAK8O,QAAQ87C,QAAQvY,KAAK,OAAAQ,GAAA,OAAU,SAAU56B,GAAO,OAAO,OAAAm6B,EAAA,MAAM,EAAGn6B,EAAImyC,yCACvFpqD,KAAK6uD,UAAY7uD,KAAK4uD,OAAOvc,KAAK,OAAAloC,GAAA,OAAI,WAAc,OAAOzI,EAAMoN,WAAa,OAAA+jC,GAAA,MAAUub,IAAe,OAAAtR,GAAA,MAAwB,QAAS,OAAAgS,GAAA,QAAW,OAAAzU,GAAA,SAQvJ,OANAsU,EAAyBtuD,UAAUiyC,UAAY,SAAUyc,GACrD,OAAO,IAAI,GAAuB/uD,KAAK6uD,UAAUxc,KAAK,OAAA2c,GAAA,MAAM,SAAUhvD,KAAK8O,QAAQ4jC,OAAO2X,kCAAmCrqD,KAAK8O,QAAQ4jC,OAAO4X,sCAErJqE,EAAyBtuD,UAAU4uD,mBAAqB,SAAU9a,GAC9D,OAAO,IAAI,GAAuBn0C,KAAK6uD,UAAUxc,KAAKgc,GAAYla,IAAUn0C,KAAK8O,QAAQ4jC,OAAO2X,kCAAmCrqD,KAAK8O,QAAQ4jC,OAAO4X,sCAEpJqE,EAdkC,GAmBzC,GAAU,CACV,WAAc,2CACd,QAAW,UAIXO,GAAsC,WACtC,SAASA,EAAqB1d,GAC1BxxC,KAAKwxC,QAAUA,EACfxxC,KAAKC,KAAO,uBACZD,KAAKL,QAAU,yBAEnB,OAAOuvD,EAN8B,GCj3K5BC,IDy3KwB,WACjC,SAASC,EAAgBC,GAErB,GADArvD,KAAKqvD,QAAUA,EACQ,IAAnBA,EAAQ1wD,OACR,MAAM,IAAIsE,MAAM,yCAGxBmsD,EAAgB/uD,UAAUysC,MAAQ,SAAUtrC,GACxC,IAAIurC,EAASvrC,EAAGurC,OAAQzpB,EAAW9hB,EAAG8hB,SACtC,OAAO,GAAUtjB,UAAM,OAAQ,GAAQ,WACnC,IAAIwxC,EAAS8d,EAAYC,EACzB,OAAO,GAAYvvD,MAAM,SAAU8B,GAC/B,OAAQA,EAAGqS,OACP,KAAK,EAAG,MAAO,CAAC,EAAa/R,QAAQkjB,IAAItlB,KAAKqvD,QAAQllD,KAAI,SAAU8rC,GAC5D,OAAOA,EAAOnJ,MAAM,CAAEC,OAAQA,EAAQzpB,SAAUA,SAExD,KAAK,EAED,GADAkuB,EAAU1vC,EAAGsS,OACU,IAAnBo9B,EAAQ7yC,OACR,MAAM,IAAIsE,MAAM,yCAEpBqsD,EAAa9d,EAAQ98B,MACrB,MAAO88B,EAAQ7yC,OAAQ,CAEnB,GADA4wD,EAAgB/d,EAAQ98B,MACpB66C,IAAkBD,EAClB,MAAM,IAAIJ,GAAqB,CAACI,EAAYC,IAEhDD,EAAaC,EAEjB,MAAO,CAAC,EAAcD,WA7BV,GAqCJ,WAC5B,SAASE,KAETA,EAAWnvD,UAAUw3C,uBAAyB,SAAU5D,GACpD,OAAO,GAAUj0C,UAAM,OAAQ,GAAQ,WACnC,OAAO,GAAYA,MAAM,SAAUwB,GAC/B,MAAO,CAAC,EAAcyyC,UANP,GAaQ,WACnC,SAASwb,KAETA,EAAkBpvD,UAAU6rB,SAAW,SAAUzqB,GAC7C,OAAO,GAAUzB,UAAM,OAAQ,GAAQ,WACnC,IAAIwc,EACJ,OAAO,GAAYxc,MAAM,SAAUwB,GAE/B,OADAgb,EAAQwlB,GAAcvgC,EAAKA,KAAMA,EAAK6N,MAAMkN,MACrC,CAAC,EAAc,CAAEksC,OAAQlsC,WARV,GAwBJ,WAC9B,SAASkzC,EAAajF,GAClBzqD,KAAKyqD,KAAOA,EACZzqD,KAAK2vD,SAAW,GAChB3vD,KAAKmuC,OAASA,GACW,kBAAdnuC,KAAKyqD,KACZzqD,KAAKirD,WAAa,IAAI,EAAUjrD,KAAKyqD,MAGrCzqD,KAAKirD,WAAajrD,KAAKyqD,KAE3BzqD,KAAK4vD,SAAW,IAAI,GAAQnF,GAC5BzqD,KAAK6vD,QAAU,IAAI5M,GAAOjjD,KAAK4vD,UAC/B5vD,KAAK8vD,YAAY,CAAE9iB,IAAKhtC,KAAKirD,aAE7BjrD,KAAKu4C,MAAQv4C,KAAK4vD,SAASrX,MAAMA,MAAM+C,KAAKt7C,KAAK4vD,SAASrX,OAW9DmX,EAAarvD,UAAUyvD,YAAc,SAAUtuD,GAC3C,IAAIwrC,EAAMxrC,EAAGwrC,IAAK+iB,EAASvuD,EAAGuuD,OAAQzb,EAAS9yC,EAAG8yC,OAAQziB,EAAWrwB,EAAGqwB,SAAU6gB,EAASlxC,EAAGkxC,OAAQuD,EAASz0C,EAAGy0C,OAAQmG,EAAS56C,EAAG46C,OAAQyM,EAASrnD,EAAGqnD,OAC1J7oD,KAAKgwD,eAAehjB,GACpBhtC,KAAKiwD,kBAAkBF,GACvB/vD,KAAKkwD,kBAAkB5b,GACvBt0C,KAAKmwD,kBAAkBla,GACvBj2C,KAAKowD,kBAAkBhU,GACvBp8C,KAAKqwD,kBAAkBxH,GACvB7oD,KAAK4vD,SAAS5kD,MAAQ6mB,EAClB6gB,GACA1yC,KAAK4vD,SAASrE,iBAAiB7Y,IAWvCgd,EAAarvD,UAAU6vD,kBAAoB,SAAU5b,GAC5Ct0C,KAAK2vD,SAASrb,QAA4B,qBAAXA,EAIT,qBAAXA,IACZt0C,KAAK4vD,SAAStb,OAASA,EACvBt0C,KAAK2vD,SAASrb,OAASA,IALvBt0C,KAAK4vD,SAAStb,OAAS,IAAIjH,GAC3BrtC,KAAK2vD,SAASrb,OAASA,IAe/Bob,EAAarvD,UAAU2vD,eAAiB,SAAUhjB,GAC3B,kBAARA,EACPhtC,KAAKirD,WAAa,IAAI,EAAUje,QAEnB/tC,IAAR+tC,IAELhtC,KAAKirD,WAAaje,GAEtBhtC,KAAK2vD,SAAS3iB,IAAMhtC,KAAKirD,WACzBjrD,KAAK4vD,SAAS5iB,IAAMhtC,KAAKirD,YAU7ByE,EAAarvD,UAAU8vD,kBAAoB,SAAUla,GACjD,IAAIjiC,EAAsB,qBAAXiiC,EAAyBj2C,KAAKswD,WAAWzjB,GAAhB7sC,GAA+Bi2C,EACvEj2C,KAAK2vD,SAAS1Z,OAASjiC,EACvBhU,KAAK4vD,SAAS3Z,OAASjiC,GAU3B07C,EAAarvD,UAAU4vD,kBAAoB,SAAUF,GAC3B,kBAAXA,EACP/vD,KAAKuwD,QAAU,IAAI,GAAyB,IAAI,GAAQ,IAAI,EAAUR,KAE/C,qBAAXA,EACZ/vD,KAAKuwD,QAAUR,OAEe9wD,IAAzBe,KAAK2vD,SAASI,SACnB/vD,KAAKuwD,QAAUvwD,KAAKswD,WAAW,GAAhBtwD,IAEnBA,KAAK2vD,SAASI,OAASA,GAU3BL,EAAarvD,UAAU+vD,kBAAoB,SAAUhU,GACjD,GAAKp8C,KAAK2vD,SAASvT,QAA4B,qBAAXA,EAKT,qBAAXA,IACZp8C,KAAK2vD,SAASvT,OAASA,EACvBp8C,KAAK4vD,SAAStM,eAAiBlH,OAPyB,CACxD,IAAIpnB,EAAIh1B,KAAKswD,WAAW,GAAhBtwD,GACRA,KAAK2vD,SAASvT,OAASpnB,EACvBh1B,KAAK4vD,SAAStM,eAAiBtuB,IAevC06B,EAAarvD,UAAUgwD,kBAAoB,SAAUxH,GACjD,IAAInoD,EAAsB,qBAAXmoD,EAAyB7oD,KAAKswD,WAAWrG,GAAhBjqD,GAA+B6oD,EACvE7oD,KAAK2vD,SAAS9G,OAASnoD,EACvBV,KAAK4vD,SAAS/G,OAASnoD,GAE3BqS,OAAOsE,eAAeq4C,EAAarvD,UAAW,KAAM,CAIhD2W,IAAK,WACD,OAAOhX,KAAK4vD,SAAS5E,IAEzB1zC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeq4C,EAAarvD,UAAW,WAAY,CAItD2W,IAAK,WACD,OAAOhX,KAAK4vD,SAAS9jC,UAEzBxU,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeq4C,EAAarvD,UAAW,SAAU,CACpD2W,IAAK,WACD,OAAOhX,KAAK6vD,SAEhBv4C,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeq4C,EAAarvD,UAAW,YAAa,CACvD2W,IAAK,WACD,OAAOhX,KAAK4vD,SAAShM,kBAEzBtsC,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeq4C,EAAarvD,UAAW,WAAY,CAItD2W,IAAK,WACD,OAAOhX,KAAK4vD,SAAStZ,UAEzBh/B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeq4C,EAAarvD,UAAW,SAAU,CAIpD2W,IAAK,WACD,OAAOhX,KAAKuwD,SAEhBj5C,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeq4C,EAAarvD,UAAW,MAAO,CAIjD2W,IAAK,WACD,OAAOhX,KAAK4vD,SAAS5iB,KAEzB11B,YAAY,EACZC,cAAc,IAElBxE,OAAOsE,eAAeq4C,EAAarvD,UAAW,SAAU,CAIpD2W,IAAK,WACD,OAAOhX,KAAK4vD,SAAStb,QAEzBh9B,YAAY,EACZC,cAAc,IASlBm4C,EAAarvD,UAAUmwD,aAAe,SAAU3yD,GAC5C,IAAI6D,EAAQ1B,KACRgB,MAAMC,QAAQpD,GACdA,EAAOqD,SAAQ,SAAUuvD,GAAa,OAAOA,EAAUC,iBAAiBhvD,EAAMkuD,aAG9E/xD,EAAO6yD,iBAAiB1wD,KAAK4vD,WAGrCF,EAAarvD,UAAUiwD,WAAa,SAAUK,GAC1C,IAAIjvD,EAAQ1B,KACZ,OAAO,WAEH,IADA,IAAI+U,EAAO,GACFoL,EAAK,EAAGA,EAAKvM,UAAUjV,OAAQwhB,IACpCpL,EAAKoL,GAAMvM,UAAUuM,GAEzB,OAAO,IAAKwwC,EAAKrV,KAAKznC,MAAM88C,EAAM,GAAc,MAAC,EAAQjvD,EAAMkuD,UAAW,GAAO76C,QAMzF26C,EAAarvD,UAAUuwD,eAAiB,WACpC,OAAO,IArPkB,GCn8KT,yDAAG,sHAASC,EAAT,EAASA,SAAUj0C,EAAnB,EAAmBA,QAAnB,kBAEIk0C,OAAOC,OAAOjlC,SAAS7gB,GAC1C,wCAHe,UAEb6gB,EAFa,OAMd+kC,EAASlyD,QAAWie,EANN,wDAQbo0C,EAAe,GACrBH,EAAS3vD,SAAQ,SAAA2kB,GACbmrC,EAAalwD,KAAb,gBACI4uC,KAAM/mB,EAAOonB,aACVjkB,EAASy5B,QAAQz+B,SAASjB,EAAIjJ,GAAS06B,wBAZ/B,UAgBCwZ,OAAOC,OAAO3U,OAAO7D,MAAMyY,GAhB5B,eAgBbzY,EAhBa,iBAkBGA,EAAMh1C,OAlBT,eAkBb0tD,EAlBa,yBAoBZ,CAAEC,SAAS,EAAMvkC,KAAMskC,EAAQtkC,OApBnB,8DAsBZ,CAAEukC,SAAS,EAAOxsC,MAAO,KAAMA,MAAO/kB,QAAS,KAAMA,UAtBzC,0DAAH,uD,4EC2KZkO,gCAAyC,YAAnC,gCAA4B,I,wCAmCtBA,gCAA2B,YAArB,kBAAc,G,gCAAO,iB,gCAM1B,S,gCAMS,oI,GAGtBA,gCAIC,KAHGsjD,KAAK,iFACLpmD,OAAO,UACN,cAAU,G,OAHfqmD,I,4QA/DRljD,yBAgFQmjD,EAAA,CA/EH9sC,KAAM7W,OACP4jD,MAAM,MACNC,QAAQ,sBACRC,SAAA,GACChtC,UAAO,+BAAE9W,QAAK,cALnB,C,8BAOI,iBAA6C,CAA7CG,gCAA6C,OAAvCF,MAAK,4BAAED,SAAOgX,QAAO,eAAY,GACvC7W,gCAEM,OAFAF,MAAK,4BAAED,SAAOmX,cAAa,iEAEjC,GAEAhX,gCAaM,OAbAF,MAAK,4BAAED,SAAO+jD,WAApB,CACI7sC,GAEalX,iBAAb,yBAKAF,gCAIC,Q,MAJaC,QAAK,8BAAEC,iFAChB,iBAAcyX,6BACXzX,YAAUymC,QAAM,SAAEud,GAAF,OAAUA,EAAIvzD,SAAOQ,QACvC,IAAC,KARM+O,yBAAbF,gCAIC,Q,MAJ4BC,QAAK,8BAAEC,6EAC/B,eAAYyX,6BACTzX,YAAUymC,QAAM,SAAEud,GAAF,OAAUA,EAAIvzD,SAAOQ,QACvC,IAAC,KANX,GAeAkP,gCA+BM,OA/BAF,MAAK,4BAAED,SAAOikD,YAApB,6BACInkD,gCA6BMqC,cAAA,KAAAC,wBA5BiBpC,YAAUymC,QAAM,SAAEud,GAAF,OAAUA,EAAIvzD,UAAK,SAA/C+R,G,gCADX1C,gCA6BM,OA3BD1O,IAAKoR,EAAS2V,GACdpY,QAAK,mBAAEC,uBAAqBwC,IAC5BvC,MAAK,4BAAED,SAAOwC,WAJnB,CAMIlC,yBAEE4jD,EAAA,CADGhjD,aAAclB,uBAAqB+9C,SAASv7C,EAAS2V,KAD1D,yBAIAhY,gCAkBM,OAlBAF,MAAK,4BAAED,SAAOY,OAApB,CACIT,gCAUM,OAVAF,MAAK,4BAAED,SAAOzN,OAApB,CAEuC,YAAzBiQ,EAAS0V,MAAMisC,YAAU,yBADnCrkD,gCAGE,O,MADG+gB,IAAKujC,EAAQ,SAFlB,sCAIAtkD,gCAGE,O,MADG+gB,IAAKujC,EAAQ,SAFlB,YAIAC,OATJ,GAWAlkD,gCAKM,OALAF,MAAK,4BAAED,SAAOskD,UAApB,8BAA6B,cACf7sC,6BAAGjV,EAAS0V,MAAMC,IAAK,aAAe,mCAG/C,YAAAV,6BAFGjV,EAAS/R,MAAM4d,QAAO,OADsB,IADpD,IAZJ,IAVJ,iBADJ,GAiCAlO,gCAQM,OARAF,MAAK,4BAAED,SAAO6X,OAApB,MAUAvX,yBASCqB,EAAA,CARI5B,QAAOC,oBACP4B,KAAM5B,cAAYgC,SAAQ,sBAC3BtB,KAAK,QACJsB,SAAUhC,cAAYgC,SACtBwW,QAASxY,uBACViX,MAAA,IANJ,C,8BAOK,iBAA4D,CAA/CjX,wBAAb,yBACDQ,yBAAyB+jD,EAAA,C,MAAZ7jD,KAAK,SADJV,yBAAbQ,yBAA4DC,EAAA,C,MAAzBlO,KAAK,QAAQmO,KAAK,QAAO,0DACjCV,cAAYwkD,MAAI,O,KARhD,+C,KAtEJ,Y,yFA3IW1jD,gCAAgB,CAC3BvO,KAAM,mBACNwO,MAAO,CAAE8V,KAAM5V,SAEfE,MAJ2B,SAIrBJ,EAAOK,GACT,MAAiBC,oBAAON,GAAhB8V,EAAR,EAAQA,KAEF4tC,EAAeC,kBACfC,EAAqBC,kBAErBC,EAAuBphD,kBAAI,GAE3BwgD,EAAY3gD,uBAAS,kBAAMmhD,EAAaK,0BAExCC,EAAuBthD,iBAAI,IAC3BuhD,EAAoB1hD,uBAAS,kBAC/B2gD,EAAUxzD,MAAMg2C,QAAO,SAACjkC,GAAD,OACnBuiD,EAAqBt0D,MAAMstD,SAASv7C,EAAS2V,UAI/C8sC,EAAgB3hD,uBAAS,kBAC3B2gD,EAAUxzD,MAAMgkB,OAAM,SAACjS,GAAD,OAClBuiD,EAAqBt0D,MAAMstD,SAASv7C,EAAS2V,UAI/C+sC,EAAc5hD,uBAAS,WACzB,OAAKyhD,EAAqBt0D,MAAMQ,OAM5B4zD,EAAqBp0D,MACd,CACH+zD,KAAM,0BACNxiD,UAAU,GAGX,CACHwiD,KAAM,YAAF,OAAcQ,EAAkBv0D,MAC/Bof,QAAO,SAAC6Y,EAAKy8B,GAAN,OAAez8B,EAAMy8B,EAAK10D,QAAO,GACxC4d,QAAQ,GAFT,QAGJrM,UAAU,GAfH,CACHwiD,KAAM,+BACNxiD,UAAU,MAiBhBojD,EAAuB,SAAC5iD,GACtBuiD,EAAqBt0D,MAAMstD,SAASv7C,EAAS2V,IAC7C4sC,EAAqBt0D,MAAM6vD,OACvByE,EAAqBt0D,MAAMwpB,QAAQzX,EAAS2V,IAC5C,GAGJ4sC,EAAqBt0D,MAAM2C,KAAKoP,EAAS2V,KAI3CktC,EAA2B,WAC7BpB,EAAUxzD,MAAM+C,SAAQ,SAACgP,GACrBuiD,EAAqBt0D,MAAM2C,KAAKoP,EAAS2V,QAG3CmtC,EAA6B,WAC/BP,EAAqBt0D,MAAQ,IAG3B80D,EAAgB,yDAAI,yGACjBR,EAAqBt0D,MAAMQ,OADV,wDAGhBu0D,EAAoBvB,EAAUxzD,MAC/Bg2C,QAAO,SAACud,GAAD,OAASe,EAAqBt0D,MAAMstD,SAASiG,EAAI7rC,OACxD1b,KAAI,SAACunD,GAAD,OAASA,EAAI9rC,MAAMC,MAE5B0sC,EAAqBp0D,OAAQ,EAPP,SASDgxD,GAAY,CAC7B0B,SAAUqC,EACVt2C,QAASu1C,EAAaxwB,MAXJ,OAShBr1B,EATgB,OAclBA,EAAO4kD,SACPpiD,EAAQG,KAAK,WACbsjD,EAAqBp0D,OAAQ,EAE7Bk0D,EAAmB/+C,OAAO,CACtB6/C,aAAc,CACV7jD,KAAM,UACNoV,MAAO,qBACPG,YAAa,uDAAF,OAAyDvY,EAAOmI,GAAhE,KACX2+C,aAAa,OAIrBb,EAAqBp0D,OAAQ,EAE7Bk0D,EAAmB/+C,OAAO,CACtB6/C,aAAc,CACV7jD,KAAM,UACNoV,MAAOpY,EAAOoY,MACdG,YAAavY,EAAO3M,QACpByzD,aAAa,MAlCH,2CAAJ,qDA+CtB,OAPA/hD,mBAAMkT,GAAM,WACHA,EAAKpmB,QACNs0D,EAAqBt0D,MAAQ,GAC7Bo0D,EAAqBp0D,OAAQ,MAI9B,CACHwzD,YACAc,uBACAC,oBACAC,gBACAJ,uBACAO,uBACAC,2BACAC,6BACAC,oBACAL,gBAIR/gD,WAAY,CACRwhD,cACAvhD,eACAwhD,aACAC,oB,qCCvJR,MAAMrkD,GAAa,GAEnBA,GAAW,UAAY,cAGvB,MAAMC,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,eAAeD,MAE7E,U,0BNiCAV,gCAAgB,CAC3BvO,KAAM,kBAEN4O,MAH2B,WAIvB,IAAMsjD,EAAeC,kBAEfoB,EAAuBriD,kBAAI,GAE3BsiD,EAAqBtiD,iBAAI,IAEzBuiD,EAAoBviD,iBAAI,IAExBwiD,EAAqBxiD,iBAAI,GACzByiD,EAA8B5iD,uBAAS,kBACzCyiD,EAAmBt1D,MAAMsJ,MACY,GAAhCksD,EAAmBx1D,MAAQ,GACD,EAA3Bw1D,EAAmBx1D,UAIrB01D,EAA0B1iD,iBAAI,GAE9B2iD,EAAuB9iD,uBAAS,kBAClCmhD,EAAaK,uBAAuBre,QAChC,SAACjkC,GAAD,OAAcA,EAAS/R,YAGzB41D,EAAgC/iD,uBAAS,kBAC3C8iD,EAAqB31D,MAAMsJ,MACe,GAArCosD,EAAwB11D,MAAQ,GACD,EAAhC01D,EAAwB11D,UAI1B61D,EAAaC,sBAAS,CACxBhvC,KAAM,CACF9mB,MAAO,EACPinB,IAAK,GAETC,MAAO,CACHlnB,MAAO,EACPinB,IAAK,GAETE,IAAK,CACDnnB,MAAO,EACPinB,IAAK,KAIPrZ,EAAOkoD,sBAAS,CAClBvtC,KAAM,OACN5F,OAAQ,YAENozC,EAAS,SAACnpD,GACZ,OAAQA,GACJ,IAAK,OACgB,QAAbgB,EAAK2a,MACL3a,EAAK2a,KAAO,MACZ+sC,EAAmBt1D,MAAM4N,MACrB,SAACW,EAAGC,GAAJ,OACI,IAAIyR,KAAK1R,EAAEkZ,MAAMuB,kBAAkB0a,UACnC,IAAIzjB,KAAKzR,EAAEiZ,MAAMuB,kBAAkB0a,cAEvB,OAAb91B,EAAK2a,OACZ3a,EAAK2a,KAAO,OACZ+sC,EAAmBt1D,MAAM4N,MACrB,SAACW,EAAGC,GAAJ,OACI,IAAIyR,KAAKzR,EAAEiZ,MAAMuB,kBAAkB0a,UACnC,IAAIzjB,KAAK1R,EAAEkZ,MAAMuB,kBAAkB0a,cAI/C,MAEJ,IAAK,SACkB,WAAf91B,EAAK+U,QACL/U,EAAK2a,KAAO,UAEZ3a,EAAK+U,OAAS,OACd2yC,EAAmBt1D,MAAM4N,MACrB,SAACW,EAAGC,GAAJ,OAAUA,EAAEmU,OAASpU,EAAEoU,WAEL,QAAf/U,EAAK+U,QACZ/U,EAAK+U,OAAS,MACd2yC,EAAmBt1D,MAAM4N,MACrB,SAACW,EAAGC,GAAJ,OAAUD,EAAEoU,OAASnU,EAAEmU,WAEL,OAAf/U,EAAK+U,SACZ/U,EAAK2a,KAAO,OAEZ3a,EAAK+U,OAAS,UACd2yC,EAAmBt1D,MAAM4N,MACrB,SAACW,EAAGC,GAAJ,OACI,IAAIyR,KAAKzR,EAAEiZ,MAAMuB,kBAAkB0a,UACnC,IAAIzjB,KAAK1R,EAAEkZ,MAAMuB,kBAAkB0a,cAI/C,QAmEZ,OA/DAsyB,uBAAS,wCAAC,wHAE2BC,gBAAqB,CAClDx3C,QAASu1C,EAAaxwB,MAHpB,OAEA0yB,EAFA,OAKNZ,EAAmBt1D,MAAQm2D,uBAAUD,GAQ/BE,EAAsBd,EAAmBt1D,MAAMg2C,QACjD,SAACrtB,GAAD,OACI0tC,cAASC,QAAQ3tC,EAASlB,MAAMuB,kBAAkButC,GAClDF,cAASG,MAAMC,MAAM,CAAEC,KAAM,IAAKH,MAEpCI,EAAuBrB,EAAmBt1D,MAAMg2C,QAClD,SAACrtB,GAAD,OACI0tC,cAASC,QAAQ3tC,EAASlB,MAAMuB,kBAAkButC,GAClDF,cAASG,MAAMC,MAAM,CAAEC,KAAM,KAAMH,MAG3CV,EAAW/uC,KAAK9mB,MAAQo2D,EAAoBh3C,QACxC,SAAC6Y,EAAKy8B,GAAN,OAAez8B,EAAMy8B,EAAK/xC,SAC1B,GAEJkzC,EAAW/uC,KAAKG,IAAMmvC,EAAoB51D,OACpCq1D,EAAW/uC,KAAK9mB,MAAQo2D,EAAoB51D,OAC5C,EAENq1D,EAAW3uC,MAAMlnB,MAAQ22D,EAAqBv3C,QAC1C,SAAC6Y,EAAKy8B,GAAN,OAAez8B,EAAMy8B,EAAK/xC,SAC1B,GAEJkzC,EAAW3uC,MAAMD,IAAM0vC,EAAqBn2D,OACtCq1D,EAAW3uC,MAAMlnB,MAAQ22D,EAAqBn2D,OAC9C,EAENq1D,EAAW1uC,IAAInnB,MAAQs1D,EAAmBt1D,MAAMof,QAC5C,SAAC6Y,EAAKy8B,GAAN,OAAez8B,EAAMy8B,EAAK/xC,SAC1B,GAEJkzC,EAAW1uC,IAAIF,IAAMquC,EAAmBt1D,MAAMQ,OACxCq1D,EAAW1uC,IAAInnB,MAAQs1D,EAAmBt1D,MAAMQ,OAChD,EA9CA,6CAiDVo2D,0BAAY,WAAM,OAEVrB,EAAkBv1D,MAAMwC,eAAe,WACvC,UAAC+yD,EAAkBv1D,aAAnB,OAAC,EAAyB62D,QAE1BtB,EAAkBv1D,MAAM82D,iBAKhCC,eAAQ,CACJxwC,MAAO,gBAGJ,CACHytC,eACAqB,uBACAC,qBACAK,uBACAqB,wBAAyBhD,EAAaK,uBACtCqB,0BACAF,qBACAC,8BACAG,gCACAhoD,OACAmoD,SACAF,aACAoB,2BAIRvjD,WAAY,CAAEwjD,oBAAkBvjD,eAAQwjD,eAAQC,mBAAYC,qB,aO9NhE,MAAM,GAAa,GAEnB,GAAW,UAAY,cAGvB,MAAM,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,eAAe,MAE7E,UREAhnD,gCAAgB,CAC3BvO,KAAM,kBAEN4R,WAAY,CAAE4jD,YAAMC,sBSXxB,MAAM,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAStmD,KAErD,iB,qBCPf,IAAIumD,EAAK,EAAQ,QAEjB93D,EAAOC,QAAU,eAAe+N,KAAK8pD,I,kCCDrC,IAAIjrD,EAAI,EAAQ,QACZU,EAAc,EAAQ,QACtBwqD,EAAyB,EAAQ,QACjC/qD,EAAsB,EAAQ,QAC9BpB,EAAW,EAAQ,QACnB6B,EAAQ,EAAQ,QAEhBsB,EAASxB,EAAY,GAAGwB,QAExBC,EAASvB,GAAM,WACjB,MAAuB,WAAhB,KAAKL,IAAI,MAKlBP,EAAE,CAAEK,OAAQ,SAAUC,OAAO,EAAMkC,OAAQL,GAAU,CACnD5B,GAAI,SAAYvM,GACd,IAAIm3D,EAAIpsD,EAASmsD,EAAuB51D,OACpCkL,EAAM2qD,EAAEl3D,OACRwM,EAAgBN,EAAoBnM,GACpC8D,EAAI2I,GAAiB,EAAIA,EAAgBD,EAAMC,EACnD,OAAQ3I,EAAI,GAAKA,GAAK0I,OAAOjM,EAAY2N,EAAOipD,EAAGrzD,O,sBCtBvD,IAAIjE,EAAW,EAAQ,QAEnB4T,EAAQlB,KAAKkB,MAKjBtU,EAAOC,QAAUyS,OAAOO,WAAa,SAAmBglD,GACtD,OAAQv3D,EAASu3D,IAAOC,SAASD,IAAO3jD,EAAM2jD,KAAQA,I,qBCPxDj4D,EAAOC,QAAU,CAAC,QAAU,gCAAgC,MAAQ,8BAA8B,YAAc,oCAAoC,OAAS,+BAA+B,MAAQ,8BAA8B,KAAO,6BAA6B,UAAY,kCAAkC,WAAa,mCAAmC,SAAW,iCAAiC,cAAgB,sCAAsC,UAAY,kCAAkC,QAAU,gCAAgC,OAAS,+BAA+B,KAAO,6BAA6B,WAAa,mCAAmC,KAAO,6BAA6B,KAAO,6BAA6B,WAAa,mCAAmC,KAAO,6BAA6B,MAAQ,8BAA8B,MAAQ,8BAA8B,WAAa,mCAAmC,cAAgB,sCAAsC,KAAO,6BAA6B,QAAU,kC,kCCDthC,oE,kCCAA","file":"js/withdrawals.ca6619be.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","var baseSet = require('./_baseSet');\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nmodule.exports = set;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","/**\r\n * Hypertext Transfer Protocol (HTTP) response status codes.\r\n * @see {@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}\r\n */\r\nvar STATUS_CODE;\r\n(function (STATUS_CODE) {\r\n    /**\r\n     * The server has received the request headers and the client should proceed to send the request body\r\n     * (in the case of a request for which a body needs to be sent; for example, a POST request).\r\n     * Sending a large request body to a server after a request has been rejected for inappropriate headers would be inefficient.\r\n     * To have a server check the request's headers, a client must send Expect: 100-continue as a header in its initial request\r\n     * and receive a 100 Continue status code in response before sending the body. The response 417 Expectation Failed indicates the request should not be continued.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"CONTINUE\"] = 100] = \"CONTINUE\";\r\n    /**\r\n     * The requester has asked the server to switch protocols and the server has agreed to do so.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"SWITCHING_PROTOCOLS\"] = 101] = \"SWITCHING_PROTOCOLS\";\r\n    /**\r\n     * A WebDAV request may contain many sub-requests involving file operations, requiring a long time to complete the request.\r\n     * This code indicates that the server has received and is processing the request, but no response is available yet.\r\n     * This prevents the client from timing out and assuming the request was lost.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"PROCESSING\"] = 102] = \"PROCESSING\";\r\n    /**\r\n     * Standard response for successful HTTP requests.\r\n     * The actual response will depend on the request method used.\r\n     * In a GET request, the response will contain an entity corresponding to the requested resource.\r\n     * In a POST request, the response will contain an entity describing or containing the result of the action.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"OK\"] = 200] = \"OK\";\r\n    /**\r\n     * The request has been fulfilled, resulting in the creation of a new resource.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"CREATED\"] = 201] = \"CREATED\";\r\n    /**\r\n     * The request has been accepted for processing, but the processing has not been completed.\r\n     * The request might or might not be eventually acted upon, and may be disallowed when processing occurs.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"ACCEPTED\"] = 202] = \"ACCEPTED\";\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The server is a transforming proxy that received a 200 OK from its origin,\r\n     * but is returning a modified version of the origin's response.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"NON_AUTHORITATIVE_INFORMATION\"] = 203] = \"NON_AUTHORITATIVE_INFORMATION\";\r\n    /**\r\n     * The server successfully processed the request and is not returning any content.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"NO_CONTENT\"] = 204] = \"NO_CONTENT\";\r\n    /**\r\n     * The server successfully processed the request, but is not returning any content.\r\n     * Unlike a 204 response, this response requires that the requester reset the document view.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"RESET_CONTENT\"] = 205] = \"RESET_CONTENT\";\r\n    /**\r\n     * The server is delivering only part of the resource (byte serving) due to a range header sent by the client.\r\n     * The range header is used by HTTP clients to enable resuming of interrupted downloads,\r\n     * or split a download into multiple simultaneous streams.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"PARTIAL_CONTENT\"] = 206] = \"PARTIAL_CONTENT\";\r\n    /**\r\n     * The message body that follows is an XML message and can contain a number of separate response codes,\r\n     * depending on how many sub-requests were made.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"MULTI_STATUS\"] = 207] = \"MULTI_STATUS\";\r\n    /**\r\n     * The members of a DAV binding have already been enumerated in a preceding part of the (multistatus) response,\r\n     * and are not being included again.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"ALREADY_REPORTED\"] = 208] = \"ALREADY_REPORTED\";\r\n    /**\r\n     * The server has fulfilled a request for the resource,\r\n     * and the response is a representation of the result of one or more instance-manipulations applied to the current instance.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"IM_USED\"] = 226] = \"IM_USED\";\r\n    /**\r\n     * Indicates multiple options for the resource from which the client may choose (via agent-driven content negotiation).\r\n     * For example, this code could be used to present multiple video format options,\r\n     * to list files with different filename extensions, or to suggest word-sense disambiguation.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"MULTIPLE_CHOICES\"] = 300] = \"MULTIPLE_CHOICES\";\r\n    /**\r\n     * This and all future requests should be directed to the given URI.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"MOVED_PERMANENTLY\"] = 301] = \"MOVED_PERMANENTLY\";\r\n    /**\r\n     * This is an example of industry practice contradicting the standard.\r\n     * The HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect\r\n     * (the original describing phrase was \"Moved Temporarily\"), but popular browsers implemented 302\r\n     * with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307\r\n     * to distinguish between the two behaviours. However, some Web applications and frameworks\r\n     * use the 302 status code as if it were the 303.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"FOUND\"] = 302] = \"FOUND\";\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The response to the request can be found under another URI using a GET method.\r\n     * When received in response to a POST (or PUT/DELETE), the client should presume that\r\n     * the server has received the data and should issue a redirect with a separate GET message.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"SEE_OTHER\"] = 303] = \"SEE_OTHER\";\r\n    /**\r\n     * Indicates that the resource has not been modified since the version specified by the request headers If-Modified-Since or If-None-Match.\r\n     * In such case, there is no need to retransmit the resource since the client still has a previously-downloaded copy.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"NOT_MODIFIED\"] = 304] = \"NOT_MODIFIED\";\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * The requested resource is available only through a proxy, the address for which is provided in the response.\r\n     * Many HTTP clients (such as Mozilla and Internet Explorer) do not correctly handle responses with this status code, primarily for security reasons.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"USE_PROXY\"] = 305] = \"USE_PROXY\";\r\n    /**\r\n     * No longer used. Originally meant \"Subsequent requests should use the specified proxy.\"\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"SWITCH_PROXY\"] = 306] = \"SWITCH_PROXY\";\r\n    /**\r\n     * SINCE HTTP/1.1\r\n     * In this case, the request should be repeated with another URI; however, future requests should still use the original URI.\r\n     * In contrast to how 302 was historically implemented, the request method is not allowed to be changed when reissuing the original request.\r\n     * For example, a POST request should be repeated using another POST request.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"TEMPORARY_REDIRECT\"] = 307] = \"TEMPORARY_REDIRECT\";\r\n    /**\r\n     * The request and all future requests should be repeated using another URI.\r\n     * 307 and 308 parallel the behaviors of 302 and 301, but do not allow the HTTP method to change.\r\n     * So, for example, submitting a form to a permanently redirected resource may continue smoothly.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"PERMANENT_REDIRECT\"] = 308] = \"PERMANENT_REDIRECT\";\r\n    /**\r\n     * The server cannot or will not process the request due to an apparent client error\r\n     * (e.g., malformed request syntax, too large size, invalid request message framing, or deceptive request routing).\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"BAD_REQUEST\"] = 400] = \"BAD_REQUEST\";\r\n    /**\r\n     * Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet\r\n     * been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the\r\n     * requested resource. See Basic access authentication and Digest access authentication. 401 semantically means\r\n     * \"unauthenticated\",i.e. the user does not have the necessary credentials.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"UNAUTHORIZED\"] = 401] = \"UNAUTHORIZED\";\r\n    /**\r\n     * Reserved for future use. The original intention was that this code might be used as part of some form of digital\r\n     * cash or micro payment scheme, but that has not happened, and this code is not usually used.\r\n     * Google Developers API uses this status if a particular developer has exceeded the daily limit on requests.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"PAYMENT_REQUIRED\"] = 402] = \"PAYMENT_REQUIRED\";\r\n    /**\r\n     * The request was valid, but the server is refusing action.\r\n     * The user might not have the necessary permissions for a resource.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"FORBIDDEN\"] = 403] = \"FORBIDDEN\";\r\n    /**\r\n     * The requested resource could not be found but may be available in the future.\r\n     * Subsequent requests by the client are permissible.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"NOT_FOUND\"] = 404] = \"NOT_FOUND\";\r\n    /**\r\n     * A request method is not supported for the requested resource;\r\n     * for example, a GET request on a form that requires data to be presented via POST, or a PUT request on a read-only resource.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"METHOD_NOT_ALLOWED\"] = 405] = \"METHOD_NOT_ALLOWED\";\r\n    /**\r\n     * The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"NOT_ACCEPTABLE\"] = 406] = \"NOT_ACCEPTABLE\";\r\n    /**\r\n     * The client must first authenticate itself with the proxy.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"PROXY_AUTHENTICATION_REQUIRED\"] = 407] = \"PROXY_AUTHENTICATION_REQUIRED\";\r\n    /**\r\n     * The server timed out waiting for the request.\r\n     * According to HTTP specifications:\r\n     * \"The client did not produce a request within the time that the server was prepared to wait. The client MAY repeat the request without modifications at any later time.\"\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"REQUEST_TIMEOUT\"] = 408] = \"REQUEST_TIMEOUT\";\r\n    /**\r\n     * Indicates that the request could not be processed because of conflict in the request,\r\n     * such as an edit conflict between multiple simultaneous updates.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"CONFLICT\"] = 409] = \"CONFLICT\";\r\n    /**\r\n     * Indicates that the resource requested is no longer available and will not be available again.\r\n     * This should be used when a resource has been intentionally removed and the resource should be purged.\r\n     * Upon receiving a 410 status code, the client should not request the resource in the future.\r\n     * Clients such as search engines should remove the resource from their indices.\r\n     * Most use cases do not require clients and search engines to purge the resource, and a \"404 Not Found\" may be used instead.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"GONE\"] = 410] = \"GONE\";\r\n    /**\r\n     * The request did not specify the length of its content, which is required by the requested resource.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"LENGTH_REQUIRED\"] = 411] = \"LENGTH_REQUIRED\";\r\n    /**\r\n     * The server does not meet one of the preconditions that the requester put on the request.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"PRECONDITION_FAILED\"] = 412] = \"PRECONDITION_FAILED\";\r\n    /**\r\n     * The request is larger than the server is willing or able to process. Previously called \"Request Entity Too Large\".\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"PAYLOAD_TOO_LARGE\"] = 413] = \"PAYLOAD_TOO_LARGE\";\r\n    /**\r\n     * The URI provided was too long for the server to process. Often the result of too much data being encoded as a query-string of a GET request,\r\n     * in which case it should be converted to a POST request.\r\n     * Called \"Request-URI Too Long\" previously.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"URI_TOO_LONG\"] = 414] = \"URI_TOO_LONG\";\r\n    /**\r\n     * The request entity has a media type which the server or resource does not support.\r\n     * For example, the client uploads an image as image/svg+xml, but the server requires that images use a different format.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"UNSUPPORTED_MEDIA_TYPE\"] = 415] = \"UNSUPPORTED_MEDIA_TYPE\";\r\n    /**\r\n     * The client has asked for a portion of the file (byte serving), but the server cannot supply that portion.\r\n     * For example, if the client asked for a part of the file that lies beyond the end of the file.\r\n     * Called \"Requested Range Not Satisfiable\" previously.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"RANGE_NOT_SATISFIABLE\"] = 416] = \"RANGE_NOT_SATISFIABLE\";\r\n    /**\r\n     * The server cannot meet the requirements of the Expect request-header field.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"EXPECTATION_FAILED\"] = 417] = \"EXPECTATION_FAILED\";\r\n    /**\r\n     * This code was defined in 1998 as one of the traditional IETF April Fools' jokes, in RFC 2324, Hyper Text Coffee Pot Control Protocol,\r\n     * and is not expected to be implemented by actual HTTP servers. The RFC specifies this code should be returned by\r\n     * teapots requested to brew coffee. This HTTP status is used as an Easter egg in some websites, including Google.com.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"I_AM_A_TEAPOT\"] = 418] = \"I_AM_A_TEAPOT\";\r\n    /**\r\n     * The request was directed at a server that is not able to produce a response (for example because a connection reuse).\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"MISDIRECTED_REQUEST\"] = 421] = \"MISDIRECTED_REQUEST\";\r\n    /**\r\n     * The request was well-formed but was unable to be followed due to semantic errors.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"UNPROCESSABLE_ENTITY\"] = 422] = \"UNPROCESSABLE_ENTITY\";\r\n    /**\r\n     * The resource that is being accessed is locked.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"LOCKED\"] = 423] = \"LOCKED\";\r\n    /**\r\n     * The request failed due to failure of a previous request (e.g., a PROPPATCH).\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"FAILED_DEPENDENCY\"] = 424] = \"FAILED_DEPENDENCY\";\r\n    /**\r\n     * The client should switch to a different protocol such as TLS/1.0, given in the Upgrade header field.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"UPGRADE_REQUIRED\"] = 426] = \"UPGRADE_REQUIRED\";\r\n    /**\r\n     * The origin server requires the request to be conditional.\r\n     * Intended to prevent \"the 'lost update' problem, where a client\r\n     * GETs a resource's state, modifies it, and PUTs it back to the server,\r\n     * when meanwhile a third party has modified the state on the server, leading to a conflict.\"\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"PRECONDITION_REQUIRED\"] = 428] = \"PRECONDITION_REQUIRED\";\r\n    /**\r\n     * The user has sent too many requests in a given amount of time. Intended for use with rate-limiting schemes.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"TOO_MANY_REQUESTS\"] = 429] = \"TOO_MANY_REQUESTS\";\r\n    /**\r\n     * The server is unwilling to process the request because either an individual header field,\r\n     * or all the header fields collectively, are too large.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"REQUEST_HEADER_FIELDS_TOO_LARGE\"] = 431] = \"REQUEST_HEADER_FIELDS_TOO_LARGE\";\r\n    /**\r\n     * A server operator has received a legal demand to deny access to a resource or to a set of resources\r\n     * that includes the requested resource. The code 451 was chosen as a reference to the novel Fahrenheit 451.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"UNAVAILABLE_FOR_LEGAL_REASONS\"] = 451] = \"UNAVAILABLE_FOR_LEGAL_REASONS\";\r\n    /**\r\n     * A generic error message, given when an unexpected condition was encountered and no more specific message is suitable.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"INTERNAL_SERVER_ERROR\"] = 500] = \"INTERNAL_SERVER_ERROR\";\r\n    /**\r\n     * The server either does not recognize the request method, or it lacks the ability to fulfill the request.\r\n     * Usually this implies future availability (e.g., a new feature of a web-service API).\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"NOT_IMPLEMENTED\"] = 501] = \"NOT_IMPLEMENTED\";\r\n    /**\r\n     * The server was acting as a gateway or proxy and received an invalid response from the upstream server.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"BAD_GATEWAY\"] = 502] = \"BAD_GATEWAY\";\r\n    /**\r\n     * The server is currently unavailable (because it is overloaded or down for maintenance).\r\n     * Generally, this is a temporary state.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"SERVICE_UNAVAILABLE\"] = 503] = \"SERVICE_UNAVAILABLE\";\r\n    /**\r\n     * The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"GATEWAY_TIMEOUT\"] = 504] = \"GATEWAY_TIMEOUT\";\r\n    /**\r\n     * The server does not support the HTTP protocol version used in the request\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"HTTP_VERSION_NOT_SUPPORTED\"] = 505] = \"HTTP_VERSION_NOT_SUPPORTED\";\r\n    /**\r\n     * Transparent content negotiation for the request results in a circular reference.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"VARIANT_ALSO_NEGOTIATES\"] = 506] = \"VARIANT_ALSO_NEGOTIATES\";\r\n    /**\r\n     * The server is unable to store the representation needed to complete the request.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"INSUFFICIENT_STORAGE\"] = 507] = \"INSUFFICIENT_STORAGE\";\r\n    /**\r\n     * The server detected an infinite loop while processing the request.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"LOOP_DETECTED\"] = 508] = \"LOOP_DETECTED\";\r\n    /**\r\n     * Further extensions to the request are required for the server to fulfill it.\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"NOT_EXTENDED\"] = 510] = \"NOT_EXTENDED\";\r\n    /**\r\n     * The client needs to authenticate to gain network access.\r\n     * Intended for use by intercepting proxies used to control access to the network (e.g., \"captive portals\" used\r\n     * to require agreement to Terms of Service before granting full Internet access via a Wi-Fi hotspot).\r\n     */\r\n    STATUS_CODE[STATUS_CODE[\"NETWORK_AUTHENTICATION_REQUIRED\"] = 511] = \"NETWORK_AUTHENTICATION_REQUIRED\";\r\n})(STATUS_CODE || (STATUS_CODE = {}));\n\n// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\r\n/* tslint:disable */\r\nvar VERSION = {\r\n    \"commitHash\": \"5711569ffaf481d88ba3251343a1788090b35dd4\",\r\n    \"version\": \"10.2.1\"\r\n};\r\n/* tslint:enable */\n\n/**\r\n * @packageDocumentation\r\n * @module @taquito/http-utils\r\n */\r\n// tslint:disable: strict-type-predicates\r\nvar isNode = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\r\n// tslint:enable: strict-type-predicates\r\nvar XMLHttpRequestCTOR = isNode ? require('xhr2-cookies').XMLHttpRequest : XMLHttpRequest;\r\nvar defaultTimeout = 30000;\r\nvar HttpResponseError = /** @class */ (function () {\r\n    function HttpResponseError(message, status, statusText, body, url) {\r\n        this.message = message;\r\n        this.status = status;\r\n        this.statusText = statusText;\r\n        this.body = body;\r\n        this.url = url;\r\n        this.name = 'HttpResponse';\r\n    }\r\n    return HttpResponseError;\r\n}());\r\nvar HttpRequestFailed = /** @class */ (function () {\r\n    function HttpRequestFailed(url, innerEvent) {\r\n        this.url = url;\r\n        this.innerEvent = innerEvent;\r\n        this.name = 'HttpRequestFailed';\r\n        this.message = \"Request to \" + url + \" failed\";\r\n    }\r\n    return HttpRequestFailed;\r\n}());\r\nvar HttpBackend = /** @class */ (function () {\r\n    function HttpBackend() {\r\n    }\r\n    HttpBackend.prototype.serialize = function (obj) {\r\n        if (!obj) {\r\n            return '';\r\n        }\r\n        var str = [];\r\n        var _loop_1 = function (p) {\r\n            if (obj.hasOwnProperty(p) && typeof obj[p] !== 'undefined') {\r\n                var prop = typeof obj[p].toJSON === 'function' ? obj[p].toJSON() : obj[p];\r\n                // query arguments can have no value so we need some way of handling that\r\n                // example https://domain.com/query?all\r\n                if (prop === null) {\r\n                    str.push(encodeURIComponent(p));\r\n                    return \"continue\";\r\n                }\r\n                // another use case is multiple arguments with the same name\r\n                // they are passed as array\r\n                if (Array.isArray(prop)) {\r\n                    prop.forEach(function (item) {\r\n                        str.push(encodeURIComponent(p) + '=' + encodeURIComponent(item));\r\n                    });\r\n                    return \"continue\";\r\n                }\r\n                str.push(encodeURIComponent(p) + '=' + encodeURIComponent(prop));\r\n            }\r\n        };\r\n        for (var p in obj) {\r\n            _loop_1(p);\r\n        }\r\n        var serialized = str.join('&');\r\n        if (serialized) {\r\n            return \"?\" + serialized;\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    };\r\n    HttpBackend.prototype.createXHR = function () {\r\n        return new XMLHttpRequestCTOR();\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains options to be passed for the HTTP request (url, method and timeout)\r\n     */\r\n    HttpBackend.prototype.createRequest = function (_a, data) {\r\n        var _this = this;\r\n        var url = _a.url, method = _a.method, timeout = _a.timeout, query = _a.query, _b = _a.headers, headers = _b === void 0 ? {} : _b, _c = _a.json, json = _c === void 0 ? true : _c, _d = _a.mimeType, mimeType = _d === void 0 ? undefined : _d;\r\n        return new Promise(function (resolve, reject) {\r\n            var request = _this.createXHR();\r\n            request.open(method || 'GET', \"\" + url + _this.serialize(query));\r\n            if (!headers['Content-Type']) {\r\n                request.setRequestHeader('Content-Type', 'application/json');\r\n            }\r\n            if (mimeType) {\r\n                request.overrideMimeType(\"\" + mimeType);\r\n            }\r\n            for (var k in headers) {\r\n                request.setRequestHeader(k, headers[k]);\r\n            }\r\n            request.timeout = timeout || defaultTimeout;\r\n            request.onload = function () {\r\n                if (this.status >= 200 && this.status < 300) {\r\n                    if (json) {\r\n                        try {\r\n                            resolve(JSON.parse(request.response));\r\n                        }\r\n                        catch (ex) {\r\n                            reject(new Error(\"Unable to parse response: \" + request.response));\r\n                        }\r\n                    }\r\n                    else {\r\n                        resolve(request.response);\r\n                    }\r\n                }\r\n                else {\r\n                    reject(new HttpResponseError(\"Http error response: (\" + this.status + \") \" + request.response, this.status, request.statusText, request.response, url));\r\n                }\r\n            };\r\n            request.ontimeout = function () {\r\n                reject(new Error(\"Request timed out after: \" + request.timeout + \"ms\"));\r\n            };\r\n            request.onerror = function (err) {\r\n                reject(new HttpRequestFailed(url, err));\r\n            };\r\n            if (data) {\r\n                var dataStr = JSON.stringify(data);\r\n                request.send(dataStr);\r\n            }\r\n            else {\r\n                request.send();\r\n            }\r\n        });\r\n    };\r\n    return HttpBackend;\r\n}());\n\nexport { HttpBackend, HttpRequestFailed, HttpResponseError, STATUS_CODE, VERSION };\n//# sourceMappingURL=taquito-http-utils.es5.js.map\n","import { Buffer } from 'buffer';\n\nvar _a, _b;\r\nvar Prefix;\r\n(function (Prefix) {\r\n    Prefix[\"TZ1\"] = \"tz1\";\r\n    Prefix[\"TZ2\"] = \"tz2\";\r\n    Prefix[\"TZ3\"] = \"tz3\";\r\n    Prefix[\"KT\"] = \"KT\";\r\n    Prefix[\"KT1\"] = \"KT1\";\r\n    Prefix[\"EDSK2\"] = \"edsk2\";\r\n    Prefix[\"SPSK\"] = \"spsk\";\r\n    Prefix[\"P2SK\"] = \"p2sk\";\r\n    Prefix[\"EDPK\"] = \"edpk\";\r\n    Prefix[\"SPPK\"] = \"sppk\";\r\n    Prefix[\"P2PK\"] = \"p2pk\";\r\n    Prefix[\"EDESK\"] = \"edesk\";\r\n    Prefix[\"SPESK\"] = \"spesk\";\r\n    Prefix[\"P2ESK\"] = \"p2esk\";\r\n    Prefix[\"EDSK\"] = \"edsk\";\r\n    Prefix[\"EDSIG\"] = \"edsig\";\r\n    Prefix[\"SPSIG\"] = \"spsig\";\r\n    Prefix[\"P2SIG\"] = \"p2sig\";\r\n    Prefix[\"SIG\"] = \"sig\";\r\n    Prefix[\"NET\"] = \"Net\";\r\n    Prefix[\"NCE\"] = \"nce\";\r\n    Prefix[\"B\"] = \"b\";\r\n    Prefix[\"O\"] = \"o\";\r\n    Prefix[\"LO\"] = \"Lo\";\r\n    Prefix[\"LLO\"] = \"LLo\";\r\n    Prefix[\"P\"] = \"P\";\r\n    Prefix[\"CO\"] = \"Co\";\r\n    Prefix[\"ID\"] = \"id\";\r\n    Prefix[\"EXPR\"] = \"expr\";\r\n    Prefix[\"TZ\"] = \"TZ\";\r\n})(Prefix || (Prefix = {}));\r\nvar prefix = (_a = {},\r\n    _a[Prefix.TZ1] = new Uint8Array([6, 161, 159]),\r\n    _a[Prefix.TZ2] = new Uint8Array([6, 161, 161]),\r\n    _a[Prefix.TZ3] = new Uint8Array([6, 161, 164]),\r\n    _a[Prefix.KT] = new Uint8Array([2, 90, 121]),\r\n    _a[Prefix.KT1] = new Uint8Array([2, 90, 121]),\r\n    _a[Prefix.EDSK] = new Uint8Array([43, 246, 78, 7]),\r\n    _a[Prefix.EDSK2] = new Uint8Array([13, 15, 58, 7]),\r\n    _a[Prefix.SPSK] = new Uint8Array([17, 162, 224, 201]),\r\n    _a[Prefix.P2SK] = new Uint8Array([16, 81, 238, 189]),\r\n    _a[Prefix.EDPK] = new Uint8Array([13, 15, 37, 217]),\r\n    _a[Prefix.SPPK] = new Uint8Array([3, 254, 226, 86]),\r\n    _a[Prefix.P2PK] = new Uint8Array([3, 178, 139, 127]),\r\n    _a[Prefix.EDESK] = new Uint8Array([7, 90, 60, 179, 41]),\r\n    _a[Prefix.SPESK] = new Uint8Array([0x09, 0xed, 0xf1, 0xae, 0x96]),\r\n    _a[Prefix.P2ESK] = new Uint8Array([0x09, 0x30, 0x39, 0x73, 0xab]),\r\n    _a[Prefix.EDSIG] = new Uint8Array([9, 245, 205, 134, 18]),\r\n    _a[Prefix.SPSIG] = new Uint8Array([13, 115, 101, 19, 63]),\r\n    _a[Prefix.P2SIG] = new Uint8Array([54, 240, 44, 52]),\r\n    _a[Prefix.SIG] = new Uint8Array([4, 130, 43]),\r\n    _a[Prefix.NET] = new Uint8Array([87, 82, 0]),\r\n    _a[Prefix.NCE] = new Uint8Array([69, 220, 169]),\r\n    _a[Prefix.B] = new Uint8Array([1, 52]),\r\n    _a[Prefix.O] = new Uint8Array([5, 116]),\r\n    _a[Prefix.LO] = new Uint8Array([133, 233]),\r\n    _a[Prefix.LLO] = new Uint8Array([29, 159, 109]),\r\n    _a[Prefix.P] = new Uint8Array([2, 170]),\r\n    _a[Prefix.CO] = new Uint8Array([79, 179]),\r\n    _a[Prefix.ID] = new Uint8Array([153, 103]),\r\n    _a[Prefix.EXPR] = new Uint8Array([13, 44, 64, 27]),\r\n    // Legacy prefix\r\n    _a[Prefix.TZ] = new Uint8Array([2, 90, 121]),\r\n    _a);\r\nvar prefixLength = (_b = {},\r\n    _b[Prefix.TZ1] = 20,\r\n    _b[Prefix.TZ2] = 20,\r\n    _b[Prefix.TZ3] = 20,\r\n    _b[Prefix.KT] = 20,\r\n    _b[Prefix.KT1] = 20,\r\n    _b[Prefix.EDPK] = 32,\r\n    _b[Prefix.SPPK] = 33,\r\n    _b[Prefix.P2PK] = 33,\r\n    _b[Prefix.EDSIG] = 64,\r\n    _b[Prefix.SPSIG] = 64,\r\n    _b[Prefix.P2SIG] = 64,\r\n    _b[Prefix.SIG] = 64,\r\n    _b[Prefix.NET] = 4,\r\n    _b[Prefix.B] = 32,\r\n    _b[Prefix.P] = 32,\r\n    _b[Prefix.O] = 32,\r\n    _b);\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\n\nvar bs58check$1 = require('bs58check');\r\nvar ValidationResult;\r\n(function (ValidationResult) {\r\n    ValidationResult[ValidationResult[\"NO_PREFIX_MATCHED\"] = 0] = \"NO_PREFIX_MATCHED\";\r\n    ValidationResult[ValidationResult[\"INVALID_CHECKSUM\"] = 1] = \"INVALID_CHECKSUM\";\r\n    ValidationResult[ValidationResult[\"INVALID_LENGTH\"] = 2] = \"INVALID_LENGTH\";\r\n    ValidationResult[ValidationResult[\"VALID\"] = 3] = \"VALID\";\r\n})(ValidationResult || (ValidationResult = {}));\r\nfunction isValidPrefix(value) {\r\n    if (typeof value !== 'string') {\r\n        return false;\r\n    }\r\n    return value in prefix;\r\n}\r\n/**\r\n * @description This function is called by the validation functions ([[validateAddress]], [[validateChain]], [[validateContractAddress]], [[validateKeyHash]], [[validateSignature]], [[validatePublicKey]]).\r\n * Verify if the value has the right prefix or return `NO_PREFIX_MATCHED`,\r\n * decode the value using base58 and return `INVALID_CHECKSUM` if it fails,\r\n * check if the length of the value matches the prefix type or return `INVALID_LENGTH`.\r\n * If all checks pass, return `VALID`.\r\n *\r\n * @param value Value to validate\r\n * @param prefixes prefix the value should have\r\n */\r\nfunction validatePrefixedValue(value, prefixes) {\r\n    var match = new RegExp(\"^(\" + prefixes.join('|') + \")\").exec(value);\r\n    if (!match || match.length === 0) {\r\n        return ValidationResult.NO_PREFIX_MATCHED;\r\n    }\r\n    var prefixKey = match[0];\r\n    if (!isValidPrefix(prefixKey)) {\r\n        return ValidationResult.NO_PREFIX_MATCHED;\r\n    }\r\n    // Remove annotation from contract address before doing the validation\r\n    var contractAddress = /^(KT1\\w{33})(\\%(.*))?/.exec(value);\r\n    if (contractAddress) {\r\n        value = contractAddress[1];\r\n    }\r\n    // decodeUnsafe return undefined if decoding fail\r\n    var decoded = bs58check$1.decodeUnsafe(value);\r\n    if (!decoded) {\r\n        return ValidationResult.INVALID_CHECKSUM;\r\n    }\r\n    decoded = decoded.slice(prefix[prefixKey].length);\r\n    if (decoded.length !== prefixLength[prefixKey]) {\r\n        return ValidationResult.INVALID_LENGTH;\r\n    }\r\n    return ValidationResult.VALID;\r\n}\r\nvar implicitPrefix = [Prefix.TZ1, Prefix.TZ2, Prefix.TZ3];\r\nvar contractPrefix = [Prefix.KT1];\r\nvar signaturePrefix = [Prefix.EDSIG, Prefix.P2SIG, Prefix.SPSIG, Prefix.SIG];\r\nvar pkPrefix = [Prefix.EDPK, Prefix.SPPK, Prefix.P2PK];\r\n/**\r\n * @description Used to check if an address or a contract address is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateAddress } from '@taquito/utils';\r\n * const pkh = 'tz1L9r8mWmRPndRhuvMCWESLGSVeFzQ9NAWx'\r\n * const validation = validateAddress(pkh)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validateAddress(value) {\r\n    return validatePrefixedValue(value, __spreadArray(__spreadArray([], __read(implicitPrefix)), __read(contractPrefix)));\r\n}\r\n/**\r\n * @description Used to check if a chain id is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateChain } from '@taquito/utils';\r\n * const chainId = 'NetXdQprcVkpaWU'\r\n * const validation = validateChain(chainId)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validateChain(value) {\r\n    return validatePrefixedValue(value, [Prefix.NET]);\r\n}\r\n/**\r\n * @description Used to check if a contract address is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateContractAddress } from '@taquito/utils';\r\n * const contractAddress = 'KT1JVErLYTgtY8uGGZ4mso2npTSxqVLDRVbC'\r\n * const validation = validateContractAddress(contractAddress)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validateContractAddress(value) {\r\n    return validatePrefixedValue(value, contractPrefix);\r\n}\r\n/**\r\n * @description Used to check if a key hash is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateKeyHash } from '@taquito/utils';\r\n * const keyHashWithoutPrefix = '1L9r8mWmRPndRhuvMCWESLGSVeFzQ9NAWx'\r\n * const validation = validateKeyHash(keyHashWithoutPrefix)\r\n * console.log(validation)\r\n * // This example return 0 which correspond to NO_PREFIX_MATCHED\r\n * ```\r\n */\r\nfunction validateKeyHash(value) {\r\n    return validatePrefixedValue(value, implicitPrefix);\r\n}\r\n/**\r\n * @description Used to check if a signature is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateSignature } from '@taquito/utils';\r\n * const signature = 'edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg'\r\n * const validation = validateSignature(signature)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validateSignature(value) {\r\n    return validatePrefixedValue(value, signaturePrefix);\r\n}\r\n/**\r\n * @description Used to check if a signature is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validatePublicKey } from '@taquito/utils';\r\n * const publicKey = 'edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg'\r\n * const validation = validatePublicKey(publicKey)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validatePublicKey(value) {\r\n    return validatePrefixedValue(value, pkPrefix);\r\n}\n\n// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\r\n/* tslint:disable */\r\nvar VERSION = {\r\n    \"commitHash\": \"5711569ffaf481d88ba3251343a1788090b35dd4\",\r\n    \"version\": \"10.2.1\"\r\n};\r\n/* tslint:enable */\n\n/**\r\n * @packageDocumentation\r\n * @module @taquito/utils\r\n */\r\nvar blake = require('blakejs');\r\nvar bs58check = require('bs58check');\r\n/**\r\n *\r\n * @description Hash a string using the BLAKE2b algorithm, base58 encode the hash obtained and appends the prefix 'expr' to it\r\n *\r\n * @param value Value in hex\r\n */\r\nfunction encodeExpr(value) {\r\n    var blakeHash = blake.blake2b(hex2buf(value), null, 32);\r\n    return b58cencode(blakeHash, prefix['expr']);\r\n}\r\n/**\r\n *\r\n * @description Return the operation hash of a signed operation\r\n * @param value Value in hex of a signed operation\r\n */\r\nfunction encodeOpHash(value) {\r\n    var blakeHash = blake.blake2b(hex2buf(value), null, 32);\r\n    return b58cencode(blakeHash, prefix.o);\r\n}\r\n/**\r\n *\r\n * @description Base58 encode a string or a Uint8Array and append a prefix to it\r\n *\r\n * @param value Value to base58 encode\r\n * @param prefix prefix to append to the encoded string\r\n */\r\nfunction b58cencode(value, prefix) {\r\n    var payloadAr = typeof value === 'string' ? Uint8Array.from(Buffer.from(value, 'hex')) : value;\r\n    var n = new Uint8Array(prefix.length + payloadAr.length);\r\n    n.set(prefix);\r\n    n.set(payloadAr, prefix.length);\r\n    return bs58check.encode(Buffer.from(n.buffer));\r\n}\r\n/**\r\n *\r\n * @description Base58 decode a string and remove the prefix from it\r\n *\r\n * @param value Value to base58 decode\r\n * @param prefix prefix to remove from the decoded string\r\n */\r\nvar b58cdecode = function (enc, prefixArg) {\r\n    return bs58check.decode(enc).slice(prefixArg.length);\r\n};\r\n/**\r\n *\r\n * @description Base58 decode a string with predefined prefix\r\n *\r\n * @param value Value to base58 decode\r\n */\r\nfunction b58decode(payload) {\r\n    var _a;\r\n    var buf = bs58check.decode(payload);\r\n    var prefixMap = (_a = {},\r\n        _a[prefix.tz1.toString()] = '0000',\r\n        _a[prefix.tz2.toString()] = '0001',\r\n        _a[prefix.tz3.toString()] = '0002',\r\n        _a);\r\n    var pref = prefixMap[new Uint8Array(buf.slice(0, 3)).toString()];\r\n    if (pref) {\r\n        // tz addresses\r\n        var hex = buf2hex(buf.slice(3));\r\n        return pref + hex;\r\n    }\r\n    else {\r\n        // other (kt addresses)\r\n        return '01' + buf2hex(buf.slice(3, 42)) + '00';\r\n    }\r\n}\r\n/**\r\n *\r\n * @description Base58 encode a public key using predefined prefix\r\n *\r\n * @param value Public Key to base58 encode\r\n */\r\nfunction encodePubKey(value) {\r\n    if (value.substring(0, 2) === '00') {\r\n        var pref = {\r\n            '0000': prefix.tz1,\r\n            '0001': prefix.tz2,\r\n            '0002': prefix.tz3,\r\n        };\r\n        return b58cencode(value.substring(4), pref[value.substring(0, 4)]);\r\n    }\r\n    return b58cencode(value.substring(2, 42), prefix.KT);\r\n}\r\n/**\r\n *\r\n * @description Base58 encode a key according to its prefix\r\n *\r\n * @param value Key to base58 encode\r\n */\r\nfunction encodeKey(value) {\r\n    if (value[0] === '0') {\r\n        var pref = {\r\n            '00': new Uint8Array([13, 15, 37, 217]),\r\n            '01': new Uint8Array([3, 254, 226, 86]),\r\n            '02': new Uint8Array([3, 178, 139, 127]),\r\n        };\r\n        return b58cencode(value.substring(2), pref[value.substring(0, 2)]);\r\n    }\r\n}\r\n/**\r\n *\r\n * @description Base58 encode a key hash according to its prefix\r\n *\r\n * @param value Key to base58 encode\r\n */\r\nfunction encodeKeyHash(value) {\r\n    if (value[0] === '0') {\r\n        var pref = {\r\n            '00': new Uint8Array([6, 161, 159]),\r\n            '01': new Uint8Array([6, 161, 161]),\r\n            '02': new Uint8Array([6, 161, 164]),\r\n        };\r\n        return b58cencode(value.substring(2), pref[value.substring(0, 2)]);\r\n    }\r\n}\r\n/**\r\n *\r\n * @description Convert an hex string to a Uint8Array\r\n *\r\n * @param hex Hex string to convert\r\n */\r\nvar hex2buf = function (hex) {\r\n    return new Uint8Array(hex.match(/[\\da-f]{2}/gi).map(function (h) { return parseInt(h, 16); }));\r\n};\r\n/**\r\n *\r\n * @description Merge 2 buffers together\r\n *\r\n * @param b1 First buffer\r\n * @param b2 Second buffer\r\n */\r\nvar mergebuf = function (b1, b2) {\r\n    var r = new Uint8Array(b1.length + b2.length);\r\n    r.set(b1);\r\n    r.set(b2, b1.length);\r\n    return r;\r\n};\r\n/**\r\n *\r\n * @description Flatten a michelson json representation to an array\r\n *\r\n * @param s michelson json\r\n */\r\nvar mic2arr = function me2(s) {\r\n    var ret = [];\r\n    if (Object.prototype.hasOwnProperty.call(s, 'prim')) {\r\n        if (s.prim === 'Pair') {\r\n            ret.push(me2(s.args[0]));\r\n            ret = ret.concat(me2(s.args[1]));\r\n        }\r\n        else if (s.prim === 'Elt') {\r\n            ret = {\r\n                key: me2(s.args[0]),\r\n                val: me2(s.args[1]),\r\n            };\r\n        }\r\n        else if (s.prim === 'True') {\r\n            ret = true;\r\n        }\r\n        else if (s.prim === 'False') {\r\n            ret = false;\r\n        }\r\n    }\r\n    else if (Array.isArray(s)) {\r\n        var sc = s.length;\r\n        for (var i = 0; i < sc; i++) {\r\n            var n = me2(s[i]);\r\n            if (typeof n.key !== 'undefined') {\r\n                if (Array.isArray(ret)) {\r\n                    ret = {\r\n                        keys: [],\r\n                        vals: [],\r\n                    };\r\n                }\r\n                ret.keys.push(n.key);\r\n                ret.vals.push(n.val);\r\n            }\r\n            else {\r\n                ret.push(n);\r\n            }\r\n        }\r\n    }\r\n    else if (Object.prototype.hasOwnProperty.call(s, 'string')) {\r\n        ret = s.string;\r\n    }\r\n    else if (Object.prototype.hasOwnProperty.call(s, 'int')) {\r\n        ret = parseInt(s.int, 10);\r\n    }\r\n    else {\r\n        ret = s;\r\n    }\r\n    return ret;\r\n};\r\n/**\r\n *\r\n * @description Convert a buffer to an hex string\r\n *\r\n * @param buffer Buffer to convert\r\n */\r\nvar buf2hex = function (buffer) {\r\n    var byteArray = new Uint8Array(buffer);\r\n    var hexParts = [];\r\n    byteArray.forEach(function (byte) {\r\n        var hex = byte.toString(16);\r\n        var paddedHex = (\"00\" + hex).slice(-2);\r\n        hexParts.push(paddedHex);\r\n    });\r\n    return hexParts.join('');\r\n};\r\n/**\r\n *\r\n * @description Convert a string to bytes\r\n *\r\n * @param str String to convert\r\n */\r\nfunction char2Bytes(str) {\r\n    return Buffer.from(str, 'utf8').toString('hex');\r\n}\r\n/**\r\n *\r\n * @description Convert bytes to a string\r\n *\r\n * @param str Bytes to convert\r\n */\r\nfunction bytes2Char(hex) {\r\n    return Buffer.from(hex2buf(hex)).toString('utf8');\r\n}\n\nexport { Prefix, VERSION, ValidationResult, b58cdecode, b58cencode, b58decode, buf2hex, bytes2Char, char2Bytes, encodeExpr, encodeKey, encodeKeyHash, encodeOpHash, encodePubKey, hex2buf, isValidPrefix, mergebuf, mic2arr, prefix, prefixLength, validateAddress, validateChain, validateContractAddress, validateKeyHash, validatePublicKey, validateSignature };\n//# sourceMappingURL=taquito-utils.es5.js.map\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.at` method\n// https://github.com/tc39/proposal-relative-indexing-method\n$({ target: 'Array', proto: true }, {\n  at: function at(index) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : O[k];\n  }\n});\n\naddToUnscopables('at');\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar un$Sort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","<script>\r\nimport { defineComponent, toRefs } from \"vue\"\r\n\r\nexport default defineComponent({\r\n    name: \"Checkbox\",\r\n    props: { modelValue: Boolean, forceChecked: Boolean },\r\n\r\n    setup(props, context) {\r\n        const { modelValue } = toRefs(props)\r\n\r\n        const toggle = () => {\r\n            context.emit(\"update:modelValue\", !modelValue.value)\r\n        }\r\n\r\n        return { toggle }\r\n    },\r\n})\r\n</script>\r\n\r\n<template>\r\n    <div @click=\"toggle\" :class=\"$style.wrapper\">\r\n        <div\r\n            :class=\"[\r\n                $style.box,\r\n                (modelValue && $style.active) ||\r\n                    (forceChecked && $style.active),\r\n            ]\"\r\n        >\r\n            <transition name=\"popup\">\r\n                <Icon\r\n                    v-if=\"modelValue || forceChecked\"\r\n                    name=\"check\"\r\n                    size=\"12\"\r\n                    :class=\"$style.check_icon\"\r\n                />\r\n            </transition>\r\n        </div>\r\n\r\n        <div :class=\"$style.base\"><slot /></div>\r\n    </div>\r\n</template>\r\n\r\n<style module>\r\n.wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n\r\n    cursor: pointer;\r\n}\r\n\r\n.box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    min-width: 16px;\r\n    min-height: 16px;\r\n    border-radius: 4px;\r\n    fill: var(--text-primary);\r\n\r\n    border: 1px solid var(--border);\r\n\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.box.active {\r\n    background: var(--blue);\r\n}\r\n\r\n.wrapper:hover .box {\r\n    border: 1px solid var(--border-highlight);\r\n}\r\n\r\n.base {\r\n    width: 100%;\r\n\r\n    font-size: 14px;\r\n    line-height: 1;\r\n    font-weight: 600;\r\n    color: var(--text-primary);\r\n}\r\n</style>\r\n","import { render } from \"./Checkbox.vue?vue&type=template&id=36f19630\"\nimport script from \"./Checkbox.vue?vue&type=script&lang=js\"\nexport * from \"./Checkbox.vue?vue&type=script&lang=js\"\n\nconst cssModules = {}\nimport style0 from \"./Checkbox.vue?vue&type=style&index=0&id=36f19630&module=true&lang=css\"\ncssModules[\"$style\"] = style0\n\nimport exportComponent from \"/home/mickey/juster-app-old/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__cssModules',cssModules]])\n\nexport default __exports__","<script>\r\nimport { computed, defineComponent, ref, toRefs, watch } from \"vue\"\r\n\r\n/**\r\n * UI\r\n */\r\nimport Button from \"@/components/ui/Button\"\r\nimport Tooltip from \"@/components/ui/Tooltip\"\r\n\r\nexport default defineComponent({\r\n    name: \"Pagination\",\r\n    props: {\r\n        total: {\r\n            type: Number,\r\n            required: true,\r\n        },\r\n        limit: {\r\n            type: Number,\r\n            required: true,\r\n        },\r\n        modelValue: Number,\r\n    },\r\n\r\n    setup(props, context) {\r\n        const { total, limit, modelValue } = toRefs(props)\r\n\r\n        /**\r\n         * START_INDEX -> plain constant\r\n         * By default, we always show the first page, regardless of the current page.\r\n         * Therefore, we need a start index, which indicates from which page to start filling the \"pages\"array.\r\n         */\r\n        const START_INDEX = 2\r\n\r\n        /**\r\n         * Simple func to fill array with \"from\" & \"to\"\r\n         */\r\n        const fillPages = ({ from, to }) => {\r\n            const pages = []\r\n\r\n            if (from > to) return pages\r\n            if (isNaN(from) || isNaN(to)) return pages\r\n            if (!Number.isInteger(from) && !Number.isInteger(to)) return\r\n\r\n            for (let index = from; index <= to; index++) {\r\n                pages.push(index)\r\n            }\r\n\r\n            return pages\r\n        }\r\n\r\n        /** */\r\n        const fillPagesWithShoulders = ({ from, to }) => {}\r\n\r\n        const totalPages = computed(() => Math.ceil(total.value / limit.value))\r\n\r\n        const pages = ref([])\r\n        const isLimitExceeded = ref(false)\r\n\r\n        if (totalPages.value <= 5) {\r\n            pages.value = fillPages({ from: START_INDEX, to: totalPages.value })\r\n        } else {\r\n            isLimitExceeded.value = true\r\n\r\n            pages.value = fillPages({ from: START_INDEX, to: 3 })\r\n        }\r\n\r\n        /**\r\n         * Re-build based on new total number.\r\n         * Until pagination is rendered (due to \"v-if\") filling will be performed through setup().\r\n         * Further changes to \"total\" will be tracked here -> watch(total)\r\n         */\r\n        watch(total, () => {\r\n            pages.value = []\r\n\r\n            if (totalPages.value <= 5) {\r\n                isLimitExceeded.value = false\r\n\r\n                pages.value = fillPages({\r\n                    from: START_INDEX,\r\n                    to: totalPages.value,\r\n                })\r\n            } else {\r\n                isLimitExceeded.value = true\r\n\r\n                pages.value = fillPages({ from: START_INDEX, to: 3 })\r\n            }\r\n        })\r\n\r\n        /**\r\n         * Re-build based on selected page.\r\n         * The main purpose of this watch(modelValue) is to limit the number of selectable pages to the\r\n         * left and right of the current one by one step (from 5 to 4 / 6, from 12 to 11 / 13, etc).\r\n         */\r\n        watch(modelValue, () => {\r\n            if (totalPages.value <= 5) return\r\n\r\n            pages.value = []\r\n\r\n            if (modelValue.value == 1) {\r\n                pages.value = fillPages({ from: START_INDEX, to: 3 })\r\n            } else {\r\n                for (\r\n                    let index = modelValue.value - 1;\r\n                    index < modelValue.value + 2;\r\n                    index++\r\n                ) {\r\n                    if (index == 1) continue\r\n                    if (index > totalPages.value) continue\r\n                    if (index == totalPages.value) continue\r\n\r\n                    pages.value.push(index)\r\n                }\r\n            }\r\n        })\r\n\r\n        const selectPage = (page) => {\r\n            context.emit(\"update:modelValue\", page)\r\n        }\r\n\r\n        const nextPage = () => {\r\n            if (modelValue.value == totalPages.value) return\r\n\r\n            context.emit(\"update:modelValue\", modelValue.value + 1)\r\n        }\r\n\r\n        const prevPage = () => {\r\n            if (modelValue.value == 1) return\r\n\r\n            context.emit(\"update:modelValue\", modelValue.value - 1)\r\n        }\r\n\r\n        const handleJump = () => {\r\n            const promptedPage = parseInt(\r\n                prompt(\"Select a page number to jump:\"),\r\n            )\r\n\r\n            /** only integer */\r\n            if (isNaN(promptedPage)) return\r\n            /** the selected page must be within the available pages */\r\n            if (promptedPage < 1 || promptedPage > totalPages.value) return\r\n\r\n            context.emit(\"update:modelValue\", promptedPage)\r\n        }\r\n\r\n        return {\r\n            isLimitExceeded,\r\n            pages,\r\n            totalPages,\r\n            currentPage: modelValue,\r\n            selectPage,\r\n            nextPage,\r\n            prevPage,\r\n            handleJump,\r\n        }\r\n    },\r\n\r\n    components: { Button, Tooltip },\r\n})\r\n</script>\r\n\r\n<template>\r\n    <div :class=\"$style.wrapper\">\r\n        <Button\r\n            @click=\"prevPage\"\r\n            type=\"secondary\"\r\n            size=\"small\"\r\n            icon=\"arrow\"\r\n            :class=\"[$style.arrow_btn, $style.left]\"\r\n            :disabled=\"currentPage == 1\"\r\n        />\r\n\r\n        <Button\r\n            @click=\"selectPage(1)\"\r\n            type=\"secondary\"\r\n            size=\"small\"\r\n            :class=\"[$style.page, currentPage == 1 && $style.current]\"\r\n            >1</Button\r\n        >\r\n        <Button\r\n            v-if=\"currentPage > 3 && isLimitExceeded\"\r\n            type=\"secondary\"\r\n            size=\"small\"\r\n            disabled\r\n            >...</Button\r\n        >\r\n\r\n        <Button\r\n            v-for=\"page in pages\"\r\n            :key=\"page\"\r\n            @click=\"selectPage(page)\"\r\n            type=\"secondary\"\r\n            size=\"small\"\r\n            :class=\"[$style.page, currentPage == page && $style.current]\"\r\n            >{{ page }}</Button\r\n        >\r\n\r\n        <template v-if=\"isLimitExceeded\">\r\n            <Button\r\n                v-if=\"currentPage <= totalPages - 3\"\r\n                type=\"secondary\"\r\n                size=\"small\"\r\n                disabled\r\n                >...</Button\r\n            >\r\n            <Button\r\n                @click=\"selectPage(totalPages)\"\r\n                type=\"secondary\"\r\n                size=\"small\"\r\n                :class=\"[\r\n                    $style.page,\r\n                    currentPage == totalPages && $style.current,\r\n                ]\"\r\n                >{{ totalPages }}</Button\r\n            >\r\n        </template>\r\n\r\n        <Button\r\n            @click=\"nextPage\"\r\n            type=\"secondary\"\r\n            size=\"small\"\r\n            icon=\"arrow\"\r\n            :class=\"[$style.arrow_btn, $style.right]\"\r\n            :disabled=\"currentPage == totalPages\"\r\n        />\r\n\r\n        <div v-if=\"totalPages > 10\" :class=\"$style.jump\">\r\n            <Tooltip position=\"bottom\" side=\"right\">\r\n                <Button\r\n                    @click=\"handleJump\"\r\n                    type=\"secondary\"\r\n                    size=\"small\"\r\n                    :class=\"$style.jump_btn\"\r\n                >\r\n                    <Icon name=\"bolt\" size=\"14\" />\r\n                </Button>\r\n\r\n                <template v-slot:content>\r\n                    Fast navigation through pages\r\n                </template>\r\n            </Tooltip>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style module>\r\n.wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.page {\r\n    color: var(--text-tertiary);\r\n}\r\n\r\n.page.current {\r\n    color: var(--text-primary);\r\n}\r\n\r\n.arrow_btn {\r\n    fill: var(--text-primary) !important;\r\n}\r\n\r\n.arrow_btn.left svg {\r\n    transform: rotate(90deg);\r\n}\r\n\r\n.arrow_btn.right svg {\r\n    transform: rotate(-90deg);\r\n}\r\n\r\n.jump {\r\n    margin-left: 8px;\r\n}\r\n\r\n.jump_btn svg {\r\n    fill: var(--text-primary);\r\n}\r\n\r\n@media (max-width: 410px) {\r\n    .arrow_btn {\r\n        display: none;\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./Pagination.vue?vue&type=template&id=2eb2a5cc\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nconst cssModules = {}\nimport style0 from \"./Pagination.vue?vue&type=style&index=0&id=2eb2a5cc&module=true&lang=css\"\ncssModules[\"$style\"] = style0\n\nimport exportComponent from \"/home/mickey/juster-app-old/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__cssModules',cssModules]])\n\nexport default __exports__","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Pagination_wrapper_3t0QN\",\"page\":\"Pagination_page_2N0FA\",\"current\":\"Pagination_current_2Lq22\",\"arrow_btn\":\"Pagination_arrow_btn_E_WW-\",\"left\":\"Pagination_left_1R7pl\",\"right\":\"Pagination_right_Iw_BD\",\"jump\":\"Pagination_jump_3h8ID\",\"jump_btn\":\"Pagination_jump_btn_25PmT\"};","var $ = require('../internals/export');\nvar isIntegralNumber = require('../internals/is-integral-number');\n\n// `Number.isInteger` method\n// https://tc39.es/ecma262/#sec-number.isinteger\n$({ target: 'Number', stat: true }, {\n  isInteger: isIntegralNumber\n});\n","export { default } from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Checkbox.vue?vue&type=style&index=0&id=36f19630&module=true&lang=css\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Checkbox.vue?vue&type=style&index=0&id=36f19630&module=true&lang=css\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Checkbox_wrapper_3mnjk\",\"box\":\"Checkbox_box_2KVrw\",\"active\":\"Checkbox_active_2B5Fq\",\"base\":\"Checkbox_base_2KMF-\"};","var arraySlice = require('../internals/array-slice-simple');\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"WithdrawAllModal_wrapper_16Z_p\",\"title\":\"WithdrawAllModal_title_TVPSE\",\"description\":\"WithdrawAllModal_description_8O9fr\",\"subtitle\":\"WithdrawAllModal_subtitle_12WAC\",\"positions\":\"WithdrawAllModal_positions_Aq2Rx\",\"position\":\"WithdrawAllModal_position_3-TTp\",\"base\":\"WithdrawAllModal_base_3rq4k\",\"name\":\"WithdrawAllModal_name_QFiUe\",\"subname\":\"WithdrawAllModal_subname_2_cif\",\"hint\":\"WithdrawAllModal_hint_y-9D1\"};","import stringify from 'fast-json-stable-stringify';\nimport BigNumber from 'bignumber.js';\nimport { b58decode, validateAddress, ValidationResult, encodePubKey, encodeKey, validatePublicKey, Prefix, b58cdecode, prefix, encodeKeyHash, validateKeyHash, validateSignature, validateChain } from '@taquito/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\n\nvar _a$1;\r\n// Retrieve a unique symbol associated with the key from the environment\r\n// Used in order to identify all object that are of type MichelsonMap even if they come from different module\r\nvar michelsonMapTypeSymbol = Symbol.for('taquito-michelson-map-type-symbol');\r\nvar isMapType = function (value) {\r\n    return 'args' in value && Array.isArray(value.args) && value.args.length === 2;\r\n};\r\nvar MapTypecheckError = /** @class */ (function () {\r\n    function MapTypecheckError(value, type, errorType) {\r\n        this.value = value;\r\n        this.type = type;\r\n        this.name = 'MapTypecheckError';\r\n        this.message = errorType + \" not compliant with underlying michelson type\";\r\n    }\r\n    return MapTypecheckError;\r\n}());\r\n/**\r\n * @description Michelson Map is an abstraction over the michelson native map. It supports complex Pair as key\r\n */\r\nvar MichelsonMap = /** @class */ (function () {\r\n    /**\r\n     * @param mapType If specified key and value will be type-checked before being added to the map\r\n     *\r\n     * @example new MichelsonMap({ prim: \"map\", args: [{prim: \"string\"}, {prim: \"int\"}]})\r\n     */\r\n    function MichelsonMap(mapType) {\r\n        this.valueMap = new Map();\r\n        this.keyMap = new Map();\r\n        this[_a$1] = true;\r\n        if (mapType) {\r\n            this.setType(mapType);\r\n        }\r\n    }\r\n    // Used to check if an object is a michelson map.\r\n    // Using instanceof was not working for project that had multiple instance of taquito dependencies\r\n    // as the class constructor is different\r\n    MichelsonMap.isMichelsonMap = function (obj) {\r\n        return obj && obj[michelsonMapTypeSymbol] === true;\r\n    };\r\n    MichelsonMap.prototype.setType = function (mapType) {\r\n        if (!isMapType(mapType)) {\r\n            throw new Error('mapType is not a valid michelson map type');\r\n        }\r\n        this.keySchema = new Schema(mapType.args[0]);\r\n        this.valueSchema = new Schema(mapType.args[1]);\r\n    };\r\n    MichelsonMap.prototype.removeType = function () {\r\n        this.keySchema = undefined;\r\n        this.valueSchema = undefined;\r\n    };\r\n    MichelsonMap.fromLiteral = function (obj, mapType) {\r\n        var map = new MichelsonMap(mapType);\r\n        Object.keys(obj).forEach(function (key) {\r\n            map.set(key, obj[key]);\r\n        });\r\n        return map;\r\n    };\r\n    MichelsonMap.prototype.typecheckKey = function (key) {\r\n        if (this.keySchema) {\r\n            return this.keySchema.Typecheck(key);\r\n        }\r\n        return true;\r\n    };\r\n    MichelsonMap.prototype.typecheckValue = function (value) {\r\n        if (this.valueSchema) {\r\n            return this.valueSchema.Typecheck(value);\r\n        }\r\n        return true;\r\n    };\r\n    MichelsonMap.prototype.assertTypecheckValue = function (value) {\r\n        if (!this.typecheckValue(value)) {\r\n            throw new MapTypecheckError(value, this.valueSchema, 'value');\r\n        }\r\n    };\r\n    MichelsonMap.prototype.assertTypecheckKey = function (key) {\r\n        if (!this.typecheckKey(key)) {\r\n            throw new MapTypecheckError(key, this.keySchema, 'key');\r\n        }\r\n    };\r\n    MichelsonMap.prototype.serializeDeterministically = function (key) {\r\n        return stringify(key);\r\n    };\r\n    MichelsonMap.prototype.keys = function () {\r\n        var _b, _c, _d, key, e_1_1;\r\n        var e_1, _e;\r\n        return __generator(this, function (_f) {\r\n            switch (_f.label) {\r\n                case 0:\r\n                    _f.trys.push([0, 5, 6, 7]);\r\n                    _b = __values(this.entries()), _c = _b.next();\r\n                    _f.label = 1;\r\n                case 1:\r\n                    if (!!_c.done) return [3 /*break*/, 4];\r\n                    _d = __read(_c.value, 1), key = _d[0];\r\n                    return [4 /*yield*/, key];\r\n                case 2:\r\n                    _f.sent();\r\n                    _f.label = 3;\r\n                case 3:\r\n                    _c = _b.next();\r\n                    return [3 /*break*/, 1];\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    e_1_1 = _f.sent();\r\n                    e_1 = { error: e_1_1 };\r\n                    return [3 /*break*/, 7];\r\n                case 6:\r\n                    try {\r\n                        if (_c && !_c.done && (_e = _b.return)) _e.call(_b);\r\n                    }\r\n                    finally { if (e_1) throw e_1.error; }\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    };\r\n    MichelsonMap.prototype.values = function () {\r\n        var _b, _c, _d, value, e_2_1;\r\n        var e_2, _e;\r\n        return __generator(this, function (_f) {\r\n            switch (_f.label) {\r\n                case 0:\r\n                    _f.trys.push([0, 5, 6, 7]);\r\n                    _b = __values(this.entries()), _c = _b.next();\r\n                    _f.label = 1;\r\n                case 1:\r\n                    if (!!_c.done) return [3 /*break*/, 4];\r\n                    _d = __read(_c.value, 2), value = _d[1];\r\n                    return [4 /*yield*/, value];\r\n                case 2:\r\n                    _f.sent();\r\n                    _f.label = 3;\r\n                case 3:\r\n                    _c = _b.next();\r\n                    return [3 /*break*/, 1];\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    e_2_1 = _f.sent();\r\n                    e_2 = { error: e_2_1 };\r\n                    return [3 /*break*/, 7];\r\n                case 6:\r\n                    try {\r\n                        if (_c && !_c.done && (_e = _b.return)) _e.call(_b);\r\n                    }\r\n                    finally { if (e_2) throw e_2.error; }\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    };\r\n    MichelsonMap.prototype.entries = function () {\r\n        var _b, _c, key, e_3_1;\r\n        var e_3, _d;\r\n        return __generator(this, function (_e) {\r\n            switch (_e.label) {\r\n                case 0:\r\n                    _e.trys.push([0, 5, 6, 7]);\r\n                    _b = __values(this.valueMap.keys()), _c = _b.next();\r\n                    _e.label = 1;\r\n                case 1:\r\n                    if (!!_c.done) return [3 /*break*/, 4];\r\n                    key = _c.value;\r\n                    return [4 /*yield*/, [this.keyMap.get(key), this.valueMap.get(key)]];\r\n                case 2:\r\n                    _e.sent();\r\n                    _e.label = 3;\r\n                case 3:\r\n                    _c = _b.next();\r\n                    return [3 /*break*/, 1];\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    e_3_1 = _e.sent();\r\n                    e_3 = { error: e_3_1 };\r\n                    return [3 /*break*/, 7];\r\n                case 6:\r\n                    try {\r\n                        if (_c && !_c.done && (_d = _b.return)) _d.call(_b);\r\n                    }\r\n                    finally { if (e_3) throw e_3.error; }\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    };\r\n    MichelsonMap.prototype.get = function (key) {\r\n        this.assertTypecheckKey(key);\r\n        var strKey = this.serializeDeterministically(key);\r\n        return this.valueMap.get(strKey);\r\n    };\r\n    /**\r\n     *\r\n     * @description Set a key and a value in the MichelsonMap. If the key already exists, override the current value.\r\n     *\r\n     * @example map.set(\"myKey\", \"myValue\") // Using a string as key\r\n     *\r\n     * @example map.set({0: \"test\", 1: \"test1\"}, \"myValue\") // Using a pair as key\r\n     *\r\n     * @warn The same key can be represented in multiple ways, depending on the type of the key. This duplicate key situation will cause a runtime error (duplicate key) when sending the map data to the Tezos RPC node.\r\n     *\r\n     * For example, consider a contract with a map whose key is of type boolean.  If you set the following values in MichelsonMap: map.set(false, \"myValue\") and map.set(null, \"myValue\").\r\n     *\r\n     * You will get two unique entries in the MichelsonMap. These values will both be evaluated as falsy by the MichelsonEncoder and ultimately rejected by the Tezos RPC.\r\n     */\r\n    MichelsonMap.prototype.set = function (key, value) {\r\n        this.assertTypecheckKey(key);\r\n        this.assertTypecheckValue(value);\r\n        var strKey = this.serializeDeterministically(key);\r\n        this.keyMap.set(strKey, key);\r\n        this.valueMap.set(strKey, value);\r\n    };\r\n    MichelsonMap.prototype.delete = function (key) {\r\n        this.assertTypecheckKey(key);\r\n        this.keyMap.delete(this.serializeDeterministically(key));\r\n        this.valueMap.delete(this.serializeDeterministically(key));\r\n    };\r\n    MichelsonMap.prototype.has = function (key) {\r\n        this.assertTypecheckKey(key);\r\n        var strKey = this.serializeDeterministically(key);\r\n        return this.keyMap.has(strKey) && this.valueMap.has(strKey);\r\n    };\r\n    MichelsonMap.prototype.clear = function () {\r\n        this.keyMap.clear();\r\n        this.valueMap.clear();\r\n    };\r\n    Object.defineProperty(MichelsonMap.prototype, \"size\", {\r\n        get: function () {\r\n            return this.keyMap.size;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    MichelsonMap.prototype.forEach = function (cb) {\r\n        var e_4, _b;\r\n        try {\r\n            for (var _c = __values(this.entries()), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var _e = __read(_d.value, 2), key = _e[0], value = _e[1];\r\n                cb(value, key, this);\r\n            }\r\n        }\r\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\r\n            }\r\n            finally { if (e_4) throw e_4.error; }\r\n        }\r\n    };\r\n    return MichelsonMap;\r\n}());\r\n_a$1 = michelsonMapTypeSymbol;\n\nvar TokenValidationError = /** @class */ (function () {\r\n    function TokenValidationError(value, token, baseMessage) {\r\n        this.value = value;\r\n        this.token = token;\r\n        this.name = 'ValidationError';\r\n        var annot = this.token.annot();\r\n        var annotText = annot ? \"[\" + annot + \"] \" : '';\r\n        this.message = \"\" + annotText + baseMessage;\r\n    }\r\n    return TokenValidationError;\r\n}());\r\nvar Token = /** @class */ (function () {\r\n    function Token(val, idx, fac) {\r\n        this.val = val;\r\n        this.idx = idx;\r\n        this.fac = fac;\r\n        this.createToken = this.fac;\r\n    }\r\n    Token.prototype.typeWithoutAnnotations = function () {\r\n        var removeArgsRec = function (val) {\r\n            if (val.args) {\r\n                return {\r\n                    prim: val.prim,\r\n                    args: val.args.map(function (x) { return removeArgsRec(x); }),\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    prim: val.prim,\r\n                };\r\n            }\r\n        };\r\n        return removeArgsRec(this.val);\r\n    };\r\n    Token.prototype.annot = function () {\r\n        return (Array.isArray(this.val.annots) && this.val.annots.length > 0\r\n            ? this.val.annots[0]\r\n            : String(this.idx)).replace(/(%|\\:)(_Liq_entry_)?/, '');\r\n    };\r\n    Token.prototype.hasAnnotations = function () {\r\n        return Array.isArray(this.val.annots) && this.val.annots.length;\r\n    };\r\n    Token.prototype.ExtractSignature = function () {\r\n        return [[this.ExtractSchema()]];\r\n    };\r\n    return Token;\r\n}());\r\nvar ComparableToken = /** @class */ (function (_super) {\r\n    __extends(ComparableToken, _super);\r\n    function ComparableToken() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ComparableToken.prototype.compare = function (o1, o2) {\r\n        if (o1 === o2) {\r\n            return 0;\r\n        }\r\n        return o1 < o2 ? -1 : 1;\r\n    };\r\n    return ComparableToken;\r\n}(Token));\n\nvar BigMapValidationError = /** @class */ (function (_super) {\r\n    __extends(BigMapValidationError, _super);\r\n    function BigMapValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'BigMapValidationError';\r\n        return _this;\r\n    }\r\n    return BigMapValidationError;\r\n}(TokenValidationError));\r\nvar BigMapToken = /** @class */ (function (_super) {\r\n    __extends(BigMapToken, _super);\r\n    function BigMapToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(BigMapToken.prototype, \"ValueSchema\", {\r\n        get: function () {\r\n            return this.createToken(this.val.args[1], 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BigMapToken.prototype, \"KeySchema\", {\r\n        get: function () {\r\n            return this.createToken(this.val.args[0], 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    BigMapToken.prototype.ExtractSchema = function () {\r\n        return {\r\n            big_map: {\r\n                key: this.KeySchema.ExtractSchema(),\r\n                value: this.ValueSchema.ExtractSchema(),\r\n            },\r\n        };\r\n    };\r\n    BigMapToken.prototype.isValid = function (value) {\r\n        if (MichelsonMap.isMichelsonMap(value)) {\r\n            return null;\r\n        }\r\n        return new BigMapValidationError(value, this, 'Value must be a MichelsonMap');\r\n    };\r\n    BigMapToken.prototype.Encode = function (args) {\r\n        var _this = this;\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return Array.from(val.keys())\r\n            .sort(function (a, b) { return _this.KeySchema.compare(a, b); })\r\n            .map(function (key) {\r\n            return {\r\n                prim: 'Elt',\r\n                args: [_this.KeySchema.EncodeObject(key), _this.ValueSchema.EncodeObject(val.get(key))],\r\n            };\r\n        });\r\n    };\r\n    BigMapToken.prototype.EncodeObject = function (args) {\r\n        var _this = this;\r\n        var val = args;\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return Array.from(val.keys())\r\n            .sort(function (a, b) { return _this.KeySchema.compare(a, b); })\r\n            .map(function (key) {\r\n            return {\r\n                prim: 'Elt',\r\n                args: [_this.KeySchema.EncodeObject(key), _this.ValueSchema.EncodeObject(val.get(key))],\r\n            };\r\n        });\r\n    };\r\n    BigMapToken.prototype.Execute = function (val, semantic) {\r\n        var _this = this;\r\n        if (semantic && semantic[BigMapToken.prim]) {\r\n            return semantic[BigMapToken.prim](val, this.val);\r\n        }\r\n        if (Array.isArray(val)) {\r\n            // Athens is returning an empty array for big map in storage\r\n            // Internal: In taquito v5 it is still used to decode big map diff (as if they were a regular map)\r\n            var map_1 = new MichelsonMap(this.val);\r\n            val.forEach(function (current) {\r\n                map_1.set(_this.KeySchema.ToKey(current.args[0]), _this.ValueSchema.Execute(current.args[1]));\r\n            });\r\n            return map_1;\r\n        }\r\n        else if ('int' in val) {\r\n            // Babylon is returning an int with the big map id in contract storage\r\n            return val.int;\r\n        }\r\n        else {\r\n            // Unknown case\r\n            throw new Error(\"Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got \" + JSON.stringify(val));\r\n        }\r\n    };\r\n    BigMapToken.prim = 'big_map';\r\n    return BigMapToken;\r\n}(Token));\n\nvar OrToken = /** @class */ (function (_super) {\r\n    __extends(OrToken, _super);\r\n    function OrToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    OrToken.prototype.Encode = function (args) {\r\n        var label = args[args.length - 1];\r\n        var leftToken = this.createToken(this.val.args[0], this.idx);\r\n        var keyCount = 1;\r\n        if (leftToken instanceof OrToken) {\r\n            keyCount = Object.keys(leftToken.ExtractSchema()).length;\r\n        }\r\n        var rightToken = this.createToken(this.val.args[1], this.idx + keyCount);\r\n        if (String(leftToken.annot()) === String(label) && !(leftToken instanceof OrToken)) {\r\n            args.pop();\r\n            return { prim: 'Left', args: [leftToken.Encode(args)] };\r\n        }\r\n        else if (String(rightToken.annot()) === String(label) && !(rightToken instanceof OrToken)) {\r\n            args.pop();\r\n            return { prim: 'Right', args: [rightToken.Encode(args)] };\r\n        }\r\n        else {\r\n            if (leftToken instanceof OrToken) {\r\n                var val = leftToken.Encode(args);\r\n                if (val) {\r\n                    return { prim: 'Left', args: [val] };\r\n                }\r\n            }\r\n            if (rightToken instanceof OrToken) {\r\n                var val = rightToken.Encode(args);\r\n                if (val) {\r\n                    return { prim: 'Right', args: [val] };\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    };\r\n    OrToken.prototype.ExtractSignature = function () {\r\n        var e_1, _a, e_2, _b;\r\n        var leftToken = this.createToken(this.val.args[0], this.idx);\r\n        var keyCount = 1;\r\n        if (leftToken instanceof OrToken) {\r\n            keyCount = Object.keys(leftToken.ExtractSchema()).length;\r\n        }\r\n        var rightToken = this.createToken(this.val.args[1], this.idx + keyCount);\r\n        var newSig = [];\r\n        if (leftToken instanceof OrToken) {\r\n            newSig.push.apply(newSig, __spreadArray([], __read(leftToken.ExtractSignature())));\r\n        }\r\n        else {\r\n            try {\r\n                for (var _c = __values(leftToken.ExtractSignature()), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var sig = _d.value;\r\n                    newSig.push(__spreadArray([leftToken.annot()], __read(sig)));\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n        if (rightToken instanceof OrToken) {\r\n            newSig.push.apply(newSig, __spreadArray([], __read(rightToken.ExtractSignature())));\r\n        }\r\n        else {\r\n            try {\r\n                for (var _e = __values(rightToken.ExtractSignature()), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                    var sig = _f.value;\r\n                    newSig.push(__spreadArray([rightToken.annot()], __read(sig)));\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n        }\r\n        return newSig;\r\n    };\r\n    OrToken.prototype.EncodeObject = function (args) {\r\n        var label = Object.keys(args)[0];\r\n        var leftToken = this.createToken(this.val.args[0], this.idx);\r\n        var keyCount = 1;\r\n        if (leftToken instanceof OrToken) {\r\n            keyCount = Object.keys(leftToken.ExtractSchema()).length;\r\n        }\r\n        var rightToken = this.createToken(this.val.args[1], this.idx + keyCount);\r\n        if (String(leftToken.annot()) === String(label) && !(leftToken instanceof OrToken)) {\r\n            return { prim: 'Left', args: [leftToken.EncodeObject(args[label])] };\r\n        }\r\n        else if (String(rightToken.annot()) === String(label) && !(rightToken instanceof OrToken)) {\r\n            return { prim: 'Right', args: [rightToken.EncodeObject(args[label])] };\r\n        }\r\n        else {\r\n            if (leftToken instanceof OrToken) {\r\n                var val = leftToken.EncodeObject(args);\r\n                if (val) {\r\n                    return { prim: 'Left', args: [val] };\r\n                }\r\n            }\r\n            if (rightToken instanceof OrToken) {\r\n                var val = rightToken.EncodeObject(args);\r\n                if (val) {\r\n                    return { prim: 'Right', args: [val] };\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    };\r\n    OrToken.prototype.Execute = function (val, semantics) {\r\n        var _a, _b;\r\n        var leftToken = this.createToken(this.val.args[0], this.idx);\r\n        var keyCount = 1;\r\n        if (leftToken instanceof OrToken) {\r\n            keyCount = Object.keys(leftToken.ExtractSchema()).length;\r\n        }\r\n        var rightToken = this.createToken(this.val.args[1], this.idx + keyCount);\r\n        if (val.prim === 'Right') {\r\n            if (rightToken instanceof OrToken) {\r\n                return rightToken.Execute(val.args[0], semantics);\r\n            }\r\n            else {\r\n                return _a = {},\r\n                    _a[rightToken.annot()] = rightToken.Execute(val.args[0], semantics),\r\n                    _a;\r\n            }\r\n        }\r\n        else if (val.prim === 'Left') {\r\n            if (leftToken instanceof OrToken) {\r\n                return leftToken.Execute(val.args[0], semantics);\r\n            }\r\n            return _b = {},\r\n                _b[leftToken.annot()] = leftToken.Execute(val.args[0], semantics),\r\n                _b;\r\n        }\r\n        else {\r\n            throw new Error(\"Was expecting Left or Right prim but got: \" + val.prim);\r\n        }\r\n    };\r\n    OrToken.prototype.traversal = function (getLeftValue, getRightValue, concat) {\r\n        var _a, _b;\r\n        var leftToken = this.createToken(this.val.args[0], this.idx);\r\n        var keyCount = 1;\r\n        var leftValue;\r\n        if (leftToken instanceof OrToken && !leftToken.hasAnnotations()) {\r\n            leftValue = getLeftValue(leftToken);\r\n            keyCount = Object.keys(leftToken.ExtractSchema()).length;\r\n        }\r\n        else {\r\n            leftValue = (_a = {}, _a[leftToken.annot()] = getLeftValue(leftToken), _a);\r\n        }\r\n        var rightToken = this.createToken(this.val.args[1], this.idx + keyCount);\r\n        var rightValue;\r\n        if (rightToken instanceof OrToken && !rightToken.hasAnnotations()) {\r\n            rightValue = getRightValue(rightToken);\r\n        }\r\n        else {\r\n            rightValue = (_b = {}, _b[rightToken.annot()] = getRightValue(rightToken), _b);\r\n        }\r\n        var res = concat(leftValue, rightValue);\r\n        return res;\r\n    };\r\n    OrToken.prototype.ExtractSchema = function () {\r\n        return this.traversal(function (leftToken) { return leftToken.ExtractSchema(); }, function (rightToken) { return rightToken.ExtractSchema(); }, function (leftValue, rightValue) { return (__assign(__assign({}, leftValue), rightValue)); });\r\n    };\r\n    OrToken.prototype.findToken = function (label) {\r\n        var leftToken = this.createToken(this.val.args[0], this.idx);\r\n        var keyCount = 1;\r\n        if (leftToken instanceof OrToken) {\r\n            keyCount = Object.keys(leftToken.ExtractSchema()).length;\r\n        }\r\n        var rightToken = this.createToken(this.val.args[1], this.idx + keyCount);\r\n        if (String(leftToken.annot()) === String(label) && !(leftToken instanceof OrToken) && leftToken instanceof ComparableToken) {\r\n            return leftToken;\r\n        }\r\n        else if (String(rightToken.annot()) === String(label) && !(rightToken instanceof OrToken) && rightToken instanceof ComparableToken) {\r\n            return rightToken;\r\n        }\r\n        else {\r\n            if (leftToken instanceof OrToken) {\r\n                var tok = leftToken.findToken(label);\r\n                if (tok) {\r\n                    return tok;\r\n                }\r\n            }\r\n            if (rightToken instanceof OrToken) {\r\n                var tok = rightToken.findToken(label);\r\n                if (tok) {\r\n                    return tok;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    };\r\n    OrToken.prototype.compare = function (val1, val2) {\r\n        var labelVal1 = Object.keys(val1)[0];\r\n        var labelVal2 = Object.keys(val2)[0];\r\n        if (labelVal1 === labelVal2) {\r\n            var token = this.findToken(labelVal1);\r\n            if (token instanceof ComparableToken) {\r\n                return token.compare(val1[labelVal1], val2[labelVal1]);\r\n            }\r\n        }\r\n        else {\r\n            var encoded1 = JSON.stringify(this.EncodeObject(val1));\r\n            var encoded2 = JSON.stringify(this.EncodeObject(val2));\r\n            return encoded1 < encoded2 ? -1 : 1;\r\n        }\r\n    };\r\n    OrToken.prototype.ToKey = function (val) {\r\n        return this.Execute(val);\r\n    };\r\n    OrToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: this.EncodeObject(val),\r\n            type: this.typeWithoutAnnotations(),\r\n        };\r\n    };\r\n    OrToken.prim = 'or';\r\n    return OrToken;\r\n}(ComparableToken));\n\n// collapse comb pair\r\nfunction collapse$1(val, prim) {\r\n    if (prim === void 0) { prim = PairToken.prim; }\r\n    if (Array.isArray(val)) {\r\n        return collapse$1({\r\n            prim: prim,\r\n            args: val,\r\n        }, prim);\r\n    }\r\n    if (val.args === undefined) {\r\n        throw new Error('Token has no arguments');\r\n    }\r\n    if (val.args.length > 2) {\r\n        return [val.args[0], {\r\n                prim: prim,\r\n                args: val.args.slice(1),\r\n            }];\r\n    }\r\n    return [val.args[0], val.args[1]];\r\n}\r\nvar PairToken = /** @class */ (function (_super) {\r\n    __extends(PairToken, _super);\r\n    function PairToken(val, idx, fac) {\r\n        return _super.call(this, Array.isArray(val) ? {\r\n            prim: PairToken.prim,\r\n            args: val,\r\n        } : val, idx, fac) || this;\r\n    }\r\n    PairToken.prototype.args = function () {\r\n        // collapse comb pair\r\n        return collapse$1(this.val);\r\n    };\r\n    PairToken.prototype.tokens = function () {\r\n        var _this = this;\r\n        var cnt = 0;\r\n        return this.args().map(function (a) {\r\n            var tok = _this.createToken(a, _this.idx + cnt);\r\n            if (tok instanceof PairToken) {\r\n                cnt += Object.keys(tok.ExtractSchema()).length;\r\n            }\r\n            else {\r\n                cnt++;\r\n            }\r\n            return tok;\r\n        });\r\n    };\r\n    PairToken.prototype.Encode = function (args) {\r\n        return {\r\n            prim: 'Pair',\r\n            args: this.tokens().map(function (t) { return t.Encode(args); }),\r\n        };\r\n    };\r\n    PairToken.prototype.ExtractSignature = function () {\r\n        var e_1, _a, e_2, _b;\r\n        var args = this.args();\r\n        var leftToken = this.createToken(args[0], this.idx);\r\n        var keyCount = 1;\r\n        if (leftToken instanceof OrToken) {\r\n            keyCount = Object.keys(leftToken.ExtractSchema()).length;\r\n        }\r\n        var rightToken = this.createToken(args[1], this.idx + keyCount);\r\n        var newSig = [];\r\n        try {\r\n            for (var _c = __values(leftToken.ExtractSignature()), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var leftSig = _d.value;\r\n                try {\r\n                    for (var _e = (e_2 = void 0, __values(rightToken.ExtractSignature())), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                        var rightSig = _f.value;\r\n                        newSig.push(__spreadArray(__spreadArray([], __read(leftSig)), __read(rightSig)));\r\n                    }\r\n                }\r\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\r\n                    }\r\n                    finally { if (e_2) throw e_2.error; }\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return newSig;\r\n    };\r\n    PairToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: this.EncodeObject(val),\r\n            type: this.typeWithoutAnnotations(),\r\n        };\r\n    };\r\n    PairToken.prototype.ToKey = function (val) {\r\n        return this.Execute(val);\r\n    };\r\n    PairToken.prototype.EncodeObject = function (args) {\r\n        var _a = __read(this.tokens(), 2), leftToken = _a[0], rightToken = _a[1];\r\n        var leftValue;\r\n        if (leftToken instanceof PairToken && !leftToken.hasAnnotations()) {\r\n            leftValue = args;\r\n        }\r\n        else {\r\n            leftValue = args[leftToken.annot()];\r\n        }\r\n        var rightValue;\r\n        if (rightToken instanceof PairToken && !rightToken.hasAnnotations()) {\r\n            rightValue = args;\r\n        }\r\n        else {\r\n            rightValue = args[rightToken.annot()];\r\n        }\r\n        return {\r\n            prim: 'Pair',\r\n            args: [leftToken.EncodeObject(leftValue), rightToken.EncodeObject(rightValue)],\r\n        };\r\n    };\r\n    PairToken.prototype.traversal = function (getLeftValue, getRightValue) {\r\n        var _a, _b;\r\n        var args = this.args();\r\n        var leftToken = this.createToken(args[0], this.idx);\r\n        var keyCount = 1;\r\n        var leftValue;\r\n        if (leftToken instanceof PairToken && !leftToken.hasAnnotations()) {\r\n            leftValue = getLeftValue(leftToken);\r\n            keyCount = Object.keys(leftToken.ExtractSchema()).length;\r\n        }\r\n        else {\r\n            leftValue = (_a = {}, _a[leftToken.annot()] = getLeftValue(leftToken), _a);\r\n        }\r\n        var rightToken = this.createToken(args[1], this.idx + keyCount);\r\n        var rightValue;\r\n        if (rightToken instanceof PairToken && !rightToken.hasAnnotations()) {\r\n            rightValue = getRightValue(rightToken);\r\n        }\r\n        else {\r\n            rightValue = (_b = {}, _b[rightToken.annot()] = getRightValue(rightToken), _b);\r\n        }\r\n        var res = __assign(__assign({}, leftValue), rightValue);\r\n        return res;\r\n    };\r\n    PairToken.prototype.Execute = function (val, semantics) {\r\n        var args = collapse$1(val, 'Pair');\r\n        return this.traversal(function (leftToken) { return leftToken.Execute(args[0], semantics); }, function (rightToken) { return rightToken.Execute(args[1], semantics); });\r\n    };\r\n    PairToken.prototype.ExtractSchema = function () {\r\n        return this.traversal(function (leftToken) { return leftToken.ExtractSchema(); }, function (rightToken) { return rightToken.ExtractSchema(); });\r\n    };\r\n    PairToken.prototype.compare = function (val1, val2) {\r\n        var _a = __read(this.tokens(), 2), leftToken = _a[0], rightToken = _a[1];\r\n        var getValue = function (token, args) {\r\n            if (token instanceof PairToken && !token.hasAnnotations()) {\r\n                return args;\r\n            }\r\n            else {\r\n                return args[token.annot()];\r\n            }\r\n        };\r\n        if (leftToken instanceof ComparableToken && rightToken instanceof ComparableToken) {\r\n            var result = leftToken.compare(getValue(leftToken, val1), getValue(leftToken, val2));\r\n            if (result === 0) {\r\n                return rightToken.compare(getValue(rightToken, val1), getValue(rightToken, val2));\r\n            }\r\n            return result;\r\n        }\r\n        throw new Error('Not a comparable pair');\r\n    };\r\n    PairToken.prim = 'pair';\r\n    return PairToken;\r\n}(ComparableToken));\n\nvar NatValidationError = /** @class */ (function (_super) {\r\n    __extends(NatValidationError, _super);\r\n    function NatValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'NatValidationError';\r\n        return _this;\r\n    }\r\n    return NatValidationError;\r\n}(TokenValidationError));\r\nvar NatToken = /** @class */ (function (_super) {\r\n    __extends(NatToken, _super);\r\n    function NatToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    NatToken.prototype.Execute = function (val) {\r\n        return new BigNumber(val[Object.keys(val)[0]]);\r\n    };\r\n    NatToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { int: new BigNumber(val).toFixed() };\r\n    };\r\n    NatToken.prototype.isValid = function (val) {\r\n        var bigNumber = new BigNumber(val);\r\n        if (bigNumber.isNaN()) {\r\n            return new NatValidationError(val, this, \"Value is not a number: \" + val);\r\n        }\r\n        else if (bigNumber.isNegative()) {\r\n            return new NatValidationError(val, this, \"Value cannot be negative: \" + val);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    NatToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { int: new BigNumber(val).toFixed() };\r\n    };\r\n    NatToken.prototype.ExtractSchema = function () {\r\n        return NatToken.prim;\r\n    };\r\n    NatToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { int: String(val) },\r\n            type: { prim: NatToken.prim },\r\n        };\r\n    };\r\n    NatToken.prototype.ToKey = function (_a) {\r\n        var int = _a.int;\r\n        return int;\r\n    };\r\n    NatToken.prototype.compare = function (nat1, nat2) {\r\n        var o1 = Number(nat1);\r\n        var o2 = Number(nat2);\r\n        if (o1 === o2) {\r\n            return 0;\r\n        }\r\n        return o1 < o2 ? -1 : 1;\r\n    };\r\n    NatToken.prim = 'nat';\r\n    return NatToken;\r\n}(ComparableToken));\n\nvar StringToken = /** @class */ (function (_super) {\r\n    __extends(StringToken, _super);\r\n    function StringToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    StringToken.prototype.Execute = function (val) {\r\n        return val[Object.keys(val)[0]];\r\n    };\r\n    StringToken.prototype.ExtractSchema = function () {\r\n        return StringToken.prim;\r\n    };\r\n    StringToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        return { string: val };\r\n    };\r\n    StringToken.prototype.EncodeObject = function (val) {\r\n        return { string: val };\r\n    };\r\n    // tslint:disable-next-line: variable-name\r\n    StringToken.prototype.ToKey = function (_a) {\r\n        var string = _a.string;\r\n        return string;\r\n    };\r\n    StringToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { string: val },\r\n            type: { prim: StringToken.prim },\r\n        };\r\n    };\r\n    StringToken.prim = 'string';\r\n    return StringToken;\r\n}(ComparableToken));\n\nvar AddressValidationError = /** @class */ (function (_super) {\r\n    __extends(AddressValidationError, _super);\r\n    function AddressValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'AddressValidationError';\r\n        return _this;\r\n    }\r\n    return AddressValidationError;\r\n}(TokenValidationError));\r\nvar AddressToken = /** @class */ (function (_super) {\r\n    __extends(AddressToken, _super);\r\n    function AddressToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    AddressToken.prototype.ToBigMapKey = function (val) {\r\n        var decoded = b58decode(val);\r\n        return {\r\n            key: { bytes: decoded },\r\n            type: { prim: 'bytes' },\r\n        };\r\n    };\r\n    AddressToken.prototype.isValid = function (value) {\r\n        if (validateAddress(value) !== ValidationResult.VALID) {\r\n            return new AddressValidationError(value, this, \"Address is not valid: \" + value);\r\n        }\r\n        return null;\r\n    };\r\n    AddressToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    AddressToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    // tslint:disable-next-line: variable-name\r\n    AddressToken.prototype.Execute = function (val) {\r\n        if (val.string) {\r\n            return val.string;\r\n        }\r\n        return encodePubKey(val.bytes);\r\n    };\r\n    AddressToken.prototype.ExtractSchema = function () {\r\n        return AddressToken.prim;\r\n    };\r\n    // tslint:disable-next-line: variable-name\r\n    AddressToken.prototype.ToKey = function (_a) {\r\n        var bytes = _a.bytes, string = _a.string;\r\n        if (string) {\r\n            return string;\r\n        }\r\n        return encodePubKey(bytes);\r\n    };\r\n    AddressToken.prototype.compare = function (address1, address2) {\r\n        var isImplicit = function (address) {\r\n            return address.startsWith('tz');\r\n        };\r\n        if (isImplicit(address1) && isImplicit(address2)) {\r\n            return _super.prototype.compare.call(this, address1, address2);\r\n        }\r\n        else if (isImplicit(address1)) {\r\n            return -1;\r\n        }\r\n        else if (isImplicit(address2)) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return _super.prototype.compare.call(this, address1, address2);\r\n        }\r\n    };\r\n    AddressToken.prim = 'address';\r\n    return AddressToken;\r\n}(ComparableToken));\n\nvar MapValidationError = /** @class */ (function (_super) {\r\n    __extends(MapValidationError, _super);\r\n    function MapValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'MapValidationError';\r\n        return _this;\r\n    }\r\n    return MapValidationError;\r\n}(TokenValidationError));\r\nvar MapToken = /** @class */ (function (_super) {\r\n    __extends(MapToken, _super);\r\n    function MapToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MapToken.prototype, \"ValueSchema\", {\r\n        get: function () {\r\n            return this.createToken(this.val.args[1], 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MapToken.prototype, \"KeySchema\", {\r\n        get: function () {\r\n            return this.createToken(this.val.args[0], 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    MapToken.prototype.isValid = function (value) {\r\n        if (MichelsonMap.isMichelsonMap(value)) {\r\n            return null;\r\n        }\r\n        return new MapValidationError(value, this, 'Value must be a MichelsonMap');\r\n    };\r\n    MapToken.prototype.Execute = function (val, semantics) {\r\n        var _this = this;\r\n        var map = new MichelsonMap(this.val);\r\n        val.forEach(function (current) {\r\n            map.set(_this.KeySchema.ToKey(current.args[0]), _this.ValueSchema.Execute(current.args[1], semantics));\r\n        });\r\n        return map;\r\n    };\r\n    MapToken.prototype.Encode = function (args) {\r\n        var _this = this;\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return Array.from(val.keys())\r\n            .sort(function (a, b) { return _this.KeySchema.compare(a, b); })\r\n            .map(function (key) {\r\n            return {\r\n                prim: 'Elt',\r\n                args: [_this.KeySchema.EncodeObject(key), _this.ValueSchema.EncodeObject(val.get(key))],\r\n            };\r\n        });\r\n    };\r\n    MapToken.prototype.EncodeObject = function (args) {\r\n        var _this = this;\r\n        var val = args;\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return Array.from(val.keys())\r\n            .sort(function (a, b) { return _this.KeySchema.compare(a, b); })\r\n            .map(function (key) {\r\n            return {\r\n                prim: 'Elt',\r\n                args: [_this.KeySchema.EncodeObject(key), _this.ValueSchema.EncodeObject(val.get(key))],\r\n            };\r\n        });\r\n    };\r\n    MapToken.prototype.ExtractSchema = function () {\r\n        return {\r\n            map: {\r\n                key: this.KeySchema.ExtractSchema(),\r\n                value: this.ValueSchema.ExtractSchema(),\r\n            },\r\n        };\r\n    };\r\n    MapToken.prim = 'map';\r\n    return MapToken;\r\n}(Token));\n\nvar BoolToken = /** @class */ (function (_super) {\r\n    __extends(BoolToken, _super);\r\n    function BoolToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    BoolToken.prototype.Execute = function (val) {\r\n        return String(val.prim).toLowerCase() === 'true' ? true : false;\r\n    };\r\n    BoolToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        return { prim: val ? 'True' : 'False' };\r\n    };\r\n    BoolToken.prototype.EncodeObject = function (val) {\r\n        return { prim: val ? 'True' : 'False' };\r\n    };\r\n    BoolToken.prototype.ExtractSchema = function () {\r\n        return BoolToken.prim;\r\n    };\r\n    BoolToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: this.EncodeObject(val),\r\n            type: { prim: BoolToken.prim },\r\n        };\r\n    };\r\n    BoolToken.prototype.ToKey = function (val) {\r\n        return this.EncodeObject(val);\r\n    };\r\n    BoolToken.prototype.compare = function (val1, val2) {\r\n        if ((val1 && val2) || (!val1 && !val2)) {\r\n            return 0;\r\n        }\r\n        else if (val1) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return -1;\r\n        }\r\n    };\r\n    BoolToken.prim = 'bool';\r\n    return BoolToken;\r\n}(ComparableToken));\n\nvar ContractValidationError = /** @class */ (function (_super) {\r\n    __extends(ContractValidationError, _super);\r\n    function ContractValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'ContractValidationError';\r\n        return _this;\r\n    }\r\n    return ContractValidationError;\r\n}(TokenValidationError));\r\nvar ContractToken = /** @class */ (function (_super) {\r\n    __extends(ContractToken, _super);\r\n    function ContractToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    ContractToken.prototype.isValid = function (value) {\r\n        // tz1,tz2 and tz3 seems to be valid contract values (for Unit contract)\r\n        if (validateAddress(value) !== ValidationResult.VALID) {\r\n            return new ContractValidationError(value, this, 'Contract address is not valid');\r\n        }\r\n        return null;\r\n    };\r\n    ContractToken.prototype.Execute = function (val) {\r\n        if (val.string) {\r\n            return val.string;\r\n        }\r\n        return encodePubKey(val.bytes);\r\n    };\r\n    ContractToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    ContractToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    ContractToken.prototype.ExtractSchema = function () {\r\n        return ContractToken.prim;\r\n    };\r\n    ContractToken.prim = 'contract';\r\n    return ContractToken;\r\n}(Token));\n\nvar ListValidationError = /** @class */ (function (_super) {\r\n    __extends(ListValidationError, _super);\r\n    function ListValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'ListValidationError';\r\n        return _this;\r\n    }\r\n    return ListValidationError;\r\n}(TokenValidationError));\r\nvar ListToken = /** @class */ (function (_super) {\r\n    __extends(ListToken, _super);\r\n    function ListToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    ListToken.prototype.isValid = function (value) {\r\n        if (Array.isArray(value)) {\r\n            return null;\r\n        }\r\n        return new ListValidationError(value, this, 'Value must be an array');\r\n    };\r\n    ListToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        var schema = this.createToken(this.val.args[0], 0);\r\n        return val.reduce(function (prev, current) {\r\n            return __spreadArray(__spreadArray([], __read(prev)), [schema.EncodeObject(current)]);\r\n        }, []);\r\n    };\r\n    ListToken.prototype.Execute = function (val, semantics) {\r\n        var schema = this.createToken(this.val.args[0], 0);\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return val.reduce(function (prev, current) {\r\n            return __spreadArray(__spreadArray([], __read(prev)), [schema.Execute(current, semantics)]);\r\n        }, []);\r\n    };\r\n    ListToken.prototype.EncodeObject = function (args) {\r\n        var schema = this.createToken(this.val.args[0], 0);\r\n        var err = this.isValid(args);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return args.reduce(function (prev, current) {\r\n            return __spreadArray(__spreadArray([], __read(prev)), [schema.EncodeObject(current)]);\r\n        }, []);\r\n    };\r\n    ListToken.prototype.ExtractSchema = function () {\r\n        var _a;\r\n        var valueSchema = this.createToken(this.val.args[0], this.idx);\r\n        return _a = {},\r\n            _a[ListToken.prim] = valueSchema.ExtractSchema(),\r\n            _a;\r\n    };\r\n    ListToken.prim = 'list';\r\n    return ListToken;\r\n}(Token));\n\nvar MutezValidationError = /** @class */ (function (_super) {\r\n    __extends(MutezValidationError, _super);\r\n    function MutezValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'MutezValidationError';\r\n        return _this;\r\n    }\r\n    return MutezValidationError;\r\n}(TokenValidationError));\r\nvar MutezToken = /** @class */ (function (_super) {\r\n    __extends(MutezToken, _super);\r\n    function MutezToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    MutezToken.prototype.Execute = function (val) {\r\n        return new BigNumber(val[Object.keys(val)[0]]);\r\n    };\r\n    MutezToken.prototype.ExtractSchema = function () {\r\n        return MutezToken.prim;\r\n    };\r\n    MutezToken.prototype.isValid = function (val) {\r\n        var bigNumber = new BigNumber(val);\r\n        if (bigNumber.isNaN()) {\r\n            return new MutezValidationError(val, this, \"Value is not a number: \" + val);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    MutezToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { int: String(val).toString() };\r\n    };\r\n    MutezToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { int: String(val).toString() };\r\n    };\r\n    MutezToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { int: String(val) },\r\n            type: { prim: MutezToken.prim },\r\n        };\r\n    };\r\n    MutezToken.prototype.ToKey = function (_a) {\r\n        var int = _a.int;\r\n        return int;\r\n    };\r\n    MutezToken.prototype.compare = function (mutez1, mutez2) {\r\n        var o1 = Number(mutez1);\r\n        var o2 = Number(mutez2);\r\n        if (o1 === o2) {\r\n            return 0;\r\n        }\r\n        return o1 < o2 ? -1 : 1;\r\n    };\r\n    MutezToken.prim = 'mutez';\r\n    return MutezToken;\r\n}(ComparableToken));\n\nvar BytesValidationError = /** @class */ (function (_super) {\r\n    __extends(BytesValidationError, _super);\r\n    function BytesValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'BytesValidationError';\r\n        return _this;\r\n    }\r\n    return BytesValidationError;\r\n}(TokenValidationError));\r\nvar BytesToken = /** @class */ (function (_super) {\r\n    __extends(BytesToken, _super);\r\n    function BytesToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    BytesToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { bytes: val },\r\n            type: { prim: BytesToken.prim },\r\n        };\r\n    };\r\n    BytesToken.prototype.isValid = function (val) {\r\n        if (typeof val === 'string' && /^[0-9a-fA-F]*$/.test(val) && val.length % 2 === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return new BytesValidationError(val, this, \"Invalid bytes: \" + val);\r\n        }\r\n    };\r\n    BytesToken.prototype.convertUint8ArrayToHexString = function (val) {\r\n        return val.constructor === Uint8Array ? Buffer.from(val).toString('hex') : val;\r\n    };\r\n    BytesToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        val = this.convertUint8ArrayToHexString(val);\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { bytes: String(val).toString() };\r\n    };\r\n    BytesToken.prototype.EncodeObject = function (val) {\r\n        val = this.convertUint8ArrayToHexString(val);\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { bytes: String(val).toString() };\r\n    };\r\n    BytesToken.prototype.Execute = function (val) {\r\n        return val.bytes;\r\n    };\r\n    BytesToken.prototype.ExtractSchema = function () {\r\n        return BytesToken.prim;\r\n    };\r\n    // tslint:disable-next-line: variable-name\r\n    BytesToken.prototype.ToKey = function (_a) {\r\n        var bytes = _a.bytes, string = _a.string;\r\n        if (string) {\r\n            return string;\r\n        }\r\n        return bytes;\r\n    };\r\n    BytesToken.prim = 'bytes';\r\n    return BytesToken;\r\n}(ComparableToken));\n\nvar OptionToken = /** @class */ (function (_super) {\r\n    __extends(OptionToken, _super);\r\n    function OptionToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    OptionToken.prototype.subToken = function () {\r\n        return this.createToken(this.val.args[0], this.idx);\r\n    };\r\n    OptionToken.prototype.annot = function () {\r\n        return Array.isArray(this.val.annots)\r\n            ? _super.prototype.annot.call(this)\r\n            : this.createToken(this.val.args[0], this.idx).annot();\r\n    };\r\n    OptionToken.prototype.Encode = function (args) {\r\n        var value = args;\r\n        if (value === undefined ||\r\n            value === null) {\r\n            return { prim: 'None' };\r\n        }\r\n        else if ((Array.isArray(value) && (value[value.length - 1] === undefined || value[value.length - 1] === null))) {\r\n            value.pop();\r\n            return { prim: 'None' };\r\n        }\r\n        var schema = this.createToken(this.val.args[0], 0);\r\n        return { prim: 'Some', args: [schema.Encode(args)] };\r\n    };\r\n    OptionToken.prototype.EncodeObject = function (args) {\r\n        var schema = this.createToken(this.val.args[0], 0);\r\n        var value = args;\r\n        if (value === undefined || value === null) {\r\n            return { prim: 'None' };\r\n        }\r\n        return { prim: 'Some', args: [schema.EncodeObject(value)] };\r\n    };\r\n    OptionToken.prototype.Execute = function (val, semantics) {\r\n        if (val.prim === 'None') {\r\n            return null;\r\n        }\r\n        var schema = this.createToken(this.val.args[0], 0);\r\n        return schema.Execute(val.args[0], semantics);\r\n    };\r\n    OptionToken.prototype.ExtractSchema = function () {\r\n        var schema = this.createToken(this.val.args[0], 0);\r\n        return schema.ExtractSchema();\r\n    };\r\n    OptionToken.prototype.ExtractSignature = function () {\r\n        var schema = this.createToken(this.val.args[0], 0);\r\n        return __spreadArray(__spreadArray([], __read(schema.ExtractSignature())), [[]]);\r\n    };\r\n    Object.defineProperty(OptionToken.prototype, \"KeySchema\", {\r\n        get: function () {\r\n            return this.createToken(this.val.args[0], 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    OptionToken.prototype.compare = function (val1, val2) {\r\n        if (!val1) {\r\n            return -1;\r\n        }\r\n        else if (!val2) {\r\n            return 1;\r\n        }\r\n        return this.KeySchema.compare(val1, val2);\r\n    };\r\n    OptionToken.prototype.ToKey = function (val) {\r\n        return this.Execute(val);\r\n    };\r\n    OptionToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: this.EncodeObject(val),\r\n            type: this.typeWithoutAnnotations(),\r\n        };\r\n    };\r\n    OptionToken.prim = 'option';\r\n    return OptionToken;\r\n}(ComparableToken));\n\nvar TimestampToken = /** @class */ (function (_super) {\r\n    __extends(TimestampToken, _super);\r\n    function TimestampToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    TimestampToken.prototype.Execute = function (val) {\r\n        if (val.string) {\r\n            return new Date(val.string).toISOString();\r\n        }\r\n        else if (val.int) {\r\n            return new Date(Number(val.int) * 1000).toISOString();\r\n        }\r\n    };\r\n    TimestampToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        return { string: val };\r\n    };\r\n    TimestampToken.prototype.EncodeObject = function (val) {\r\n        return { string: val };\r\n    };\r\n    TimestampToken.prototype.ExtractSchema = function () {\r\n        return TimestampToken.prim;\r\n    };\r\n    // tslint:disable-next-line: variable-name\r\n    TimestampToken.prototype.ToKey = function (_a) {\r\n        var string = _a.string;\r\n        return string;\r\n    };\r\n    TimestampToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { string: val },\r\n            type: { prim: TimestampToken.prim },\r\n        };\r\n    };\r\n    TimestampToken.prim = 'timestamp';\r\n    return TimestampToken;\r\n}(ComparableToken));\n\nvar IntValidationError = /** @class */ (function (_super) {\r\n    __extends(IntValidationError, _super);\r\n    function IntValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'IntValidationError';\r\n        return _this;\r\n    }\r\n    return IntValidationError;\r\n}(TokenValidationError));\r\nvar IntToken = /** @class */ (function (_super) {\r\n    __extends(IntToken, _super);\r\n    function IntToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    IntToken.prototype.Execute = function (val) {\r\n        return new BigNumber(val[Object.keys(val)[0]]);\r\n    };\r\n    IntToken.prototype.ExtractSchema = function () {\r\n        return IntToken.prim;\r\n    };\r\n    IntToken.prototype.isValid = function (val) {\r\n        var bigNumber = new BigNumber(val);\r\n        if (bigNumber.isNaN()) {\r\n            return new IntValidationError(val, this, \"Value is not a number: \" + val);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    IntToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { int: new BigNumber(val).toFixed() };\r\n    };\r\n    IntToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { int: new BigNumber(val).toFixed() };\r\n    };\r\n    IntToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { int: String(val) },\r\n            type: { prim: IntToken.prim },\r\n        };\r\n    };\r\n    IntToken.prototype.ToKey = function (_a) {\r\n        var int = _a.int;\r\n        return int;\r\n    };\r\n    IntToken.prototype.compare = function (int1, int2) {\r\n        var o1 = Number(int1);\r\n        var o2 = Number(int2);\r\n        if (o1 === o2) {\r\n            return 0;\r\n        }\r\n        return o1 < o2 ? -1 : 1;\r\n    };\r\n    IntToken.prim = 'int';\r\n    return IntToken;\r\n}(ComparableToken));\n\nvar UnitToken = /** @class */ (function (_super) {\r\n    __extends(UnitToken, _super);\r\n    function UnitToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    UnitToken.prototype.Encode = function (args) {\r\n        args.pop();\r\n        return { prim: 'Unit' };\r\n    };\r\n    UnitToken.prototype.EncodeObject = function (_val) {\r\n        return { prim: 'Unit' };\r\n    };\r\n    UnitToken.prototype.Execute = function (_val) {\r\n        return UnitValue;\r\n    };\r\n    UnitToken.prototype.ExtractSchema = function () {\r\n        return UnitToken.prim;\r\n    };\r\n    UnitToken.prototype.compare = function (_val1, _val2) {\r\n        return 0;\r\n    };\r\n    UnitToken.prototype.ToKey = function (_val) {\r\n        return UnitValue;\r\n    };\r\n    UnitToken.prototype.ToBigMapKey = function (_val) {\r\n        return {\r\n            key: { prim: 'Unit' },\r\n            type: { prim: UnitToken.prim },\r\n        };\r\n    };\r\n    UnitToken.prim = 'unit';\r\n    return UnitToken;\r\n}(ComparableToken));\n\nvar publicKeyPrefixLength = 4;\r\nvar KeyValidationError = /** @class */ (function (_super) {\r\n    __extends(KeyValidationError, _super);\r\n    function KeyValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'KeyValidationError';\r\n        return _this;\r\n    }\r\n    return KeyValidationError;\r\n}(TokenValidationError));\r\nvar KeyToken = /** @class */ (function (_super) {\r\n    __extends(KeyToken, _super);\r\n    function KeyToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    KeyToken.prototype.Execute = function (val) {\r\n        if (val.string) {\r\n            return val.string;\r\n        }\r\n        return encodeKey(val.bytes);\r\n    };\r\n    KeyToken.prototype.isValid = function (value) {\r\n        if (validatePublicKey(value) !== ValidationResult.VALID) {\r\n            return new KeyValidationError(value, this, 'Key is not valid');\r\n        }\r\n        return null;\r\n    };\r\n    KeyToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    KeyToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    KeyToken.prototype.ExtractSchema = function () {\r\n        return KeyToken.prim;\r\n    };\r\n    KeyToken.prototype.ToKey = function (val) {\r\n        return this.Execute(val);\r\n    };\r\n    KeyToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { string: val },\r\n            type: { prim: KeyToken.prim },\r\n        };\r\n    };\r\n    KeyToken.prototype.compare = function (key1, key2) {\r\n        var keyPrefix1 = this.getPrefix(key1);\r\n        var keyPrefix2 = this.getPrefix(key2);\r\n        if (keyPrefix1 === Prefix.EDPK && keyPrefix2 !== Prefix.EDPK) {\r\n            return -1;\r\n        }\r\n        else if (keyPrefix1 === Prefix.SPPK && keyPrefix2 !== Prefix.SPPK) {\r\n            return keyPrefix2 === Prefix.EDPK ? 1 : -1;\r\n        }\r\n        else if (keyPrefix1 === Prefix.P2PK) {\r\n            if (keyPrefix2 !== Prefix.P2PK) {\r\n                return 1;\r\n            }\r\n            var keyBytes1 = this.getP256PublicKeyComparableBytes(key1);\r\n            var keyBytes2 = this.getP256PublicKeyComparableBytes(key2);\r\n            return Buffer.compare(keyBytes1, keyBytes2);\r\n        }\r\n        return _super.prototype.compare.call(this, key1, key2);\r\n    };\r\n    KeyToken.prototype.getPrefix = function (val) {\r\n        return val.substring(0, publicKeyPrefixLength);\r\n    };\r\n    KeyToken.prototype.getP256PublicKeyComparableBytes = function (p2pk) {\r\n        return b58cdecode(p2pk, prefix[Prefix.P2PK]).slice(1);\r\n    };\r\n    KeyToken.prim = 'key';\r\n    return KeyToken;\r\n}(ComparableToken));\n\nvar KeyHashValidationError = /** @class */ (function (_super) {\r\n    __extends(KeyHashValidationError, _super);\r\n    function KeyHashValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'KeyHashValidationError';\r\n        return _this;\r\n    }\r\n    return KeyHashValidationError;\r\n}(TokenValidationError));\r\nvar KeyHashToken = /** @class */ (function (_super) {\r\n    __extends(KeyHashToken, _super);\r\n    function KeyHashToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    KeyHashToken.prototype.Execute = function (val) {\r\n        if (val.string) {\r\n            return val.string;\r\n        }\r\n        return encodeKeyHash(val.bytes);\r\n    };\r\n    KeyHashToken.prototype.isValid = function (value) {\r\n        if (validateKeyHash(value) !== ValidationResult.VALID) {\r\n            return new KeyHashValidationError(value, this, \"KeyHash is not valid: \" + value);\r\n        }\r\n        return null;\r\n    };\r\n    KeyHashToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    KeyHashToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    KeyHashToken.prototype.ExtractSchema = function () {\r\n        return KeyHashToken.prim;\r\n    };\r\n    // tslint:disable-next-line: variable-name\r\n    KeyHashToken.prototype.ToKey = function (_a) {\r\n        var string = _a.string, bytes = _a.bytes;\r\n        if (string) {\r\n            return string;\r\n        }\r\n        return encodeKeyHash(bytes);\r\n    };\r\n    KeyHashToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { string: val },\r\n            type: { prim: KeyHashToken.prim },\r\n        };\r\n    };\r\n    KeyHashToken.prim = 'key_hash';\r\n    return KeyHashToken;\r\n}(ComparableToken));\n\nvar SignatureValidationError = /** @class */ (function (_super) {\r\n    __extends(SignatureValidationError, _super);\r\n    function SignatureValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'SignatureValidationError';\r\n        return _this;\r\n    }\r\n    return SignatureValidationError;\r\n}(TokenValidationError));\r\nvar SignatureToken = /** @class */ (function (_super) {\r\n    __extends(SignatureToken, _super);\r\n    function SignatureToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    SignatureToken.prototype.Execute = function (val) {\r\n        return val.string;\r\n    };\r\n    SignatureToken.prototype.isValid = function (value) {\r\n        if (validateSignature(value) !== ValidationResult.VALID) {\r\n            return new SignatureValidationError(value, this, 'Signature is not valid');\r\n        }\r\n        return null;\r\n    };\r\n    SignatureToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    SignatureToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    SignatureToken.prototype.ExtractSchema = function () {\r\n        return SignatureToken.prim;\r\n    };\r\n    SignatureToken.prototype.ToKey = function (val) {\r\n        return this.Execute(val);\r\n    };\r\n    SignatureToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { string: val },\r\n            type: { prim: SignatureToken.prim },\r\n        };\r\n    };\r\n    SignatureToken.prim = 'signature';\r\n    return SignatureToken;\r\n}(ComparableToken));\n\nvar LambdaToken = /** @class */ (function (_super) {\r\n    __extends(LambdaToken, _super);\r\n    function LambdaToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    LambdaToken.prototype.Execute = function (val) {\r\n        if (val.string) {\r\n            return val.string;\r\n        }\r\n        else {\r\n            return val;\r\n        }\r\n    };\r\n    LambdaToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        return val;\r\n    };\r\n    LambdaToken.prototype.EncodeObject = function (val) {\r\n        return val;\r\n    };\r\n    LambdaToken.prototype.ExtractSchema = function () {\r\n        var _a;\r\n        var leftToken = this.createToken(this.val.args[0], this.idx);\r\n        var rightToken = this.createToken(this.val.args[1], this.idx + 1);\r\n        return _a = {},\r\n            _a[LambdaToken.prim] = {\r\n                parameters: leftToken.ExtractSchema(),\r\n                returns: rightToken.ExtractSchema(),\r\n            },\r\n            _a;\r\n    };\r\n    LambdaToken.prim = 'lambda';\r\n    return LambdaToken;\r\n}(Token));\n\nvar OperationToken = /** @class */ (function (_super) {\r\n    __extends(OperationToken, _super);\r\n    function OperationToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    OperationToken.prototype.Execute = function (val) {\r\n        return val.string;\r\n    };\r\n    OperationToken.prototype.Encode = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var val = args.pop();\r\n        return { string: val };\r\n    };\r\n    OperationToken.prototype.EncodeObject = function (val) {\r\n        return { string: val };\r\n    };\r\n    OperationToken.prototype.ExtractSchema = function () {\r\n        return OperationToken.prim;\r\n    };\r\n    OperationToken.prim = 'operation';\r\n    return OperationToken;\r\n}(Token));\n\nvar SetValidationError = /** @class */ (function (_super) {\r\n    __extends(SetValidationError, _super);\r\n    function SetValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'SetValidationError';\r\n        return _this;\r\n    }\r\n    return SetValidationError;\r\n}(TokenValidationError));\r\nvar SetToken = /** @class */ (function (_super) {\r\n    __extends(SetToken, _super);\r\n    function SetToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SetToken.prototype, \"KeySchema\", {\r\n        get: function () {\r\n            return this.createToken(this.val.args[0], 0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    SetToken.prototype.isValid = function (value) {\r\n        if (Array.isArray(value)) {\r\n            return null;\r\n        }\r\n        return new SetValidationError(value, this, 'Value must be an array');\r\n    };\r\n    SetToken.prototype.Encode = function (args) {\r\n        var _this = this;\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return val\r\n            .sort(function (a, b) { return _this.KeySchema.compare(a, b); })\r\n            .reduce(function (prev, current) {\r\n            return __spreadArray(__spreadArray([], __read(prev)), [_this.KeySchema.EncodeObject(current)]);\r\n        }, []);\r\n    };\r\n    SetToken.prototype.Execute = function (val, semantics) {\r\n        var _this = this;\r\n        return val.reduce(function (prev, current) {\r\n            return __spreadArray(__spreadArray([], __read(prev)), [_this.KeySchema.Execute(current, semantics)]);\r\n        }, []);\r\n    };\r\n    SetToken.prototype.EncodeObject = function (args) {\r\n        var _this = this;\r\n        var err = this.isValid(args);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return args\r\n            .sort(function (a, b) { return _this.KeySchema.compare(a, b); })\r\n            .reduce(function (prev, current) {\r\n            return __spreadArray(__spreadArray([], __read(prev)), [_this.KeySchema.EncodeObject(current)]);\r\n        }, []);\r\n    };\r\n    SetToken.prototype.ExtractSchema = function () {\r\n        return SetToken.prim;\r\n    };\r\n    SetToken.prim = 'set';\r\n    return SetToken;\r\n}(Token));\n\nvar ChainIDValidationError = /** @class */ (function (_super) {\r\n    __extends(ChainIDValidationError, _super);\r\n    function ChainIDValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'ChainIDValidationError';\r\n        return _this;\r\n    }\r\n    return ChainIDValidationError;\r\n}(TokenValidationError));\r\nvar ChainIDToken = /** @class */ (function (_super) {\r\n    __extends(ChainIDToken, _super);\r\n    function ChainIDToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    ChainIDToken.prototype.isValid = function (value) {\r\n        if (validateChain(value) !== ValidationResult.VALID) {\r\n            return new ChainIDValidationError(value, this, 'ChainID is not valid');\r\n        }\r\n        return null;\r\n    };\r\n    ChainIDToken.prototype.Execute = function (val) {\r\n        return val[Object.keys(val)[0]];\r\n    };\r\n    ChainIDToken.prototype.ExtractSchema = function () {\r\n        return ChainIDToken.prim;\r\n    };\r\n    ChainIDToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    ChainIDToken.prototype.EncodeObject = function (val) {\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { string: val };\r\n    };\r\n    // tslint:disable-next-line: variable-name\r\n    ChainIDToken.prototype.ToKey = function (_a) {\r\n        var string = _a.string;\r\n        return string;\r\n    };\r\n    ChainIDToken.prototype.ToBigMapKey = function (val) {\r\n        return {\r\n            key: { string: val },\r\n            type: { prim: ChainIDToken.prim },\r\n        };\r\n    };\r\n    ChainIDToken.prim = 'chain_id';\r\n    return ChainIDToken;\r\n}(ComparableToken));\n\nvar EncodeTicketError = /** @class */ (function () {\r\n    function EncodeTicketError() {\r\n        this.name = 'TicketEncodeError';\r\n        this.message = 'Tickets cannot be sent to the blockchain; they are created on-chain';\r\n    }\r\n    return EncodeTicketError;\r\n}());\r\nvar ticketerType = { \"prim\": \"contract\" };\r\nvar amountType = { \"prim\": \"int\" };\r\nvar TicketToken = /** @class */ (function (_super) {\r\n    __extends(TicketToken, _super);\r\n    function TicketToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    TicketToken.prototype.Encode = function (_args) {\r\n        throw new EncodeTicketError();\r\n    };\r\n    TicketToken.prototype.EncodeObject = function (_args) {\r\n        throw new EncodeTicketError();\r\n    };\r\n    TicketToken.prototype.Execute = function (val, semantics) {\r\n        if (semantics && semantics[TicketToken.prim]) {\r\n            return semantics[TicketToken.prim](val, this.val);\r\n        }\r\n        var ticketer = this.createToken(ticketerType, this.idx);\r\n        var value = this.createToken(this.val.args[0], this.idx);\r\n        var amount = this.createToken(amountType, this.idx);\r\n        if (undefined == val.args[2] &&\r\n            undefined !== val.args[1].args) {\r\n            return {\r\n                ticketer: ticketer.Execute(val.args[0], semantics),\r\n                value: value.Execute(val.args[1].args[0], semantics),\r\n                amount: amount.Execute(val.args[1].args[1], semantics)\r\n            };\r\n        }\r\n        return {\r\n            ticketer: ticketer.Execute(val.args[0], semantics),\r\n            value: value.Execute(val.args[1], semantics),\r\n            amount: amount.Execute(val.args[2], semantics)\r\n        };\r\n    };\r\n    TicketToken.prototype.ExtractSchema = function () {\r\n        var valueSchema = this.createToken(this.val.args[0], this.idx);\r\n        return {\r\n            ticketer: ContractToken.prim,\r\n            value: valueSchema.ExtractSchema(),\r\n            amount: IntToken.prim\r\n        };\r\n    };\r\n    TicketToken.prim = 'ticket';\r\n    return TicketToken;\r\n}(Token));\n\nvar NeverTokenError = /** @class */ (function (_super) {\r\n    __extends(NeverTokenError, _super);\r\n    function NeverTokenError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'NeverTokenError';\r\n        return _this;\r\n    }\r\n    return NeverTokenError;\r\n}(TokenValidationError));\r\nvar NeverToken = /** @class */ (function (_super) {\r\n    __extends(NeverToken, _super);\r\n    function NeverToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    NeverToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        throw new NeverTokenError(val, this, 'Assigning a value to the type never is forbidden.');\r\n    };\r\n    NeverToken.prototype.EncodeObject = function (val) {\r\n        throw new NeverTokenError(val, this, 'Assigning a value to the type never is forbidden.');\r\n    };\r\n    NeverToken.prototype.Execute = function (val) {\r\n        throw new NeverTokenError(val, this, 'There is no literal value for the type never.');\r\n    };\r\n    NeverToken.prototype.ExtractSchema = function () {\r\n        return NeverToken.prim;\r\n    };\r\n    NeverToken.prim = 'never';\r\n    return NeverToken;\r\n}(Token));\n\nvar SaplingStateValidationError = /** @class */ (function (_super) {\r\n    __extends(SaplingStateValidationError, _super);\r\n    function SaplingStateValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'SaplingStateValidationError';\r\n        return _this;\r\n    }\r\n    return SaplingStateValidationError;\r\n}(TokenValidationError));\r\nvar SaplingStateToken = /** @class */ (function (_super) {\r\n    __extends(SaplingStateToken, _super);\r\n    function SaplingStateToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    SaplingStateToken.prototype.isValid = function (val) {\r\n        return typeof val === 'object' && Object.keys(val).length === 0;\r\n    };\r\n    SaplingStateToken.prototype.Execute = function (val, semantic) {\r\n        if (semantic && semantic[SaplingStateToken.prim]) {\r\n            return semantic[SaplingStateToken.prim](val, this.val);\r\n        }\r\n        if ('int' in val) {\r\n            return val.int;\r\n        }\r\n        else {\r\n            // Unknown case\r\n            throw new Error(\"Sapling state is expecting an object with an int property. Got \" + JSON.stringify(val));\r\n        }\r\n    };\r\n    SaplingStateToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        if (this.isValid(val)) {\r\n            return [];\r\n        }\r\n        else {\r\n            throw new SaplingStateValidationError(val, this, \"Invalid sapling_state. Received: \" + val + \" while expecting: {}\");\r\n        }\r\n    };\r\n    SaplingStateToken.prototype.EncodeObject = function (val) {\r\n        if (this.isValid(val)) {\r\n            return [];\r\n        }\r\n        else {\r\n            throw new SaplingStateValidationError(val, this, \"Invalid sapling_state. Received: \" + val + \" while expecting: {}\");\r\n        }\r\n    };\r\n    SaplingStateToken.prototype.ExtractSchema = function () {\r\n        var _a;\r\n        return _a = {},\r\n            _a[SaplingStateToken.prim] = {\r\n                'memo-size': Number(this.val.args[0]['int']),\r\n            },\r\n            _a;\r\n    };\r\n    SaplingStateToken.prim = 'sapling_state';\r\n    return SaplingStateToken;\r\n}(Token));\n\nvar SaplingTransactionValidationError = /** @class */ (function (_super) {\r\n    __extends(SaplingTransactionValidationError, _super);\r\n    function SaplingTransactionValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'SaplingTransactionValidationError';\r\n        return _this;\r\n    }\r\n    return SaplingTransactionValidationError;\r\n}(TokenValidationError));\r\nvar SaplingTransactionToken = /** @class */ (function (_super) {\r\n    __extends(SaplingTransactionToken, _super);\r\n    function SaplingTransactionToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    SaplingTransactionToken.prototype.Execute = function (_val) {\r\n        throw new Error('There is no literal value for the sapling_transaction type.');\r\n    };\r\n    SaplingTransactionToken.prototype.validateBytes = function (val) {\r\n        var bytes = /^(0x|0X)?([0-9a-fA-F]*$)/.exec(val);\r\n        if (bytes && bytes[2].length % 2 === 0) {\r\n            return bytes[2];\r\n        }\r\n        else {\r\n            throw new SaplingTransactionValidationError(val, this, \"Invalid bytes: \" + val);\r\n        }\r\n    };\r\n    SaplingTransactionToken.prototype.convertUint8ArrayToHexString = function (val) {\r\n        return val.constructor === Uint8Array ? Buffer.from(val).toString('hex') : val;\r\n    };\r\n    SaplingTransactionToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        val = this.validateBytes(this.convertUint8ArrayToHexString(val));\r\n        return { bytes: String(val).toString() };\r\n    };\r\n    SaplingTransactionToken.prototype.EncodeObject = function (val) {\r\n        val = this.validateBytes(this.convertUint8ArrayToHexString(val));\r\n        return { bytes: String(val).toString() };\r\n    };\r\n    SaplingTransactionToken.prototype.ExtractSchema = function () {\r\n        var _a;\r\n        return _a = {},\r\n            _a[SaplingTransactionToken.prim] = {\r\n                'memo-size': Number(this.val.args[0]['int']),\r\n            },\r\n            _a;\r\n    };\r\n    SaplingTransactionToken.prim = 'sapling_transaction';\r\n    return SaplingTransactionToken;\r\n}(Token));\n\nvar Bls12381frValidationError = /** @class */ (function (_super) {\r\n    __extends(Bls12381frValidationError, _super);\r\n    function Bls12381frValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'Bls12381frValidationError';\r\n        return _this;\r\n    }\r\n    return Bls12381frValidationError;\r\n}(TokenValidationError));\r\nvar Bls12381frToken = /** @class */ (function (_super) {\r\n    __extends(Bls12381frToken, _super);\r\n    function Bls12381frToken(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    Bls12381frToken.prototype.isValid = function (val) {\r\n        if (/^[0-9a-fA-F]*$/.test(val) && val.length % 2 === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return new Bls12381frValidationError(val, this, \"Invalid bytes: \" + val);\r\n        }\r\n    };\r\n    Bls12381frToken.prototype.convertUint8ArrayToHexString = function (val) {\r\n        return val.constructor === Uint8Array ? Buffer.from(val).toString('hex') : val;\r\n    };\r\n    Bls12381frToken.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        if (typeof val === 'number') {\r\n            return { int: val.toString() };\r\n        }\r\n        else {\r\n            val = this.convertUint8ArrayToHexString(val);\r\n            var err = this.isValid(val);\r\n            if (err) {\r\n                throw err;\r\n            }\r\n            return { bytes: val };\r\n        }\r\n    };\r\n    Bls12381frToken.prototype.EncodeObject = function (val) {\r\n        if (typeof val === 'number') {\r\n            return { int: val.toString() };\r\n        }\r\n        else {\r\n            val = this.convertUint8ArrayToHexString(val);\r\n            var err = this.isValid(val);\r\n            if (err) {\r\n                throw err;\r\n            }\r\n            return { bytes: val };\r\n        }\r\n    };\r\n    Bls12381frToken.prototype.Execute = function (val) {\r\n        return val.bytes;\r\n    };\r\n    Bls12381frToken.prototype.ExtractSchema = function () {\r\n        return Bls12381frToken.prim;\r\n    };\r\n    // An element of the BLS12-381 scalar field Fr\r\n    // see https://tezos.gitlab.io/michelson-reference/#type-bls12_381_fr\r\n    Bls12381frToken.prim = 'bls12_381_fr';\r\n    return Bls12381frToken;\r\n}(Token));\n\nvar Bls12381g1ValidationError = /** @class */ (function (_super) {\r\n    __extends(Bls12381g1ValidationError, _super);\r\n    function Bls12381g1ValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'Bls12381g1ValidationError';\r\n        return _this;\r\n    }\r\n    return Bls12381g1ValidationError;\r\n}(TokenValidationError));\r\nvar Bls12381g1Token = /** @class */ (function (_super) {\r\n    __extends(Bls12381g1Token, _super);\r\n    function Bls12381g1Token(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    Bls12381g1Token.prototype.isValid = function (val) {\r\n        if (/^[0-9a-fA-F]*$/.test(val) && val.length % 2 === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return new Bls12381g1ValidationError(val, this, \"Invalid bytes: \" + val);\r\n        }\r\n    };\r\n    Bls12381g1Token.prototype.convertUint8ArrayToHexString = function (val) {\r\n        return val.constructor === Uint8Array ? Buffer.from(val).toString('hex') : val;\r\n    };\r\n    Bls12381g1Token.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        val = this.convertUint8ArrayToHexString(val);\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { bytes: val };\r\n    };\r\n    Bls12381g1Token.prototype.EncodeObject = function (val) {\r\n        val = this.convertUint8ArrayToHexString(val);\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { bytes: val };\r\n    };\r\n    Bls12381g1Token.prototype.Execute = function (val) {\r\n        return val.bytes;\r\n    };\r\n    Bls12381g1Token.prototype.ExtractSchema = function () {\r\n        return Bls12381g1Token.prim;\r\n    };\r\n    // A point on the BLS12-381 curve G1\r\n    // See https://tezos.gitlab.io/michelson-reference/#type-bls12_381_g1\r\n    Bls12381g1Token.prim = 'bls12_381_g1';\r\n    return Bls12381g1Token;\r\n}(Token));\n\nvar Bls12381g2ValidationError = /** @class */ (function (_super) {\r\n    __extends(Bls12381g2ValidationError, _super);\r\n    function Bls12381g2ValidationError(value, token, message) {\r\n        var _this = _super.call(this, value, token, message) || this;\r\n        _this.value = value;\r\n        _this.token = token;\r\n        _this.name = 'Bls12381g2ValidationError';\r\n        return _this;\r\n    }\r\n    return Bls12381g2ValidationError;\r\n}(TokenValidationError));\r\nvar Bls12381g2Token = /** @class */ (function (_super) {\r\n    __extends(Bls12381g2Token, _super);\r\n    function Bls12381g2Token(val, idx, fac) {\r\n        var _this = _super.call(this, val, idx, fac) || this;\r\n        _this.val = val;\r\n        _this.idx = idx;\r\n        _this.fac = fac;\r\n        return _this;\r\n    }\r\n    Bls12381g2Token.prototype.isValid = function (val) {\r\n        if (/^[0-9a-fA-F]*$/.test(val) && val.length % 2 === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return new Bls12381g2ValidationError(val, this, \"Invalid bytes: \" + val);\r\n        }\r\n    };\r\n    Bls12381g2Token.prototype.convertUint8ArrayToHexString = function (val) {\r\n        return val.constructor === Uint8Array ? Buffer.from(val).toString('hex') : val;\r\n    };\r\n    Bls12381g2Token.prototype.Encode = function (args) {\r\n        var val = args.pop();\r\n        val = this.convertUint8ArrayToHexString(val);\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { bytes: val };\r\n    };\r\n    Bls12381g2Token.prototype.EncodeObject = function (val) {\r\n        val = this.convertUint8ArrayToHexString(val);\r\n        var err = this.isValid(val);\r\n        if (err) {\r\n            throw err;\r\n        }\r\n        return { bytes: val };\r\n    };\r\n    Bls12381g2Token.prototype.Execute = function (val) {\r\n        return val.bytes;\r\n    };\r\n    Bls12381g2Token.prototype.ExtractSchema = function () {\r\n        return Bls12381g2Token.prim;\r\n    };\r\n    // A point on the BLS12-381 curve G2\r\n    // See https://tezos.gitlab.io/michelson-reference/#type-bls12_381_g2\r\n    Bls12381g2Token.prim = 'bls12_381_g2';\r\n    return Bls12381g2Token;\r\n}(Token));\n\nvar tokens = [\r\n    PairToken,\r\n    NatToken,\r\n    StringToken,\r\n    BigMapToken,\r\n    AddressToken,\r\n    MapToken,\r\n    BoolToken,\r\n    OrToken,\r\n    ContractToken,\r\n    ListToken,\r\n    MutezToken,\r\n    BytesToken,\r\n    OptionToken,\r\n    TimestampToken,\r\n    IntToken,\r\n    UnitToken,\r\n    KeyToken,\r\n    KeyHashToken,\r\n    SignatureToken,\r\n    LambdaToken,\r\n    OperationToken,\r\n    SetToken,\r\n    ChainIDToken,\r\n    TicketToken,\r\n    NeverToken,\r\n    SaplingStateToken,\r\n    SaplingTransactionToken,\r\n    Bls12381frToken,\r\n    Bls12381g1Token,\r\n    Bls12381g2Token\r\n];\n\nvar InvalidTokenError = /** @class */ (function () {\r\n    function InvalidTokenError(message, data) {\r\n        this.message = message;\r\n        this.data = data;\r\n        this.name = 'Invalid token error';\r\n    }\r\n    return InvalidTokenError;\r\n}());\r\nfunction createToken(val, idx) {\r\n    if (Array.isArray(val)) {\r\n        return new PairToken(val, idx, createToken);\r\n    }\r\n    var t = tokens.find(function (x) { return x.prim === val.prim; });\r\n    if (!t) {\r\n        throw new InvalidTokenError('Malformed data expected a value with a valid prim property', val);\r\n    }\r\n    return new t(val, idx, createToken);\r\n}\n\nvar _a;\r\nvar schemaTypeSymbol = Symbol.for('taquito-schema-type-symbol');\r\n// collapse comb pair\r\nfunction collapse(val, prim) {\r\n    var _b, _c;\r\n    if (prim === void 0) { prim = PairToken.prim; }\r\n    if (Array.isArray(val)) {\r\n        return collapse({\r\n            prim: prim,\r\n            args: val,\r\n        }, prim);\r\n    }\r\n    if (val.prim === prim && ((_b = val.args) === null || _b === void 0 ? void 0 : _b.length) > 2) {\r\n        return __assign(__assign({}, val), { args: [val.args[0], {\r\n                    prim: prim,\r\n                    args: (_c = val.args) === null || _c === void 0 ? void 0 : _c.slice(1),\r\n                }] });\r\n    }\r\n    return val;\r\n}\r\nfunction deepEqual(a, b) {\r\n    var ac = collapse(a);\r\n    var bc = collapse(b);\r\n    return ac.prim === bc.prim &&\r\n        (ac.args === undefined && bc.args === undefined ||\r\n            ac.args !== undefined && bc.args !== undefined &&\r\n                ac.args.length === bc.args.length &&\r\n                ac.args.every(function (v, i) { var _b; return deepEqual(v, (_b = bc.args) === null || _b === void 0 ? void 0 : _b[i]); })) &&\r\n        (ac.annots === undefined && bc.annots === undefined ||\r\n            ac.annots !== undefined && bc.annots !== undefined &&\r\n                ac.annots.length === bc.annots.length &&\r\n                ac.annots.every(function (v, i) { var _b; return v === ((_b = bc.annots) === null || _b === void 0 ? void 0 : _b[i]); }));\r\n}\r\n/**\r\n * @warn Our current smart contract abstraction feature is currently in preview. It's API is not final, and it may not cover every use case (yet). We will greatly appreciate any feedback on this feature.\r\n */\r\nvar Schema = /** @class */ (function () {\r\n    function Schema(val) {\r\n        this[_a] = true;\r\n        this.root = createToken(val, 0);\r\n        if (this.root instanceof BigMapToken) {\r\n            this.bigMap = this.root;\r\n        }\r\n        else if (this.isExpressionExtended(val) && val.prim === 'pair') {\r\n            var exp = val.args[0];\r\n            if (this.isExpressionExtended(exp) && exp.prim === 'big_map') {\r\n                this.bigMap = new BigMapToken(exp, 0, createToken);\r\n            }\r\n        }\r\n    }\r\n    Schema.isSchema = function (obj) {\r\n        return obj && obj[schemaTypeSymbol] === true;\r\n    };\r\n    Schema.fromRPCResponse = function (val) {\r\n        var storage = val &&\r\n            val.script &&\r\n            Array.isArray(val.script.code) &&\r\n            val.script.code.find(function (x) { return x.prim === 'storage'; });\r\n        if (!storage || !Array.isArray(storage.args)) {\r\n            throw new Error('Invalid rpc response passed as arguments');\r\n        }\r\n        return new Schema(storage.args[0]);\r\n    };\r\n    Schema.prototype.isExpressionExtended = function (val) {\r\n        return 'prim' in val && Array.isArray(val.args);\r\n    };\r\n    Schema.prototype.removeTopLevelAnnotation = function (obj) {\r\n        // PairToken and OrToken can have redundant top level annotation in their storage\r\n        if (this.root instanceof PairToken || this.root instanceof OrToken) {\r\n            if (this.root.hasAnnotations() && typeof obj === 'object' && Object.keys(obj).length === 1) {\r\n                return obj[Object.keys(obj)[0]];\r\n            }\r\n        }\r\n        return obj;\r\n    };\r\n    Schema.prototype.Execute = function (val, semantics) {\r\n        var storage = this.root.Execute(val, semantics);\r\n        return this.removeTopLevelAnnotation(storage);\r\n    };\r\n    Schema.prototype.Typecheck = function (val) {\r\n        if (this.root instanceof BigMapToken && Number.isInteger(Number(val))) {\r\n            return true;\r\n        }\r\n        try {\r\n            this.root.EncodeObject(val);\r\n            return true;\r\n        }\r\n        catch (ex) {\r\n            return false;\r\n        }\r\n    };\r\n    Schema.prototype.ExecuteOnBigMapDiff = function (diff, semantics) {\r\n        if (!this.bigMap) {\r\n            throw new Error('No big map schema');\r\n        }\r\n        if (!Array.isArray(diff)) {\r\n            throw new Error('Invalid big map diff. It must be an array');\r\n        }\r\n        var eltFormat = diff.map(function (_b) {\r\n            var key = _b.key, value = _b.value;\r\n            return ({ args: [key, value] });\r\n        });\r\n        return this.bigMap.Execute(eltFormat, semantics);\r\n    };\r\n    Schema.prototype.ExecuteOnBigMapValue = function (key, semantics) {\r\n        if (!this.bigMap) {\r\n            throw new Error('No big map schema');\r\n        }\r\n        return this.bigMap.ValueSchema.Execute(key, semantics);\r\n    };\r\n    Schema.prototype.EncodeBigMapKey = function (key) {\r\n        if (!this.bigMap) {\r\n            throw new Error('No big map schema');\r\n        }\r\n        try {\r\n            return this.bigMap.KeySchema.ToBigMapKey(key);\r\n        }\r\n        catch (ex) {\r\n            throw new Error('Unable to encode big map key: ' + ex);\r\n        }\r\n    };\r\n    Schema.prototype.Encode = function (_value) {\r\n        try {\r\n            return this.root.EncodeObject(_value);\r\n        }\r\n        catch (ex) {\r\n            if (ex instanceof TokenValidationError) {\r\n                throw ex;\r\n            }\r\n            throw new Error(\"Unable to encode storage object. \" + ex);\r\n        }\r\n    };\r\n    Schema.prototype.ExtractSchema = function () {\r\n        return this.removeTopLevelAnnotation(this.root.ExtractSchema());\r\n    };\r\n    /**\r\n     * @deprecated\r\n     */\r\n    Schema.prototype.ComputeState = function (tx, state) {\r\n        var _b;\r\n        var _this = this;\r\n        if (!this.bigMap) {\r\n            throw new Error('No big map schema');\r\n        }\r\n        var bigMap = tx.reduce(function (prev, current) {\r\n            return __assign(__assign({}, prev), _this.ExecuteOnBigMapDiff(current.contents[0].metadata.operation_result.big_map_diff));\r\n        }, {});\r\n        return __assign(__assign({}, this.Execute(state)), (_b = {}, _b[this.bigMap.annot()] = bigMap, _b));\r\n    };\r\n    /**\r\n     * @description Look up in top-level pairs of the storage to find a value matching the specified type\r\n     *\r\n     * @returns The first value found that match the type or `undefined` if no value is found\r\n     *\r\n     * @param storage storage to parse to find the value\r\n     * @param valueType type of value to look for\r\n     *\r\n     */\r\n    Schema.prototype.FindFirstInTopLevelPair = function (storage, valueType) {\r\n        return this.findValue(this.root['val'], storage, valueType);\r\n    };\r\n    Schema.prototype.findValue = function (schema, storage, valueToFind) {\r\n        if (deepEqual(valueToFind, schema)) {\r\n            return storage;\r\n        }\r\n        if (Array.isArray(schema) || schema['prim'] === 'pair') {\r\n            var sch = collapse(schema);\r\n            var str = collapse(storage, 'Pair');\r\n            if (sch.args === undefined || str.args === undefined) {\r\n                throw new Error('Tokens have no arguments'); // unlikely\r\n            }\r\n            return this.findValue(sch.args[0], str.args[0], valueToFind) ||\r\n                this.findValue(sch.args[1], str.args[1], valueToFind);\r\n        }\r\n    };\r\n    return Schema;\r\n}());\r\n_a = schemaTypeSymbol;\n\n/**\r\n * @warn Our current smart contract abstraction feature is currently in preview. It's API is not final, and it may not cover every use case (yet). We will greatly appreciate any feedback on this feature.\r\n */\r\nvar ParameterSchema = /** @class */ (function () {\r\n    function ParameterSchema(val) {\r\n        this.root = createToken(val, 0);\r\n    }\r\n    ParameterSchema.fromRPCResponse = function (val) {\r\n        var parameter = val &&\r\n            val.script &&\r\n            Array.isArray(val.script.code) &&\r\n            val.script.code.find(function (x) { return x.prim === 'parameter'; });\r\n        if (!parameter || !Array.isArray(parameter.args)) {\r\n            throw new Error('Invalid rpc response passed as arguments');\r\n        }\r\n        return new ParameterSchema(parameter.args[0]);\r\n    };\r\n    Object.defineProperty(ParameterSchema.prototype, \"isMultipleEntryPoint\", {\r\n        get: function () {\r\n            return (this.root instanceof OrToken ||\r\n                (this.root instanceof OptionToken && this.root.subToken() instanceof OrToken));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ParameterSchema.prototype, \"hasAnnotation\", {\r\n        get: function () {\r\n            if (this.isMultipleEntryPoint) {\r\n                return Object.keys(this.ExtractSchema())[0] !== '0';\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ParameterSchema.prototype.Execute = function (val, semantics) {\r\n        return this.root.Execute(val, semantics);\r\n    };\r\n    ParameterSchema.prototype.Encode = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        try {\r\n            return this.root.Encode(args.reverse());\r\n        }\r\n        catch (ex) {\r\n            if (ex instanceof TokenValidationError) {\r\n                throw ex;\r\n            }\r\n            throw new Error(\"Unable to encode parameter. \" + ex);\r\n        }\r\n    };\r\n    ParameterSchema.prototype.EncodeObject = function (_value) {\r\n        try {\r\n            return this.root.EncodeObject(_value);\r\n        }\r\n        catch (ex) {\r\n            if (ex instanceof TokenValidationError) {\r\n                throw ex;\r\n            }\r\n            throw new Error(\"Unable to encode parameter object. \" + ex);\r\n        }\r\n    };\r\n    ParameterSchema.prototype.ExtractSchema = function () {\r\n        return this.root.ExtractSchema();\r\n    };\r\n    ParameterSchema.prototype.ExtractSignatures = function () {\r\n        return this.root.ExtractSignature();\r\n    };\r\n    return ParameterSchema;\r\n}());\n\n// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\r\n/* tslint:disable */\r\nvar VERSION = {\r\n    \"commitHash\": \"5711569ffaf481d88ba3251343a1788090b35dd4\",\r\n    \"version\": \"10.2.1\"\r\n};\r\n/* tslint:enable */\n\n/**\r\n * @packageDocumentation\r\n * @module @taquito/michelson-encoder\r\n */\r\nvar UnitValue = Symbol();\r\nvar SaplingStateValue = {};\n\nexport { AddressValidationError, BigMapValidationError, BytesValidationError, ChainIDValidationError, ContractValidationError, EncodeTicketError, IntValidationError, KeyHashValidationError, KeyValidationError, ListValidationError, MapTypecheckError, MapValidationError, MichelsonMap, MutezValidationError, NatValidationError, ParameterSchema, SaplingStateValue, Schema, SetValidationError, SignatureValidationError, UnitValue, VERSION };\n//# sourceMappingURL=taquito-michelson-encoder.es5.js.map\n","export { default } from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Pagination.vue?vue&type=style&index=0&id=2eb2a5cc&module=true&lang=css\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Pagination.vue?vue&type=style&index=0&id=2eb2a5cc&module=true&lang=css\"","<script>\r\nimport { defineComponent } from \"vue\"\r\n\r\n/**\r\n * Base\r\n */\r\nimport Page from \"@/components/base/Page\"\r\n\r\n/**\r\n * Module\r\n */\r\nimport WithdrawalsBase from \"@/components/modules/profile/WithdrawalsBase\"\r\n\r\nexport default defineComponent({\r\n    name: \"WithdrawalsPage\",\r\n\r\n    components: { Page, WithdrawalsBase },\r\n})\r\n</script>\r\n\r\n<template>\r\n    <Page>\r\n        <WithdrawalsBase />\r\n    </Page>\r\n</template>\r\n","<script>\r\nimport {\r\n    computed,\r\n    defineComponent,\r\n    onMounted,\r\n    onUnmounted,\r\n    reactive,\r\n    ref,\r\n} from \"vue\"\r\nimport { useMeta } from \"vue-meta\"\r\nimport { DateTime } from \"luxon\"\r\nimport { cloneDeep } from \"lodash\"\r\n\r\nimport { test } from \"@/services/sdk\"\r\n// test()\r\n\r\n/**\r\n * UI\r\n */\r\nimport Button from \"@/components/ui/Button\"\r\nimport Banner from \"@/components/ui/Banner\"\r\nimport Pagination from \"@/components/ui/Pagination\"\r\n\r\n/**\r\n * Local\r\n */\r\nimport { EventCard } from \"@/components/local/EventCard\"\r\nimport WithdrawAllModal from \"@/components/local/modals/WithdrawAllModal\"\r\n\r\n/**\r\n * API\r\n */\r\nimport { fetchUserWithdrawals } from \"@/api/users\"\r\n\r\n/**\r\n * Services\r\n */\r\nimport { numberWithSymbol } from \"@/services/utils/amounts\"\r\n\r\n/**\r\n * Store\r\n */\r\nimport { useAccountStore } from \"@/store/account\"\r\n\r\nexport default defineComponent({\r\n    name: \"WithdrawalsBase\",\r\n\r\n    setup() {\r\n        const accountStore = useAccountStore()\r\n\r\n        const showWithdrawAllModal = ref(false)\r\n\r\n        const withdrawalsHistory = ref([])\r\n\r\n        const subToNewPositions = ref({})\r\n\r\n        const currentPageHistory = ref(1)\r\n        const paginatedWithdrawalsHistory = computed(() =>\r\n            withdrawalsHistory.value.slice(\r\n                (currentPageHistory.value - 1) * 5,\r\n                currentPageHistory.value * 5,\r\n            ),\r\n        )\r\n\r\n        const currentPageForPositions = ref(1)\r\n\r\n        const positionsForWithdraw = computed(() =>\r\n            accountStore.positionsForWithdrawal.filter(\r\n                (position) => position.value,\r\n            ),\r\n        )\r\n        const paginatedPositionsForWithdraw = computed(() =>\r\n            positionsForWithdraw.value.slice(\r\n                (currentPageForPositions.value - 1) * 6,\r\n                currentPageForPositions.value * 6,\r\n            ),\r\n        )\r\n\r\n        const statistics = reactive({\r\n            week: {\r\n                value: 0,\r\n                avg: 0,\r\n            },\r\n            month: {\r\n                value: 0,\r\n                avg: 0,\r\n            },\r\n            all: {\r\n                value: 0,\r\n                avg: 0,\r\n            },\r\n        })\r\n\r\n        const sort = reactive({\r\n            date: \"desc\",\r\n            amount: \"default\",\r\n        })\r\n        const sortBy = (target) => {\r\n            switch (target) {\r\n                case \"date\":\r\n                    if (sort.date == \"desc\") {\r\n                        sort.date = \"asc\"\r\n                        withdrawalsHistory.value.sort(\r\n                            (a, b) =>\r\n                                new Date(a.event.closedOracleTime).getTime() -\r\n                                new Date(b.event.closedOracleTime).getTime(),\r\n                        )\r\n                    } else if (sort.date == \"asc\") {\r\n                        sort.date = \"desc\"\r\n                        withdrawalsHistory.value.sort(\r\n                            (a, b) =>\r\n                                new Date(b.event.closedOracleTime).getTime() -\r\n                                new Date(a.event.closedOracleTime).getTime(),\r\n                        )\r\n                    }\r\n\r\n                    break\r\n\r\n                case \"amount\":\r\n                    if (sort.amount == \"default\") {\r\n                        sort.date = \"default\"\r\n\r\n                        sort.amount = \"desc\"\r\n                        withdrawalsHistory.value.sort(\r\n                            (a, b) => b.amount - a.amount,\r\n                        )\r\n                    } else if (sort.amount == \"desc\") {\r\n                        sort.amount = \"asc\"\r\n                        withdrawalsHistory.value.sort(\r\n                            (a, b) => a.amount - b.amount,\r\n                        )\r\n                    } else if (sort.amount == \"asc\") {\r\n                        sort.date = \"desc\"\r\n\r\n                        sort.amount = \"default\"\r\n                        withdrawalsHistory.value.sort(\r\n                            (a, b) =>\r\n                                new Date(b.event.closedOracleTime).getTime() -\r\n                                new Date(a.event.closedOracleTime).getTime(),\r\n                        )\r\n                    }\r\n\r\n                    break\r\n            }\r\n        }\r\n\r\n        onMounted(async () => {\r\n            /** History */\r\n            const allUserWithdrawals = await fetchUserWithdrawals({\r\n                address: accountStore.pkh,\r\n            })\r\n            withdrawalsHistory.value = cloneDeep(allUserWithdrawals)\r\n\r\n            /**\r\n             * Statistics:\r\n             * @Week\r\n             * @Month\r\n             * @AllTime\r\n             */\r\n            const withdrawalsLastWeek = withdrawalsHistory.value.filter(\r\n                (withdraw) =>\r\n                    DateTime.fromISO(withdraw.event.closedOracleTime).ts >\r\n                    DateTime.now().minus({ days: 7 }).ts,\r\n            )\r\n            const withdrawalsLastMonth = withdrawalsHistory.value.filter(\r\n                (withdraw) =>\r\n                    DateTime.fromISO(withdraw.event.closedOracleTime).ts >\r\n                    DateTime.now().minus({ days: 30 }).ts,\r\n            )\r\n\r\n            statistics.week.value = withdrawalsLastWeek.reduce(\r\n                (acc, curr) => acc + curr.amount,\r\n                0,\r\n            )\r\n            statistics.week.avg = withdrawalsLastWeek.length\r\n                ? statistics.week.value / withdrawalsLastWeek.length\r\n                : 0\r\n\r\n            statistics.month.value = withdrawalsLastMonth.reduce(\r\n                (acc, curr) => acc + curr.amount,\r\n                0,\r\n            )\r\n            statistics.month.avg = withdrawalsLastMonth.length\r\n                ? statistics.month.value / withdrawalsLastMonth.length\r\n                : 0\r\n\r\n            statistics.all.value = withdrawalsHistory.value.reduce(\r\n                (acc, curr) => acc + curr.amount,\r\n                0,\r\n            )\r\n            statistics.all.avg = withdrawalsHistory.value.length\r\n                ? statistics.all.value / withdrawalsHistory.value.length\r\n                : 0\r\n        })\r\n\r\n        onUnmounted(() => {\r\n            if (\r\n                subToNewPositions.value.hasOwnProperty(\"_state\") &&\r\n                !subToNewPositions.value?.closed\r\n            ) {\r\n                subToNewPositions.value.unsubscribe()\r\n            }\r\n        })\r\n\r\n        /** Meta */\r\n        useMeta({\r\n            title: \"Withdrawals\",\r\n        })\r\n\r\n        return {\r\n            accountStore,\r\n            showWithdrawAllModal,\r\n            withdrawalsHistory,\r\n            positionsForWithdraw,\r\n            allPositionsForWithdraw: accountStore.positionsForWithdrawal,\r\n            currentPageForPositions,\r\n            currentPageHistory,\r\n            paginatedWithdrawalsHistory,\r\n            paginatedPositionsForWithdraw,\r\n            sort,\r\n            sortBy,\r\n            statistics,\r\n            numberWithSymbol,\r\n        }\r\n    },\r\n\r\n    components: { WithdrawAllModal, Button, Banner, Pagination, EventCard },\r\n})\r\n</script>\r\n\r\n<template>\r\n    <div :class=\"$style.wrapper\">\r\n        <WithdrawAllModal\r\n            :show=\"showWithdrawAllModal\"\r\n            @onClose=\"showWithdrawAllModal = false\"\r\n        />\r\n\r\n        <metainfo>\r\n            <template v-slot:title=\"{ content }\"\r\n                >{{ content }}  Juster</template\r\n            >\r\n        </metainfo>\r\n\r\n        <div :class=\"$style.block\">\r\n            <h2>Withdraw stats</h2>\r\n            <div :class=\"$style.description\">\r\n                Your withdraw statistics for this month & all time\r\n            </div>\r\n\r\n            <div :class=\"$style.stats\">\r\n                <div :class=\"$style.stat\">\r\n                    <div :class=\"$style.stat_name\">Last week</div>\r\n                    <div :class=\"$style.stat_value\">\r\n                        {{ statistics.week.value.toFixed(0) }} XTZ\r\n                    </div>\r\n                    <div :class=\"$style.stat_avg\">\r\n                        Avg\r\n                        <span>{{ statistics.week.avg.toFixed(0) }} XTZ</span>\r\n                        per event\r\n                    </div>\r\n                </div>\r\n                <div :class=\"$style.stat\">\r\n                    <div :class=\"$style.stat_name\">Last month</div>\r\n                    <div :class=\"$style.stat_value\">\r\n                        {{ statistics.month.value.toFixed(0) }} XTZ\r\n                    </div>\r\n                    <div :class=\"$style.stat_avg\">\r\n                        Avg\r\n                        <span>{{ statistics.month.avg.toFixed(0) }} XTZ</span>\r\n                        per event\r\n                    </div>\r\n                </div>\r\n                <div :class=\"$style.stat\">\r\n                    <div :class=\"$style.stat_name\">All time</div>\r\n                    <div :class=\"$style.stat_value\">\r\n                        {{ statistics.all.value.toFixed(0) }} XTZ\r\n                    </div>\r\n                    <div :class=\"$style.stat_avg\">\r\n                        Avg\r\n                        <span>{{ statistics.all.avg.toFixed(0) }} XTZ</span> per\r\n                        event\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div :class=\"$style.hint\">\r\n                <Icon name=\"help\" size=\"14\" />\r\n                <span>Last week & Last month</span>\r\n                - here we mean a week from the current day minus 7 days / 30\r\n                days\r\n            </div>\r\n        </div>\r\n\r\n        <div :class=\"$style.block\">\r\n            <div :class=\"$style.header\">\r\n                <div :class=\"$style.left\">\r\n                    <h2>Outstanding balances</h2>\r\n                    <div :class=\"$style.description\">\r\n                        List of events holding your unclaimed profits\r\n                    </div>\r\n                </div>\r\n\r\n                <Button\r\n                    @click=\"showWithdrawAllModal = true\"\r\n                    :type=\"\r\n                        positionsForWithdraw.length ? 'success' : 'secondary'\r\n                    \"\r\n                    size=\"small\"\r\n                    :disabled=\"!positionsForWithdraw.length\"\r\n                    >Withdraw all</Button\r\n                >\r\n            </div>\r\n\r\n            <div v-if=\"positionsForWithdraw.length\" :class=\"$style.items\">\r\n                <EventCard\r\n                    v-for=\"position in paginatedPositionsForWithdraw\"\r\n                    :key=\"position.event.id\"\r\n                    :event=\"position.event\"\r\n                    won\r\n                    showSymbol\r\n                />\r\n            </div>\r\n            <div v-else :class=\"$style.empty\">\r\n                <Banner :loading=\"accountStore.isPositionsLoading\" type=\"info\">\r\n                    {{\r\n                        accountStore.isPositionsLoading\r\n                            ? \"Fetching your positions\"\r\n                            : \"No positions for withdraw\"\r\n                    }}\r\n                </Banner>\r\n            </div>\r\n\r\n            <Pagination\r\n                v-if=\"\r\n                    !accountStore.isPositionsLoading &&\r\n                    positionsForWithdraw.length > 6\r\n                \"\r\n                v-model=\"currentPageForPositions\"\r\n                :total=\"positionsForWithdraw.length\"\r\n                :limit=\"6\"\r\n                :class=\"$style.pagination\"\r\n            />\r\n        </div>\r\n\r\n        <div :class=\"$style.block\">\r\n            <h2>Withdrawal history</h2>\r\n            <div :class=\"$style.description\">Claimed profits</div>\r\n\r\n            <div :class=\"$style.withdrawboard\">\r\n                <table v-if=\"withdrawalsHistory.length\">\r\n                    <tr>\r\n                        <th @click=\"sortBy('date')\">\r\n                            withdraw\r\n                            <Icon\r\n                                v-if=\"sort.date !== 'default'\"\r\n                                name=\"arrow_down\"\r\n                                size=\"10\"\r\n                                :class=\"[\r\n                                    $style.sort_icon,\r\n                                    sort.date == 'asc' && $style.reverse,\r\n                                ]\"\r\n                            />\r\n                        </th>\r\n                        <th @click=\"sortBy('amount')\">\r\n                            amount\r\n                            <Icon\r\n                                v-if=\"sort.amount !== 'default'\"\r\n                                name=\"arrow_down\"\r\n                                size=\"10\"\r\n                                :class=\"[\r\n                                    $style.sort_icon,\r\n                                    sort.amount == 'asc' && $style.reverse,\r\n                                ]\"\r\n                            />\r\n                        </th>\r\n                        <th>event</th>\r\n                        <th>type</th>\r\n                    </tr>\r\n\r\n                    <tr\r\n                        v-for=\"withdraw in paginatedWithdrawalsHistory\"\r\n                        :key=\"withdraw.id\"\r\n                    >\r\n                        <td>\r\n                            <div :class=\"$style.user\">\r\n                                <div :class=\"$style.money_icon\">\r\n                                    <Icon name=\"money\" size=\"16\" />\r\n                                </div>\r\n\r\n                                <div :class=\"$style.info\">\r\n                                    <div :class=\"$style.name\">\r\n                                        Withdraw\r\n                                        <span>#{{ withdraw.id }}</span>\r\n                                    </div>\r\n                                    <div :class=\"$style.tier\">\r\n                                        {{\r\n                                            new Date(\r\n                                                withdraw.event.closedOracleTime,\r\n                                            ).toLocaleDateString()\r\n                                        }}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </td>\r\n                        <td>\r\n                            +{{\r\n                                numberWithSymbol(\r\n                                    withdraw.amount.toFixed(2),\r\n                                    \",\",\r\n                                )\r\n                            }}\r\n                            <span>XTZ</span>\r\n                        </td>\r\n                        <td>\r\n                            <router-link :to=\"`/events/${withdraw.event.id}`\">\r\n                                Event\r\n                                <span>#{{ withdraw.event.id }}</span>\r\n                            </router-link>\r\n                        </td>\r\n                        <td>\r\n                            {{\r\n                                withdraw.type == \"MANUAL\"\r\n                                    ? \"Manual\"\r\n                                    : \"Third party\"\r\n                            }}\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n\r\n                <div :class=\"$style.bottom\">\r\n                    <span>{{ withdrawalsHistory.length }} withdrawals</span>\r\n\r\n                    <div\r\n                        v-if=\"withdrawalsHistory.length\"\r\n                        :class=\"$style.tb_pagination\"\r\n                    >\r\n                        <div\r\n                            v-for=\"page in Math.ceil(\r\n                                withdrawalsHistory.length / 5,\r\n                            )\"\r\n                            :key=\"page\"\r\n                            @click=\"currentPageHistory = page\"\r\n                            :class=\"[\r\n                                $style.page,\r\n                                currentPageHistory == page && $style.current,\r\n                            ]\"\r\n                        >\r\n                            {{ page }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div :class=\"$style.hint\">\r\n                <Icon name=\"help\" size=\"14\" />You can withdraw your funds\r\n                manually, however if not done within 24 hours, Juster will do\r\n                that for you and charge a small fee.\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style module>\r\n.wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 40px;\r\n}\r\n\r\n.block {\r\n}\r\n\r\n.description {\r\n    font-size: 14px;\r\n    line-height: 1.6;\r\n    font-weight: 500;\r\n    color: var(--text-tertiary);\r\n\r\n    margin-top: 6px;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n}\r\n\r\n.stats {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    gap: 24px;\r\n}\r\n\r\n.stat {\r\n    flex: 1;\r\n\r\n    border: 1px solid var(--border);\r\n    border-radius: 10px;\r\n    padding: 24px;\r\n}\r\n\r\n.stat_name {\r\n    font-size: 14px;\r\n    line-height: 1;\r\n    font-weight: 600;\r\n    color: var(--text-tertiary);\r\n}\r\n\r\n.stat_value {\r\n    font-size: 24px;\r\n    line-height: 1;\r\n    font-weight: 600;\r\n    color: var(--text-primary);\r\n\r\n    margin-top: 16px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.stat_avg {\r\n    font-size: 11px;\r\n    line-height: 1;\r\n    font-weight: 700;\r\n    color: var(--text-tertiary);\r\n    text-transform: uppercase;\r\n}\r\n\r\n.stat_avg span {\r\n    color: var(--text-secondary);\r\n}\r\n\r\n.withdrawboard {\r\n    border-radius: 8px;\r\n    border: 1px solid var(--border);\r\n    background: var(--card-bg);\r\n}\r\n\r\n.withdrawboard table {\r\n    width: 100%;\r\n    min-height: 372px;\r\n\r\n    border-spacing: 0;\r\n}\r\n\r\n.withdrawboard tr {\r\n    display: flex;\r\n    padding: 16px 20px;\r\n    border-bottom: 1px solid var(--border);\r\n}\r\n\r\n.withdrawboard th {\r\n    text-transform: uppercase;\r\n    font-size: 12px;\r\n    line-height: 1;\r\n    font-weight: 700;\r\n    color: var(--text-tertiary);\r\n\r\n    cursor: pointer;\r\n\r\n    display: flex;\r\n    flex: 1;\r\n    align-items: center;\r\n}\r\n\r\n.withdrawboard td {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n\r\n    font-size: 14px;\r\n    line-height: 1;\r\n    font-weight: 600;\r\n    color: var(--text-primary);\r\n    fill: var(--text-tertiary);\r\n\r\n    flex: 1;\r\n    padding: 0;\r\n}\r\n\r\n.withdrawboard td span {\r\n    color: var(--text-tertiary);\r\n}\r\n\r\n.sort_icon {\r\n    fill: var(--blue);\r\n\r\n    margin-left: 6px;\r\n\r\n    transition: transform 0.2s ease;\r\n}\r\n\r\n.sort_icon.reverse {\r\n    transform: rotate(180deg);\r\n}\r\n\r\n.bottom {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n\r\n    font-size: 12px;\r\n    line-height: 1;\r\n    font-weight: 500;\r\n    color: var(--text-tertiary);\r\n\r\n    padding: 16px 20px;\r\n}\r\n\r\n.user {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.money_icon {\r\n    width: 32px;\r\n    height: 32px;\r\n    border-radius: 8px;\r\n    background: rgba(255, 255, 255, 0.1);\r\n    fill: var(--icon);\r\n\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    margin-right: 14px;\r\n}\r\n\r\n.name {\r\n    margin-bottom: 6px;\r\n}\r\n\r\n.name span {\r\n    color: var(--text-tertiary);\r\n}\r\n\r\n.tier {\r\n    font-size: 12px;\r\n    line-height: 1;\r\n    font-weight: 500;\r\n    color: var(--text-tertiary);\r\n}\r\n\r\n.hint_block {\r\n    display: flex;\r\n    gap: 12px;\r\n\r\n    margin-bottom: 60px;\r\n}\r\n\r\n.hint_block svg {\r\n    fill: var(--icon);\r\n}\r\n\r\n.hint {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n\r\n    font-size: 12px;\r\n    font-weight: 500;\r\n    line-height: 1.6;\r\n    color: var(--text-tertiary);\r\n    fill: var(--text-tertiary);\r\n\r\n    margin-top: 12px;\r\n}\r\n\r\n.hint span {\r\n    font-weight: 600;\r\n    color: var(--text-secondary);\r\n}\r\n\r\n.items {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\r\n    grid-gap: 16px;\r\n}\r\n\r\n.empty {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n\r\n    font-size: 14px;\r\n    line-height: 1.6;\r\n    color: var(--text-tertiary);\r\n    fill: var(--text-tertiary);\r\n}\r\n\r\n.pagination {\r\n    margin-top: 24px;\r\n}\r\n\r\n.tb_pagination {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 6px;\r\n}\r\n\r\n.page {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    cursor: pointer;\r\n\r\n    font-size: 12px;\r\n\r\n    width: 24px;\r\n    height: 20px;\r\n    border-radius: 5px;\r\n    background: var(--opacity-05);\r\n\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.page.current {\r\n    color: var(--text-primary);\r\n    background: var(--opacity-10);\r\n}\r\n\r\n.page:hover {\r\n    background: var(--opacity-10);\r\n}\r\n</style>\r\n","import { HttpBackend, HttpResponseError, STATUS_CODE } from '@taquito/http-utils';\nimport BigNumber from 'bignumber.js';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar defaultChain = 'main';\r\nvar defaultRPCOptions = { block: 'head' };\n\nvar getByPath = require('lodash/get');\r\nvar setByPath = require('lodash/set');\r\n/**\r\n * Casts object/array items to BigNumber\r\n * keys support lodash path notation\r\n * @param data input object or array\r\n * @param keys keys for processing or all items if not defined\r\n *\r\n * @see https://lodash.com/docs/#get\r\n *\r\n */\r\nfunction castToBigNumber(data, keys) {\r\n    var returnArray = Array.isArray(data);\r\n    if (typeof keys === 'undefined') {\r\n        keys = Object.keys(data);\r\n    }\r\n    var response = returnArray ? [] : {};\r\n    keys.forEach(function (key) {\r\n        var item = getByPath(data, key);\r\n        var res;\r\n        if (typeof item === 'undefined') {\r\n            return;\r\n        }\r\n        if (Array.isArray(item)) {\r\n            res = castToBigNumber(item);\r\n            setByPath(response, key, res);\r\n            return;\r\n        }\r\n        res = new BigNumber(item);\r\n        setByPath(response, key, res);\r\n    });\r\n    return response;\r\n}\n\nvar defaultTtl = 1000;\r\n/***\r\n * @description RpcClientCache acts as a decorator over the RpcClient instance by caching responses for the period defined by the ttl.\r\n */\r\nvar RpcClientCache = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param rpcClient rpcClient responsible of the interaction with Tezos network through an rpc node\r\n     * @param ttl number representing the time to live (default 1000 milliseconds)\r\n     *\r\n     * @example new RpcClientCache(new RpcClient('https://mainnet.api.tez.ie/'))\r\n     */\r\n    function RpcClientCache(rpcClient, ttl) {\r\n        if (ttl === void 0) { ttl = defaultTtl; }\r\n        this.rpcClient = rpcClient;\r\n        this.ttl = ttl;\r\n        this._cache = {};\r\n    }\r\n    RpcClientCache.prototype.getAllCachedData = function () {\r\n        return this._cache;\r\n    };\r\n    /**\r\n     * @description Remove all the data in the cache.\r\n     *\r\n     */\r\n    RpcClientCache.prototype.deleteAllCachedData = function () {\r\n        for (var key in this._cache) {\r\n            delete this._cache[key];\r\n        }\r\n    };\r\n    RpcClientCache.prototype.formatCacheKey = function (rpcUrl, rpcMethodName, rpcMethodParams, rpcMethodData) {\r\n        var paramsToString = \"\";\r\n        rpcMethodParams.forEach(function (param) {\r\n            paramsToString = (typeof param === 'object') ? paramsToString + JSON.stringify(param) + '/' : paramsToString + param + '/';\r\n        });\r\n        return rpcMethodData ? rpcUrl + \"/\" + rpcMethodName + \"/\" + paramsToString + \"/\" + JSON.stringify(rpcMethodData) : rpcUrl + \"/\" + rpcMethodName + \"/\" + paramsToString;\r\n    };\r\n    RpcClientCache.prototype.has = function (key) {\r\n        return key in this._cache;\r\n    };\r\n    RpcClientCache.prototype.get = function (key) {\r\n        return this._cache[key].response;\r\n    };\r\n    RpcClientCache.prototype.put = function (key, response) {\r\n        var _a;\r\n        var _this = this;\r\n        var handle = setTimeout(function () {\r\n            return _this.remove(key);\r\n        }, this.ttl);\r\n        Object.assign(this._cache, (_a = {}, _a[key] = { handle: handle, response: response }, _a));\r\n    };\r\n    RpcClientCache.prototype.remove = function (key) {\r\n        if (key in this._cache) {\r\n            delete this._cache[key];\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Get the block's hash, its unique identifier.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-hash\r\n     */\r\n    RpcClientCache.prototype.getBlockHash = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBlockHash', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBlockHash({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description List the ancestors of the given block which, if referred to as the branch in an operation header, are recent enough for that operation to be included in the current block.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-live-blocks\r\n     */\r\n    RpcClientCache.prototype.getLiveBlocks = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getLiveBlocks', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getLiveBlocks({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address address from which we want to retrieve the balance\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the balance of a contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-balance\r\n     */\r\n    RpcClientCache.prototype.getBalance = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBalance', [block, address]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBalance(address, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the storage\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the data of the contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-storage\r\n     */\r\n    RpcClientCache.prototype.getStorage = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getStorage', [block, address]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getStorage(address, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the script\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the code and data of the contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-script\r\n     */\r\n    RpcClientCache.prototype.getScript = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getScript', [block, address]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getScript(address, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the complete status of a contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id\r\n     */\r\n    RpcClientCache.prototype.getContract = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getContract', [block, address]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getContract(address, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the manager\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the manager key of a contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-manager-key\r\n     */\r\n    RpcClientCache.prototype.getManagerKey = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getManagerKey', [block, address]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getManagerKey(address, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the delegate (baker)\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the delegate of a contract, if any.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-delegate\r\n     */\r\n    RpcClientCache.prototype.getDelegate = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getDelegate', [block, address]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getDelegate(address, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the big map key\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the value associated with a key in the big map storage of the contract.\r\n     *\r\n     * @deprecated Deprecated in favor of getBigMapKeyByID\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-context-contracts-contract-id-big-map-get\r\n     */\r\n    RpcClientCache.prototype.getBigMapKey = function (address, key, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var keyUrl, response;\r\n            return __generator(this, function (_c) {\r\n                keyUrl = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBigMapKey', [block, address, key]);\r\n                if (this.has(keyUrl)) {\r\n                    return [2 /*return*/, this.get(keyUrl)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBigMapKey(address, key, { block: block });\r\n                    this.put(keyUrl, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param id Big Map ID\r\n     * @param expr Expression hash to query (A b58check encoded Blake2b hash of the expression (The expression can be packed using the pack_data method))\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the value associated with a key in a big map.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-big-maps-big-map-id-script-expr\r\n     */\r\n    RpcClientCache.prototype.getBigMapExpr = function (id, expr, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBigMapExpr', [block, id, expr]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBigMapExpr(id, expr, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address delegate address which we want to retrieve\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Fetches information about a delegate from RPC.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-delegates-pkh\r\n     */\r\n    RpcClientCache.prototype.getDelegates = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getDelegates', [block, address]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getDelegates(address, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description All constants\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-constants\r\n     */\r\n    RpcClientCache.prototype.getConstants = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getConstants', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getConstants({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls. See examples for various available sytaxes.\r\n     *\r\n     * @description All the information about a block\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id\r\n     * @example getBlock() will default to /main/chains/block/head.\r\n     * @example getBlock({ block: head~2 }) will return an offset of 2 blocks.\r\n     * @example getBlock({ block: BL8fTiWcSxWCjiMVnDkbh6EuhqVPZzgWheJ2dqwrxYRm9AephXh~2 }) will return an offset of 2 blocks from given block hash..\r\n     */\r\n    RpcClientCache.prototype.getBlock = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBlock', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBlock({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description The whole block header\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-header\r\n     */\r\n    RpcClientCache.prototype.getBlockHeader = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBlockHeader', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBlockHeader({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description All the metadata associated to the block\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-metadata\r\n     */\r\n    RpcClientCache.prototype.getBlockMetadata = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBlockMetadata', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBlockMetadata({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param args contains optional query arguments\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Retrieves the list of delegates allowed to bake a block.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-helpers-baking-rights\r\n     */\r\n    RpcClientCache.prototype.getBakingRights = function (args, _a) {\r\n        if (args === void 0) { args = {}; }\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBakingRights', [block, args]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBakingRights(args, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param args contains optional query arguments\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Retrieves the list of delegates allowed to bake a block.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-helpers-endorsing-rights\r\n     */\r\n    RpcClientCache.prototype.getEndorsingRights = function (args, _a) {\r\n        if (args === void 0) { args = {}; }\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getEndorsingRights', [block, args]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getEndorsingRights(args, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Ballots casted so far during a voting period\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-ballot-list\r\n     */\r\n    RpcClientCache.prototype.getBallotList = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBallotList', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBallotList({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Sum of ballots casted so far during a voting period.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-ballots\r\n     */\r\n    RpcClientCache.prototype.getBallots = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getBallots', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getBallots({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Current period kind.\r\n     *\r\n     * @deprecated Deprecated in favor of getCurrentPeriod\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-current-period-kind\r\n     */\r\n    RpcClientCache.prototype.getCurrentPeriodKind = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getCurrentPeriodKind', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getCurrentPeriodKind({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Current proposal under evaluation.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-current-proposal\r\n     */\r\n    RpcClientCache.prototype.getCurrentProposal = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getCurrentProposal', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getCurrentProposal({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Current expected quorum.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-current-quorum\r\n     */\r\n    RpcClientCache.prototype.getCurrentQuorum = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getCurrentQuorum', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getCurrentQuorum({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description List of delegates with their voting weight, in number of rolls.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-listings\r\n     */\r\n    RpcClientCache.prototype.getVotesListings = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getVotesListings', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getVotesListings({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description List of proposals with number of supporters.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-proposals\r\n     */\r\n    RpcClientCache.prototype.getProposals = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getProposals', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getProposals({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param data operation contents to forge\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Forge an operation returning the unsigned bytes\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-forge-operations\r\n     */\r\n    RpcClientCache.prototype.forgeOperations = function (data, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.rpcClient.forgeOperations(data, { block: block })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param signedOpBytes signed bytes to inject\r\n     *\r\n     * @description Inject an operation in node and broadcast it. Returns the ID of the operation. The `signedOperationContents` should be constructed using a contextual RPCs from the latest block and signed by the client. By default, the RPC will wait for the operation to be (pre-)validated before answering. See RPCs under /blocks/prevalidation for more details on the prevalidation context.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-injection-operation\r\n     */\r\n    RpcClientCache.prototype.injectOperation = function (signedOpBytes) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.rpcClient.injectOperation(signedOpBytes)];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param ops Operations to apply\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Simulate the validation of an operation\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-preapply-operations\r\n     */\r\n    RpcClientCache.prototype.preapplyOperations = function (ops, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.rpcClient.preapplyOperations(ops, { block: block })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param contract address of the contract we want to get the entrypoints of\r\n     *\r\n     * @description Return the list of entrypoints of the contract\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-entrypoints\r\n     *\r\n     * @version 005_PsBABY5H\r\n     */\r\n    RpcClientCache.prototype.getEntrypoints = function (contract, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getEntrypoints', [block, contract]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getEntrypoints(contract, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param op Operation to run\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Run an operation without signature checks\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-scripts-run-operation\r\n     */\r\n    RpcClientCache.prototype.runOperation = function (op, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.rpcClient.runOperation(op, { block: block })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param code Code to run\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Run a piece of code in the current context\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-scripts-run-code\r\n     */\r\n    RpcClientCache.prototype.runCode = function (code, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.rpcClient.runCode(code, { block: block })];\r\n            });\r\n        });\r\n    };\r\n    RpcClientCache.prototype.getChainId = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_a) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getChainId', []);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getChainId();\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param data Data to pack\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Computes the serialized version of a data expression using the same algorithm as script instruction PACK\r\n     *\r\n     * @example packData({ data: { string: \"test\" }, type: { prim: \"string\" } })\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-scripts-pack-data\r\n     */\r\n    RpcClientCache.prototype.packData = function (data, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'packData', [block, data]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.packData(data, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Return rpc root url\r\n     */\r\n    RpcClientCache.prototype.getRpcUrl = function () {\r\n        return this.rpcClient.getRpcUrl();\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Voting period of current block.\r\n     *\r\n     * @example getCurrentPeriod() will default to current voting period for /main/chains/block/head.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-current-period\r\n     */\r\n    RpcClientCache.prototype.getCurrentPeriod = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getCurrentPeriod', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getCurrentPeriod({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Voting period of next block.\r\n     *\r\n     * @example getSuccessorPeriod() will default to successor voting period for /main/chains/block/head.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-successor-period\r\n     */\r\n    RpcClientCache.prototype.getSuccessorPeriod = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getSuccessorPeriod', [block]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getSuccessorPeriod({ block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param id Sapling state ID\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the value associated with a sapling state ID.\r\n     *\r\n     * @see https://tezos.gitlab.io/active/rpc.html#get-block-id-context-sapling-sapling-state-id-get-diff\r\n     */\r\n    RpcClientCache.prototype.getSaplingDiffById = function (id, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getSaplingDiffById', [block, id]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getSaplingDiffById(id, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param contract address of the contract we want to get the sapling diff\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the value associated with a sapling state.\r\n     *\r\n     * @see https://tezos.gitlab.io/active/rpc.html#get-block-id-context-contracts-contract-id-single-sapling-get-diff\r\n     */\r\n    RpcClientCache.prototype.getSaplingDiffByContract = function (contract, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var key, response;\r\n            return __generator(this, function (_c) {\r\n                key = this.formatCacheKey(this.rpcClient.getRpcUrl(), 'getSaplingDiffByContract', [block, contract]);\r\n                if (this.has(key)) {\r\n                    return [2 /*return*/, this.get(key)];\r\n                }\r\n                else {\r\n                    response = this.rpcClient.getSaplingDiffByContract(contract, { block: block });\r\n                    this.put(key, response);\r\n                    return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RpcClientCache;\r\n}());\n\nvar OpKind;\r\n(function (OpKind) {\r\n    OpKind[\"ORIGINATION\"] = \"origination\";\r\n    OpKind[\"DELEGATION\"] = \"delegation\";\r\n    OpKind[\"REVEAL\"] = \"reveal\";\r\n    OpKind[\"TRANSACTION\"] = \"transaction\";\r\n    OpKind[\"ACTIVATION\"] = \"activate_account\";\r\n    OpKind[\"ENDORSEMENT\"] = \"endorsement\";\r\n    OpKind[\"ENDORSEMENT_WITH_SLOT\"] = \"endorsement_with_slot\";\r\n    OpKind[\"SEED_NONCE_REVELATION\"] = \"seed_nonce_revelation\";\r\n    OpKind[\"DOUBLE_ENDORSEMENT_EVIDENCE\"] = \"double_endorsement_evidence\";\r\n    OpKind[\"DOUBLE_BAKING_EVIDENCE\"] = \"double_baking_evidence\";\r\n    OpKind[\"PROPOSALS\"] = \"proposals\";\r\n    OpKind[\"BALLOT\"] = \"ballot\";\r\n    OpKind[\"FAILING_NOOP\"] = \"failing_noop\";\r\n})(OpKind || (OpKind = {}));\n\n// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\r\n/* tslint:disable */\r\nvar VERSION = {\r\n    \"commitHash\": \"5711569ffaf481d88ba3251343a1788090b35dd4\",\r\n    \"version\": \"10.2.1\"\r\n};\r\n/* tslint:enable */\n\n/***\r\n * @description RpcClient allows interaction with Tezos network through an rpc node\r\n */\r\nvar RpcClient = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param url rpc root url\r\n     * @param chain chain (default main)\r\n     * @param httpBackend Http backend that issue http request.\r\n     * You can override it by providing your own if you which to hook in the request/response\r\n     *\r\n     * @example new RpcClient('https://mainnet.api.tez.ie/', 'main') this will use https://mainnet.api.tez.ie//chains/main\r\n     */\r\n    function RpcClient(url, chain, httpBackend) {\r\n        if (chain === void 0) { chain = defaultChain; }\r\n        if (httpBackend === void 0) { httpBackend = new HttpBackend(); }\r\n        this.url = url;\r\n        this.chain = chain;\r\n        this.httpBackend = httpBackend;\r\n    }\r\n    RpcClient.prototype.createURL = function (path) {\r\n        // Trim trailing slashes because it is assumed to be included in path\r\n        return \"\" + this.url.replace(/\\/+$/g, '') + path;\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Get the block's hash, its unique identifier.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-hash\r\n     */\r\n    RpcClient.prototype.getBlockHash = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var hash;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/hash\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        hash = _c.sent();\r\n                        return [2 /*return*/, hash];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description List the ancestors of the given block which, if referred to as the branch in an operation header, are recent enough for that operation to be included in the current block.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-live-blocks\r\n     */\r\n    RpcClient.prototype.getLiveBlocks = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var blocks;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/live_blocks\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        blocks = _c.sent();\r\n                        return [2 /*return*/, blocks];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address address from which we want to retrieve the balance\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the balance of a contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-balance\r\n     */\r\n    RpcClient.prototype.getBalance = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var balance;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + address + \"/balance\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        balance = _c.sent();\r\n                        return [2 /*return*/, new BigNumber(balance)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the storage\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the data of the contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-storage\r\n     */\r\n    RpcClient.prototype.getStorage = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + address + \"/storage\"),\r\n                        method: 'GET',\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the script\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the code and data of the contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-script\r\n     */\r\n    RpcClient.prototype.getScript = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + address + \"/script\"),\r\n                        method: 'GET',\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the complete status of a contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id\r\n     */\r\n    RpcClient.prototype.getContract = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var contractResponse;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + address),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        contractResponse = _c.sent();\r\n                        return [2 /*return*/, __assign(__assign({}, contractResponse), { balance: new BigNumber(contractResponse.balance) })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the manager\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the manager key of a contract.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-manager-key\r\n     */\r\n    RpcClient.prototype.getManagerKey = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + address + \"/manager_key\"),\r\n                        method: 'GET',\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the delegate (baker)\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the delegate of a contract, if any.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-delegate\r\n     */\r\n    RpcClient.prototype.getDelegate = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var delegate, ex_1;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _c.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.httpBackend.createRequest({\r\n                                url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + address + \"/delegate\"),\r\n                                method: 'GET',\r\n                            })];\r\n                    case 1:\r\n                        delegate = _c.sent();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        ex_1 = _c.sent();\r\n                        if (ex_1 instanceof HttpResponseError && ex_1.status === STATUS_CODE.NOT_FOUND) {\r\n                            delegate = null;\r\n                        }\r\n                        else {\r\n                            throw ex_1;\r\n                        }\r\n                        return [3 /*break*/, 3];\r\n                    case 3: return [2 /*return*/, delegate];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address contract address from which we want to retrieve the big map key\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the value associated with a key in the big map storage of the contract.\r\n     *\r\n     * @deprecated Deprecated in favor of getBigMapKeyByID\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-context-contracts-contract-id-big-map-get\r\n     */\r\n    RpcClient.prototype.getBigMapKey = function (address, key, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + address + \"/big_map_get\"),\r\n                        method: 'POST',\r\n                    }, key)];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param id Big Map ID\r\n     * @param expr Expression hash to query (A b58check encoded Blake2b hash of the expression (The expression can be packed using the pack_data method))\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the value associated with a key in a big map.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-big-maps-big-map-id-script-expr\r\n     */\r\n    RpcClient.prototype.getBigMapExpr = function (id, expr, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/big_maps/\" + id + \"/\" + expr),\r\n                        method: 'GET',\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param address delegate address which we want to retrieve\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Fetches information about a delegate from RPC.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-delegates-pkh\r\n     */\r\n    RpcClient.prototype.getDelegates = function (address, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/delegates/\" + address),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, {\r\n                                deactivated: response.deactivated,\r\n                                balance: new BigNumber(response.balance),\r\n                                frozen_balance: new BigNumber(response.frozen_balance),\r\n                                frozen_balance_by_cycle: response.frozen_balance_by_cycle.map(function (_a) {\r\n                                    var deposit = _a.deposit, deposits = _a.deposits, fees = _a.fees, rewards = _a.rewards, rest = __rest(_a, [\"deposit\", \"deposits\", \"fees\", \"rewards\"]);\r\n                                    var castedToBigNumber = castToBigNumber({ deposit: deposit, deposits: deposits, fees: fees, rewards: rewards }, [\r\n                                        'deposit',\r\n                                        'deposits',\r\n                                        'fees',\r\n                                        'rewards'\r\n                                    ]);\r\n                                    return __assign(__assign({}, rest), { deposit: castedToBigNumber.deposit, deposits: castedToBigNumber.deposits, fees: castedToBigNumber.fees, rewards: castedToBigNumber.rewards });\r\n                                }),\r\n                                staking_balance: new BigNumber(response.staking_balance),\r\n                                delegated_contracts: response.delegated_contracts,\r\n                                delegated_balance: new BigNumber(response.delegated_balance),\r\n                                grace_period: response.grace_period,\r\n                                voting_power: response.voting_power\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description All constants\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-constants\r\n     */\r\n    RpcClient.prototype.getConstants = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response, castedResponse;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/constants\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        castedResponse = castToBigNumber(response, [\r\n                            'time_between_blocks',\r\n                            'hard_gas_limit_per_operation',\r\n                            'hard_gas_limit_per_block',\r\n                            'proof_of_work_threshold',\r\n                            'tokens_per_roll',\r\n                            'seed_nonce_revelation_tip',\r\n                            'block_security_deposit',\r\n                            'endorsement_security_deposit',\r\n                            'block_reward',\r\n                            'endorsement_reward',\r\n                            'cost_per_byte',\r\n                            'hard_storage_limit_per_operation',\r\n                            'test_chain_duration',\r\n                            'baking_reward_per_endorsement',\r\n                            'delay_per_missing_endorsement',\r\n                            'minimal_block_delay',\r\n                            'liquidity_baking_subsidy'\r\n                        ]);\r\n                        return [2 /*return*/, __assign(__assign({}, response), castedResponse)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls. See examples for various available sytaxes.\r\n     *\r\n     * @description All the information about a block\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id\r\n     * @example getBlock() will default to /main/chains/block/head.\r\n     * @example getBlock({ block: head~2 }) will return an offset of 2 blocks.\r\n     * @example getBlock({ block: BL8fTiWcSxWCjiMVnDkbh6EuhqVPZzgWheJ2dqwrxYRm9AephXh~2 }) will return an offset of 2 blocks from given block hash..\r\n     */\r\n    RpcClient.prototype.getBlock = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description The whole block header\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-header\r\n     */\r\n    RpcClient.prototype.getBlockHeader = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/header\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description All the metadata associated to the block\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-metadata\r\n     */\r\n    RpcClient.prototype.getBlockMetadata = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/metadata\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param args contains optional query arguments\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Retrieves the list of delegates allowed to bake a block.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-helpers-baking-rights\r\n     */\r\n    RpcClient.prototype.getBakingRights = function (args, _a) {\r\n        if (args === void 0) { args = {}; }\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/helpers/baking_rights\"),\r\n                            method: 'GET',\r\n                            query: args,\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param args contains optional query arguments\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Retrieves the list of delegates allowed to bake a block.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-helpers-endorsing-rights\r\n     */\r\n    RpcClient.prototype.getEndorsingRights = function (args, _a) {\r\n        if (args === void 0) { args = {}; }\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/helpers/endorsing_rights\"),\r\n                            method: 'GET',\r\n                            query: args,\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Ballots casted so far during a voting period\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-ballot-list\r\n     */\r\n    RpcClient.prototype.getBallotList = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/ballot_list\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Sum of ballots casted so far during a voting period.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-ballots\r\n     */\r\n    RpcClient.prototype.getBallots = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/ballots\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Current period kind.\r\n     *\r\n     * @deprecated Deprecated in favor of getCurrentPeriod\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-current-period-kind\r\n     */\r\n    RpcClient.prototype.getCurrentPeriodKind = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/current_period_kind\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Current proposal under evaluation.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-current-proposal\r\n     */\r\n    RpcClient.prototype.getCurrentProposal = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/current_proposal\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Current expected quorum.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-current-quorum\r\n     */\r\n    RpcClient.prototype.getCurrentQuorum = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/current_quorum\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description List of delegates with their voting weight, in number of rolls.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-listings\r\n     */\r\n    RpcClient.prototype.getVotesListings = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/listings\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description List of proposals with number of supporters.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-proposals\r\n     */\r\n    RpcClient.prototype.getProposals = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/proposals\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param data operation contents to forge\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Forge an operation returning the unsigned bytes\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-forge-operations\r\n     */\r\n    RpcClient.prototype.forgeOperations = function (data, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/helpers/forge/operations\"),\r\n                        method: 'POST',\r\n                    }, data)];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param signedOpBytes signed bytes to inject\r\n     *\r\n     * @description Inject an operation in node and broadcast it. Returns the ID of the operation. The `signedOperationContents` should be constructed using a contextual RPCs from the latest block and signed by the client. By default, the RPC will wait for the operation to be (pre-)validated before answering. See RPCs under /blocks/prevalidation for more details on the prevalidation context.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-injection-operation\r\n     */\r\n    RpcClient.prototype.injectOperation = function (signedOpBytes) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/injection/operation\"),\r\n                        method: 'POST',\r\n                    }, signedOpBytes)];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param ops Operations to apply\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Simulate the validation of an operation\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-preapply-operations\r\n     */\r\n    RpcClient.prototype.preapplyOperations = function (ops, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/helpers/preapply/operations\"),\r\n                            method: 'POST',\r\n                        }, ops)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param contract address of the contract we want to get the entrypoints of\r\n     *\r\n     * @description Return the list of entrypoints of the contract\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-entrypoints\r\n     *\r\n     * @version 005_PsBABY5H\r\n     */\r\n    RpcClient.prototype.getEntrypoints = function (contract, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var contractResponse;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + contract + \"/entrypoints\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        contractResponse = _c.sent();\r\n                        return [2 /*return*/, contractResponse];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param op Operation to run\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Run an operation without signature checks\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-scripts-run-operation\r\n     */\r\n    RpcClient.prototype.runOperation = function (op, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/helpers/scripts/run_operation\"),\r\n                            method: 'POST',\r\n                        }, op)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @param code Code to run\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Run a piece of code in the current context\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-scripts-run-code\r\n     */\r\n    RpcClient.prototype.runCode = function (code, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/helpers/scripts/run_code\"),\r\n                            method: 'POST',\r\n                        }, code)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RpcClient.prototype.getChainId = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/chain_id\"),\r\n                        method: 'GET',\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param data Data to pack\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Computes the serialized version of a data expression using the same algorithm as script instruction PACK\r\n     *\r\n     * @example packData({ data: { string: \"test\" }, type: { prim: \"string\" } })\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-helpers-scripts-pack-data\r\n     */\r\n    RpcClient.prototype.packData = function (data, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _c, gas, rest, formattedGas, tryBigNumber;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/helpers/scripts/pack_data\"),\r\n                            method: 'POST',\r\n                        }, data)];\r\n                    case 1:\r\n                        _c = _d.sent(), gas = _c.gas, rest = __rest(_c, [\"gas\"]);\r\n                        formattedGas = gas;\r\n                        tryBigNumber = new BigNumber(gas || '');\r\n                        if (!tryBigNumber.isNaN()) {\r\n                            formattedGas = tryBigNumber;\r\n                        }\r\n                        return [2 /*return*/, __assign({ gas: formattedGas }, rest)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Return rpc root url\r\n     */\r\n    RpcClient.prototype.getRpcUrl = function () {\r\n        return this.url;\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Voting period of current block.\r\n     *\r\n     * @example getCurrentPeriod() will default to current voting period for /main/chains/block/head.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-current-period\r\n     */\r\n    RpcClient.prototype.getCurrentPeriod = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/current_period\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Voting period of next block.\r\n     *\r\n     * @example getSuccessorPeriod() will default to successor voting period for /main/chains/block/head.\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-votes-successor-period\r\n     */\r\n    RpcClient.prototype.getSuccessorPeriod = function (_a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.httpBackend.createRequest({\r\n                            url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/votes/successor_period\"),\r\n                            method: 'GET',\r\n                        })];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param id Sapling state ID\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the value associated with a sapling state ID.\r\n     *\r\n     * @see https://tezos.gitlab.io/active/rpc.html#get-block-id-context-sapling-sapling-state-id-get-diff\r\n     */\r\n    RpcClient.prototype.getSaplingDiffById = function (id, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/sapling/\" + id + \"/get_diff\"),\r\n                        method: 'GET',\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @param contract address of the contract we want to get the sapling diff\r\n     * @param options contains generic configuration for rpc calls\r\n     *\r\n     * @description Access the value associated with a sapling state.\r\n     *\r\n     * @see https://tezos.gitlab.io/active/rpc.html#get-block-id-context-contracts-contract-id-single-sapling-get-diff\r\n     */\r\n    RpcClient.prototype.getSaplingDiffByContract = function (contract, _a) {\r\n        var _b = _a === void 0 ? defaultRPCOptions : _a, block = _b.block;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, this.httpBackend.createRequest({\r\n                        url: this.createURL(\"/chains/\" + this.chain + \"/blocks/\" + block + \"/context/contracts/\" + contract + \"/single_sapling_get_diff\"),\r\n                        method: 'GET',\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    return RpcClient;\r\n}());\n\nexport { OpKind, RpcClient, RpcClientCache, VERSION, castToBigNumber, defaultChain, defaultRPCOptions };\n//# sourceMappingURL=taquito-rpc.es5.js.map\n","// Michelson abstract syntax tree types https://tezos.gitlab.io/whitedoc/michelson.html#concrete-syntax\r\nvar sourceReference = Symbol(\"source_reference\");\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\n\nvar ScanError = /** @class */ (function (_super) {\r\n    __extends(ScanError, _super);\r\n    function ScanError(src, idx, message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.src = src;\r\n        _this.idx = idx;\r\n        Object.setPrototypeOf(_this, ScanError.prototype);\r\n        return _this;\r\n    }\r\n    return ScanError;\r\n}(Error));\r\nvar Literal;\r\n(function (Literal) {\r\n    Literal[Literal[\"Comment\"] = 0] = \"Comment\";\r\n    Literal[Literal[\"Number\"] = 1] = \"Number\";\r\n    Literal[Literal[\"String\"] = 2] = \"String\";\r\n    Literal[Literal[\"Bytes\"] = 3] = \"Bytes\";\r\n    Literal[Literal[\"Ident\"] = 4] = \"Ident\";\r\n})(Literal || (Literal = {}));\r\nvar isSpace = new RegExp(\"\\\\s\");\r\nvar isIdentStart = new RegExp(\"[:@%_A-Za-z]\");\r\nvar isIdent = new RegExp(\"[@%_\\\\.A-Za-z0-9]\");\r\nvar isDigit = new RegExp(\"[0-9]\");\r\nvar isHex = new RegExp(\"[0-9a-fA-F]\");\r\nfunction scan(src, scanComments) {\r\n    var i, s, start, ii, esc;\r\n    if (scanComments === void 0) { scanComments = false; }\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                i = 0;\r\n                _a.label = 1;\r\n            case 1:\r\n                if (!(i < src.length)) return [3 /*break*/, 19];\r\n                // Skip space\r\n                while (i < src.length && isSpace.test(src[i])) {\r\n                    i++;\r\n                }\r\n                if (i === src.length) {\r\n                    return [2 /*return*/];\r\n                }\r\n                s = src[i];\r\n                start = i;\r\n                if (!isIdentStart.test(s)) return [3 /*break*/, 3];\r\n                // Identifier\r\n                i++;\r\n                while (i < src.length && isIdent.test(src[i])) {\r\n                    i++;\r\n                }\r\n                return [4 /*yield*/, { t: Literal.Ident, v: src.slice(start, i), first: start, last: i }];\r\n            case 2:\r\n                _a.sent();\r\n                return [3 /*break*/, 18];\r\n            case 3:\r\n                if (!(src.length - i > 1 && src.substr(i, 2) === \"0x\")) return [3 /*break*/, 5];\r\n                // Bytes\r\n                i += 2;\r\n                while (i < src.length && isHex.test(src[i])) {\r\n                    i++;\r\n                }\r\n                if (((i - start) & 1) !== 0) {\r\n                    throw new ScanError(src, i, \"Bytes literal length is expected to be power of two\");\r\n                }\r\n                return [4 /*yield*/, { t: Literal.Bytes, v: src.slice(start, i), first: start, last: i }];\r\n            case 4:\r\n                _a.sent();\r\n                return [3 /*break*/, 18];\r\n            case 5:\r\n                if (!(isDigit.test(s) || s === \"-\")) return [3 /*break*/, 7];\r\n                // Number\r\n                if (s === \"-\") {\r\n                    i++;\r\n                }\r\n                ii = i;\r\n                while (i < src.length && isDigit.test(src[i])) {\r\n                    i++;\r\n                }\r\n                if (ii === i) {\r\n                    throw new ScanError(src, i, \"Number literal is too short\");\r\n                }\r\n                return [4 /*yield*/, { t: Literal.Number, v: src.slice(start, i), first: start, last: i }];\r\n            case 6:\r\n                _a.sent();\r\n                return [3 /*break*/, 18];\r\n            case 7:\r\n                if (!(s === \"\\\"\")) return [3 /*break*/, 9];\r\n                // String\r\n                i++;\r\n                esc = false;\r\n                for (; i < src.length && (esc || src[i] !== \"\\\"\"); i++) {\r\n                    if (!esc && src[i] === \"\\\\\") {\r\n                        esc = true;\r\n                    }\r\n                    else {\r\n                        esc = false;\r\n                    }\r\n                }\r\n                if (i === src.length) {\r\n                    throw new ScanError(src, i, \"Unterminated string literal\");\r\n                }\r\n                i++;\r\n                return [4 /*yield*/, { t: Literal.String, v: src.slice(start, i), first: start, last: i }];\r\n            case 8:\r\n                _a.sent();\r\n                return [3 /*break*/, 18];\r\n            case 9:\r\n                if (!(s === \"#\")) return [3 /*break*/, 12];\r\n                // Comment\r\n                i++;\r\n                while (i < src.length && src[i] !== \"\\n\") {\r\n                    i++;\r\n                }\r\n                if (!scanComments) return [3 /*break*/, 11];\r\n                return [4 /*yield*/, { t: Literal.Comment, v: src.slice(start, i), first: start, last: i }];\r\n            case 10:\r\n                _a.sent();\r\n                _a.label = 11;\r\n            case 11: return [3 /*break*/, 18];\r\n            case 12:\r\n                if (!(src.length - i > 1 && src.substr(i, 2) === \"/*\")) return [3 /*break*/, 15];\r\n                // C style comment\r\n                i += 2;\r\n                while (i < src.length && !(src.length - i > 1 && src.substr(i, 2) === \"*/\")) {\r\n                    i++;\r\n                }\r\n                if (i === src.length) {\r\n                    throw new ScanError(src, i, \"Unterminated C style comment\");\r\n                }\r\n                i += 2;\r\n                if (!scanComments) return [3 /*break*/, 14];\r\n                return [4 /*yield*/, { t: Literal.Comment, v: src.slice(start, i), first: start, last: i }];\r\n            case 13:\r\n                _a.sent();\r\n                _a.label = 14;\r\n            case 14: return [3 /*break*/, 18];\r\n            case 15:\r\n                if (!(s === \"(\" || s === \")\" || s === \"{\" || s === \"}\" || s === \";\")) return [3 /*break*/, 17];\r\n                i++;\r\n                return [4 /*yield*/, { t: s, v: s, first: start, last: i }];\r\n            case 16:\r\n                _a.sent();\r\n                return [3 /*break*/, 18];\r\n            case 17: throw new ScanError(src, i, \"Invalid character at offset \" + i + \": `\" + s + \"'\");\r\n            case 18: return [3 /*break*/, 1];\r\n            case 19: return [2 /*return*/];\r\n        }\r\n    });\r\n}\n\n// Michelson types\r\nvar refContract = Symbol(\"ref_contract\");\r\nvar Protocol;\r\n(function (Protocol) {\r\n    Protocol[\"Pt24m4xi\"] = \"Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd\";\r\n    Protocol[\"PsBABY5H\"] = \"PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU\";\r\n    Protocol[\"PsBabyM1\"] = \"PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS\";\r\n    Protocol[\"PsCARTHA\"] = \"PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb\";\r\n    Protocol[\"PsDELPH1\"] = \"PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo\";\r\n    Protocol[\"PtEdo2Zk\"] = \"PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA\";\r\n    Protocol[\"PsFLorena\"] = \"PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i\";\r\n    Protocol[\"PtGRANADs\"] = \"PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV\";\r\n    Protocol[\"PtHangzH\"] = \"PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r\";\r\n})(Protocol || (Protocol = {}));\r\nvar DefaultProtocol = Protocol.PsDELPH1;\n\nvar MacroError = /** @class */ (function (_super) {\r\n    __extends(MacroError, _super);\r\n    function MacroError(prim, message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.prim = prim;\r\n        Object.setPrototypeOf(_this, MacroError.prototype);\r\n        return _this;\r\n    }\r\n    return MacroError;\r\n}(Error));\r\nfunction assertArgs$1(ex, n) {\r\n    var _a, _b;\r\n    if ((n === 0 && ex.args === undefined) || ((_a = ex.args) === null || _a === void 0 ? void 0 : _a.length) === n) {\r\n        return true;\r\n    }\r\n    throw new MacroError(ex, \"macro \" + ex.prim + \" expects \" + n + \" arguments, was given \" + ((_b = ex.args) === null || _b === void 0 ? void 0 : _b.length));\r\n}\r\nfunction assertNoAnnots(ex) {\r\n    if (ex.annots === undefined) {\r\n        return true;\r\n    }\r\n    throw new MacroError(ex, \"unexpected annotation on macro \" + ex.prim + \": \" + ex.annots);\r\n}\r\nfunction assertIntArg(ex, arg) {\r\n    if (\"int\" in arg) {\r\n        return true;\r\n    }\r\n    throw new MacroError(ex, \"macro \" + ex.prim + \" expects int argument\");\r\n}\r\nfunction parsePairUnpairExpr(p, expr, annotations, agg) {\r\n    var i = 0;\r\n    var ai = 0;\r\n    var ann = [null, null];\r\n    // Left expression\r\n    var lexpr;\r\n    if (i === expr.length) {\r\n        throw new MacroError(p, \"unexpected end: \" + p.prim);\r\n    }\r\n    var c = expr[i++];\r\n    switch (c) {\r\n        case \"P\":\r\n            var _a = parsePairUnpairExpr(p, expr.slice(i), annotations.slice(ai), agg), r = _a.r, n = _a.n, an = _a.an;\r\n            lexpr = r;\r\n            i += n;\r\n            ai += an;\r\n            break;\r\n        case \"A\":\r\n            if (ai !== annotations.length) {\r\n                ann[0] = annotations[ai++];\r\n            }\r\n            break;\r\n        default:\r\n            throw new MacroError(p, p.prim + \": unexpected character: \" + c);\r\n    }\r\n    // Right expression\r\n    var rexpr;\r\n    if (i === expr.length) {\r\n        throw new MacroError(p, \"unexpected end: \" + p.prim);\r\n    }\r\n    c = expr[i++];\r\n    switch (c) {\r\n        case \"P\":\r\n            var _b = parsePairUnpairExpr(p, expr.slice(i), annotations.slice(ai), agg), r = _b.r, n = _b.n, an = _b.an;\r\n            rexpr = r.map(function (_a) {\r\n                var _b = __read(_a, 2), v = _b[0], a = _b[1];\r\n                return [v + 1, a];\r\n            });\r\n            i += n;\r\n            ai += an;\r\n            break;\r\n        case \"I\":\r\n            if (ai !== annotations.length) {\r\n                ann[1] = annotations[ai++];\r\n            }\r\n            break;\r\n        default:\r\n            throw new MacroError(p, p.prim + \": unexpected character: \" + c);\r\n    }\r\n    return { r: agg(lexpr, rexpr, [0, ann]), n: i, an: ai };\r\n}\r\nfunction parseSetMapCadr(p, expr, vann, term) {\r\n    var c = expr[0];\r\n    switch (c) {\r\n        case \"A\":\r\n            return expr.length > 1 ?\r\n                [\r\n                    { prim: \"DUP\" },\r\n                    {\r\n                        prim: \"DIP\",\r\n                        args: [[\r\n                                { prim: \"CAR\", annots: [\"@%%\"] },\r\n                                parseSetMapCadr(p, expr.slice(1), [], term),\r\n                            ]],\r\n                    },\r\n                    { prim: \"CDR\", annots: [\"@%%\"] },\r\n                    { prim: \"SWAP\" },\r\n                    { prim: \"PAIR\", annots: __spreadArray([\"%@\", \"%@\"], __read(vann)) },\r\n                ] : term.a;\r\n        case \"D\":\r\n            return expr.length > 1 ?\r\n                [\r\n                    { prim: \"DUP\" },\r\n                    {\r\n                        prim: \"DIP\",\r\n                        args: [[\r\n                                { prim: \"CDR\", annots: [\"@%%\"] },\r\n                                parseSetMapCadr(p, expr.slice(1), [], term),\r\n                            ]],\r\n                    },\r\n                    { prim: \"CAR\", annots: [\"@%%\"] },\r\n                    { prim: \"PAIR\", annots: __spreadArray([\"%@\", \"%@\"], __read(vann)) },\r\n                ] : term.d;\r\n        default:\r\n            throw new MacroError(p, p.prim + \": unexpected character: \" + c);\r\n    }\r\n}\r\nfunction trimLast(a, v) {\r\n    var l = a.length;\r\n    while (l > 0 && a[l - 1] === v) {\r\n        l--;\r\n    }\r\n    return a.slice(0, l);\r\n}\r\nfunction filterAnnotations(a) {\r\n    var e_1, _a;\r\n    var fields = [];\r\n    var rest = [];\r\n    if (a !== undefined) {\r\n        try {\r\n            for (var a_1 = __values(a), a_1_1 = a_1.next(); !a_1_1.done; a_1_1 = a_1.next()) {\r\n                var v = a_1_1.value;\r\n                (v.length !== 0 && v[0] === \"%\" ? fields : rest).push(v);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (a_1_1 && !a_1_1.done && (_a = a_1.return)) _a.call(a_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    }\r\n    return { fields: fields, rest: rest };\r\n}\r\nfunction mkPrim(_a) {\r\n    var prim = _a.prim, annots = _a.annots, args = _a.args;\r\n    return __assign(__assign({ prim: prim }, (annots && { annots: annots })), (args && { args: args }));\r\n}\r\nvar pairRe = /^P[PAI]{3,}R$/;\r\nvar unpairRe = /^UNP[PAI]{2,}R$/;\r\nvar cadrRe = /^C[AD]{2,}R$/;\r\nvar setCadrRe = /^SET_C[AD]+R$/;\r\nvar mapCadrRe = /^MAP_C[AD]+R$/;\r\nvar diipRe = /^DI{2,}P$/;\r\nvar duupRe = /^DU+P$/;\r\nfunction expandMacros(ex, opt) {\r\n    var proto = (opt === null || opt === void 0 ? void 0 : opt.protocol) || DefaultProtocol;\r\n    function mayRename(annots) {\r\n        return annots !== undefined ? [{ prim: \"RENAME\", annots: annots }] : [];\r\n    }\r\n    switch (ex.prim) {\r\n        // Compare\r\n        case \"CMPEQ\":\r\n        case \"CMPNEQ\":\r\n        case \"CMPLT\":\r\n        case \"CMPGT\":\r\n        case \"CMPLE\":\r\n        case \"CMPGE\":\r\n            if (assertArgs$1(ex, 0)) {\r\n                return [\r\n                    { prim: \"COMPARE\" },\r\n                    mkPrim({ prim: ex.prim.slice(3), annots: ex.annots }),\r\n                ];\r\n            }\r\n            break;\r\n        case \"IFEQ\":\r\n        case \"IFNEQ\":\r\n        case \"IFLT\":\r\n        case \"IFGT\":\r\n        case \"IFLE\":\r\n        case \"IFGE\":\r\n            if (assertArgs$1(ex, 2)) {\r\n                return [\r\n                    { prim: ex.prim.slice(2) },\r\n                    mkPrim({ prim: \"IF\", annots: ex.annots, args: ex.args }),\r\n                ];\r\n            }\r\n            break;\r\n        case \"IFCMPEQ\":\r\n        case \"IFCMPNEQ\":\r\n        case \"IFCMPLT\":\r\n        case \"IFCMPGT\":\r\n        case \"IFCMPLE\":\r\n        case \"IFCMPGE\":\r\n            if (assertArgs$1(ex, 2)) {\r\n                return [\r\n                    { prim: \"COMPARE\" },\r\n                    { prim: ex.prim.slice(5) },\r\n                    mkPrim({ prim: \"IF\", annots: ex.annots, args: ex.args }),\r\n                ];\r\n            }\r\n            break;\r\n        // Fail\r\n        case \"FAIL\":\r\n            if (assertArgs$1(ex, 0) && assertNoAnnots(ex)) {\r\n                return [\r\n                    { prim: \"UNIT\" },\r\n                    { prim: \"FAILWITH\" },\r\n                ];\r\n            }\r\n            break;\r\n        // Assertion macros\r\n        case \"ASSERT\":\r\n            if (assertArgs$1(ex, 0) && assertNoAnnots(ex)) {\r\n                return [{\r\n                        prim: \"IF\", args: [\r\n                            [],\r\n                            [[{ prim: \"UNIT\" }, { prim: \"FAILWITH\" }]],\r\n                        ]\r\n                    }];\r\n            }\r\n            break;\r\n        case \"ASSERT_EQ\":\r\n        case \"ASSERT_NEQ\":\r\n        case \"ASSERT_LT\":\r\n        case \"ASSERT_GT\":\r\n        case \"ASSERT_LE\":\r\n        case \"ASSERT_GE\":\r\n            if (assertArgs$1(ex, 0) && assertNoAnnots(ex)) {\r\n                return [\r\n                    { prim: ex.prim.slice(7) },\r\n                    {\r\n                        prim: \"IF\", args: [\r\n                            [],\r\n                            [[{ prim: \"UNIT\" }, { prim: \"FAILWITH\" }]],\r\n                        ]\r\n                    },\r\n                ];\r\n            }\r\n            break;\r\n        case \"ASSERT_CMPEQ\":\r\n        case \"ASSERT_CMPNEQ\":\r\n        case \"ASSERT_CMPLT\":\r\n        case \"ASSERT_CMPGT\":\r\n        case \"ASSERT_CMPLE\":\r\n        case \"ASSERT_CMPGE\":\r\n            if (assertArgs$1(ex, 0) && assertNoAnnots(ex)) {\r\n                return [\r\n                    [\r\n                        { prim: \"COMPARE\" },\r\n                        { prim: ex.prim.slice(10) },\r\n                    ],\r\n                    {\r\n                        prim: \"IF\", args: [\r\n                            [],\r\n                            [[{ prim: \"UNIT\" }, { prim: \"FAILWITH\" }]],\r\n                        ]\r\n                    },\r\n                ];\r\n            }\r\n            break;\r\n        case \"ASSERT_NONE\":\r\n            if (assertArgs$1(ex, 0) && assertNoAnnots(ex)) {\r\n                return [{\r\n                        prim: \"IF_NONE\", args: [\r\n                            [],\r\n                            [[{ prim: \"UNIT\" }, { prim: \"FAILWITH\" }]],\r\n                        ]\r\n                    }];\r\n            }\r\n            break;\r\n        case \"ASSERT_SOME\":\r\n            if (assertArgs$1(ex, 0)) {\r\n                return [{\r\n                        prim: \"IF_NONE\", args: [\r\n                            [[{ prim: \"UNIT\" }, { prim: \"FAILWITH\" }]],\r\n                            mayRename(ex.annots),\r\n                        ]\r\n                    }];\r\n            }\r\n            break;\r\n        case \"ASSERT_LEFT\":\r\n            if (assertArgs$1(ex, 0)) {\r\n                return [{\r\n                        prim: \"IF_LEFT\", args: [\r\n                            mayRename(ex.annots),\r\n                            [[{ prim: \"UNIT\" }, { prim: \"FAILWITH\" }]],\r\n                        ]\r\n                    }];\r\n            }\r\n            break;\r\n        case \"ASSERT_RIGHT\":\r\n            if (assertArgs$1(ex, 0)) {\r\n                return [{\r\n                        prim: \"IF_LEFT\", args: [\r\n                            [[{ prim: \"UNIT\" }, { prim: \"FAILWITH\" }]],\r\n                            mayRename(ex.annots),\r\n                        ]\r\n                    }];\r\n            }\r\n            break;\r\n        // Syntactic conveniences\r\n        case \"IF_SOME\":\r\n            if (assertArgs$1(ex, 2)) {\r\n                return [mkPrim({ prim: \"IF_NONE\", annots: ex.annots, args: [ex.args[1], ex.args[0]] })];\r\n            }\r\n            break;\r\n        case \"IF_RIGHT\":\r\n            if (assertArgs$1(ex, 2)) {\r\n                return [mkPrim({ prim: \"IF_LEFT\", annots: ex.annots, args: [ex.args[1], ex.args[0]] })];\r\n            }\r\n            break;\r\n        // CAR/CDR n\r\n        case \"CAR\":\r\n        case \"CDR\":\r\n            if (ex.args !== undefined) {\r\n                if (assertArgs$1(ex, 1) && assertIntArg(ex, ex.args[0])) {\r\n                    var n = parseInt(ex.args[0].int, 10);\r\n                    return mkPrim({\r\n                        prim: \"GET\",\r\n                        args: [{ int: ex.prim === \"CAR\" ? String(n * 2 + 1) : String(n * 2) }],\r\n                        annots: ex.annots,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                return ex;\r\n            }\r\n    }\r\n    // More syntactic conveniences\r\n    // PAPPAIIR macro\r\n    if (pairRe.test(ex.prim)) {\r\n        if (assertArgs$1(ex, 0)) {\r\n            var _a = filterAnnotations(ex.annots), fields = _a.fields, rest_1 = _a.rest;\r\n            var r_1 = parsePairUnpairExpr(ex, ex.prim.slice(1), fields, function (l, r, top) { return __spreadArray(__spreadArray(__spreadArray([], __read((l || []))), __read((r || []))), [top]); }).r;\r\n            return r_1.map(function (_a, i) {\r\n                var _b = __read(_a, 2), v = _b[0], a = _b[1];\r\n                var ann = __spreadArray(__spreadArray([], __read(trimLast(a, null).map(function (v) { return v === null ? \"%\" : v; }))), __read(((v === 0 && i === r_1.length - 1) ? rest_1 : [])));\r\n                var leaf = mkPrim({ prim: \"PAIR\", annots: ann.length !== 0 ? ann : undefined, });\r\n                return v === 0 ? leaf : {\r\n                    prim: \"DIP\",\r\n                    args: v === 1 ? [[leaf]] : [{ int: String(v) }, [leaf]],\r\n                };\r\n            });\r\n        }\r\n    }\r\n    // UNPAPPAIIR macro\r\n    if (unpairRe.test(ex.prim)) {\r\n        if (proto === Protocol.PtEdo2Zk || proto === Protocol.PsFLorena || proto === Protocol.PtGRANADs || proto === Protocol.PtHangzH) {\r\n            if (ex.prim === \"UNPAIR\") {\r\n                return ex;\r\n            }\r\n            if (assertArgs$1(ex, 0)) {\r\n                // 008_edo: annotations are deprecated\r\n                var r = parsePairUnpairExpr(ex, ex.prim.slice(3), [], function (l, r, top) { return __spreadArray(__spreadArray([top], __read((r || []))), __read((l || []))); }).r;\r\n                return r.map(function (_a) {\r\n                    var _b = __read(_a, 1), v = _b[0];\r\n                    var leaf = mkPrim({\r\n                        prim: \"UNPAIR\",\r\n                    });\r\n                    return v === 0 ? leaf : {\r\n                        prim: \"DIP\",\r\n                        args: v === 1 ? [[leaf]] : [{ int: String(v) }, [leaf]],\r\n                    };\r\n                });\r\n            }\r\n        }\r\n        else if (assertArgs$1(ex, 0)) {\r\n            var r = parsePairUnpairExpr(ex, ex.prim.slice(3), ex.annots || [], function (l, r, top) { return __spreadArray(__spreadArray([top], __read((r || []))), __read((l || []))); }).r;\r\n            return r.map(function (_a) {\r\n                var _b = __read(_a, 2), v = _b[0], a = _b[1];\r\n                var leaf = [\r\n                    { prim: \"DUP\" },\r\n                    mkPrim({ prim: \"CAR\", annots: a[0] !== null ? [a[0]] : undefined }),\r\n                    {\r\n                        prim: \"DIP\",\r\n                        args: [[mkPrim({ prim: \"CDR\", annots: a[1] !== null ? [a[1]] : undefined })]],\r\n                    }\r\n                ];\r\n                return v === 0 ? leaf : {\r\n                    prim: \"DIP\",\r\n                    args: v === 1 ? [[leaf]] : [{ int: String(v) }, [leaf]],\r\n                };\r\n            });\r\n        }\r\n    }\r\n    // C[AD]+R macro\r\n    if (cadrRe.test(ex.prim)) {\r\n        if (assertArgs$1(ex, 0)) {\r\n            var ch_1 = __spreadArray([], __read(ex.prim.slice(1, ex.prim.length - 1)));\r\n            return ch_1.map(function (c, i) {\r\n                var ann = i === ch_1.length - 1 ? ex.annots : undefined;\r\n                switch (c) {\r\n                    case \"A\":\r\n                        return mkPrim({ prim: \"CAR\", annots: ann });\r\n                    case \"D\":\r\n                        return mkPrim({ prim: \"CDR\", annots: ann });\r\n                    default:\r\n                        throw new MacroError(ex, \"unexpected character: \" + c);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    // SET_C[AD]+R macro\r\n    if (setCadrRe.test(ex.prim)) {\r\n        if (assertArgs$1(ex, 0)) {\r\n            var _b = filterAnnotations(ex.annots), fields = _b.fields, rest = _b.rest;\r\n            if (fields.length > 1) {\r\n                throw new MacroError(ex, \"unexpected annotation on macro \" + ex.prim + \": \" + fields);\r\n            }\r\n            var term = fields.length !== 0 ?\r\n                {\r\n                    a: [\r\n                        { prim: \"DUP\" },\r\n                        { prim: \"CAR\", annots: fields },\r\n                        { prim: \"DROP\" },\r\n                        { prim: \"CDR\", annots: [\"@%%\"] },\r\n                        { prim: \"SWAP\" },\r\n                        { prim: \"PAIR\", annots: [fields[0], \"%@\"] },\r\n                    ],\r\n                    d: [\r\n                        { prim: \"DUP\" },\r\n                        { prim: \"CDR\", annots: fields },\r\n                        { prim: \"DROP\" },\r\n                        { prim: \"CAR\", annots: [\"@%%\"] },\r\n                        { prim: \"PAIR\", annots: [\"%@\", fields[0]] },\r\n                    ],\r\n                } :\r\n                {\r\n                    a: [\r\n                        { prim: \"CDR\", annots: [\"@%%\"] },\r\n                        { prim: \"SWAP\" },\r\n                        { prim: \"PAIR\", annots: [\"%\", \"%@\"] },\r\n                    ],\r\n                    d: [\r\n                        { prim: \"CAR\", annots: [\"@%%\"] },\r\n                        { prim: \"PAIR\", annots: [\"%@\", \"%\"] },\r\n                    ],\r\n                };\r\n            return parseSetMapCadr(ex, ex.prim.slice(5, ex.prim.length - 1), rest, term);\r\n        }\r\n    }\r\n    // MAP_C[AD]+R macro\r\n    if (mapCadrRe.test(ex.prim)) {\r\n        if (assertArgs$1(ex, 1)) {\r\n            var fields = filterAnnotations(ex.annots).fields;\r\n            if (fields.length > 1) {\r\n                throw new MacroError(ex, \"unexpected annotation on macro \" + ex.prim + \": \" + fields);\r\n            }\r\n            var term = {\r\n                a: [\r\n                    { prim: \"DUP\" },\r\n                    { prim: \"CDR\", annots: [\"@%%\"] },\r\n                    {\r\n                        prim: \"DIP\", args: [[\r\n                                mkPrim({ prim: \"CAR\", annots: fields.length !== 0 ? [\"@\" + fields[0].slice(1)] : undefined }),\r\n                                ex.args[0],\r\n                            ]]\r\n                    },\r\n                    { prim: \"SWAP\" },\r\n                    { prim: \"PAIR\", annots: [fields.length !== 0 ? fields[0] : \"%\", \"%@\"] },\r\n                ],\r\n                d: [\r\n                    { prim: \"DUP\" },\r\n                    mkPrim({ prim: \"CDR\", annots: fields.length !== 0 ? [\"@\" + fields[0].slice(1)] : undefined }),\r\n                    ex.args[0],\r\n                    { prim: \"SWAP\" },\r\n                    { prim: \"CAR\", annots: [\"@%%\"] },\r\n                    { prim: \"PAIR\", annots: [\"%@\", fields.length !== 0 ? fields[0] : \"%\"] },\r\n                ],\r\n            };\r\n            return parseSetMapCadr(ex, ex.prim.slice(5, ex.prim.length - 1), [], term);\r\n        }\r\n    }\r\n    // Expand deprecated DI...IP to [DIP n]\r\n    if (diipRe.test(ex.prim)) {\r\n        if (assertArgs$1(ex, 1)) {\r\n            var n = 0;\r\n            while (ex.prim[1 + n] === \"I\") {\r\n                n++;\r\n            }\r\n            return mkPrim({ prim: \"DIP\", args: [{ int: String(n) }, ex.args[0]] });\r\n        }\r\n    }\r\n    // Expand DU...UP and DUP n\r\n    if (duupRe.test(ex.prim)) {\r\n        var n = 0;\r\n        while (ex.prim[1 + n] === \"U\") {\r\n            n++;\r\n        }\r\n        if (proto === Protocol.PtEdo2Zk || proto === Protocol.PsFLorena || proto === Protocol.PtGRANADs || proto === Protocol.PtHangzH) {\r\n            if (n === 1) {\r\n                return ex;\r\n            }\r\n            if (assertArgs$1(ex, 0)) {\r\n                return mkPrim({ prim: \"DUP\", args: [{ int: String(n) }], annots: ex.annots });\r\n            }\r\n        }\r\n        else {\r\n            if (n === 1) {\r\n                if (ex.args === undefined) {\r\n                    return ex; // skip\r\n                }\r\n                if (assertArgs$1(ex, 1) && assertIntArg(ex, ex.args[0])) {\r\n                    n = parseInt(ex.args[0].int, 10);\r\n                }\r\n            }\r\n            else {\r\n                assertArgs$1(ex, 0);\r\n            }\r\n            if (n === 1) {\r\n                return [mkPrim({ prim: \"DUP\", annots: ex.annots })];\r\n            }\r\n            else if (n === 2) {\r\n                return [\r\n                    {\r\n                        prim: \"DIP\",\r\n                        args: [[mkPrim({ prim: \"DUP\", annots: ex.annots })]],\r\n                    },\r\n                    { prim: \"SWAP\" },\r\n                ];\r\n            }\r\n            else {\r\n                return [\r\n                    {\r\n                        prim: \"DIP\",\r\n                        args: [\r\n                            { int: String(n - 1) },\r\n                            [mkPrim({ prim: \"DUP\", annots: ex.annots })],\r\n                        ],\r\n                    },\r\n                    {\r\n                        prim: \"DIG\",\r\n                        args: [{ int: String(n) }],\r\n                    },\r\n                ];\r\n            }\r\n        }\r\n    }\r\n    return ex;\r\n}\n\nvar MichelineParseError = /** @class */ (function (_super) {\r\n    __extends(MichelineParseError, _super);\r\n    /**\r\n     * @param token A token caused the error\r\n     * @param message An error message\r\n     */\r\n    function MichelineParseError(token, message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.token = token;\r\n        Object.setPrototypeOf(_this, MichelineParseError.prototype);\r\n        return _this;\r\n    }\r\n    return MichelineParseError;\r\n}(Error));\r\nvar JSONParseError = /** @class */ (function (_super) {\r\n    __extends(JSONParseError, _super);\r\n    /**\r\n     * @param node A node caused the error\r\n     * @param message An error message\r\n     */\r\n    function JSONParseError(node, message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.node = node;\r\n        Object.setPrototypeOf(_this, JSONParseError.prototype);\r\n        return _this;\r\n    }\r\n    return JSONParseError;\r\n}(Error));\r\nvar errEOF = new MichelineParseError(null, 'Unexpected EOF');\r\nfunction isAnnotation(tok) {\r\n    return tok.t === Literal.Ident && (tok.v[0] === '@' || tok.v[0] === '%' || tok.v[0] === ':');\r\n}\r\nvar intRe = new RegExp('^-?[0-9]+$');\r\nvar bytesRe = new RegExp('^([0-9a-fA-F]{2})*$');\r\n/**\r\n * Converts and validates Michelson expressions between JSON-based Michelson and Micheline\r\n *\r\n * Pretty Print a Michelson Smart Contract:\r\n * ```\r\n * const contract = await Tezos.contract.at(\"KT1Vsw3kh9638gqWoHTjvHCoHLPKvCbMVbCg\");\r\n * const p = new Parser();\r\n *\r\n * const michelsonCode = p.parseJSON(contract.script.code);\r\n * const storage = p.parseJSON(contract.script.storage);\r\n *\r\n * console.log(\"Pretty print Michelson smart contract:\");\r\n * console.log(emitMicheline(michelsonCode, {indent:\"    \", newline: \"\\n\",}));\r\n *\r\n * console.log(\"Pretty print Storage:\");\r\n * console.log(emitMicheline(storage, {indent:\"    \", newline: \"\\n\",}));\r\n * ```\r\n *\r\n * Encode a Michelson expression for inital storage of a smart contract\r\n * ```\r\n * const src = `(Pair (Pair { Elt 1\r\n *                (Pair (Pair \"tz1gjaF81ZRRvdzjobyfVNsAeSC6PScjfQwN\" \"tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx\")\r\n *                      0x0501000000026869) }\r\n *          10000000)\r\n *    (Pair 2 333))`;\r\n *\r\n * const p = new Parser();\r\n *\r\n * const exp = p.parseMichelineExpression(src);\r\n * console.log(JSON.stringify(exp));\r\n * ```\r\n */\r\nvar Parser = /** @class */ (function () {\r\n    function Parser(opt) {\r\n        this.opt = opt;\r\n    }\r\n    Parser.prototype.expand = function (ex) {\r\n        var _a, _b;\r\n        if (((_a = this.opt) === null || _a === void 0 ? void 0 : _a.expandMacros) !== undefined ? (_b = this.opt) === null || _b === void 0 ? void 0 : _b.expandMacros : true) {\r\n            var ret = expandMacros(ex, this.opt);\r\n            if (ret !== ex) {\r\n                ret[sourceReference] = __assign(__assign({}, (ex[sourceReference] || { first: 0, last: 0 })), { macro: ex });\r\n            }\r\n            return ret;\r\n        }\r\n        else {\r\n            return ex;\r\n        }\r\n    };\r\n    Parser.prototype.parseListExpr = function (scanner, start) {\r\n        var _a;\r\n        var _b;\r\n        var ref = {\r\n            first: start.first,\r\n            last: start.last,\r\n        };\r\n        var expectBracket = start.t === \"(\";\r\n        var tok;\r\n        if (expectBracket) {\r\n            tok = scanner.next();\r\n            if (tok.done) {\r\n                throw errEOF;\r\n            }\r\n            ref.last = tok.value.last;\r\n        }\r\n        else {\r\n            tok = { value: start };\r\n        }\r\n        if (tok.value.t !== Literal.Ident) {\r\n            throw new MichelineParseError(tok.value, \"not an identifier: \" + tok.value.v);\r\n        }\r\n        var ret = (_a = {\r\n                prim: tok.value.v\r\n            },\r\n            _a[sourceReference] = ref,\r\n            _a);\r\n        for (;;) {\r\n            var tok_1 = scanner.next();\r\n            if (tok_1.done) {\r\n                if (expectBracket) {\r\n                    throw errEOF;\r\n                }\r\n                break;\r\n            }\r\n            else if (tok_1.value.t === ')') {\r\n                if (!expectBracket) {\r\n                    throw new MichelineParseError(tok_1.value, \"unexpected closing bracket\");\r\n                }\r\n                ref.last = tok_1.value.last;\r\n                break;\r\n            }\r\n            else if (isAnnotation(tok_1.value)) {\r\n                ret.annots = ret.annots || [];\r\n                ret.annots.push(tok_1.value.v);\r\n                ref.last = tok_1.value.last;\r\n            }\r\n            else {\r\n                ret.args = ret.args || [];\r\n                var arg = this.parseExpr(scanner, tok_1.value);\r\n                ref.last = ((_b = arg[sourceReference]) === null || _b === void 0 ? void 0 : _b.last) || ref.last;\r\n                ret.args.push(arg);\r\n            }\r\n        }\r\n        return this.expand(ret);\r\n    };\r\n    Parser.prototype.parseArgs = function (scanner, start) {\r\n        var _a;\r\n        var _b;\r\n        // Identifier with arguments\r\n        var ref = {\r\n            first: start.first,\r\n            last: start.last,\r\n        };\r\n        var p = (_a = {\r\n                prim: start.v\r\n            },\r\n            _a[sourceReference] = ref,\r\n            _a);\r\n        for (;;) {\r\n            var t = scanner.next();\r\n            if (t.done || t.value.t === '}' || t.value.t === ';') {\r\n                return [p, t];\r\n            }\r\n            if (isAnnotation(t.value)) {\r\n                ref.last = t.value.last;\r\n                p.annots = p.annots || [];\r\n                p.annots.push(t.value.v);\r\n            }\r\n            else {\r\n                var arg = this.parseExpr(scanner, t.value);\r\n                ref.last = ((_b = arg[sourceReference]) === null || _b === void 0 ? void 0 : _b.last) || ref.last;\r\n                p.args = p.args || [];\r\n                p.args.push(arg);\r\n            }\r\n        }\r\n    };\r\n    Parser.prototype.parseSequenceExpr = function (scanner, start) {\r\n        var _a, _b;\r\n        var ref = {\r\n            first: start.first,\r\n            last: start.last,\r\n        };\r\n        var seq = [];\r\n        seq[sourceReference] = ref;\r\n        var expectBracket = start.t === \"{\";\r\n        var tok = start.t === \"{\" ? null : { value: start };\r\n        for (;;) {\r\n            if (tok === null) {\r\n                tok = scanner.next();\r\n                if (!tok.done) {\r\n                    ref.last = tok.value.last;\r\n                }\r\n            }\r\n            if (tok.done) {\r\n                if (expectBracket) {\r\n                    throw errEOF;\r\n                }\r\n                else {\r\n                    return seq;\r\n                }\r\n            }\r\n            if (tok.value.t === \"}\") {\r\n                if (!expectBracket) {\r\n                    throw new MichelineParseError(tok.value, \"unexpected closing bracket\");\r\n                }\r\n                else {\r\n                    return seq;\r\n                }\r\n            }\r\n            else if (tok.value.t === Literal.Ident) {\r\n                // Identifier with arguments\r\n                var _c = __read(this.parseArgs(scanner, tok.value), 2), itm = _c[0], n = _c[1];\r\n                ref.last = ((_a = itm[sourceReference]) === null || _a === void 0 ? void 0 : _a.last) || ref.last;\r\n                seq.push(this.expand(itm));\r\n                tok = n;\r\n            }\r\n            else {\r\n                // Other\r\n                var ex = this.parseExpr(scanner, tok.value);\r\n                ref.last = ((_b = ex[sourceReference]) === null || _b === void 0 ? void 0 : _b.last) || ref.last;\r\n                seq.push(ex);\r\n                tok = null;\r\n            }\r\n            if (tok === null) {\r\n                tok = scanner.next();\r\n                if (!tok.done) {\r\n                    ref.last = tok.value.last;\r\n                }\r\n            }\r\n            if (!tok.done && tok.value.t === \";\") {\r\n                tok = null;\r\n            }\r\n        }\r\n    };\r\n    Parser.prototype.parseExpr = function (scanner, tok) {\r\n        var _a, _b, _c, _d;\r\n        switch (tok.t) {\r\n            case Literal.Ident:\r\n                return this.expand((_a = { prim: tok.v }, _a[sourceReference] = { first: tok.first, last: tok.last }, _a));\r\n            case Literal.Number:\r\n                return _b = { int: tok.v }, _b[sourceReference] = { first: tok.first, last: tok.last }, _b;\r\n            case Literal.String:\r\n                return _c = { string: JSON.parse(tok.v) }, _c[sourceReference] = { first: tok.first, last: tok.last }, _c;\r\n            case Literal.Bytes:\r\n                return _d = { bytes: tok.v.slice(2) }, _d[sourceReference] = { first: tok.first, last: tok.last }, _d;\r\n            case '{':\r\n                return this.parseSequenceExpr(scanner, tok);\r\n            default:\r\n                return this.parseListExpr(scanner, tok);\r\n        }\r\n    };\r\n    /**\r\n     * Parses a Micheline sequence expression, such as smart contract source. Enclosing curly brackets may be omitted.\r\n     * @param src A Micheline sequence `{parameter ...; storage int; code { DUP ; ...};}` or `parameter ...; storage int; code { DUP ; ...};`\r\n     */\r\n    Parser.prototype.parseSequence = function (src) {\r\n        // tslint:disable-next-line: strict-type-predicates\r\n        if (typeof src !== \"string\") {\r\n            throw new TypeError(\"string type was expected, got \" + typeof src + \" instead\");\r\n        }\r\n        var scanner = scan(src);\r\n        var tok = scanner.next();\r\n        if (tok.done) {\r\n            return null;\r\n        }\r\n        return this.parseSequenceExpr(scanner, tok.value);\r\n    };\r\n    /**\r\n     * Parse a Micheline sequence expression. Enclosing curly brackets may be omitted.\r\n     * @param src A Michelson list expression such as `(Pair {Elt \"0\" 0} 0)` or `Pair {Elt \"0\" 0} 0`\r\n     * @returns An AST node or null for empty document.\r\n     */\r\n    Parser.prototype.parseList = function (src) {\r\n        // tslint:disable-next-line: strict-type-predicates\r\n        if (typeof src !== \"string\") {\r\n            throw new TypeError(\"string type was expected, got \" + typeof src + \" instead\");\r\n        }\r\n        var scanner = scan(src);\r\n        var tok = scanner.next();\r\n        if (tok.done) {\r\n            return null;\r\n        }\r\n        return this.parseListExpr(scanner, tok.value);\r\n    };\r\n    /**\r\n     * Parse any Michelson expression\r\n     * @param src A Michelson expression such as `(Pair {Elt \"0\" 0} 0)` or `{parameter ...; storage int; code { DUP ; ...};}`\r\n     * @returns An AST node or null for empty document.\r\n     */\r\n    Parser.prototype.parseMichelineExpression = function (src) {\r\n        // tslint:disable-next-line: strict-type-predicates\r\n        if (typeof src !== \"string\") {\r\n            throw new TypeError(\"string type was expected, got \" + typeof src + \" instead\");\r\n        }\r\n        var scanner = scan(src);\r\n        var tok = scanner.next();\r\n        if (tok.done) {\r\n            return null;\r\n        }\r\n        return this.parseExpr(scanner, tok.value);\r\n    };\r\n    /**\r\n     * Parse a Micheline sequence expression, such as smart contract source. Enclosing curly brackets may be omitted.\r\n     * An alias for `parseSequence`\r\n     * @param src A Micheline sequence `{parameter ...; storage int; code { DUP ; ...};}` or `parameter ...; storage int; code { DUP ; ...};`\r\n     */\r\n    Parser.prototype.parseScript = function (src) {\r\n        return this.parseSequence(src);\r\n    };\r\n    /**\r\n     * Parse a Micheline sequence expression. Enclosing curly brackets may be omitted.\r\n     * An alias for `parseList`\r\n     * @param src A Michelson list expression such as `(Pair {Elt \"0\" 0} 0)` or `Pair {Elt \"0\" 0} 0`\r\n     * @returns An AST node or null for empty document.\r\n     */\r\n    Parser.prototype.parseData = function (src) {\r\n        return this.parseList(src);\r\n    };\r\n    /**\r\n     * Takes a JSON-encoded Michelson, validates it, strips away unneeded properties and optionally expands macros (See {@link ParserOptions}).\r\n     * @param src An object containing JSON-encoded Michelson, usually returned by `JSON.parse()`\r\n     */\r\n    Parser.prototype.parseJSON = function (src) {\r\n        var e_1, _a, e_2, _b, e_3, _c;\r\n        // tslint:disable-next-line: strict-type-predicates\r\n        if (typeof src !== \"object\") {\r\n            throw new TypeError(\"object type was expected, got \" + typeof src + \" instead\");\r\n        }\r\n        if (Array.isArray(src)) {\r\n            var ret = [];\r\n            try {\r\n                for (var src_1 = __values(src), src_1_1 = src_1.next(); !src_1_1.done; src_1_1 = src_1.next()) {\r\n                    var n = src_1_1.value;\r\n                    if (n === null || typeof n !== 'object') {\r\n                        throw new JSONParseError(n, \"unexpected sequence element: \" + n);\r\n                    }\r\n                    ret.push(this.parseJSON(n));\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (src_1_1 && !src_1_1.done && (_a = src_1.return)) _a.call(src_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n            return ret;\r\n        }\r\n        else if ('prim' in src) {\r\n            var p = src;\r\n            if (typeof p.prim === 'string' &&\r\n                (p.annots === undefined || Array.isArray(p.annots)) &&\r\n                (p.args === undefined || Array.isArray(p.args))) {\r\n                var ret = {\r\n                    prim: p.prim,\r\n                };\r\n                if (p.annots !== undefined) {\r\n                    try {\r\n                        for (var _d = __values(p.annots), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                            var a = _e.value;\r\n                            if (typeof a !== 'string') {\r\n                                throw new JSONParseError(a, \"string expected: \" + a);\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_e && !_e.done && (_b = _d.return)) _b.call(_d);\r\n                        }\r\n                        finally { if (e_2) throw e_2.error; }\r\n                    }\r\n                    ret.annots = p.annots;\r\n                }\r\n                if (p.args !== undefined) {\r\n                    ret.args = [];\r\n                    try {\r\n                        for (var _f = __values(p.args), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                            var a = _g.value;\r\n                            if (a === null || typeof a !== 'object') {\r\n                                throw new JSONParseError(a, \"unexpected argument: \" + a);\r\n                            }\r\n                            ret.args.push(this.parseJSON(a));\r\n                        }\r\n                    }\r\n                    catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_g && !_g.done && (_c = _f.return)) _c.call(_f);\r\n                        }\r\n                        finally { if (e_3) throw e_3.error; }\r\n                    }\r\n                }\r\n                return this.expand(ret);\r\n            }\r\n            throw new JSONParseError(src, \"malformed prim expression: \" + src);\r\n        }\r\n        else if ('string' in src) {\r\n            if (typeof src.string === 'string') {\r\n                return { string: src.string };\r\n            }\r\n            throw new JSONParseError(src, \"malformed string literal: \" + src);\r\n        }\r\n        else if ('int' in src) {\r\n            if (typeof src.int === 'string' && intRe.test(src.int)) {\r\n                return { int: src.int };\r\n            }\r\n            throw new JSONParseError(src, \"malformed int literal: \" + src);\r\n        }\r\n        else if ('bytes' in src) {\r\n            if (typeof src.bytes === 'string' &&\r\n                bytesRe.test(src.bytes)) {\r\n                return { bytes: src.bytes };\r\n            }\r\n            throw new JSONParseError(src, \"malformed bytes literal: \" + src);\r\n        }\r\n        else {\r\n            throw new JSONParseError(src, \"unexpected object: \" + src);\r\n        }\r\n    };\r\n    return Parser;\r\n}());\n\nvar Formatter = /** @class */ (function () {\r\n    function Formatter(opt, lev) {\r\n        if (lev === void 0) { lev = 0; }\r\n        this.opt = opt;\r\n        this.lev = lev;\r\n    }\r\n    Formatter.prototype.indent = function (n) {\r\n        var _a;\r\n        if (n === void 0) { n = 0; }\r\n        var ret = \"\";\r\n        if (((_a = this.opt) === null || _a === void 0 ? void 0 : _a.indent) !== undefined) {\r\n            for (var i = this.lev + n; i > 0; i--) {\r\n                ret += this.opt.indent;\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    Object.defineProperty(Formatter.prototype, \"lf\", {\r\n        get: function () {\r\n            var _a;\r\n            return ((_a = this.opt) === null || _a === void 0 ? void 0 : _a.newline) || \"\";\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Formatter.prototype, \"lfsp\", {\r\n        get: function () {\r\n            var _a;\r\n            return ((_a = this.opt) === null || _a === void 0 ? void 0 : _a.newline) || \" \";\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Formatter.prototype.down = function (n) {\r\n        return new Formatter(this.opt, this.lev + n);\r\n    };\r\n    return Formatter;\r\n}());\r\nfunction hasArgs(node) {\r\n    return (\"prim\" in node) &&\r\n        ((node.annots !== undefined && node.annots.length !== 0) ||\r\n            (node.args !== undefined && node.args.length !== 0));\r\n}\r\nfunction isMultiline(node) {\r\n    var e_1, _a;\r\n    if (node.args !== undefined) {\r\n        try {\r\n            for (var _b = __values(node.args), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var a = _c.value;\r\n                if (Array.isArray(a) || hasArgs(a)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction emitExpr(node, f, foldMacros) {\r\n    var e_2, _a, e_3, _b;\r\n    var _c;\r\n    var macro = (_c = node[sourceReference]) === null || _c === void 0 ? void 0 : _c.macro;\r\n    if (foldMacros && macro) {\r\n        return emitExpr(macro, f, foldMacros);\r\n    }\r\n    if (Array.isArray(node)) {\r\n        return emitSeq(node, f, foldMacros);\r\n    }\r\n    else if (\"string\" in node) {\r\n        return JSON.stringify(node.string);\r\n    }\r\n    else if (\"int\" in node) {\r\n        return node.int;\r\n    }\r\n    else if (\"bytes\" in node) {\r\n        return \"0x\" + node.bytes;\r\n    }\r\n    else {\r\n        if ((node.annots === undefined || node.annots.length === 0) &&\r\n            (node.args === undefined || node.args.length === 0)) {\r\n            return node.prim;\r\n        }\r\n        var ret = \"(\" + node.prim;\r\n        if (node.annots !== undefined) {\r\n            try {\r\n                for (var _d = __values(node.annots), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var a = _e.value;\r\n                    ret += \" \" + a;\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n        }\r\n        if (node.args !== undefined) {\r\n            var multiline = isMultiline(node);\r\n            try {\r\n                for (var _f = __values(node.args), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                    var a = _g.value;\r\n                    if (multiline) {\r\n                        ret += f.lfsp + f.indent(1) + emitExpr(a, f.down(1), foldMacros);\r\n                    }\r\n                    else {\r\n                        ret += \" \" + emitExpr(a, f, foldMacros);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\r\n                }\r\n                finally { if (e_3) throw e_3.error; }\r\n            }\r\n        }\r\n        return ret + \")\";\r\n    }\r\n}\r\nfunction emitSeq(node, f, foldMacros) {\r\n    var e_4, _a, e_5, _b, e_6, _c;\r\n    var ret = \"{\" + f.lf;\r\n    var i = node.length;\r\n    try {\r\n        for (var node_1 = __values(node), node_1_1 = node_1.next(); !node_1_1.done; node_1_1 = node_1.next()) {\r\n            var el = node_1_1.value;\r\n            ret += f.indent(1);\r\n            if (\"prim\" in el) {\r\n                ret += el.prim;\r\n                if (el.annots !== undefined) {\r\n                    try {\r\n                        for (var _d = (e_5 = void 0, __values(el.annots)), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                            var a = _e.value;\r\n                            ret += \" \" + a;\r\n                        }\r\n                    }\r\n                    catch (e_5_1) { e_5 = { error: e_5_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_e && !_e.done && (_b = _d.return)) _b.call(_d);\r\n                        }\r\n                        finally { if (e_5) throw e_5.error; }\r\n                    }\r\n                }\r\n                if (el.args !== undefined) {\r\n                    var multiline = isMultiline(el);\r\n                    try {\r\n                        for (var _f = (e_6 = void 0, __values(el.args)), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                            var a = _g.value;\r\n                            if (multiline) {\r\n                                ret += f.lfsp + f.indent(2) + emitExpr(a, f.down(2), foldMacros);\r\n                            }\r\n                            else {\r\n                                ret += \" \" + emitExpr(a, f, foldMacros);\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_6_1) { e_6 = { error: e_6_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_g && !_g.done && (_c = _f.return)) _c.call(_f);\r\n                        }\r\n                        finally { if (e_6) throw e_6.error; }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                ret += emitExpr(el, f.down(1), foldMacros);\r\n            }\r\n            ret += (i > 1 ? \";\" + f.lfsp : f.lf);\r\n            i--;\r\n        }\r\n    }\r\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\r\n    finally {\r\n        try {\r\n            if (node_1_1 && !node_1_1.done && (_a = node_1.return)) _a.call(node_1);\r\n        }\r\n        finally { if (e_4) throw e_4.error; }\r\n    }\r\n    return ret + f.indent() + \"}\";\r\n}\r\n/**\r\n * Formats Micheline expression\r\n * @param expr An AST node\r\n * @param opt Options\r\n */\r\nfunction emitMicheline(expr, opt, foldMacros) {\r\n    if (foldMacros === void 0) { foldMacros = false; }\r\n    // tslint:disable-next-line: strict-type-predicates\r\n    if (typeof expr !== \"object\") {\r\n        throw new TypeError(\"object type was expected, got \" + typeof expr + \" instead\");\r\n    }\r\n    return emitExpr(expr, new Formatter(opt), foldMacros);\r\n}\n\nvar H = [\r\n    0x6a09e667 | 0,\r\n    0xbb67ae85 | 0,\r\n    0x3c6ef372 | 0,\r\n    0xa54ff53a | 0,\r\n    0x510e527f | 0,\r\n    0x9b05688c | 0,\r\n    0x1f83d9ab | 0,\r\n    0x5be0cd19 | 0\r\n];\r\nvar K = [\r\n    0x428a2f98 | 0, 0x71374491 | 0, 0xb5c0fbcf | 0, 0xe9b5dba5 | 0, 0x3956c25b | 0, 0x59f111f1 | 0, 0x923f82a4 | 0, 0xab1c5ed5 | 0,\r\n    0xd807aa98 | 0, 0x12835b01 | 0, 0x243185be | 0, 0x550c7dc3 | 0, 0x72be5d74 | 0, 0x80deb1fe | 0, 0x9bdc06a7 | 0, 0xc19bf174 | 0,\r\n    0xe49b69c1 | 0, 0xefbe4786 | 0, 0x0fc19dc6 | 0, 0x240ca1cc | 0, 0x2de92c6f | 0, 0x4a7484aa | 0, 0x5cb0a9dc | 0, 0x76f988da | 0,\r\n    0x983e5152 | 0, 0xa831c66d | 0, 0xb00327c8 | 0, 0xbf597fc7 | 0, 0xc6e00bf3 | 0, 0xd5a79147 | 0, 0x06ca6351 | 0, 0x14292967 | 0,\r\n    0x27b70a85 | 0, 0x2e1b2138 | 0, 0x4d2c6dfc | 0, 0x53380d13 | 0, 0x650a7354 | 0, 0x766a0abb | 0, 0x81c2c92e | 0, 0x92722c85 | 0,\r\n    0xa2bfe8a1 | 0, 0xa81a664b | 0, 0xc24b8b70 | 0, 0xc76c51a3 | 0, 0xd192e819 | 0, 0xd6990624 | 0, 0xf40e3585 | 0, 0x106aa070 | 0,\r\n    0x19a4c116 | 0, 0x1e376c08 | 0, 0x2748774c | 0, 0x34b0bcb5 | 0, 0x391c0cb3 | 0, 0x4ed8aa4a | 0, 0x5b9cca4f | 0, 0x682e6ff3 | 0,\r\n    0x748f82ee | 0, 0x78a5636f | 0, 0x84c87814 | 0, 0x8cc70208 | 0, 0x90befffa | 0, 0xa4506ceb | 0, 0xbef9a3f7 | 0, 0xc67178f2 | 0\r\n];\r\n// https://tools.ietf.org/html/rfc6234\r\nfunction sha256(msg) {\r\n    var e_1, _a;\r\n    // pad the message\r\n    var r = (msg.length + 9) % 64;\r\n    var pad = r === 0 ? 0 : 64 - r;\r\n    if (msg.length > 268435455) {\r\n        throw new Error(\"sha256: message length is too big: \" + msg.length);\r\n    }\r\n    var l = msg.length << 3;\r\n    var buffer = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(msg)), [\r\n        0x80\r\n    ]), __read((new Array(pad).fill(0)))), [\r\n        0, 0, 0, 0, (l >> 24) & 0xff, (l >> 16) & 0xff, (l >> 8) & 0xff, l & 0xff,\r\n    ]);\r\n    function ror(x, n) {\r\n        return (x >>> n) | (x << (32 - n));\r\n    }\r\n    var h = __spreadArray([], __read(H));\r\n    var w = new Array(64);\r\n    var v = new Array(8);\r\n    for (var offset = 0; offset < buffer.length; offset += 64) {\r\n        var q = offset;\r\n        var i = 0;\r\n        while (i < 16) {\r\n            w[i] = (buffer[q] << 24) | (buffer[q + 1] << 16) | (buffer[q + 2] << 8) | buffer[q + 3];\r\n            q += 4;\r\n            i++;\r\n        }\r\n        while (i < 64) {\r\n            var s0 = ror(w[i - 15], 7) ^ ror(w[i - 15], 18) ^ (w[i - 15] >>> 3);\r\n            var s1 = ror(w[i - 2], 17) ^ ror(w[i - 2], 19) ^ (w[i - 2] >>> 10);\r\n            w[i] = ((s1 | 0) + w[i - 7] + s0 + w[i - 16]) | 0;\r\n            i++;\r\n        }\r\n        for (var i_1 = 0; i_1 < 8; i_1++) {\r\n            v[i_1] = h[i_1];\r\n        }\r\n        for (var i_2 = 0; i_2 < 64; i_2++) {\r\n            var b0 = ror(v[0], 2) ^ ror(v[0], 13) ^ ror(v[0], 22);\r\n            var b1 = ror(v[4], 6) ^ ror(v[4], 11) ^ ror(v[4], 25);\r\n            var t1 = (v[7] + b1 + ((v[4] & v[5]) ^ ((~v[4]) & v[6])) + K[i_2] + w[i_2]) | 0;\r\n            var t2 = (b0 + (((v[0] & v[1]) ^ (v[0] & v[2]) ^ (v[1] & v[2])))) | 0;\r\n            v[7] = v[6];\r\n            v[6] = v[5];\r\n            v[5] = v[4];\r\n            v[4] = (v[3] + t1) | 0;\r\n            v[3] = v[2];\r\n            v[2] = v[1];\r\n            v[1] = v[0];\r\n            v[0] = (t1 + t2) | 0;\r\n        }\r\n        for (var i_3 = 0; i_3 < 8; i_3++) {\r\n            h[i_3] = (h[i_3] + v[i_3]) | 0;\r\n        }\r\n    }\r\n    var digest = [];\r\n    try {\r\n        for (var h_1 = __values(h), h_1_1 = h_1.next(); !h_1_1.done; h_1_1 = h_1.next()) {\r\n            var v_1 = h_1_1.value;\r\n            digest.push((v_1 >> 24) & 0xff);\r\n            digest.push((v_1 >> 16) & 0xff);\r\n            digest.push((v_1 >> 8) & 0xff);\r\n            digest.push(v_1 & 0xff);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (h_1_1 && !h_1_1.done && (_a = h_1.return)) _a.call(h_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return digest;\r\n}\r\nvar base58alphabetFwd = [\r\n    0, 1, 2, 3, 4, 5, 6,\r\n    7, 8, -1, -1, -1, -1, -1, -1,\r\n    -1, 9, 10, 11, 12, 13, 14, 15,\r\n    16, -1, 17, 18, 19, 20, 21, -1,\r\n    22, 23, 24, 25, 26, 27, 28, 29,\r\n    30, 31, 32, -1, -1, -1, -1, -1,\r\n    -1, 33, 34, 35, 36, 37, 38, 39,\r\n    40, 41, 42, 43, -1, 44, 45, 46,\r\n    47, 48, 49, 50, 51, 52, 53, 54,\r\n    55, 56, 57\r\n];\r\nvar base58alphabetBwd = [\r\n    0, 1, 2, 3, 4, 5, 6, 7,\r\n    8, 16, 17, 18, 19, 20, 21, 22,\r\n    23, 25, 26, 27, 28, 29, 31, 32,\r\n    33, 34, 35, 36, 37, 38, 39, 40,\r\n    41, 48, 49, 50, 51, 52, 53, 54,\r\n    55, 56, 57, 58, 60, 61, 62, 63,\r\n    64, 65, 66, 67, 68, 69, 70, 71,\r\n    72, 73\r\n];\r\nfunction byteAt(src, i) {\r\n    var c = src.charCodeAt(i) - 49;\r\n    if (c >= base58alphabetFwd.length || base58alphabetFwd[c] === -1) {\r\n        throw new Error(\"Base58 decoding error: unexpected character at position \" + i + \": \" + src[i]);\r\n    }\r\n    return base58alphabetFwd[c];\r\n}\r\nfunction decodeBase58(src) {\r\n    var acc = [];\r\n    var i = 0;\r\n    // count and skip leading zeros\r\n    while (i < src.length && byteAt(src, i) === 0) {\r\n        i++;\r\n    }\r\n    var zeros = i;\r\n    while (i < src.length) {\r\n        var carry = byteAt(src, i++);\r\n        /*\r\n        for every symbol x\r\n        acc = acc * 58 + x\r\n        where acc is a little endian arbitrary length integer\r\n        */\r\n        var ii = 0;\r\n        while (carry !== 0 || ii < acc.length) {\r\n            var m = (acc[ii] || 0) * 58 + carry;\r\n            acc[ii++] = m % 256;\r\n            carry = Math.floor(m / 256);\r\n        }\r\n    }\r\n    while (zeros-- > 0) {\r\n        acc.push(0);\r\n    }\r\n    return acc.reverse();\r\n}\r\nfunction encodeBase58(src) {\r\n    var acc = [];\r\n    var i = 0;\r\n    // count and skip leading zeros\r\n    while (i < src.length && src[i] === 0) {\r\n        i++;\r\n    }\r\n    var zeros = i;\r\n    while (i < src.length) {\r\n        var carry = src[i++];\r\n        var ii = 0;\r\n        while (carry !== 0 || ii < acc.length) {\r\n            var m = (acc[ii] || 0) * 256 + carry;\r\n            acc[ii++] = m % 58;\r\n            carry = Math.floor(m / 58);\r\n        }\r\n    }\r\n    while (zeros-- > 0) {\r\n        acc.push(0);\r\n    }\r\n    acc.reverse();\r\n    return String.fromCharCode.apply(String, __spreadArray([], __read(acc.map(function (v) { return base58alphabetBwd[v] + 49; }))));\r\n}\r\nfunction decodeBase58Check(src) {\r\n    var buffer = decodeBase58(src);\r\n    if (buffer.length < 4) {\r\n        throw new Error(\"Base58Check decoding error: data is too short \" + buffer.length);\r\n    }\r\n    var data = buffer.slice(0, buffer.length - 4);\r\n    var sum = buffer.slice(buffer.length - 4);\r\n    var computed = sha256(sha256(data));\r\n    if (sum[0] !== computed[0] ||\r\n        sum[1] !== computed[1] ||\r\n        sum[2] !== computed[2] ||\r\n        sum[3] !== computed[3]) {\r\n        throw new Error(\"Base58Check decoding error: invalid checksum\");\r\n    }\r\n    return data;\r\n}\r\nfunction encodeBase58Check(src) {\r\n    var sum = sha256(sha256(src));\r\n    return encodeBase58(__spreadArray(__spreadArray([], __read(src)), __read(sum.slice(0, 4))));\r\n}\n\nvar MichelsonError = /** @class */ (function (_super) {\r\n    __extends(MichelsonError, _super);\r\n    /**\r\n     * @param val Value of a AST node caused the error\r\n     * @param path Path to a node caused the error\r\n     * @param message An error message\r\n     */\r\n    function MichelsonError(val, message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.val = val;\r\n        Object.setPrototypeOf(_this, MichelsonError.prototype);\r\n        return _this;\r\n    }\r\n    return MichelsonError;\r\n}(Error));\r\nfunction isMichelsonError(err) {\r\n    return err instanceof MichelsonError;\r\n}\r\nvar MichelsonTypeError = /** @class */ (function (_super) {\r\n    __extends(MichelsonTypeError, _super);\r\n    /**\r\n     * @param val Value of a type node caused the error\r\n     * @param data Value of a data node caused the error\r\n     * @param message An error message\r\n     */\r\n    function MichelsonTypeError(val, data, message) {\r\n        var _this = _super.call(this, val, message) || this;\r\n        if (data !== undefined) {\r\n            _this.data = data;\r\n        }\r\n        Object.setPrototypeOf(_this, MichelsonTypeError.prototype);\r\n        return _this;\r\n    }\r\n    return MichelsonTypeError;\r\n}(MichelsonError));\r\n// Ad hoc big integer parser\r\nvar LongInteger = /** @class */ (function () {\r\n    function LongInteger(arg) {\r\n        this.neg = false;\r\n        this.buf = [];\r\n        if (arg === undefined) {\r\n            return;\r\n        }\r\n        if (typeof arg === \"string\") {\r\n            for (var i = 0; i < arg.length; i++) {\r\n                var c = arg.charCodeAt(i);\r\n                if (i === 0 && c === 0x2d) {\r\n                    this.neg = true;\r\n                }\r\n                else {\r\n                    if (c < 0x30 || c > 0x39) {\r\n                        throw new Error(\"unexpected character in integer constant: \" + arg[i]);\r\n                    }\r\n                    this.append(c - 0x30);\r\n                }\r\n            }\r\n        }\r\n        else if (arg < 0) {\r\n            this.neg = true;\r\n            this.append(-arg);\r\n        }\r\n        else {\r\n            this.append(arg);\r\n        }\r\n    }\r\n    LongInteger.prototype.append = function (c) {\r\n        var i = 0;\r\n        while (c !== 0 || i < this.buf.length) {\r\n            var m = (this.buf[i] || 0) * 10 + c;\r\n            this.buf[i++] = m % 256;\r\n            c = Math.floor(m / 256);\r\n        }\r\n    };\r\n    LongInteger.prototype.cmp = function (arg) {\r\n        if (this.neg !== arg.neg) {\r\n            return (arg.neg ? 1 : 0) - (this.neg ? 1 : 0);\r\n        }\r\n        else {\r\n            var ret = 0;\r\n            if (this.buf.length !== arg.buf.length) {\r\n                ret = this.buf.length < arg.buf.length ? -1 : 1;\r\n            }\r\n            else if (this.buf.length !== 0) {\r\n                var i = arg.buf.length - 1;\r\n                while (i >= 0 && this.buf[i] === arg.buf[i]) {\r\n                    i--;\r\n                }\r\n                ret = i < 0 ? 0 : this.buf[i] < arg.buf[i] ? -1 : 1;\r\n            }\r\n            return !this.neg ? ret : ret === 0 ? 0 : -ret;\r\n        }\r\n    };\r\n    Object.defineProperty(LongInteger.prototype, \"sign\", {\r\n        get: function () {\r\n            return this.buf.length === 0 ? 0 : this.neg ? -1 : 1;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return LongInteger;\r\n}());\r\nfunction parseBytes(s) {\r\n    var ret = [];\r\n    for (var i = 0; i < s.length; i += 2) {\r\n        var x = parseInt(s.slice(i, i + 2), 16);\r\n        if (Number.isNaN(x)) {\r\n            return null;\r\n        }\r\n        ret.push(x);\r\n    }\r\n    return ret;\r\n}\r\nfunction compareBytes(a, b) {\r\n    if (a.length !== b.length) {\r\n        return a.length < b.length ? -1 : 1;\r\n    }\r\n    else if (a.length !== 0) {\r\n        var i = 0;\r\n        while (i < a.length && a[i] === b[i]) {\r\n            i++;\r\n        }\r\n        return i === a.length ? 0 : a[i] < b[i] ? -1 : 1;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\nfunction isDecimal(x) {\r\n    try {\r\n        // tslint:disable-next-line: no-unused-expression\r\n        new LongInteger(x);\r\n        return true;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\r\nfunction isNatural(x) {\r\n    try {\r\n        return new LongInteger(x).sign >= 0;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\r\nvar annRe = /^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z\\.%@]*)?)$/;\r\nfunction unpackAnnotations(p, opt) {\r\n    var e_1, _a;\r\n    if (Array.isArray(p)) {\r\n        return {};\r\n    }\r\n    var field;\r\n    var type;\r\n    var vars;\r\n    if (p.annots !== undefined) {\r\n        try {\r\n            for (var _b = __values(p.annots), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var v = _c.value;\r\n                if (v.length !== 0) {\r\n                    if (!annRe.test(v) ||\r\n                        (!(opt === null || opt === void 0 ? void 0 : opt.specialVar) && (v === \"@%\" || v === \"@%%\")) ||\r\n                        (!(opt === null || opt === void 0 ? void 0 : opt.specialFields) && v === \"%@\")) {\r\n                        throw new MichelsonError(p, p.prim + \": unexpected annotation: \" + v);\r\n                    }\r\n                    switch (v[0]) {\r\n                        case \"%\":\r\n                            if ((opt === null || opt === void 0 ? void 0 : opt.emptyFields) || v.length > 1) {\r\n                                field = field || [];\r\n                                field.push(v);\r\n                            }\r\n                            break;\r\n                        case \":\":\r\n                            if (v.length > 1) {\r\n                                type = type || [];\r\n                                type.push(v);\r\n                            }\r\n                            break;\r\n                        case \"@\":\r\n                            if ((opt === null || opt === void 0 ? void 0 : opt.emptyVar) || v.length > 1) {\r\n                                vars = vars || [];\r\n                                vars.push(v);\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    }\r\n    return { f: field, t: type, v: vars };\r\n}\r\nvar tezosPrefix = {\r\n    BlockHash: [32, [1, 52]],\r\n    OperationHash: [32, [5, 116]],\r\n    OperationListHash: [32, [133, 233]],\r\n    OperationListListHash: [32, [29, 159, 109]],\r\n    ProtocolHash: [32, [2, 170]],\r\n    ContextHash: [32, [79, 199]],\r\n    ED25519PublicKeyHash: [20, [6, 161, 159]],\r\n    SECP256K1PublicKeyHash: [20, [6, 161, 161]],\r\n    P256PublicKeyHash: [20, [6, 161, 164]],\r\n    ContractHash: [20, [2, 90, 121]],\r\n    CryptoboxPublicKeyHash: [16, [153, 103]],\r\n    ED25519Seed: [32, [13, 15, 58, 7]],\r\n    ED25519PublicKey: [32, [13, 15, 37, 217]],\r\n    SECP256K1SecretKey: [32, [17, 162, 224, 201]],\r\n    P256SecretKey: [32, [16, 81, 238, 189]],\r\n    ED25519EncryptedSeed: [56, [7, 90, 60, 179, 41]],\r\n    SECP256K1EncryptedSecretKey: [56, [9, 237, 241, 174, 150]],\r\n    P256EncryptedSecretKey: [56, [9, 48, 57, 115, 171]],\r\n    SECP256K1PublicKey: [33, [3, 254, 226, 86]],\r\n    P256PublicKey: [33, [3, 178, 139, 127]],\r\n    SECP256K1Scalar: [33, [38, 248, 136]],\r\n    SECP256K1Element: [33, [5, 92, 0]],\r\n    ED25519SecretKey: [64, [43, 246, 78, 7]],\r\n    ED25519Signature: [64, [9, 245, 205, 134, 18]],\r\n    SECP256K1Signature: [64, [13, 115, 101, 19, 63]],\r\n    P256Signature: [64, [54, 240, 44, 52]],\r\n    GenericSignature: [64, [4, 130, 43]],\r\n    ChainID: [4, [87, 82, 0]],\r\n};\r\nfunction checkDecodeTezosID(id) {\r\n    var e_2, _a;\r\n    var types = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        types[_i - 1] = arguments[_i];\r\n    }\r\n    var buf = decodeBase58Check(id);\r\n    try {\r\n        for (var types_1 = __values(types), types_1_1 = types_1.next(); !types_1_1.done; types_1_1 = types_1.next()) {\r\n            var t = types_1_1.value;\r\n            var _b = __read(tezosPrefix[t], 2), plen = _b[0], p = _b[1];\r\n            if (buf.length === plen + p.length) {\r\n                var i = 0;\r\n                while (i < p.length && buf[i] === p[i]) {\r\n                    i++;\r\n                }\r\n                if (i === p.length) {\r\n                    return [t, buf.slice(p.length)];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n    finally {\r\n        try {\r\n            if (types_1_1 && !types_1_1.done && (_a = types_1.return)) _a.call(types_1);\r\n        }\r\n        finally { if (e_2) throw e_2.error; }\r\n    }\r\n    return null;\r\n}\r\nfunction encodeTezosID(id, data) {\r\n    var _a = __read(tezosPrefix[id], 2), plen = _a[0], p = _a[1];\r\n    if (data.length !== plen) {\r\n        throw new Error(\"incorrect data length for \" + id + \": \" + data.length);\r\n    }\r\n    return encodeBase58Check(__spreadArray(__spreadArray([], __read(p)), __read(data)));\r\n}\r\nfunction unpackComb(id, v) {\r\n    var vv = v;\r\n    var args = Array.isArray(vv) ? vv : vv.args;\r\n    if (args.length === 2) {\r\n        // it's a way to make a union of two interfaces not an interface with two independent properties of union types\r\n        var ret = id === \"pair\" ? {\r\n            prim: \"pair\",\r\n            args: args,\r\n        } : {\r\n            prim: \"Pair\",\r\n            args: args,\r\n        };\r\n        return ret;\r\n    }\r\n    return __assign(__assign({}, (Array.isArray(vv) ? { prim: id } : vv)), { args: [\r\n            args[0],\r\n            {\r\n                prim: id,\r\n                args: args.slice(1),\r\n            },\r\n        ] });\r\n}\r\nfunction isPairType(t) {\r\n    return Array.isArray(t) || t.prim === \"pair\";\r\n}\r\nfunction isPairData(d) {\r\n    return Array.isArray(d) || \"prim\" in d && d.prim === \"Pair\";\r\n}\r\nvar rfc3339Re = /^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;\r\nfunction parseDate(a) {\r\n    if (\"string\" in a) {\r\n        if (isNatural(a.string)) {\r\n            return new Date(parseInt(a.string, 10));\r\n        }\r\n        else if (rfc3339Re.test(a.string)) {\r\n            var x = new Date(a.string);\r\n            if (!Number.isNaN(x.valueOf)) {\r\n                return x;\r\n            }\r\n        }\r\n    }\r\n    else if (isNatural(a.int)) {\r\n        return new Date(parseInt(a.int, 10));\r\n    }\r\n    return null;\r\n}\r\nfunction parseHex(s) {\r\n    var res = [];\r\n    for (var i = 0; i < s.length; i += 2) {\r\n        var ss = s.slice(i, i + 2);\r\n        var x = parseInt(ss, 16);\r\n        if (Number.isNaN(x)) {\r\n            throw new Error(\"can't parse hex byte: \" + ss);\r\n        }\r\n        res.push(x);\r\n    }\r\n    return res;\r\n}\r\nfunction hexBytes(bytes) {\r\n    return bytes.map(function (x) { return ((x >> 4) & 0xf).toString(16) + (x & 0xf).toString(16); }).join(\"\");\r\n}\n\n// Michelson validator\r\nvar noArgInstructionIDs = {\r\n    \"ABS\": true, \"ADD\": true, \"ADDRESS\": true, \"AMOUNT\": true, \"AND\": true, \"APPLY\": true, \"BALANCE\": true,\r\n    \"BLAKE2B\": true, \"CAR\": true, \"CDR\": true, \"CHAIN_ID\": true, \"CHECK_SIGNATURE\": true, \"COMPARE\": true, \"CONCAT\": true, \"CONS\": true, \"EDIV\": true,\r\n    \"EQ\": true, \"EXEC\": true, \"FAILWITH\": true, \"GE\": true, \"GET_AND_UPDATE\": true, \"GT\": true, \"HASH_KEY\": true, \"IMPLICIT_ACCOUNT\": true,\r\n    \"INT\": true, \"ISNAT\": true, \"JOIN_TICKETS\": true, \"KECCAK\": true, \"LE\": true, \"LEVEL\": true, \"LSL\": true, \"LSR\": true, \"LT\": true, \"MEM\": true, \"MUL\": true,\r\n    \"NEG\": true, \"NEQ\": true, \"NEVER\": true, \"NOT\": true, \"NOW\": true, \"OR\": true, \"PACK\": true, \"PAIRING_CHECK\": true, \"READ_TICKET\": true,\r\n    \"SAPLING_VERIFY_UPDATE\": true, \"SELF\": true, \"SELF_ADDRESS\": true, \"SENDER\": true, \"SET_DELEGATE\": true, \"SHA256\": true, \"SHA3\": true,\r\n    \"SHA512\": true, \"SIZE\": true, \"SLICE\": true, \"SOME\": true, \"SOURCE\": true, \"SPLIT_TICKET\": true, \"SUB\": true, \"SWAP\": true, \"TICKET\": true,\r\n    \"TOTAL_VOTING_POWER\": true, \"TRANSFER_TOKENS\": true, \"UNIT\": true, \"VOTING_POWER\": true, \"XOR\": true, \"RENAME\": true,\r\n};\r\nvar instructionIDs = Object.assign({}, noArgInstructionIDs, {\r\n    \"CONTRACT\": true, \"CREATE_CONTRACT\": true, \"DIG\": true, \"DIP\": true, \"DROP\": true,\r\n    \"DUG\": true, \"DUP\": true, \"EMPTY_BIG_MAP\": true, \"EMPTY_MAP\": true, \"EMPTY_SET\": true, \"GET\": true, \"IF\": true, \"IF_CONS\": true, \"IF_LEFT\": true,\r\n    \"IF_NONE\": true, \"ITER\": true, \"LAMBDA\": true, \"LEFT\": true, \"LOOP\": true, \"LOOP_LEFT\": true, \"MAP\": true, \"NIL\": true, \"NONE\": true, \"PAIR\": true,\r\n    \"PUSH\": true, \"RIGHT\": true, \"SAPLING_EMPTY_STATE\": true, \"UNPACK\": true, \"UNPAIR\": true, \"UPDATE\": true, \"CAST\": true,\r\n});\r\nvar simpleComparableTypeIDs = {\r\n    \"unit\": true, \"never\": true, \"bool\": true, \"int\": true, \"nat\": true, \"string\": true,\r\n    \"chain_id\": true, \"bytes\": true, \"mutez\": true, \"key_hash\": true, \"key\": true,\r\n    \"signature\": true, \"timestamp\": true, \"address\": true,\r\n};\r\nvar typeIDs = Object.assign({}, simpleComparableTypeIDs, {\r\n    \"or\": true, \"pair\": true, \"set\": true, \"big_map\": true, \"contract\": true, \"lambda\": true,\r\n    \"list\": true, \"map\": true, \"operation\": true, \"option\": true, \"bls12_381_g1\": true,\r\n    \"bls12_381_g2\": true, \"bls12_381_fr\": true, \"sapling_transaction\": true, \"sapling_state\": true, \"ticket\": true,\r\n});\r\nvar MichelsonValidationError = /** @class */ (function (_super) {\r\n    __extends(MichelsonValidationError, _super);\r\n    /**\r\n     * @param val Value of a node caused the error\r\n     * @param message An error message\r\n     */\r\n    function MichelsonValidationError(val, message) {\r\n        var _this = _super.call(this, val, message) || this;\r\n        _this.val = val;\r\n        Object.setPrototypeOf(_this, MichelsonValidationError.prototype);\r\n        return _this;\r\n    }\r\n    return MichelsonValidationError;\r\n}(MichelsonError));\r\nfunction isPrim(ex) {\r\n    return \"prim\" in ex;\r\n}\r\nfunction isPrimOrSeq(ex) {\r\n    return Array.isArray(ex) || \"prim\" in ex;\r\n}\r\nfunction assertPrim(ex) {\r\n    if (isPrim(ex)) {\r\n        return true;\r\n    }\r\n    throw new MichelsonValidationError(ex, \"prim expression expected\");\r\n}\r\nfunction assertSeq(ex) {\r\n    if (Array.isArray(ex)) {\r\n        return true;\r\n    }\r\n    throw new MichelsonValidationError(ex, \"sequence expression expected\");\r\n}\r\nfunction assertPrimOrSeq(ex) {\r\n    if (isPrimOrSeq(ex)) {\r\n        return true;\r\n    }\r\n    throw new MichelsonValidationError(ex, \"prim or sequence expression expected\");\r\n}\r\nfunction assertNatural(i) {\r\n    if (i.int[0] === \"-\") {\r\n        throw new MichelsonValidationError(i, \"natural number expected\");\r\n    }\r\n}\r\nfunction assertIntLiteral(ex) {\r\n    if (\"int\" in ex) {\r\n        return true;\r\n    }\r\n    throw new MichelsonValidationError(ex, \"int literal expected\");\r\n}\r\nfunction assertArgs(ex, n) {\r\n    var _a;\r\n    if ((n === 0 && ex.args === undefined) || ((_a = ex.args) === null || _a === void 0 ? void 0 : _a.length) === n) {\r\n        return true;\r\n    }\r\n    throw new MichelsonValidationError(ex, n + \" arguments expected\");\r\n}\r\n/**\r\n * Checks if the node is a valid Michelson code (sequence of instructions).\r\n * This is a type guard function which either returns true of throws an exception.\r\n * @param ex An AST node\r\n */\r\nfunction assertMichelsonInstruction(ex) {\r\n    var e_1, _a;\r\n    var _b, _c;\r\n    if (Array.isArray(ex)) {\r\n        try {\r\n            for (var ex_1 = __values(ex), ex_1_1 = ex_1.next(); !ex_1_1.done; ex_1_1 = ex_1.next()) {\r\n                var n = ex_1_1.value;\r\n                if (!Array.isArray(n) && !isPrim(n)) {\r\n                    throw new MichelsonValidationError(ex, \"sequence or prim expected\");\r\n                }\r\n                assertMichelsonInstruction(n);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (ex_1_1 && !ex_1_1.done && (_a = ex_1.return)) _a.call(ex_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return true;\r\n    }\r\n    if (assertPrim(ex)) {\r\n        if (Object.prototype.hasOwnProperty.call(noArgInstructionIDs, ex.prim)) {\r\n            assertArgs(ex, 0);\r\n            return true;\r\n        }\r\n        switch (ex.prim) {\r\n            case \"DROP\":\r\n            case \"PAIR\":\r\n            case \"UNPAIR\":\r\n            case \"DUP\":\r\n            case \"UPDATE\":\r\n            case \"GET\":\r\n                if (ex.args !== undefined && assertArgs(ex, 1)) {\r\n                    /* istanbul ignore else */\r\n                    if (assertIntLiteral(ex.args[0])) {\r\n                        assertNatural(ex.args[0]);\r\n                    }\r\n                }\r\n                break;\r\n            case \"DIG\":\r\n            case \"DUG\":\r\n            case \"SAPLING_EMPTY_STATE\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 1)) {\r\n                    /* istanbul ignore else */\r\n                    if (assertIntLiteral(ex.args[0])) {\r\n                        assertNatural(ex.args[0]);\r\n                    }\r\n                }\r\n                break;\r\n            case \"NONE\":\r\n            case \"LEFT\":\r\n            case \"RIGHT\":\r\n            case \"NIL\":\r\n            case \"CAST\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 1)) {\r\n                    assertMichelsonType(ex.args[0]);\r\n                }\r\n                break;\r\n            case \"UNPACK\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 1)) {\r\n                    assertMichelsonPackableType(ex.args[0]);\r\n                }\r\n                break;\r\n            case \"CONTRACT\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 1)) {\r\n                    assertMichelsonPassableType(ex.args[0]);\r\n                }\r\n                break;\r\n            case \"IF_NONE\":\r\n            case \"IF_LEFT\":\r\n            case \"IF_CONS\":\r\n            case \"IF\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 2)) {\r\n                    /* istanbul ignore else */\r\n                    if (assertSeq(ex.args[0])) {\r\n                        assertMichelsonInstruction(ex.args[0]);\r\n                    }\r\n                    /* istanbul ignore else */\r\n                    if (assertSeq(ex.args[1])) {\r\n                        assertMichelsonInstruction(ex.args[1]);\r\n                    }\r\n                }\r\n                break;\r\n            case \"MAP\":\r\n            case \"ITER\":\r\n            case \"LOOP\":\r\n            case \"LOOP_LEFT\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 1)) {\r\n                    assertMichelsonInstruction(ex.args[0]);\r\n                }\r\n                break;\r\n            case \"CREATE_CONTRACT\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 1)) {\r\n                    assertMichelsonContract(ex.args[0]);\r\n                }\r\n                break;\r\n            case \"DIP\":\r\n                if (((_b = ex.args) === null || _b === void 0 ? void 0 : _b.length) === 2) {\r\n                    /* istanbul ignore else */\r\n                    if (assertIntLiteral(ex.args[0])) {\r\n                        assertNatural(ex.args[0]);\r\n                    }\r\n                    /* istanbul ignore else */\r\n                    if (assertSeq(ex.args[1])) {\r\n                        assertMichelsonInstruction(ex.args[1]);\r\n                    }\r\n                }\r\n                else if (((_c = ex.args) === null || _c === void 0 ? void 0 : _c.length) === 1) {\r\n                    /* istanbul ignore else */\r\n                    if (assertSeq(ex.args[0])) {\r\n                        assertMichelsonInstruction(ex.args[0]);\r\n                    }\r\n                }\r\n                else {\r\n                    throw new MichelsonValidationError(ex, \"1 or 2 arguments expected\");\r\n                }\r\n                break;\r\n            case \"PUSH\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 2)) {\r\n                    assertMichelsonPushableType(ex.args[0]);\r\n                    assertMichelsonData(ex.args[1]);\r\n                }\r\n                break;\r\n            case \"EMPTY_SET\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 1)) {\r\n                    assertMichelsonComparableType(ex.args[0]);\r\n                }\r\n                break;\r\n            case \"EMPTY_MAP\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 2)) {\r\n                    assertMichelsonComparableType(ex.args[0]);\r\n                    assertMichelsonType(ex.args[1]);\r\n                }\r\n                break;\r\n            case \"EMPTY_BIG_MAP\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 2)) {\r\n                    assertMichelsonComparableType(ex.args[0]);\r\n                    assertMichelsonBigMapStorableType(ex.args[1]);\r\n                }\r\n                break;\r\n            case \"LAMBDA\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 3)) {\r\n                    assertMichelsonType(ex.args[0]);\r\n                    assertMichelsonType(ex.args[1]);\r\n                    /* istanbul ignore else */\r\n                    if (assertSeq(ex.args[2])) {\r\n                        assertMichelsonInstruction(ex.args[2]);\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                throw new MichelsonValidationError(ex, \"instruction expected\");\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction assertMichelsonComparableType(ex) {\r\n    /* istanbul ignore else */\r\n    if (assertPrimOrSeq(ex)) {\r\n        if (Array.isArray(ex) || ex.prim === \"pair\" || ex.prim === \"or\" || ex.prim === \"option\") {\r\n            traverseType(ex, function (ex) { return assertMichelsonComparableType(ex); });\r\n        }\r\n        else if (!Object.prototype.hasOwnProperty.call(simpleComparableTypeIDs, ex.prim)) {\r\n            throw new MichelsonValidationError(ex, ex.prim + \": type is not comparable\");\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction assertMichelsonPackableType(ex) {\r\n    /* istanbul ignore else */\r\n    if (assertPrimOrSeq(ex)) {\r\n        if (isPrim(ex)) {\r\n            if (!Object.prototype.hasOwnProperty.call(typeIDs, ex.prim) ||\r\n                ex.prim === \"big_map\" ||\r\n                ex.prim === \"operation\" ||\r\n                ex.prim === \"sapling_state\" ||\r\n                ex.prim === \"ticket\") {\r\n                throw new MichelsonValidationError(ex, ex.prim + \": type can't be used inside PACK/UNPACK instructions\");\r\n            }\r\n            traverseType(ex, function (ex) { return assertMichelsonPackableType(ex); });\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction assertMichelsonPushableType(ex) {\r\n    /* istanbul ignore else */\r\n    if (assertPrimOrSeq(ex)) {\r\n        if (isPrim(ex)) {\r\n            if (!Object.prototype.hasOwnProperty.call(typeIDs, ex.prim) ||\r\n                ex.prim === \"big_map\" ||\r\n                ex.prim === \"operation\" ||\r\n                ex.prim === \"sapling_state\" ||\r\n                ex.prim === \"ticket\" ||\r\n                ex.prim === \"contract\") {\r\n                throw new MichelsonValidationError(ex, ex.prim + \": type can't be pushed\");\r\n            }\r\n            traverseType(ex, function (ex) { return assertMichelsonPushableType(ex); });\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction assertMichelsonStorableType(ex) {\r\n    /* istanbul ignore else */\r\n    if (assertPrimOrSeq(ex)) {\r\n        if (isPrim(ex)) {\r\n            if (!Object.prototype.hasOwnProperty.call(typeIDs, ex.prim) ||\r\n                ex.prim === \"operation\" ||\r\n                ex.prim === \"contract\") {\r\n                throw new MichelsonValidationError(ex, ex.prim + \": type can't be used as part of a storage\");\r\n            }\r\n            traverseType(ex, function (ex) { return assertMichelsonStorableType(ex); });\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction assertMichelsonPassableType(ex) {\r\n    /* istanbul ignore else */\r\n    if (assertPrimOrSeq(ex)) {\r\n        if (isPrim(ex)) {\r\n            if (!Object.prototype.hasOwnProperty.call(typeIDs, ex.prim) ||\r\n                ex.prim === \"operation\") {\r\n                throw new MichelsonValidationError(ex, ex.prim + \": type can't be used as part of a parameter\");\r\n            }\r\n            traverseType(ex, function (ex) { return assertMichelsonPassableType(ex); });\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction assertMichelsonBigMapStorableType(ex) {\r\n    /* istanbul ignore else */\r\n    if (assertPrimOrSeq(ex)) {\r\n        if (isPrim(ex)) {\r\n            if (!Object.prototype.hasOwnProperty.call(typeIDs, ex.prim) ||\r\n                ex.prim === \"big_map\" ||\r\n                ex.prim === \"operation\" ||\r\n                ex.prim === \"sapling_state\") {\r\n                throw new MichelsonValidationError(ex, ex.prim + \": type can't be used inside a big_map\");\r\n            }\r\n            traverseType(ex, function (ex) { return assertMichelsonBigMapStorableType(ex); });\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Checks if the node is a valid Michelson type expression.\r\n * This is a type guard function which either returns true of throws an exception.\r\n * @param ex An AST node\r\n */\r\nfunction assertMichelsonType(ex) {\r\n    /* istanbul ignore else */\r\n    if (assertPrimOrSeq(ex)) {\r\n        if (isPrim(ex)) {\r\n            if (!Object.prototype.hasOwnProperty.call(typeIDs, ex.prim)) {\r\n                throw new MichelsonValidationError(ex, \"type expected\");\r\n            }\r\n            traverseType(ex, function (ex) { return assertMichelsonType(ex); });\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction traverseType(ex, cb) {\r\n    if (Array.isArray(ex) || ex.prim === \"pair\") {\r\n        var args = Array.isArray(ex) ? ex : ex.args;\r\n        if (args === undefined || args.length < 2) {\r\n            throw new MichelsonValidationError(ex, \"at least 2 arguments expected\");\r\n        }\r\n        args.forEach(function (a) {\r\n            if (assertPrimOrSeq(a)) {\r\n                cb(a);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    switch (ex.prim) {\r\n        case \"option\":\r\n        case \"list\":\r\n            /* istanbul ignore else */\r\n            if (assertArgs(ex, 1) && assertPrimOrSeq(ex.args[0])) {\r\n                cb(ex.args[0]);\r\n            }\r\n            break;\r\n        case \"contract\":\r\n            /* istanbul ignore else */\r\n            if (assertArgs(ex, 1)) {\r\n                assertMichelsonPassableType(ex.args[0]);\r\n            }\r\n            break;\r\n        case \"or\":\r\n            /* istanbul ignore else */\r\n            if (assertArgs(ex, 2) && assertPrimOrSeq(ex.args[0]) && assertPrimOrSeq(ex.args[1])) {\r\n                cb(ex.args[0]);\r\n                cb(ex.args[1]);\r\n            }\r\n            break;\r\n        case \"lambda\":\r\n            /* istanbul ignore else */\r\n            if (assertArgs(ex, 2)) {\r\n                assertMichelsonType(ex.args[0]);\r\n                assertMichelsonType(ex.args[1]);\r\n            }\r\n            break;\r\n        case \"set\":\r\n            /* istanbul ignore else */\r\n            if (assertArgs(ex, 1)) {\r\n                assertMichelsonComparableType(ex.args[0]);\r\n            }\r\n            break;\r\n        case \"map\":\r\n            /* istanbul ignore else */\r\n            if (assertArgs(ex, 2) && assertPrimOrSeq(ex.args[0]) && assertPrimOrSeq(ex.args[1])) {\r\n                assertMichelsonComparableType(ex.args[0]);\r\n                cb(ex.args[1]);\r\n            }\r\n            break;\r\n        case \"big_map\":\r\n            /* istanbul ignore else */\r\n            if (assertArgs(ex, 2) && assertPrimOrSeq(ex.args[0]) && assertPrimOrSeq(ex.args[1])) {\r\n                assertMichelsonComparableType(ex.args[0]);\r\n                assertMichelsonBigMapStorableType(ex.args[1]);\r\n                cb(ex.args[1]);\r\n            }\r\n            break;\r\n        case \"ticket\":\r\n            /* istanbul ignore else */\r\n            if (assertArgs(ex, 1) && assertPrimOrSeq(ex.args[0])) {\r\n                assertMichelsonComparableType(ex.args[0]);\r\n            }\r\n            break;\r\n        case \"sapling_state\":\r\n        case \"sapling_transaction\":\r\n            if (assertArgs(ex, 1)) {\r\n                assertIntLiteral(ex.args[0]);\r\n            }\r\n            break;\r\n        default:\r\n            assertArgs(ex, 0);\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Checks if the node is a valid Michelson data literal such as `(Pair {Elt \"0\" 0} 0)`.\r\n * This is a type guard function which either returns true of throws an exception.\r\n * @param ex An AST node\r\n */\r\nfunction assertMichelsonData(ex) {\r\n    var e_2, _a, e_3, _b;\r\n    if ((\"int\" in ex) || (\"string\" in ex) || (\"bytes\" in ex)) {\r\n        return true;\r\n    }\r\n    if (Array.isArray(ex)) {\r\n        var mapElts = 0;\r\n        try {\r\n            for (var ex_2 = __values(ex), ex_2_1 = ex_2.next(); !ex_2_1.done; ex_2_1 = ex_2.next()) {\r\n                var n = ex_2_1.value;\r\n                if (isPrim(n) && n.prim === \"Elt\") {\r\n                    /* istanbul ignore else */\r\n                    if (assertArgs(n, 2)) {\r\n                        assertMichelsonData(n.args[0]);\r\n                        assertMichelsonData(n.args[1]);\r\n                    }\r\n                    mapElts++;\r\n                }\r\n                else {\r\n                    assertMichelsonData(n);\r\n                }\r\n            }\r\n        }\r\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n        finally {\r\n            try {\r\n                if (ex_2_1 && !ex_2_1.done && (_a = ex_2.return)) _a.call(ex_2);\r\n            }\r\n            finally { if (e_2) throw e_2.error; }\r\n        }\r\n        if (mapElts !== 0 && mapElts !== ex.length) {\r\n            throw new MichelsonValidationError(ex, \"data entries and map elements can't be intermixed\");\r\n        }\r\n        return true;\r\n    }\r\n    if (isPrim(ex)) {\r\n        switch (ex.prim) {\r\n            case \"Unit\":\r\n            case \"True\":\r\n            case \"False\":\r\n            case \"None\":\r\n                assertArgs(ex, 0);\r\n                break;\r\n            case \"Pair\":\r\n                /* istanbul ignore else */\r\n                if (ex.args === undefined || ex.args.length < 2) {\r\n                    throw new MichelsonValidationError(ex, \"at least 2 arguments expected\");\r\n                }\r\n                try {\r\n                    for (var _c = __values(ex.args), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                        var a = _d.value;\r\n                        assertMichelsonData(a);\r\n                    }\r\n                }\r\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\r\n                    }\r\n                    finally { if (e_3) throw e_3.error; }\r\n                }\r\n                break;\r\n            case \"Left\":\r\n            case \"Right\":\r\n            case \"Some\":\r\n                /* istanbul ignore else */\r\n                if (assertArgs(ex, 1)) {\r\n                    assertMichelsonData(ex.args[0]);\r\n                }\r\n                break;\r\n            default:\r\n                if (Object.prototype.hasOwnProperty.call(instructionIDs, ex.prim)) {\r\n                    assertMichelsonInstruction(ex);\r\n                }\r\n                else {\r\n                    throw new MichelsonValidationError(ex, \"data entry or instruction expected\");\r\n                }\r\n        }\r\n    }\r\n    else {\r\n        throw new MichelsonValidationError(ex, \"data entry expected\");\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Checks if the node is a valid Michelson smart contract source containing all required and valid properties such as `parameter`, `storage` and `code`.\r\n * This is a type guard function which either returns true of throws an exception.\r\n * @param ex An AST node\r\n */\r\nfunction assertMichelsonContract(ex) {\r\n    var e_4, _a;\r\n    /* istanbul ignore else */\r\n    if (assertSeq(ex)) {\r\n        var ent = {};\r\n        try {\r\n            for (var ex_3 = __values(ex), ex_3_1 = ex_3.next(); !ex_3_1.done; ex_3_1 = ex_3.next()) {\r\n                var sec = ex_3_1.value;\r\n                if (assertPrim(sec)) {\r\n                    if (sec.prim !== \"code\" && sec.prim !== \"parameter\" && sec.prim !== \"storage\") {\r\n                        throw new MichelsonValidationError(ex, \"unexpected contract section: \" + sec.prim);\r\n                    }\r\n                    if (sec.prim in ent) {\r\n                        throw new MichelsonValidationError(ex, \"duplicate contract section: \" + sec.prim);\r\n                    }\r\n                    ent[sec.prim] = true;\r\n                    /* istanbul ignore else */\r\n                    if (assertArgs(sec, 1)) {\r\n                        switch (sec.prim) {\r\n                            case \"code\":\r\n                                /* istanbul ignore else */\r\n                                if (assertSeq(sec.args[0])) {\r\n                                    assertMichelsonInstruction(sec.args[0]);\r\n                                }\r\n                                break;\r\n                            case \"parameter\":\r\n                                assertMichelsonPassableType(sec.args[0]);\r\n                                break;\r\n                            case \"storage\":\r\n                                assertMichelsonStorableType(sec.args[0]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\r\n        finally {\r\n            try {\r\n                if (ex_3_1 && !ex_3_1.done && (_a = ex_3.return)) _a.call(ex_3);\r\n            }\r\n            finally { if (e_4) throw e_4.error; }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Checks if the node is a valid Michelson smart contract source containing all required and valid properties such as `parameter`, `storage` and `code`.\r\n * @param ex An AST node\r\n */\r\nfunction isMichelsonScript(ex) {\r\n    try {\r\n        assertMichelsonContract(ex);\r\n        return true;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Checks if the node is a valid Michelson data literal such as `(Pair {Elt \"0\" 0} 0)`.\r\n * @param ex An AST node\r\n */\r\nfunction isMichelsonData(ex) {\r\n    try {\r\n        assertMichelsonData(ex);\r\n        return true;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Checks if the node is a valid Michelson code (sequence of instructions).\r\n * @param ex An AST node\r\n */\r\nfunction isMichelsonCode(ex) {\r\n    try {\r\n        assertMichelsonInstruction(ex);\r\n        return true;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Checks if the node is a valid Michelson type expression.\r\n * @param ex An AST node\r\n */\r\nfunction isMichelsonType(ex) {\r\n    try {\r\n        assertMichelsonType(ex);\r\n        return true;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\r\nfunction isInstruction(p) {\r\n    return Object.prototype.hasOwnProperty.call(instructionIDs, p.prim);\r\n}\r\nfunction assertDataListIfAny(d) {\r\n    var e_5, _a;\r\n    if (!Array.isArray(d)) {\r\n        return false;\r\n    }\r\n    try {\r\n        for (var d_1 = __values(d), d_1_1 = d_1.next(); !d_1_1.done; d_1_1 = d_1.next()) {\r\n            var v = d_1_1.value;\r\n            if (\"prim\" in v) {\r\n                if (isInstruction(v)) {\r\n                    throw new MichelsonError(d, \"Instruction outside of a lambda: \" + JSON.stringify(d));\r\n                }\r\n                else if (v.prim === \"Elt\") {\r\n                    throw new MichelsonError(d, \"Elt item outside of a map literal: \" + JSON.stringify(d));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    catch (e_5_1) { e_5 = { error: e_5_1 }; }\r\n    finally {\r\n        try {\r\n            if (d_1_1 && !d_1_1.done && (_a = d_1.return)) _a.call(d_1);\r\n        }\r\n        finally { if (e_5) throw e_5.error; }\r\n    }\r\n    return true;\r\n}\n\nvar primitives = [\"parameter\", \"storage\", \"code\", \"False\", \"Elt\", \"Left\", \"None\", \"Pair\",\r\n    \"Right\", \"Some\", \"True\", \"Unit\", \"PACK\", \"UNPACK\", \"BLAKE2B\", \"SHA256\", \"SHA512\", \"ABS\", \"ADD\",\r\n    \"AMOUNT\", \"AND\", \"BALANCE\", \"CAR\", \"CDR\", \"CHECK_SIGNATURE\", \"COMPARE\", \"CONCAT\", \"CONS\",\r\n    \"CREATE_ACCOUNT\", \"CREATE_CONTRACT\", \"IMPLICIT_ACCOUNT\", \"DIP\", \"DROP\", \"DUP\", \"EDIV\", \"EMPTY_MAP\",\r\n    \"EMPTY_SET\", \"EQ\", \"EXEC\", \"FAILWITH\", \"GE\", \"GET\", \"GT\", \"HASH_KEY\", \"IF\", \"IF_CONS\", \"IF_LEFT\",\r\n    \"IF_NONE\", \"INT\", \"LAMBDA\", \"LE\", \"LEFT\", \"LOOP\", \"LSL\", \"LSR\", \"LT\", \"MAP\", \"MEM\", \"MUL\", \"NEG\",\r\n    \"NEQ\", \"NIL\", \"NONE\", \"NOT\", \"NOW\", \"OR\", \"PAIR\", \"PUSH\", \"RIGHT\", \"SIZE\", \"SOME\", \"SOURCE\",\r\n    \"SENDER\", \"SELF\", \"STEPS_TO_QUOTA\", \"SUB\", \"SWAP\", \"TRANSFER_TOKENS\", \"SET_DELEGATE\", \"UNIT\",\r\n    \"UPDATE\", \"XOR\", \"ITER\", \"LOOP_LEFT\", \"ADDRESS\", \"CONTRACT\", \"ISNAT\", \"CAST\", \"RENAME\", \"bool\",\r\n    \"contract\", \"int\", \"key\", \"key_hash\", \"lambda\", \"list\", \"map\", \"big_map\", \"nat\", \"option\", \"or\",\r\n    \"pair\", \"set\", \"signature\", \"string\", \"bytes\", \"mutez\", \"timestamp\", \"unit\", \"operation\",\r\n    \"address\", \"SLICE\", \"DIG\", \"DUG\", \"EMPTY_BIG_MAP\", \"APPLY\", \"chain_id\", \"CHAIN_ID\", \"LEVEL\",\r\n    \"SELF_ADDRESS\", \"never\", \"NEVER\", \"UNPAIR\", \"VOTING_POWER\", \"TOTAL_VOTING_POWER\", \"KECCAK\",\r\n    \"SHA3\", \"PAIRING_CHECK\", \"bls12_381_g1\", \"bls12_381_g2\", \"bls12_381_fr\", \"sapling_state\",\r\n    \"sapling_transaction\", \"SAPLING_EMPTY_STATE\", \"SAPLING_VERIFY_UPDATE\", \"ticket\", \"TICKET\",\r\n    \"READ_TICKET\", \"SPLIT_TICKET\", \"JOIN_TICKETS\", \"GET_AND_UPDATE\"];\r\nvar primTags = Object.assign.apply(Object, __spreadArray([{}], __read(primitives.map(function (v, i) {\r\n    var _a;\r\n    return (_a = {}, _a[v] = i, _a);\r\n}))));\r\nvar Tag;\r\n(function (Tag) {\r\n    Tag[Tag[\"Int\"] = 0] = \"Int\";\r\n    Tag[Tag[\"String\"] = 1] = \"String\";\r\n    Tag[Tag[\"Sequence\"] = 2] = \"Sequence\";\r\n    Tag[Tag[\"Prim0\"] = 3] = \"Prim0\";\r\n    Tag[Tag[\"Prim0Annot\"] = 4] = \"Prim0Annot\";\r\n    Tag[Tag[\"Prim1\"] = 5] = \"Prim1\";\r\n    Tag[Tag[\"Prim1Annot\"] = 6] = \"Prim1Annot\";\r\n    Tag[Tag[\"Prim2\"] = 7] = \"Prim2\";\r\n    Tag[Tag[\"Prim2Annot\"] = 8] = \"Prim2Annot\";\r\n    Tag[Tag[\"Prim\"] = 9] = \"Prim\";\r\n    Tag[Tag[\"Bytes\"] = 10] = \"Bytes\";\r\n})(Tag || (Tag = {}));\r\nvar Writer = /** @class */ (function () {\r\n    function Writer() {\r\n        this.buffer = [];\r\n    }\r\n    Object.defineProperty(Writer.prototype, \"length\", {\r\n        get: function () {\r\n            return this.buffer.length;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Writer.prototype.writeBytes = function (val) {\r\n        var _a;\r\n        (_a = this.buffer).push.apply(_a, __spreadArray([], __read(val.map(function (v) { return v & 0xff; }))));\r\n    };\r\n    Writer.prototype.writeUint8 = function (val) {\r\n        var v = val | 0;\r\n        this.buffer.push(v & 0xff);\r\n    };\r\n    Writer.prototype.writeUint16 = function (val) {\r\n        var v = val | 0;\r\n        this.buffer.push((v >> 8) & 0xff);\r\n        this.buffer.push(v & 0xff);\r\n    };\r\n    Writer.prototype.writeUint32 = function (val) {\r\n        var v = val | 0;\r\n        this.buffer.push((v >> 24) & 0xff);\r\n        this.buffer.push((v >> 16) & 0xff);\r\n        this.buffer.push((v >> 8) & 0xff);\r\n        this.buffer.push(v & 0xff);\r\n    };\r\n    Writer.prototype.writeInt8 = function (val) {\r\n        this.writeUint8(val);\r\n    };\r\n    Writer.prototype.writeInt16 = function (val) {\r\n        this.writeUint16(val);\r\n    };\r\n    Writer.prototype.writeInt32 = function (val) {\r\n        this.writeUint32(val);\r\n    };\r\n    return Writer;\r\n}());\r\nvar boundsErr = new Error(\"bounds out of range\");\r\nvar Reader = /** @class */ (function () {\r\n    function Reader(buffer, idx, cap) {\r\n        if (idx === void 0) { idx = 0; }\r\n        if (cap === void 0) { cap = buffer.length; }\r\n        this.buffer = buffer;\r\n        this.idx = idx;\r\n        this.cap = cap;\r\n    }\r\n    Object.defineProperty(Reader.prototype, \"length\", {\r\n        /** Remaining length */\r\n        get: function () {\r\n            return this.cap - this.idx;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Reader.prototype.readBytes = function (len) {\r\n        if (this.cap - this.idx < len) {\r\n            throw boundsErr;\r\n        }\r\n        var ret = this.buffer.slice(this.idx, this.idx + len);\r\n        this.idx += len;\r\n        return ret;\r\n    };\r\n    Reader.prototype.reader = function (len) {\r\n        if (this.cap - this.idx < len) {\r\n            throw boundsErr;\r\n        }\r\n        var ret = new Reader(this.buffer, this.idx, this.idx + len);\r\n        this.idx += len;\r\n        return ret;\r\n    };\r\n    Reader.prototype.copy = function () {\r\n        return new Reader(this.buffer, this.idx, this.cap);\r\n    };\r\n    Reader.prototype.readUint8 = function () {\r\n        if (this.cap - this.idx < 1) {\r\n            throw boundsErr;\r\n        }\r\n        return this.buffer[this.idx++] >>> 0;\r\n    };\r\n    Reader.prototype.readUint16 = function () {\r\n        if (this.cap - this.idx < 2) {\r\n            throw boundsErr;\r\n        }\r\n        var x0 = this.buffer[this.idx++];\r\n        var x1 = this.buffer[this.idx++];\r\n        return ((x0 << 8) | x1) >>> 0;\r\n    };\r\n    Reader.prototype.readUint32 = function () {\r\n        if (this.cap - this.idx < 4) {\r\n            throw boundsErr;\r\n        }\r\n        var x0 = this.buffer[this.idx++];\r\n        var x1 = this.buffer[this.idx++];\r\n        var x2 = this.buffer[this.idx++];\r\n        var x3 = this.buffer[this.idx++];\r\n        return ((x0 << 24) | (x1 << 16) | (x2 << 8) | x3) >>> 0;\r\n    };\r\n    Reader.prototype.readInt8 = function () {\r\n        if (this.cap - this.idx < 1) {\r\n            throw boundsErr;\r\n        }\r\n        var x = this.buffer[this.idx++];\r\n        return (x << 24) >> 24;\r\n    };\r\n    Reader.prototype.readInt16 = function () {\r\n        if (this.cap - this.idx < 2) {\r\n            throw boundsErr;\r\n        }\r\n        var x0 = this.buffer[this.idx++];\r\n        var x1 = this.buffer[this.idx++];\r\n        return (((x0 << 8) | x1) << 16) >> 16;\r\n    };\r\n    Reader.prototype.readInt32 = function () {\r\n        if (this.cap - this.idx < 4) {\r\n            throw boundsErr;\r\n        }\r\n        var x0 = this.buffer[this.idx++];\r\n        var x1 = this.buffer[this.idx++];\r\n        var x2 = this.buffer[this.idx++];\r\n        var x3 = this.buffer[this.idx++];\r\n        return (x0 << 24) | (x1 << 16) | (x2 << 8) | x3;\r\n    };\r\n    return Reader;\r\n}());\r\nvar ContractID;\r\n(function (ContractID) {\r\n    ContractID[ContractID[\"Implicit\"] = 0] = \"Implicit\";\r\n    ContractID[ContractID[\"Originated\"] = 1] = \"Originated\";\r\n})(ContractID || (ContractID = {}));\r\nvar PublicKeyHashID;\r\n(function (PublicKeyHashID) {\r\n    PublicKeyHashID[PublicKeyHashID[\"ED25519\"] = 0] = \"ED25519\";\r\n    PublicKeyHashID[PublicKeyHashID[\"SECP256K1\"] = 1] = \"SECP256K1\";\r\n    PublicKeyHashID[PublicKeyHashID[\"P256\"] = 2] = \"P256\";\r\n})(PublicKeyHashID || (PublicKeyHashID = {}));\r\nfunction readPublicKeyHash(rd) {\r\n    var type;\r\n    var tag = rd.readUint8();\r\n    switch (tag) {\r\n        case PublicKeyHashID.ED25519:\r\n            type = \"ED25519PublicKeyHash\";\r\n            break;\r\n        case PublicKeyHashID.SECP256K1:\r\n            type = \"SECP256K1PublicKeyHash\";\r\n            break;\r\n        case PublicKeyHashID.P256:\r\n            type = \"P256PublicKeyHash\";\r\n            break;\r\n        default:\r\n            throw new Error(\"unknown public key hash tag: \" + tag);\r\n    }\r\n    return { type: type, hash: rd.readBytes(20) };\r\n}\r\nfunction readAddress(rd) {\r\n    var address;\r\n    var tag = rd.readUint8();\r\n    switch (tag) {\r\n        case ContractID.Implicit:\r\n            address = readPublicKeyHash(rd);\r\n            break;\r\n        case ContractID.Originated:\r\n            address = {\r\n                type: \"ContractHash\",\r\n                hash: rd.readBytes(20),\r\n            };\r\n            rd.readBytes(1);\r\n            break;\r\n        default:\r\n            throw new Error(\"unknown address tag: \" + tag);\r\n    }\r\n    if (rd.length !== 0) {\r\n        // entry point\r\n        var dec = new TextDecoder();\r\n        address.entryPoint = dec.decode(new Uint8Array(rd.readBytes(rd.length)));\r\n    }\r\n    return address;\r\n}\r\nfunction writePublicKeyHash(a, w) {\r\n    var tag;\r\n    switch (a.type) {\r\n        case \"ED25519PublicKeyHash\":\r\n            tag = PublicKeyHashID.ED25519;\r\n            break;\r\n        case \"SECP256K1PublicKeyHash\":\r\n            tag = PublicKeyHashID.SECP256K1;\r\n            break;\r\n        case \"P256PublicKeyHash\":\r\n            tag = PublicKeyHashID.P256;\r\n            break;\r\n        default:\r\n            throw new Error(\"unexpected address type: \" + a.type);\r\n    }\r\n    w.writeUint8(tag);\r\n    w.writeBytes(Array.from(a.hash));\r\n}\r\nfunction writeAddress(a, w) {\r\n    if (a.type === \"ContractHash\") {\r\n        w.writeUint8(ContractID.Originated);\r\n        w.writeBytes(Array.from(a.hash));\r\n        w.writeUint8(0);\r\n    }\r\n    else {\r\n        w.writeUint8(ContractID.Implicit);\r\n        writePublicKeyHash(a, w);\r\n    }\r\n    if (a.entryPoint !== undefined && a.entryPoint !== \"\" && a.entryPoint !== \"default\") {\r\n        var enc = new TextEncoder();\r\n        var bytes = enc.encode(a.entryPoint);\r\n        w.writeBytes(Array.from(bytes));\r\n    }\r\n}\r\nvar PublicKeyID;\r\n(function (PublicKeyID) {\r\n    PublicKeyID[PublicKeyID[\"ED25519\"] = 0] = \"ED25519\";\r\n    PublicKeyID[PublicKeyID[\"SECP256K1\"] = 1] = \"SECP256K1\";\r\n    PublicKeyID[PublicKeyID[\"P256\"] = 2] = \"P256\";\r\n})(PublicKeyID || (PublicKeyID = {}));\r\nfunction readPublicKey(rd) {\r\n    var ln;\r\n    var type;\r\n    var tag = rd.readUint8();\r\n    switch (tag) {\r\n        case PublicKeyID.ED25519:\r\n            type = \"ED25519PublicKey\";\r\n            ln = 32;\r\n            break;\r\n        case PublicKeyID.SECP256K1:\r\n            type = \"SECP256K1PublicKey\";\r\n            ln = 33;\r\n            break;\r\n        case PublicKeyID.P256:\r\n            type = \"P256PublicKey\";\r\n            ln = 33;\r\n            break;\r\n        default:\r\n            throw new Error(\"unknown public key tag: \" + tag);\r\n    }\r\n    return { type: type, publicKey: rd.readBytes(ln) };\r\n}\r\nfunction writePublicKey(pk, w) {\r\n    var tag;\r\n    switch (pk.type) {\r\n        case \"ED25519PublicKey\":\r\n            tag = PublicKeyID.ED25519;\r\n            break;\r\n        case \"SECP256K1PublicKey\":\r\n            tag = PublicKeyID.SECP256K1;\r\n            break;\r\n        case \"P256PublicKey\":\r\n            tag = PublicKeyID.P256;\r\n            break;\r\n        default:\r\n            throw new Error(\"unexpected public key type: \" + pk.type);\r\n    }\r\n    w.writeUint8(tag);\r\n    w.writeBytes(Array.from(pk.publicKey));\r\n}\r\nfunction writeExpr(expr, wr, tf) {\r\n    var e_1, _a, e_2, _b, e_3, _c;\r\n    var _d, _e;\r\n    var _f = __read(tf(expr), 2), e = _f[0], args = _f[1];\r\n    if (Array.isArray(e)) {\r\n        var w = new Writer();\r\n        try {\r\n            for (var e_4 = __values(e), e_4_1 = e_4.next(); !e_4_1.done; e_4_1 = e_4.next()) {\r\n                var v = e_4_1.value;\r\n                var a = args.next();\r\n                if (a.done) {\r\n                    throw new Error(\"REPORT ME: iterator is done\");\r\n                }\r\n                writeExpr(v, w, a.value);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (e_4_1 && !e_4_1.done && (_a = e_4.return)) _a.call(e_4);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        wr.writeUint8(Tag.Sequence);\r\n        wr.writeUint32(w.length);\r\n        wr.writeBytes(w.buffer);\r\n        return;\r\n    }\r\n    if (\"string\" in e) {\r\n        var enc = new TextEncoder();\r\n        var bytes = enc.encode(e.string);\r\n        wr.writeUint8(Tag.String);\r\n        wr.writeUint32(bytes.length);\r\n        wr.writeBytes(Array.from(bytes));\r\n        return;\r\n    }\r\n    if (\"int\" in e) {\r\n        wr.writeUint8(Tag.Int);\r\n        var val = BigInt(e.int);\r\n        var sign = val < 0;\r\n        if (sign) {\r\n            val = -val;\r\n        }\r\n        var i = 0;\r\n        do {\r\n            var bits = (i === 0) ? BigInt(6) : BigInt(7);\r\n            var byte = val & ((BigInt(1) << bits) - BigInt(1));\r\n            val >>= bits;\r\n            if (val) {\r\n                byte |= BigInt(0x80);\r\n            }\r\n            if (i === 0 && sign) {\r\n                byte |= BigInt(0x40);\r\n            }\r\n            wr.writeUint8(Number(byte));\r\n            i++;\r\n        } while (val);\r\n        return;\r\n    }\r\n    if (\"bytes\" in e) {\r\n        var bytes = parseHex(e.bytes);\r\n        wr.writeUint8(Tag.Bytes);\r\n        wr.writeUint32(bytes.length);\r\n        wr.writeBytes(bytes);\r\n        return;\r\n    }\r\n    var prim = primTags[e.prim];\r\n    if (prim === undefined) {\r\n        throw new TypeError(\"Can't encode primary: \" + e.prim);\r\n    }\r\n    var tag = (((_d = e.args) === null || _d === void 0 ? void 0 : _d.length) || 0) < 3 ?\r\n        Tag.Prim0 + (((_e = e.args) === null || _e === void 0 ? void 0 : _e.length) || 0) * 2 + (e.annots === undefined || e.annots.length === 0 ? 0 : 1) :\r\n        Tag.Prim;\r\n    wr.writeUint8(tag);\r\n    wr.writeUint8(prim);\r\n    if (e.args !== undefined) {\r\n        if (e.args.length < 3) {\r\n            try {\r\n                for (var _g = __values(e.args), _h = _g.next(); !_h.done; _h = _g.next()) {\r\n                    var v = _h.value;\r\n                    var a = args.next();\r\n                    if (a.done) {\r\n                        throw new Error(\"REPORT ME: iterator is done\");\r\n                    }\r\n                    writeExpr(v, wr, a.value);\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n        }\r\n        else {\r\n            var w = new Writer();\r\n            try {\r\n                for (var _j = __values(e.args), _k = _j.next(); !_k.done; _k = _j.next()) {\r\n                    var v = _k.value;\r\n                    var a = args.next();\r\n                    if (a.done) {\r\n                        throw new Error(\"REPORT ME: iterator is done\");\r\n                    }\r\n                    writeExpr(v, w, a.value);\r\n                }\r\n            }\r\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\r\n                }\r\n                finally { if (e_3) throw e_3.error; }\r\n            }\r\n            wr.writeUint32(w.length);\r\n            wr.writeBytes(w.buffer);\r\n        }\r\n    }\r\n    if (e.annots !== undefined && e.annots.length !== 0) {\r\n        var enc = new TextEncoder();\r\n        var bytes = enc.encode(e.annots.join(\" \"));\r\n        wr.writeUint32(bytes.length);\r\n        wr.writeBytes(Array.from(bytes));\r\n    }\r\n    else if (e.args !== undefined && e.args.length >= 3) {\r\n        wr.writeUint32(0);\r\n    }\r\n}\r\nfunction readExpr(rd, tf) {\r\n    function passThrough() {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    return [4 /*yield*/, readPassThrough];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [3 /*break*/, 0];\r\n                case 2: return [2 /*return*/];\r\n            }\r\n        });\r\n    }\r\n    var _a = __read(tf, 2), args = _a[0], tr = _a[1];\r\n    var tag = rd.readUint8();\r\n    switch (tag) {\r\n        case Tag.Int:\r\n            {\r\n                var buf = [];\r\n                var byte = void 0;\r\n                do {\r\n                    byte = rd.readInt8();\r\n                    buf.push(byte);\r\n                } while ((byte & 0x80) !== 0);\r\n                var val = BigInt(0);\r\n                var sign = false;\r\n                for (var i = buf.length - 1; i >= 0; i--) {\r\n                    var bits = (i === 0) ? BigInt(6) : BigInt(7);\r\n                    var byte_1 = BigInt(buf[i]);\r\n                    val <<= bits;\r\n                    val |= byte_1 & ((BigInt(1) << bits) - BigInt(1));\r\n                    if (i === 0) {\r\n                        sign = !!(byte_1 & BigInt(0x40));\r\n                    }\r\n                }\r\n                if (sign) {\r\n                    val = -val;\r\n                }\r\n                return tr({ int: String(val) });\r\n            }\r\n        case Tag.String:\r\n            {\r\n                var length_1 = rd.readUint32();\r\n                var bytes = rd.readBytes(length_1);\r\n                var dec = new TextDecoder();\r\n                return tr({ string: dec.decode(new Uint8Array(bytes)) });\r\n            }\r\n        case Tag.Bytes:\r\n            {\r\n                var length_2 = rd.readUint32();\r\n                var bytes = rd.readBytes(length_2);\r\n                var hex = hexBytes(Array.from(bytes));\r\n                return tr({ bytes: hex });\r\n            }\r\n        case Tag.Sequence:\r\n            {\r\n                var length_3 = rd.readUint32();\r\n                var res = [];\r\n                var savedrd = rd.copy();\r\n                // make two passes\r\n                var it_1 = passThrough();\r\n                for (var n = 0; n < 2; n++) {\r\n                    var r = savedrd.reader(length_3);\r\n                    res = [];\r\n                    while (r.length > 0) {\r\n                        var a = it_1.next();\r\n                        if (a.done) {\r\n                            throw new Error(\"REPORT ME: iterator is done\");\r\n                        }\r\n                        res.push(readExpr(r, a.value));\r\n                    }\r\n                    // make a second pass with injected side effects\r\n                    it_1 = args(res);\r\n                    savedrd = rd;\r\n                }\r\n                return tr(res);\r\n            }\r\n        default:\r\n            {\r\n                if (tag > 9) {\r\n                    throw new Error(\"Unknown tag: \" + tag);\r\n                }\r\n                var p = rd.readUint8();\r\n                if (p >= primitives.length) {\r\n                    throw new Error(\"Unknown primitive tag: \" + p);\r\n                }\r\n                var prim = primitives[p];\r\n                var argn = (tag - 3) >> 1;\r\n                var res = { prim: prim };\r\n                // make two passes\r\n                var it_2 = passThrough();\r\n                var savedrd = rd.copy();\r\n                for (var n = 0; n < 2; n++) {\r\n                    res = { prim: prim };\r\n                    if (argn < 3) {\r\n                        for (var i = 0; i < argn; i++) {\r\n                            var a = it_2.next();\r\n                            if (a.done) {\r\n                                throw new Error(\"REPORT ME: iterator is done\");\r\n                            }\r\n                            res.args = res.args || [];\r\n                            res.args.push(readExpr(savedrd, a.value));\r\n                        }\r\n                    }\r\n                    else {\r\n                        res.args = res.args || [];\r\n                        var length_4 = savedrd.readUint32();\r\n                        var r = savedrd.reader(length_4);\r\n                        while (r.length > 0) {\r\n                            var a = it_2.next();\r\n                            if (a.done) {\r\n                                throw new Error(\"REPORT ME: iterator is done\");\r\n                            }\r\n                            res.args.push(readExpr(r, a.value));\r\n                        }\r\n                    }\r\n                    // make a second pass with injected side effects\r\n                    it_2 = args(res);\r\n                    savedrd = rd;\r\n                }\r\n                if (((tag - 3) & 1) === 1 || argn === 3) {\r\n                    // read annotations\r\n                    var length_5 = rd.readUint32();\r\n                    if (length_5 !== 0) {\r\n                        var bytes = rd.readBytes(length_5);\r\n                        var dec = new TextDecoder();\r\n                        res.annots = dec.decode(new Uint8Array(bytes)).split(\" \");\r\n                    }\r\n                }\r\n                return tr(res);\r\n            }\r\n    }\r\n}\r\nvar isOrData = function (e) { return \"prim\" in e && (e.prim === \"Left\" || e.prim === \"Right\"); };\r\nvar isOptionData = function (e) { return \"prim\" in e && (e.prim === \"Some\" || e.prim === \"None\"); };\r\nvar getWriteTransformFunc = function (t) {\r\n    if (isPairType(t)) {\r\n        return function (d) {\r\n            if (!isPairData(d)) {\r\n                throw new MichelsonTypeError(t, d, \"pair expected: \" + JSON.stringify(d));\r\n            }\r\n            assertDataListIfAny(d);\r\n            // combs aren't used in pack format\r\n            var tc = unpackComb(\"pair\", t);\r\n            var dc = unpackComb(\"Pair\", d);\r\n            return [dc, (function () {\r\n                    var _a, _b, a, e_5_1;\r\n                    var e_5, _c;\r\n                    return __generator(this, function (_d) {\r\n                        switch (_d.label) {\r\n                            case 0:\r\n                                _d.trys.push([0, 5, 6, 7]);\r\n                                _a = __values(tc.args), _b = _a.next();\r\n                                _d.label = 1;\r\n                            case 1:\r\n                                if (!!_b.done) return [3 /*break*/, 4];\r\n                                a = _b.value;\r\n                                return [4 /*yield*/, getWriteTransformFunc(a)];\r\n                            case 2:\r\n                                _d.sent();\r\n                                _d.label = 3;\r\n                            case 3:\r\n                                _b = _a.next();\r\n                                return [3 /*break*/, 1];\r\n                            case 4: return [3 /*break*/, 7];\r\n                            case 5:\r\n                                e_5_1 = _d.sent();\r\n                                e_5 = { error: e_5_1 };\r\n                                return [3 /*break*/, 7];\r\n                            case 6:\r\n                                try {\r\n                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\r\n                                }\r\n                                finally { if (e_5) throw e_5.error; }\r\n                                return [7 /*endfinally*/];\r\n                            case 7: return [2 /*return*/];\r\n                        }\r\n                    });\r\n                })()];\r\n        };\r\n    }\r\n    switch (t.prim) {\r\n        case \"or\":\r\n            return function (d) {\r\n                if (!isOrData(d)) {\r\n                    throw new MichelsonTypeError(t, d, \"or expected: \" + JSON.stringify(d));\r\n                }\r\n                return [d, (function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4 /*yield*/, getWriteTransformFunc(t.args[d.prim === \"Left\" ? 0 : 1])];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    })()];\r\n            };\r\n        case \"option\":\r\n            return function (d) {\r\n                if (!isOptionData(d)) {\r\n                    throw new MichelsonTypeError(t, d, \"option expected: \" + JSON.stringify(d));\r\n                }\r\n                return [d, (function () {\r\n                        var dd;\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    dd = d;\r\n                                    if (!(dd.prim === \"Some\")) return [3 /*break*/, 2];\r\n                                    return [4 /*yield*/, getWriteTransformFunc(t.args[0])];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    _a.label = 2;\r\n                                case 2: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    })()];\r\n            };\r\n        case \"list\":\r\n        case \"set\":\r\n            return function (d) {\r\n                if (!Array.isArray(d)) {\r\n                    throw new MichelsonTypeError(t, d, t.prim + \" expected: \" + JSON.stringify(d));\r\n                }\r\n                return [d, (function () {\r\n                        var d_1, d_1_1, e_6_1;\r\n                        var e_6, _a;\r\n                        return __generator(this, function (_b) {\r\n                            switch (_b.label) {\r\n                                case 0:\r\n                                    _b.trys.push([0, 5, 6, 7]);\r\n                                    d_1 = __values(d), d_1_1 = d_1.next();\r\n                                    _b.label = 1;\r\n                                case 1:\r\n                                    if (!!d_1_1.done) return [3 /*break*/, 4];\r\n                                    return [4 /*yield*/, getWriteTransformFunc(t.args[0])];\r\n                                case 2:\r\n                                    _b.sent();\r\n                                    _b.label = 3;\r\n                                case 3:\r\n                                    d_1_1 = d_1.next();\r\n                                    return [3 /*break*/, 1];\r\n                                case 4: return [3 /*break*/, 7];\r\n                                case 5:\r\n                                    e_6_1 = _b.sent();\r\n                                    e_6 = { error: e_6_1 };\r\n                                    return [3 /*break*/, 7];\r\n                                case 6:\r\n                                    try {\r\n                                        if (d_1_1 && !d_1_1.done && (_a = d_1.return)) _a.call(d_1);\r\n                                    }\r\n                                    finally { if (e_6) throw e_6.error; }\r\n                                    return [7 /*endfinally*/];\r\n                                case 7: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    })()];\r\n            };\r\n        case \"map\":\r\n            return function (d) {\r\n                if (!Array.isArray(d)) {\r\n                    throw new MichelsonTypeError(t, d, \"map expected: \" + JSON.stringify(d));\r\n                }\r\n                return [d, (function () {\r\n                        var d_2, d_2_1, e_7_1;\r\n                        var e_7, _a;\r\n                        return __generator(this, function (_b) {\r\n                            switch (_b.label) {\r\n                                case 0:\r\n                                    _b.trys.push([0, 5, 6, 7]);\r\n                                    d_2 = __values(d), d_2_1 = d_2.next();\r\n                                    _b.label = 1;\r\n                                case 1:\r\n                                    if (!!d_2_1.done) return [3 /*break*/, 4];\r\n                                    return [4 /*yield*/, function (elt) {\r\n                                            if (!(\"prim\" in elt) || elt.prim !== \"Elt\") {\r\n                                                throw new MichelsonTypeError(t, elt, \"map element expected: \" + JSON.stringify(elt));\r\n                                            }\r\n                                            return [elt, (function () {\r\n                                                    var _a, _b, a, e_8_1;\r\n                                                    var e_8, _c;\r\n                                                    return __generator(this, function (_d) {\r\n                                                        switch (_d.label) {\r\n                                                            case 0:\r\n                                                                _d.trys.push([0, 5, 6, 7]);\r\n                                                                _a = __values(t.args), _b = _a.next();\r\n                                                                _d.label = 1;\r\n                                                            case 1:\r\n                                                                if (!!_b.done) return [3 /*break*/, 4];\r\n                                                                a = _b.value;\r\n                                                                return [4 /*yield*/, getWriteTransformFunc(a)];\r\n                                                            case 2:\r\n                                                                _d.sent();\r\n                                                                _d.label = 3;\r\n                                                            case 3:\r\n                                                                _b = _a.next();\r\n                                                                return [3 /*break*/, 1];\r\n                                                            case 4: return [3 /*break*/, 7];\r\n                                                            case 5:\r\n                                                                e_8_1 = _d.sent();\r\n                                                                e_8 = { error: e_8_1 };\r\n                                                                return [3 /*break*/, 7];\r\n                                                            case 6:\r\n                                                                try {\r\n                                                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\r\n                                                                }\r\n                                                                finally { if (e_8) throw e_8.error; }\r\n                                                                return [7 /*endfinally*/];\r\n                                                            case 7: return [2 /*return*/];\r\n                                                        }\r\n                                                    });\r\n                                                })()];\r\n                                        }];\r\n                                case 2:\r\n                                    _b.sent();\r\n                                    _b.label = 3;\r\n                                case 3:\r\n                                    d_2_1 = d_2.next();\r\n                                    return [3 /*break*/, 1];\r\n                                case 4: return [3 /*break*/, 7];\r\n                                case 5:\r\n                                    e_7_1 = _b.sent();\r\n                                    e_7 = { error: e_7_1 };\r\n                                    return [3 /*break*/, 7];\r\n                                case 6:\r\n                                    try {\r\n                                        if (d_2_1 && !d_2_1.done && (_a = d_2.return)) _a.call(d_2);\r\n                                    }\r\n                                    finally { if (e_7) throw e_7.error; }\r\n                                    return [7 /*endfinally*/];\r\n                                case 7: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    })()];\r\n            };\r\n        case \"chain_id\":\r\n            return function (d) {\r\n                if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                    throw new MichelsonTypeError(t, d, \"chain id expected: \" + JSON.stringify(d));\r\n                }\r\n                var bytes;\r\n                if (\"string\" in d) {\r\n                    var id = checkDecodeTezosID(d.string, \"ChainID\");\r\n                    if (id === null) {\r\n                        throw new MichelsonTypeError(t, d, \"chain id base58 expected: \" + d.string);\r\n                    }\r\n                    bytes = { bytes: hexBytes(id[1]) };\r\n                }\r\n                else {\r\n                    bytes = d;\r\n                }\r\n                return [bytes, [][Symbol.iterator]()];\r\n            };\r\n        case \"signature\":\r\n            return function (d) {\r\n                if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                    throw new MichelsonTypeError(t, d, \"signature expected: \" + JSON.stringify(d));\r\n                }\r\n                var bytes;\r\n                if (\"string\" in d) {\r\n                    var sig = checkDecodeTezosID(d.string, \"ED25519Signature\", \"SECP256K1Signature\", \"P256Signature\", \"GenericSignature\");\r\n                    if (sig === null) {\r\n                        throw new MichelsonTypeError(t, d, \"signature base58 expected: \" + d.string);\r\n                    }\r\n                    bytes = { bytes: hexBytes(sig[1]) };\r\n                }\r\n                else {\r\n                    bytes = d;\r\n                }\r\n                return [bytes, [][Symbol.iterator]()];\r\n            };\r\n        case \"key_hash\":\r\n            return function (d) {\r\n                if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                    throw new MichelsonTypeError(t, d, \"key hash expected: \" + JSON.stringify(d));\r\n                }\r\n                var bytes;\r\n                if (\"string\" in d) {\r\n                    var pkh = checkDecodeTezosID(d.string, \"ED25519PublicKeyHash\", \"SECP256K1PublicKeyHash\", \"P256PublicKeyHash\");\r\n                    if (pkh === null) {\r\n                        throw new MichelsonTypeError(t, d, \"key hash base58 expected: \" + d.string);\r\n                    }\r\n                    var w = new Writer();\r\n                    writePublicKeyHash({ type: pkh[0], hash: pkh[1] }, w);\r\n                    bytes = { bytes: hexBytes(w.buffer) };\r\n                }\r\n                else {\r\n                    bytes = d;\r\n                }\r\n                return [bytes, [][Symbol.iterator]()];\r\n            };\r\n        case \"key\":\r\n            return function (d) {\r\n                if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                    throw new MichelsonTypeError(t, d, \"public key expected: \" + JSON.stringify(d));\r\n                }\r\n                var bytes;\r\n                if (\"string\" in d) {\r\n                    var key = checkDecodeTezosID(d.string, \"ED25519PublicKey\", \"SECP256K1PublicKey\", \"P256PublicKey\");\r\n                    if (key === null) {\r\n                        throw new MichelsonTypeError(t, d, \"public key base58 expected: \" + d.string);\r\n                    }\r\n                    var w = new Writer();\r\n                    writePublicKey({ type: key[0], publicKey: key[1] }, w);\r\n                    bytes = { bytes: hexBytes(w.buffer) };\r\n                }\r\n                else {\r\n                    bytes = d;\r\n                }\r\n                return [bytes, [][Symbol.iterator]()];\r\n            };\r\n        case \"address\":\r\n            return function (d) {\r\n                if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                    throw new MichelsonTypeError(t, d, \"address expected: \" + JSON.stringify(d));\r\n                }\r\n                var bytes;\r\n                if (\"string\" in d) {\r\n                    var s = d.string.split(\"%\");\r\n                    var address = checkDecodeTezosID(s[0], \"ED25519PublicKeyHash\", \"SECP256K1PublicKeyHash\", \"P256PublicKeyHash\", \"ContractHash\");\r\n                    if (address === null) {\r\n                        throw new MichelsonTypeError(t, d, \"address base58 expected: \" + d.string);\r\n                    }\r\n                    var w = new Writer();\r\n                    writeAddress({ type: address[0], hash: address[1], entryPoint: s.length > 1 ? s[1] : undefined }, w);\r\n                    bytes = { bytes: hexBytes(w.buffer) };\r\n                }\r\n                else {\r\n                    bytes = d;\r\n                }\r\n                return [bytes, [][Symbol.iterator]()];\r\n            };\r\n        case \"timestamp\":\r\n            return function (d) {\r\n                if (!(\"string\" in d) && !(\"int\" in d)) {\r\n                    throw new MichelsonTypeError(t, d, \"timestamp expected: \" + JSON.stringify(d));\r\n                }\r\n                var int;\r\n                if (\"string\" in d) {\r\n                    var p = parseDate(d);\r\n                    if (p === null) {\r\n                        throw new MichelsonTypeError(t, d, \"can't parse date: \" + d.string);\r\n                    }\r\n                    int = { int: String(Math.floor(p.getTime() / 1000)) };\r\n                }\r\n                else {\r\n                    int = d;\r\n                }\r\n                return [int, [][Symbol.iterator]()];\r\n            };\r\n        default:\r\n            return writePassThrough;\r\n    }\r\n};\r\nvar isPushInstruction = function (e) { return \"prim\" in e && e.prim === \"PUSH\"; };\r\nvar writePassThrough = function (e) {\r\n    if (isPushInstruction(e)) {\r\n        assertMichelsonInstruction(e);\r\n        // capture inlined type definition\r\n        return [e, (function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, writePassThrough];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [4 /*yield*/, getWriteTransformFunc(e.args[0])];\r\n                        case 2:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            })()];\r\n    }\r\n    return [e, (function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        return [4 /*yield*/, writePassThrough];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 0];\r\n                    case 2: return [2 /*return*/];\r\n                }\r\n            });\r\n        })()];\r\n};\r\n/**\r\n * Serializes any value of packable type to its optimized binary representation\r\n * identical to the one used by PACK and UNPACK Michelson instructions.\r\n * Without a type definition (not recommended) the data will be encoded as a binary form of a generic Michelson expression.\r\n * Type definition allows some types like `timestamp` and `address` and other base58 representable types to be encoded to\r\n * corresponding optimized binary forms borrowed from the Tezos protocol\r\n *\r\n * ```typescript\r\n * const data: MichelsonData = {\r\n *     string: \"KT1RvkwF4F7pz1gCoxkyZrG1RkrxQy3gmFTv%foo\"\r\n * };\r\n *\r\n * const typ: MichelsonType = {\r\n *     prim: \"address\"\r\n * };\r\n *\r\n * const packed = packData(data, typ);\r\n *\r\n * // 050a0000001901be41ee922ddd2cf33201e49d32da0afec571dce300666f6f\r\n * ```\r\n *\r\n * Without a type definition the base58 encoded address will be treated as a string\r\n * ```typescript\r\n * const data: MichelsonData = {\r\n *     string: \"KT1RvkwF4F7pz1gCoxkyZrG1RkrxQy3gmFTv%foo\"\r\n * };\r\n *\r\n * const packed = packData(data);\r\n *\r\n * // 0501000000284b543152766b7746344637707a3167436f786b795a724731526b7278517933676d46547625666f6f\r\n * ```\r\n * @param d Data object\r\n * @param t Optional type definition\r\n * @returns Binary representation as numeric array\r\n */\r\nfunction packData(d, t) {\r\n    var w = new Writer();\r\n    w.writeUint8(5);\r\n    writeExpr(d, w, t !== undefined ? getWriteTransformFunc(t) : writePassThrough);\r\n    return w.buffer;\r\n}\r\n/**\r\n * Serializes any value of packable type to its optimized binary representation\r\n * identical to the one used by PACK and UNPACK Michelson instructions.\r\n * Same as {@link packData} but returns a `bytes` Michelson data literal instead of an array\r\n *\r\n * ```typescript\r\n * const data: MichelsonData = {\r\n *     string: \"2019-09-26T10:59:51Z\"\r\n * };\r\n *\r\n * const typ: MichelsonType = {\r\n *     prim: \"timestamp\"\r\n * };\r\n *\r\n * const packed = packDataBytes(data, typ);\r\n *\r\n * // { bytes: \"0500a7e8e4d80b\" }\r\n * ```\r\n * @param d Data object\r\n * @param t Optional type definition\r\n * @returns Binary representation as a bytes literal\r\n */\r\nfunction packDataBytes(d, t) {\r\n    return { bytes: hexBytes(packData(d, t)) };\r\n}\r\nvar getReadTransformFuncs = function (t) {\r\n    if (isPairType(t)) {\r\n        var args_1 = Array.isArray(t) ? t : t.args;\r\n        return [\r\n            function (d) {\r\n                if (!isPairData(d)) {\r\n                    throw new MichelsonTypeError(t, d, \"pair expected: \" + JSON.stringify(d));\r\n                }\r\n                return (function () {\r\n                    var args_2, args_2_1, a, e_9_1;\r\n                    var e_9, _a;\r\n                    return __generator(this, function (_b) {\r\n                        switch (_b.label) {\r\n                            case 0:\r\n                                _b.trys.push([0, 5, 6, 7]);\r\n                                args_2 = __values(args_1), args_2_1 = args_2.next();\r\n                                _b.label = 1;\r\n                            case 1:\r\n                                if (!!args_2_1.done) return [3 /*break*/, 4];\r\n                                a = args_2_1.value;\r\n                                return [4 /*yield*/, getReadTransformFuncs(a)];\r\n                            case 2:\r\n                                _b.sent();\r\n                                _b.label = 3;\r\n                            case 3:\r\n                                args_2_1 = args_2.next();\r\n                                return [3 /*break*/, 1];\r\n                            case 4: return [3 /*break*/, 7];\r\n                            case 5:\r\n                                e_9_1 = _b.sent();\r\n                                e_9 = { error: e_9_1 };\r\n                                return [3 /*break*/, 7];\r\n                            case 6:\r\n                                try {\r\n                                    if (args_2_1 && !args_2_1.done && (_a = args_2.return)) _a.call(args_2);\r\n                                }\r\n                                finally { if (e_9) throw e_9.error; }\r\n                                return [7 /*endfinally*/];\r\n                            case 7: return [2 /*return*/];\r\n                        }\r\n                    });\r\n                })();\r\n            },\r\n            function (d) { return d; }\r\n        ];\r\n    }\r\n    switch (t.prim) {\r\n        case \"or\":\r\n            return [\r\n                function (d) {\r\n                    if (!isOrData(d)) {\r\n                        throw new MichelsonTypeError(t, d, \"or expected: \" + JSON.stringify(d));\r\n                    }\r\n                    return (function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4 /*yield*/, getReadTransformFuncs(t.args[d.prim === \"Left\" ? 0 : 1])];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    })();\r\n                },\r\n                function (d) { return d; }\r\n            ];\r\n        case \"option\":\r\n            return [\r\n                function (d) {\r\n                    if (!isOptionData(d)) {\r\n                        throw new MichelsonTypeError(t, d, \"option expected: \" + JSON.stringify(d));\r\n                    }\r\n                    return (function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    if (!(d.prim === \"Some\")) return [3 /*break*/, 2];\r\n                                    return [4 /*yield*/, getReadTransformFuncs(t.args[0])];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    _a.label = 2;\r\n                                case 2: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    })();\r\n                },\r\n                function (d) { return d; }\r\n            ];\r\n        case \"list\":\r\n        case \"set\":\r\n            return [\r\n                function (d) {\r\n                    if (!Array.isArray(d)) {\r\n                        throw new MichelsonTypeError(t, d, t.prim + \" expected: \" + JSON.stringify(d));\r\n                    }\r\n                    return (function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    return [4 /*yield*/, getReadTransformFuncs(t.args[0])];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [3 /*break*/, 0];\r\n                                case 2: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    })();\r\n                },\r\n                function (d) { return d; }\r\n            ];\r\n        case \"map\":\r\n            return [\r\n                function (d) {\r\n                    if (!Array.isArray(d)) {\r\n                        throw new MichelsonTypeError(t, d, \"map expected: \" + JSON.stringify(d));\r\n                    }\r\n                    return (function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0:\r\n                                    return [4 /*yield*/, [\r\n                                            function (elt) {\r\n                                                if (!(\"prim\" in elt) || elt.prim !== \"Elt\") {\r\n                                                    throw new MichelsonTypeError(t, elt, \"map element expected: \" + JSON.stringify(elt));\r\n                                                }\r\n                                                return (function () {\r\n                                                    var _a, _b, a, e_10_1;\r\n                                                    var e_10, _c;\r\n                                                    return __generator(this, function (_d) {\r\n                                                        switch (_d.label) {\r\n                                                            case 0:\r\n                                                                _d.trys.push([0, 5, 6, 7]);\r\n                                                                _a = __values(t.args), _b = _a.next();\r\n                                                                _d.label = 1;\r\n                                                            case 1:\r\n                                                                if (!!_b.done) return [3 /*break*/, 4];\r\n                                                                a = _b.value;\r\n                                                                return [4 /*yield*/, getReadTransformFuncs(a)];\r\n                                                            case 2:\r\n                                                                _d.sent();\r\n                                                                _d.label = 3;\r\n                                                            case 3:\r\n                                                                _b = _a.next();\r\n                                                                return [3 /*break*/, 1];\r\n                                                            case 4: return [3 /*break*/, 7];\r\n                                                            case 5:\r\n                                                                e_10_1 = _d.sent();\r\n                                                                e_10 = { error: e_10_1 };\r\n                                                                return [3 /*break*/, 7];\r\n                                                            case 6:\r\n                                                                try {\r\n                                                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\r\n                                                                }\r\n                                                                finally { if (e_10) throw e_10.error; }\r\n                                                                return [7 /*endfinally*/];\r\n                                                            case 7: return [2 /*return*/];\r\n                                                        }\r\n                                                    });\r\n                                                })();\r\n                                            },\r\n                                            function (elt) { return elt; }\r\n                                        ]];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [3 /*break*/, 0];\r\n                                case 2: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    })();\r\n                },\r\n                function (d) { return d; }\r\n            ];\r\n        case \"chain_id\":\r\n            return [\r\n                function () { return [][Symbol.iterator](); },\r\n                function (d) {\r\n                    if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                        throw new MichelsonTypeError(t, d, \"chain id expected: \" + JSON.stringify(d));\r\n                    }\r\n                    if (\"string\" in d) {\r\n                        return d;\r\n                    }\r\n                    var bytes = parseBytes(d.bytes);\r\n                    if (bytes === null) {\r\n                        throw new MichelsonTypeError(t, d, \"can't parse bytes: \" + d.bytes);\r\n                    }\r\n                    return { string: encodeTezosID(\"ChainID\", bytes) };\r\n                }\r\n            ];\r\n        case \"signature\":\r\n            return [\r\n                function () { return [][Symbol.iterator](); },\r\n                function (d) {\r\n                    if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                        throw new MichelsonTypeError(t, d, \"signature expected: \" + JSON.stringify(d));\r\n                    }\r\n                    if (\"string\" in d) {\r\n                        return d;\r\n                    }\r\n                    var bytes = parseBytes(d.bytes);\r\n                    if (bytes === null) {\r\n                        throw new MichelsonTypeError(t, d, \"can't parse bytes: \" + d.bytes);\r\n                    }\r\n                    return { string: encodeTezosID(\"GenericSignature\", bytes) };\r\n                }\r\n            ];\r\n        case \"key_hash\":\r\n            return [\r\n                function () { return [][Symbol.iterator](); },\r\n                function (d) {\r\n                    if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                        throw new MichelsonTypeError(t, d, \"key hash expected: \" + JSON.stringify(d));\r\n                    }\r\n                    if (\"string\" in d) {\r\n                        return d;\r\n                    }\r\n                    var bytes = parseBytes(d.bytes);\r\n                    if (bytes === null) {\r\n                        throw new MichelsonTypeError(t, d, \"can't parse bytes: \" + d.bytes);\r\n                    }\r\n                    var rd = new Reader(new Uint8Array(bytes));\r\n                    var addr = readPublicKeyHash(rd);\r\n                    return { string: encodeTezosID(addr.type, addr.hash) + (addr.entryPoint ? \"%\" + addr.entryPoint : \"\") };\r\n                }\r\n            ];\r\n        case \"key\":\r\n            return [\r\n                function () { return [][Symbol.iterator](); },\r\n                function (d) {\r\n                    if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                        throw new MichelsonTypeError(t, d, \"public key expected: \" + JSON.stringify(d));\r\n                    }\r\n                    if (\"string\" in d) {\r\n                        return d;\r\n                    }\r\n                    var bytes = parseBytes(d.bytes);\r\n                    if (bytes === null) {\r\n                        throw new MichelsonTypeError(t, d, \"can't parse bytes: \" + d.bytes);\r\n                    }\r\n                    var rd = new Reader(new Uint8Array(bytes));\r\n                    var pk = readPublicKey(rd);\r\n                    return { string: encodeTezosID(pk.type, pk.publicKey) };\r\n                }\r\n            ];\r\n        case \"address\":\r\n            return [\r\n                function () { return [][Symbol.iterator](); },\r\n                function (d) {\r\n                    if (!(\"bytes\" in d) && !(\"string\" in d)) {\r\n                        throw new MichelsonTypeError(t, d, \"address expected: \" + JSON.stringify(d));\r\n                    }\r\n                    if (\"string\" in d) {\r\n                        return d;\r\n                    }\r\n                    var bytes = parseBytes(d.bytes);\r\n                    if (bytes === null) {\r\n                        throw new MichelsonTypeError(t, d, \"can't parse bytes: \" + d.bytes);\r\n                    }\r\n                    var rd = new Reader(new Uint8Array(bytes));\r\n                    var addr = readAddress(rd);\r\n                    return { string: encodeTezosID(addr.type, addr.hash) + (addr.entryPoint ? \"%\" + addr.entryPoint : \"\") };\r\n                }\r\n            ];\r\n        case \"timestamp\":\r\n            return [\r\n                function () { return [][Symbol.iterator](); },\r\n                function (d) {\r\n                    if (!(\"int\" in d) && !(\"string\" in d)) {\r\n                        throw new MichelsonTypeError(t, d, \"address expected: \" + JSON.stringify(d));\r\n                    }\r\n                    if (\"string\" in d) {\r\n                        return d;\r\n                    }\r\n                    var date = new Date(parseInt(d.int, 10) * 1000);\r\n                    return { string: date.toISOString().slice(0, 19) + \"Z\" };\r\n                }\r\n            ];\r\n        default:\r\n            return readPassThrough;\r\n    }\r\n};\r\nvar readPassThrough = [\r\n    function (e) {\r\n        if (isPushInstruction(e)) {\r\n            assertMichelsonInstruction(e);\r\n            // capture inlined type definition\r\n            return (function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, readPassThrough];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [4 /*yield*/, getReadTransformFuncs(e.args[0])];\r\n                        case 2:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            })();\r\n        }\r\n        return (function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        return [4 /*yield*/, readPassThrough];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 0];\r\n                    case 2: return [2 /*return*/];\r\n                }\r\n            });\r\n        })();\r\n    },\r\n    function (e) { return e; }\r\n];\r\n/**\r\n * Deserialize a byte array into the corresponding Michelson value.\r\n * Without a type definition (not recommended) the binary data will be treated as a binary form of a generic Michelson expression and returned as is.\r\n * Type definition allows some types like `timestamp` and `address` and other types usually encoded in optimized binary forms to be transformed\r\n * back to their string representations like base58 and ISO timestamps.\r\n *\r\n * ```typescript\r\n * const src = [0x05, 0x00, 0xa7, 0xe8, 0xe4, 0xd8, 0x0b];\r\n *\r\n * const typ: MichelsonType = {\r\n *     prim: \"timestamp\"\r\n * };\r\n *\r\n * const data = unpackData(src, typ);\r\n *\r\n * // { string: \"2019-09-26T10:59:51Z\" }\r\n * ```\r\n *\r\n * Same binary data without a type definition\r\n * ```typescript\r\n * const src = [0x05, 0x00, 0xa7, 0xe8, 0xe4, 0xd8, 0x0b];\r\n *\r\n * const data = unpackData(src);\r\n *\r\n * // { int: \"1569495591\" }\r\n * ```\r\n * @param src Byte array\r\n * @param t Optional type definition\r\n * @returns Deserialized data\r\n */\r\nfunction unpackData(src, t) {\r\n    var r = new Reader(src);\r\n    if (r.readUint8() !== 5) {\r\n        throw new Error(\"incorrect packed data magic number\");\r\n    }\r\n    var ex = readExpr(r, t !== undefined ? getReadTransformFuncs(t) : readPassThrough);\r\n    if (assertMichelsonData(ex)) {\r\n        return ex;\r\n    }\r\n    throw new Error(); // never\r\n}\r\n/**\r\n * Deserialize a byte array into the corresponding Michelson value.\r\n * Same as {@link unpackData} but takes a `bytes` Michelson data literal instead of an array\r\n *\r\n * ```typescript\r\n * const src = { bytes: \"0500a7e8e4d80b\" };\r\n *\r\n * const typ: MichelsonType = {\r\n *     prim: \"timestamp\"\r\n * };\r\n *\r\n * const data = unpackDataBytes(src, typ);\r\n *\r\n * // { string: \"2019-09-26T10:59:51Z\" }\r\n * ```\r\n * @param src Bytes object\r\n * @param t Optional type definition\r\n * @returns Deserialized data\r\n */\r\nfunction unpackDataBytes(src, t) {\r\n    var bytes = parseBytes(src.bytes);\r\n    if (bytes === null) {\r\n        throw new Error(\"can't parse bytes: \\\"\" + src.bytes + \"\\\"\");\r\n    }\r\n    return unpackData(bytes, t);\r\n}\r\n// helper functions also used by validator\r\nfunction decodeAddressBytes(b) {\r\n    var bytes = parseBytes(b.bytes);\r\n    if (bytes === null) {\r\n        throw new Error(\"can't parse bytes: \\\"\" + b.bytes + \"\\\"\");\r\n    }\r\n    var rd = new Reader(new Uint8Array(bytes));\r\n    return readAddress(rd);\r\n}\r\nfunction decodePublicKeyHashBytes(b) {\r\n    var bytes = parseBytes(b.bytes);\r\n    if (bytes === null) {\r\n        throw new Error(\"can't parse bytes: \\\"\" + b.bytes + \"\\\"\");\r\n    }\r\n    var rd = new Reader(new Uint8Array(bytes));\r\n    return readPublicKeyHash(rd);\r\n}\r\nfunction decodePublicKeyBytes(b) {\r\n    var bytes = parseBytes(b.bytes);\r\n    if (bytes === null) {\r\n        throw new Error(\"can't parse bytes: \\\"\" + b.bytes + \"\\\"\");\r\n    }\r\n    var rd = new Reader(new Uint8Array(bytes));\r\n    return readPublicKey(rd);\r\n}\n\nvar MichelsonInstructionError = /** @class */ (function (_super) {\r\n    __extends(MichelsonInstructionError, _super);\r\n    /**\r\n     * @param val Value of a type node caused the error\r\n     * @param stackState Current stack state\r\n     * @param message An error message\r\n     */\r\n    function MichelsonInstructionError(val, stackState, message) {\r\n        var _this = _super.call(this, val, message) || this;\r\n        _this.stackState = stackState;\r\n        Object.setPrototypeOf(_this, MichelsonInstructionError.prototype);\r\n        return _this;\r\n    }\r\n    return MichelsonInstructionError;\r\n}(MichelsonError));\r\n// 'sequence as a pair' edo syntax helpers\r\nfunction typeID(t) {\r\n    return Array.isArray(t) ? \"pair\" : t.prim;\r\n}\r\nfunction typeArgs(t) {\r\n    return (\"prim\" in t ? t.args : t);\r\n}\r\nfunction assertScalarTypesEqual(a, b, field) {\r\n    if (field === void 0) { field = false; }\r\n    if (typeID(a) !== typeID(b)) {\r\n        throw new MichelsonTypeError(a, undefined, \"types mismatch: \" + typeID(a) + \" != \" + typeID(b));\r\n    }\r\n    var ann = [unpackAnnotations(a), unpackAnnotations(b)];\r\n    if (ann[0].t && ann[1].t && ann[0].t[0] !== ann[1].t[0]) {\r\n        throw new MichelsonTypeError(a, undefined, typeID(a) + \": type names mismatch: \" + ann[0].t[0] + \" != \" + ann[1].t[0]);\r\n    }\r\n    if (field &&\r\n        (ann[0].f && ann[1].f && ann[0].f[0] !== ann[1].f[0])) {\r\n        throw new MichelsonTypeError(a, undefined, typeID(a) + \": field names mismatch: \" + ann[0].f[0] + \" != \" + ann[1].f);\r\n    }\r\n    if (isPairType(a)) {\r\n        var aArgs = unpackComb(\"pair\", a);\r\n        var bArgs = unpackComb(\"pair\", b);\r\n        assertScalarTypesEqual(aArgs.args[0], bArgs.args[0], true);\r\n        assertScalarTypesEqual(aArgs.args[1], bArgs.args[1], true);\r\n        return;\r\n    }\r\n    switch (a.prim) {\r\n        case \"option\":\r\n        case \"list\":\r\n        case \"contract\":\r\n        case \"set\":\r\n        case \"ticket\":\r\n            assertScalarTypesEqual(a.args[0], b.args[0]);\r\n            break;\r\n        case \"or\":\r\n            assertScalarTypesEqual(a.args[0], b.args[0], true);\r\n            assertScalarTypesEqual(a.args[1], b.args[1], true);\r\n            break;\r\n        case \"lambda\":\r\n        case \"map\":\r\n        case \"big_map\":\r\n            assertScalarTypesEqual(a.args[0], b.args[0]);\r\n            assertScalarTypesEqual(a.args[1], b.args[1]);\r\n            break;\r\n        case \"sapling_state\":\r\n        case \"sapling_transaction\":\r\n            if (parseInt(a.args[0].int, 10) !== parseInt(b.args[0].int, 10)) {\r\n                throw new MichelsonTypeError(a, undefined, typeID(a) + \": type argument mismatch: \" + a.args[0].int + \" != \" + b.args[0].int);\r\n            }\r\n    }\r\n}\r\nfunction assertStacksEqual(a, b) {\r\n    if (a.length !== b.length) {\r\n        throw new MichelsonTypeError(a, undefined, \"stack length mismatch: \" + a.length + \" != \" + b.length);\r\n    }\r\n    for (var i = 0; i < a.length; i++) {\r\n        assertScalarTypesEqual(a[i], b[i]);\r\n    }\r\n}\r\nfunction assertTypeAnnotationsValid(t, field) {\r\n    var e_1, _a, e_2, _b;\r\n    var _c, _d, _e;\r\n    if (field === void 0) { field = false; }\r\n    if (!Array.isArray(t)) {\r\n        var ann = unpackAnnotations(t);\r\n        if ((((_c = ann.t) === null || _c === void 0 ? void 0 : _c.length) || 0) > 1) {\r\n            throw new MichelsonTypeError(t, undefined, t.prim + \": at most one type annotation allowed: \" + t.annots);\r\n        }\r\n        if (field) {\r\n            if ((((_d = ann.f) === null || _d === void 0 ? void 0 : _d.length) || 0) > 1) {\r\n                throw new MichelsonTypeError(t, undefined, t.prim + \": at most one field annotation allowed: \" + t.annots);\r\n            }\r\n        }\r\n        else {\r\n            if ((((_e = ann.f) === null || _e === void 0 ? void 0 : _e.length) || 0) > 0) {\r\n                throw new MichelsonTypeError(t, undefined, t.prim + \": field annotations aren't allowed: \" + t.annots);\r\n            }\r\n        }\r\n    }\r\n    if (isPairType(t)) {\r\n        var args = typeArgs(t);\r\n        try {\r\n            for (var args_1 = __values(args), args_1_1 = args_1.next(); !args_1_1.done; args_1_1 = args_1.next()) {\r\n                var a = args_1_1.value;\r\n                assertTypeAnnotationsValid(a, true);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (args_1_1 && !args_1_1.done && (_a = args_1.return)) _a.call(args_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return;\r\n    }\r\n    switch (t.prim) {\r\n        case \"option\":\r\n        case \"list\":\r\n        case \"contract\":\r\n        case \"set\":\r\n            assertTypeAnnotationsValid(t.args[0]);\r\n            break;\r\n        case \"or\":\r\n            try {\r\n                for (var _f = __values(t.args), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                    var a = _g.value;\r\n                    assertTypeAnnotationsValid(a, true);\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n            break;\r\n        case \"lambda\":\r\n        case \"map\":\r\n        case \"big_map\":\r\n            assertTypeAnnotationsValid(t.args[0]);\r\n            assertTypeAnnotationsValid(t.args[1]);\r\n    }\r\n}\r\n// Data integrity check\r\nfunction compareMichelsonData(t, a, b) {\r\n    if (isPairType(t)) {\r\n        if (isPairData(a) && isPairData(b)) {\r\n            assertDataListIfAny(a);\r\n            assertDataListIfAny(b);\r\n            var tComb = unpackComb(\"pair\", t);\r\n            var aComb = unpackComb(\"Pair\", a);\r\n            var bComb = unpackComb(\"Pair\", b);\r\n            var x = compareMichelsonData(tComb.args[0], aComb.args[0], bComb.args[0]);\r\n            if (x !== 0) {\r\n                return x;\r\n            }\r\n            return compareMichelsonData(tComb.args[0], aComb.args[1], bComb.args[1]);\r\n        }\r\n    }\r\n    else {\r\n        switch (t.prim) {\r\n            case \"int\":\r\n            case \"nat\":\r\n            case \"mutez\":\r\n                if ((\"int\" in a) && (\"int\" in b)) {\r\n                    return new LongInteger(a.int).cmp(new LongInteger(b.int));\r\n                }\r\n                break;\r\n            case \"string\":\r\n                if ((\"string\" in a) && (\"string\" in b)) {\r\n                    var x = a.string.localeCompare(b.string);\r\n                    return x < 0 ? -1 : x > 0 ? 1 : 0;\r\n                }\r\n                break;\r\n            case \"bytes\":\r\n                if ((\"bytes\" in a) && (\"bytes\" in b)) {\r\n                    var aa = parseBytes(a.bytes);\r\n                    var bb = parseBytes(b.bytes);\r\n                    if (aa !== null && bb !== null) {\r\n                        return compareBytes(aa, bb);\r\n                    }\r\n                }\r\n                break;\r\n            case \"bool\":\r\n                if ((\"prim\" in a) && (\"prim\" in b) && (a.prim === \"True\" || a.prim === \"False\") && (b.prim === \"True\" || b.prim === \"False\")) {\r\n                    return a.prim === b.prim ? 0 : a.prim === \"False\" ? -1 : 1;\r\n                }\r\n                break;\r\n            case \"key\":\r\n            case \"key_hash\":\r\n            case \"address\":\r\n            case \"signature\":\r\n            case \"chain_id\":\r\n                if ((\"string\" in a || \"bytes\" in a) && (\"string\" in b || \"bytes\" in b)) {\r\n                    return compareBytes(\"string\" in a ? decodeBase58Check(a.string) : parseBytes(a.bytes) || [], \"string\" in b ? decodeBase58Check(b.string) : parseBytes(b.bytes) || []);\r\n                }\r\n                break;\r\n            case \"timestamp\":\r\n                if (((\"string\" in a) || (\"int\" in a)) && ((\"string\" in b) || (\"int\" in b))) {\r\n                    var aa = parseDate(a);\r\n                    var bb = parseDate(b);\r\n                    if (aa !== null && bb !== null) {\r\n                        var x = aa.valueOf() - bb.valueOf();\r\n                        return x < 0 ? -1 : x > 0 ? 1 : 0;\r\n                    }\r\n                }\r\n                break;\r\n            case \"unit\":\r\n                if ((\"prim\" in a) && (\"prim\" in b) && a.prim === \"Unit\" && b.prim === \"Unit\") {\r\n                    return 0;\r\n                }\r\n        }\r\n    }\r\n    // Unlikely, types are expected to be verified before the function call\r\n    throw new MichelsonTypeError(t, undefined, typeID(t) + \": not comparable values: \" + JSON.stringify(a) + \", \" + JSON.stringify(b));\r\n}\r\n// Simplified version of assertMichelsonInstruction() for previously validated data\r\nfunction isFunction(d) {\r\n    var e_3, _a;\r\n    if (!Array.isArray(d)) {\r\n        return false;\r\n    }\r\n    try {\r\n        for (var d_1 = __values(d), d_1_1 = d_1.next(); !d_1_1.done; d_1_1 = d_1.next()) {\r\n            var v = d_1_1.value;\r\n            if (!(Array.isArray(v) && isFunction(v) ||\r\n                (\"prim\" in v) && isInstruction(v))) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n    finally {\r\n        try {\r\n            if (d_1_1 && !d_1_1.done && (_a = d_1.return)) _a.call(d_1);\r\n        }\r\n        finally { if (e_3) throw e_3.error; }\r\n    }\r\n    return true;\r\n}\r\nfunction assertDataValidInternal(d, t, ctx) {\r\n    var e_4, _a, e_5, _b;\r\n    if (isPairType(t)) {\r\n        if (isPairData(d)) {\r\n            assertDataListIfAny(d);\r\n            var dc = unpackComb(\"Pair\", d);\r\n            var tc = unpackComb(\"pair\", t);\r\n            assertDataValidInternal(dc.args[0], tc.args[0], ctx);\r\n            assertDataValidInternal(dc.args[1], tc.args[1], ctx);\r\n            return;\r\n        }\r\n        throw new MichelsonTypeError(t, d, \"pair expected: \" + JSON.stringify(d));\r\n    }\r\n    switch (t.prim) {\r\n        // Atomic literals\r\n        case \"int\":\r\n            if ((\"int\" in d) && isDecimal(d.int)) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"integer value expected: \" + JSON.stringify(d));\r\n        case \"nat\":\r\n        case \"mutez\":\r\n            if ((\"int\" in d) && isNatural(d.int)) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"natural value expected: \" + JSON.stringify(d));\r\n        case \"string\":\r\n            if (\"string\" in d) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"string value expected: \" + JSON.stringify(d));\r\n        case \"bytes\":\r\n        case \"bls12_381_g1\":\r\n        case \"bls12_381_g2\":\r\n            if (\"bytes\" in d && parseBytes(d.bytes) !== null) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"bytes value expected: \" + JSON.stringify(d));\r\n        case \"bool\":\r\n            if ((\"prim\" in d) && (d.prim === \"True\" || d.prim === \"False\")) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"boolean value expected: \" + JSON.stringify(d));\r\n        case \"key_hash\":\r\n            if ((\"string\" in d) &&\r\n                checkDecodeTezosID(d.string, \"ED25519PublicKeyHash\", \"SECP256K1PublicKeyHash\", \"P256PublicKeyHash\") !== null) {\r\n                return;\r\n            }\r\n            else if (\"bytes\" in d) {\r\n                try {\r\n                    decodePublicKeyHashBytes(d);\r\n                    return;\r\n                }\r\n                catch (err) {\r\n                    // ignore message\r\n                }\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"key hash expected: \" + JSON.stringify(d));\r\n        case \"timestamp\":\r\n            if (((\"string\" in d) || (\"int\" in d)) && parseDate(d) !== null) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"timestamp expected: \" + JSON.stringify(d));\r\n        case \"address\":\r\n            if (\"string\" in d) {\r\n                var address = d.string;\r\n                var ep = d.string.indexOf(\"%\");\r\n                if (ep >= 0) {\r\n                    // trim entry point\r\n                    address = d.string.slice(0, ep);\r\n                }\r\n                if (checkDecodeTezosID(address, \"ED25519PublicKeyHash\", \"SECP256K1PublicKeyHash\", \"P256PublicKeyHash\", \"ContractHash\") !== null) {\r\n                    return;\r\n                }\r\n            }\r\n            else if (\"bytes\" in d) {\r\n                try {\r\n                    decodeAddressBytes(d);\r\n                    return;\r\n                }\r\n                catch (err) {\r\n                    // ignore message\r\n                }\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"address expected: \" + JSON.stringify(d));\r\n        case \"key\":\r\n            if ((\"string\" in d) &&\r\n                checkDecodeTezosID(d.string, \"ED25519PublicKey\", \"SECP256K1PublicKey\", \"P256PublicKey\") !== null) {\r\n                return;\r\n            }\r\n            else if (\"bytes\" in d) {\r\n                try {\r\n                    decodePublicKeyBytes(d);\r\n                    return;\r\n                }\r\n                catch (err) {\r\n                    // ignore message\r\n                }\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"public key expected: \" + JSON.stringify(d));\r\n        case \"unit\":\r\n            if ((\"prim\" in d) && d.prim === \"Unit\") {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"unit value expected: \" + JSON.stringify(d));\r\n        case \"signature\":\r\n            if ((\"bytes\" in d) || (\"string\" in d) &&\r\n                checkDecodeTezosID(d.string, \"ED25519Signature\", \"SECP256K1Signature\", \"P256Signature\", \"GenericSignature\") !== null) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"signature expected: \" + JSON.stringify(d));\r\n        case \"chain_id\":\r\n            if (\"bytes\" in d || \"string\" in d) {\r\n                var x = \"string\" in d ? decodeBase58Check(d.string) : parseBytes(d.bytes);\r\n                if (x !== null) {\r\n                    return;\r\n                }\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"chain id expected: \" + JSON.stringify(d));\r\n        case \"operation\":\r\n            throw new MichelsonTypeError(t, d, \"operation type can't be represented as a literal value\");\r\n        case \"contract\":\r\n            throw new MichelsonTypeError(t, d, \"contract type can't be represented as a literal value\");\r\n        // Complex types\r\n        case \"option\":\r\n            if (\"prim\" in d) {\r\n                if (d.prim === \"None\") {\r\n                    return;\r\n                }\r\n                else if (d.prim === \"Some\") {\r\n                    assertDataValidInternal(d.args[0], t.args[0], ctx);\r\n                    return;\r\n                }\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"option expected: \" + JSON.stringify(d));\r\n        case \"list\":\r\n        case \"set\":\r\n            if (assertDataListIfAny(d)) {\r\n                var prev = void 0;\r\n                try {\r\n                    for (var d_2 = __values(d), d_2_1 = d_2.next(); !d_2_1.done; d_2_1 = d_2.next()) {\r\n                        var v = d_2_1.value;\r\n                        assertDataValidInternal(v, t.args[0], ctx);\r\n                        if (t.prim === \"set\") {\r\n                            if (prev === undefined) {\r\n                                prev = v;\r\n                            }\r\n                            else if (compareMichelsonData(t.args[0], prev, v) > 0) {\r\n                                throw new MichelsonTypeError(t, d, \"set elements must be ordered: \" + JSON.stringify(d));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (d_2_1 && !d_2_1.done && (_a = d_2.return)) _a.call(d_2);\r\n                    }\r\n                    finally { if (e_4) throw e_4.error; }\r\n                }\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, t.prim + \" expected: \" + JSON.stringify(d));\r\n        case \"or\":\r\n            if (\"prim\" in d) {\r\n                if (d.prim === \"Left\") {\r\n                    assertDataValidInternal(d.args[0], t.args[0], ctx);\r\n                    return;\r\n                }\r\n                else if (d.prim === \"Right\") {\r\n                    assertDataValidInternal(d.args[0], t.args[1], ctx);\r\n                    return;\r\n                }\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"union (or) expected: \" + JSON.stringify(d));\r\n        case \"lambda\":\r\n            if (isFunction(d)) {\r\n                var ret = functionTypeInternal(d, [t.args[0]], ctx);\r\n                if (\"failed\" in ret) {\r\n                    throw new MichelsonTypeError(t, d, \"function is failed with error type: \" + ret.failed);\r\n                }\r\n                if (ret.length !== 1) {\r\n                    throw new MichelsonTypeError(t, d, \"function must return a value\");\r\n                }\r\n                assertScalarTypesEqual(t.args[1], ret[0]);\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"function expected: \" + JSON.stringify(d));\r\n        case \"map\":\r\n        case \"big_map\":\r\n            if (Array.isArray(d)) {\r\n                var prev = void 0;\r\n                try {\r\n                    for (var d_3 = __values(d), d_3_1 = d_3.next(); !d_3_1.done; d_3_1 = d_3.next()) {\r\n                        var v = d_3_1.value;\r\n                        if (!(\"prim\" in v) || v.prim !== \"Elt\") {\r\n                            throw new MichelsonTypeError(t, d, \"map elements expected: \" + JSON.stringify(d));\r\n                        }\r\n                        assertDataValidInternal(v.args[0], t.args[0], ctx);\r\n                        assertDataValidInternal(v.args[1], t.args[1], ctx);\r\n                        if (prev === undefined) {\r\n                            prev = v;\r\n                        }\r\n                        else if (compareMichelsonData(t.args[0], prev.args[0], v.args[0]) > 0) {\r\n                            throw new MichelsonTypeError(t, d, \"map elements must be ordered: \" + JSON.stringify(d));\r\n                        }\r\n                    }\r\n                }\r\n                catch (e_5_1) { e_5 = { error: e_5_1 }; }\r\n                finally {\r\n                    try {\r\n                        if (d_3_1 && !d_3_1.done && (_b = d_3.return)) _b.call(d_3);\r\n                    }\r\n                    finally { if (e_5) throw e_5.error; }\r\n                }\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, t.prim + \" expected: \" + JSON.stringify(d));\r\n        case \"bls12_381_fr\":\r\n            if (\"int\" in d && isDecimal(d.int) || \"bytes\" in d && parseBytes(d.bytes) !== null) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"BLS12-381 element expected: \" + JSON.stringify(d));\r\n        case \"sapling_state\":\r\n            if (Array.isArray(d)) {\r\n                return;\r\n            }\r\n            throw new MichelsonTypeError(t, d, \"sapling state expected: \" + JSON.stringify(d));\r\n        case \"ticket\":\r\n            assertDataValidInternal(d, {\r\n                prim: \"pair\", args: [\r\n                    { prim: \"address\" },\r\n                    t.args[0],\r\n                    { prim: \"nat\" },\r\n                ]\r\n            }, ctx);\r\n            return;\r\n        default:\r\n            throw new MichelsonTypeError(t, d, \"unexpected type: \" + typeID(t));\r\n    }\r\n}\r\nfunction instructionListType(inst, stack, ctx) {\r\n    var e_6, _a;\r\n    var ret = stack;\r\n    var s = stack;\r\n    var i = 0;\r\n    try {\r\n        for (var inst_1 = __values(inst), inst_1_1 = inst_1.next(); !inst_1_1.done; inst_1_1 = inst_1.next()) {\r\n            var op = inst_1_1.value;\r\n            var ft = functionTypeInternal(op, s, ctx);\r\n            ret = ft;\r\n            if (\"failed\" in ft) {\r\n                break;\r\n            }\r\n            s = ft;\r\n            i++;\r\n        }\r\n    }\r\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\r\n    finally {\r\n        try {\r\n            if (inst_1_1 && !inst_1_1.done && (_a = inst_1.return)) _a.call(inst_1);\r\n        }\r\n        finally { if (e_6) throw e_6.error; }\r\n    }\r\n    if ((\"failed\" in ret) && i !== inst.length - 1) {\r\n        throw new MichelsonInstructionError(inst, ret, \"FAIL must appear in a tail position\");\r\n    }\r\n    if ((ctx === null || ctx === void 0 ? void 0 : ctx.traceCallback) !== undefined) {\r\n        var trace = {\r\n            op: inst,\r\n            in: stack,\r\n            out: ret,\r\n        };\r\n        ctx.traceCallback(trace);\r\n    }\r\n    return ret;\r\n}\r\nfunction functionTypeInternal(inst, stack, ctx) {\r\n    var proto = (ctx === null || ctx === void 0 ? void 0 : ctx.protocol) || DefaultProtocol;\r\n    if (Array.isArray(inst)) {\r\n        return instructionListType(inst, stack, ctx);\r\n    }\r\n    var instruction = inst; // Make it const for type guarding\r\n    // make sure the stack has enough number of arguments of specific types\r\n    function args(n) {\r\n        var e_7, _a;\r\n        var typeIds = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            typeIds[_i - 1] = arguments[_i];\r\n        }\r\n        if (stack.length < typeIds.length + n) {\r\n            throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": stack must have at least \" + typeIds.length + \" element(s)\");\r\n        }\r\n        var i = n;\r\n        try {\r\n            for (var typeIds_1 = __values(typeIds), typeIds_1_1 = typeIds_1.next(); !typeIds_1_1.done; typeIds_1_1 = typeIds_1.next()) {\r\n                var ids = typeIds_1_1.value;\r\n                if (ids !== null && ids.length !== 0) {\r\n                    var ii = 0;\r\n                    while (ii < ids.length && ids[ii] !== typeID(stack[i])) {\r\n                        ii++;\r\n                    }\r\n                    if (ii === ids.length) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": stack type mismatch: [\" + i + \"] expected to be \" + ids + \", got \" + typeID(stack[i]) + \" instead\");\r\n                    }\r\n                }\r\n                i++;\r\n            }\r\n        }\r\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\r\n        finally {\r\n            try {\r\n                if (typeIds_1_1 && !typeIds_1_1.done && (_a = typeIds_1.return)) _a.call(typeIds_1);\r\n            }\r\n            finally { if (e_7) throw e_7.error; }\r\n        }\r\n        return stack.slice(n, typeIds.length + n);\r\n    }\r\n    function rethrow(fn) {\r\n        return function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            try {\r\n                return fn.apply(void 0, __spreadArray([], __read(args)));\r\n            }\r\n            catch (err) {\r\n                if (err instanceof MichelsonError) {\r\n                    throw new MichelsonInstructionError(instruction, stack, err.message);\r\n                }\r\n                else {\r\n                    throw err;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    function rethrowTypeGuard(fn) {\r\n        return function (arg) {\r\n            try {\r\n                return fn(arg);\r\n            }\r\n            catch (err) {\r\n                if (err instanceof MichelsonError) {\r\n                    throw new MichelsonInstructionError(instruction, stack, err.message);\r\n                }\r\n                else {\r\n                    throw err;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    var argAnn = rethrow(unpackAnnotations);\r\n    var ensureStacksEqual = rethrow(assertStacksEqual);\r\n    var ensureTypesEqual = rethrow(assertScalarTypesEqual);\r\n    var ensureComparableType = rethrowTypeGuard(assertMichelsonComparableType);\r\n    var ensurePackableType = rethrowTypeGuard(assertMichelsonPackableType);\r\n    var ensureStorableType = rethrowTypeGuard(assertMichelsonStorableType);\r\n    var ensurePushableType = rethrowTypeGuard(assertMichelsonPushableType);\r\n    var ensureBigMapStorableType = rethrowTypeGuard(assertMichelsonBigMapStorableType);\r\n    // unpack instruction annotations and assert their maximum number\r\n    function instructionAnn(num, opt) {\r\n        var a = argAnn(instruction, __assign(__assign({}, opt), { emptyFields: num.f !== undefined && num.f > 1, emptyVar: num.v !== undefined && num.v > 1 }));\r\n        var assertNum = function (a, n, type) {\r\n            if (a && a.length > (n || 0)) {\r\n                throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": at most \" + (n || 0) + \" \" + type + \" annotations allowed\");\r\n            }\r\n        };\r\n        assertNum(a.f, num.f, \"field\");\r\n        assertNum(a.t, num.t, \"type\");\r\n        assertNum(a.v, num.v, \"variable\");\r\n        return a;\r\n    }\r\n    // also keeps annotation class if null is provided\r\n    function annotate(tt, a) {\r\n        var tx = tt;\r\n        var t = Array.isArray(tx) ? { prim: \"pair\", args: tx } : tx;\r\n        var src = argAnn(t);\r\n        var ann = (a.v !== undefined || a.t !== undefined || a.f !== undefined) ? __spreadArray(__spreadArray(__spreadArray([], __read(((a.v === null ? src.v : a.v) || []))), __read(((a.t === null ? src.t : a.t) || []))), __read(((a.f === null ? src.f : a.f) || []))) : undefined;\r\n        t.annots; var rest = __rest(t, [\"annots\"]);\r\n        return __assign(__assign({}, rest), (ann && ann.length !== 0 && { annots: ann }));\r\n    }\r\n    // shortcut to copy at most one variable annotation from the instruction to the type\r\n    function annotateVar(t, def) {\r\n        var ia = instructionAnn({ v: 1 });\r\n        return annotate(t, { v: ia.v !== undefined ? ia.v : def !== undefined ? [def] : null, t: null });\r\n    }\r\n    // annotate CAR/CDR/UNPAIR/GET\r\n    function annotateField(arg, field, insAnn, n, defField) {\r\n        var _a, _b, _c, _d;\r\n        var fieldAnn = (_a = argAnn(field).f) === null || _a === void 0 ? void 0 : _a[0]; // field's field annotation\r\n        var insFieldAnn = (_b = insAnn.f) === null || _b === void 0 ? void 0 : _b[n];\r\n        if (insFieldAnn !== undefined && insFieldAnn !== \"%\" && fieldAnn !== undefined && insFieldAnn !== fieldAnn) {\r\n            throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": field names doesn't match: \" + insFieldAnn + \" !== \" + fieldAnn);\r\n        }\r\n        var insVarAnn = (_c = insAnn.v) === null || _c === void 0 ? void 0 : _c[n]; // nth instruction's variable annotation\r\n        var varAnn = (_d = argAnn(arg).v) === null || _d === void 0 ? void 0 : _d[0]; // instruction argument's variable annotation\r\n        return annotate(field, {\r\n            t: null,\r\n            v: insVarAnn ?\r\n                insVarAnn === \"@%\" ?\r\n                    fieldAnn ? [\"@\" + fieldAnn.slice(1)] : undefined :\r\n                    insVarAnn === \"@%%\" ?\r\n                        varAnn ?\r\n                            [\"@\" + varAnn.slice(1) + \".\" + (fieldAnn ? fieldAnn.slice(1) : defField)] :\r\n                            fieldAnn ? [\"@\" + fieldAnn.slice(1)] : undefined :\r\n                        [insVarAnn] :\r\n                null,\r\n        });\r\n    }\r\n    // comb helper functions\r\n    function getN(src, n, i) {\r\n        if (i === void 0) { i = n; }\r\n        var p = unpackComb(\"pair\", src);\r\n        if (i === 1) {\r\n            return [p.args[0]];\r\n        }\r\n        else if (i === 2) {\r\n            return p.args;\r\n        }\r\n        var right = p.args[1];\r\n        if (isPairType(right)) {\r\n            return __spreadArray([p.args[0]], __read(getN(right, n, i - 1)));\r\n        }\r\n        else {\r\n            throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": at least \" + n + \" fields are expected\");\r\n        }\r\n    }\r\n    function getNth(src, n, i) {\r\n        if (i === void 0) { i = n; }\r\n        if (i === 0) {\r\n            return src;\r\n        }\r\n        var p = unpackComb(\"pair\", src);\r\n        if (i === 1) {\r\n            return p.args[0];\r\n        }\r\n        var right = p.args[1];\r\n        if (isPairType(right)) {\r\n            return getNth(right, n, i - 2);\r\n        }\r\n        else if (i === 2) {\r\n            return right;\r\n        }\r\n        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": at least \" + (n + 1) + \" fields are expected\");\r\n    }\r\n    function updateNth(src, x, n, i) {\r\n        if (i === void 0) { i = n; }\r\n        if (i === 0) {\r\n            return x;\r\n        }\r\n        var p = unpackComb(\"pair\", src);\r\n        if (i === 1) {\r\n            return __assign(__assign({}, p), { args: [x, p.args[1]] });\r\n        }\r\n        var right = p.args[1];\r\n        if (isPairType(right)) {\r\n            return __assign(__assign({}, p), { args: [p.args[0], updateNth(right, x, n, i - 2)] });\r\n        }\r\n        else if (i === 2) {\r\n            return __assign(__assign({}, p), { args: [p.args[0], x] });\r\n        }\r\n        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": at least \" + (n + 1) + \" fields are expected\");\r\n    }\r\n    var varSuffix = function (a, suffix) { return [\"@\" + (a.v ? a.v[0].slice(1) + \".\" : \"\") + suffix]; };\r\n    function branchType(br0, br1) {\r\n        if ((\"failed\" in br0) || (\"failed\" in br1)) {\r\n            // Might be useful for debugging\r\n            if ((\"failed\" in br0) && (\"failed\" in br1)) {\r\n                try {\r\n                    assertScalarTypesEqual(br0.failed, br1.failed);\r\n                    return br0;\r\n                }\r\n                catch (_a) {\r\n                    return { failed: { prim: \"or\", args: [br0.failed, br1.failed] } };\r\n                }\r\n            }\r\n            else {\r\n                return (\"failed\" in br0) ? br1 : br0;\r\n            }\r\n        }\r\n        else {\r\n            ensureStacksEqual(br0, br1);\r\n            return br0;\r\n        }\r\n    }\r\n    var retStack = (function (instruction) {\r\n        var _a, _b;\r\n        var _c, _d, _e, _f, _g;\r\n        switch (instruction.prim) {\r\n            case \"DUP\":\r\n                {\r\n                    var n = instruction.args ? parseInt(instruction.args[0].int, 10) : 1;\r\n                    if (n === 0) {\r\n                        throw new MichelsonInstructionError(instruction, stack, \"DUP 0 is forbidden\");\r\n                    }\r\n                    var s_1 = args(n - 1, null)[0];\r\n                    if (typeID(s_1) === \"ticket\") {\r\n                        throw new MichelsonInstructionError(instruction, stack, \"ticket can't be DUPed\");\r\n                    }\r\n                    return __spreadArray([s_1], __read(stack));\r\n                }\r\n            case \"SWAP\":\r\n                {\r\n                    var s_2 = args(0, null, null);\r\n                    instructionAnn({});\r\n                    return __spreadArray([s_2[1], s_2[0]], __read(stack.slice(2)));\r\n                }\r\n            case \"SOME\":\r\n                return __spreadArray([annotate({ prim: \"option\", args: [args(0, null)[0]] }, instructionAnn({ t: 1, v: 1 }))], __read(stack.slice(1)));\r\n            case \"UNIT\":\r\n                return __spreadArray([annotate({ prim: \"unit\" }, instructionAnn({ v: 1, t: 1 }))], __read(stack));\r\n            case \"PAIR\":\r\n                {\r\n                    var n = instruction.args ? parseInt(instruction.args[0].int, 10) : 2;\r\n                    if (n < 2) {\r\n                        throw new MichelsonInstructionError(instruction, stack, \"PAIR \" + n + \" is forbidden\");\r\n                    }\r\n                    var s_3 = args.apply(void 0, __spreadArray([0], __read(new Array(n).fill(null))));\r\n                    var ia_1 = instructionAnn({ f: n, t: 1, v: 1 }, { specialFields: true });\r\n                    var trim_1 = function (s) {\r\n                        var i = s.lastIndexOf(\".\");\r\n                        return s.slice(i > 0 ? i + 1 : 1);\r\n                    };\r\n                    var retArgs = s_3.map(function (v, i) {\r\n                        var _a;\r\n                        var va = argAnn(v);\r\n                        var f = ia_1.f && ia_1.f.length > i && ia_1.f[i] !== \"%\" ?\r\n                            ia_1.f[i] === \"%@\" ?\r\n                                va.v ? [\"%\" + trim_1(((_a = va.v) === null || _a === void 0 ? void 0 : _a[0]) || \"\")] : undefined :\r\n                                [ia_1.f[i]] :\r\n                            undefined;\r\n                        return annotate(v, { v: null, t: null, f: f });\r\n                    });\r\n                    return __spreadArray([\r\n                        annotate({\r\n                            prim: \"pair\",\r\n                            args: retArgs,\r\n                        }, { t: ia_1.t, v: ia_1.v })\r\n                    ], __read(stack.slice(n)));\r\n                }\r\n            case \"UNPAIR\":\r\n                {\r\n                    var n = instruction.args ? parseInt(instruction.args[0].int, 10) : 2;\r\n                    if (n < 2) {\r\n                        throw new MichelsonInstructionError(instruction, stack, \"UNPAIR \" + n + \" is forbidden\");\r\n                    }\r\n                    var s_4 = args(0, [\"pair\"])[0];\r\n                    var ia_2 = instructionAnn({ f: 2, v: 2 }, { specialVar: true });\r\n                    var fields = getN(s_4, n);\r\n                    return __spreadArray(__spreadArray([], __read(fields.map(function (field, i) { return annotateField(s_4, field, ia_2, i, i === 0 ? \"car\" : \"cdr\"); }))), __read(stack.slice(1)));\r\n                }\r\n            case \"CAR\":\r\n            case \"CDR\":\r\n                {\r\n                    var s_5 = unpackComb(\"pair\", args(0, [\"pair\"])[0]);\r\n                    var field = s_5.args[instruction.prim === \"CAR\" ? 0 : 1];\r\n                    var ia = instructionAnn({ f: 1, v: 1 }, { specialVar: true });\r\n                    return __spreadArray([annotateField(s_5, field, ia, 0, instruction.prim.toLocaleLowerCase())], __read(stack.slice(1)));\r\n                }\r\n            case \"CONS\":\r\n                {\r\n                    var s_6 = args(0, null, [\"list\"]);\r\n                    ensureTypesEqual(s_6[0], s_6[1].args[0]);\r\n                    return __spreadArray([annotateVar({ prim: \"list\", args: [s_6[1].args[0]] })], __read(stack.slice(2)));\r\n                }\r\n            case \"SIZE\":\r\n                args(0, [\"string\", \"list\", \"set\", \"map\", \"bytes\"]);\r\n                return __spreadArray([annotateVar({ prim: \"nat\" })], __read(stack.slice(1)));\r\n            case \"MEM\":\r\n                {\r\n                    var s_7 = args(0, null, [\"set\", \"map\", \"big_map\"]);\r\n                    ensureComparableType(s_7[0]);\r\n                    ensureTypesEqual(s_7[0], s_7[1].args[0]);\r\n                    return __spreadArray([annotateVar({ prim: \"bool\" })], __read(stack.slice(2)));\r\n                }\r\n            case \"GET\":\r\n                if (instruction.args) {\r\n                    // comb operation\r\n                    var n = parseInt(instruction.args[0].int, 10);\r\n                    var s_8 = args(0, [\"pair\"])[0];\r\n                    return __spreadArray([annotateVar(getNth(s_8, n))], __read(stack.slice(1)));\r\n                }\r\n                else {\r\n                    // map operation\r\n                    var s_9 = args(0, null, [\"map\", \"big_map\"]);\r\n                    ensureComparableType(s_9[0]);\r\n                    ensureTypesEqual(s_9[0], s_9[1].args[0]);\r\n                    return __spreadArray([annotateVar({ prim: \"option\", args: [s_9[1].args[1]] })], __read(stack.slice(2)));\r\n                }\r\n            case \"UPDATE\":\r\n                if (instruction.args) {\r\n                    // comb operation\r\n                    var n = parseInt(instruction.args[0].int, 10);\r\n                    var s_10 = args(0, null, [\"pair\"]);\r\n                    return __spreadArray([annotateVar(updateNth(s_10[1], s_10[0], n))], __read(stack.slice(2)));\r\n                }\r\n                else {\r\n                    // map operation\r\n                    var s0 = args(0, null, [\"bool\", \"option\"]);\r\n                    ensureComparableType(s0[0]);\r\n                    if (s0[1].prim === \"bool\") {\r\n                        var s1_1 = args(2, [\"set\"]);\r\n                        ensureTypesEqual(s0[0], s1_1[0].args[0]);\r\n                        return __spreadArray([annotateVar({\r\n                                prim: \"set\",\r\n                                args: [annotate(s0[0], { t: null })],\r\n                            })], __read(stack.slice(3)));\r\n                    }\r\n                    var s1 = args(2, [\"map\", \"big_map\"]);\r\n                    ensureTypesEqual(s0[0], s1[0].args[0]);\r\n                    if (s1[0].prim === \"map\") {\r\n                        return __spreadArray([annotateVar({\r\n                                prim: \"map\",\r\n                                args: [\r\n                                    annotate(s0[0], { t: null }),\r\n                                    annotate(s0[1].args[0], { t: null }),\r\n                                ],\r\n                            })], __read(stack.slice(3)));\r\n                    }\r\n                    ensureBigMapStorableType(s0[1].args[0]);\r\n                    return __spreadArray([annotateVar({\r\n                            prim: \"big_map\",\r\n                            args: [\r\n                                annotate(s0[0], { t: null }),\r\n                                annotate(s0[1].args[0], { t: null }),\r\n                            ],\r\n                        })], __read(stack.slice(3)));\r\n                }\r\n            case \"GET_AND_UPDATE\":\r\n                {\r\n                    var ia = instructionAnn({ v: 2 });\r\n                    var s_11 = args(0, null, [\"option\"], [\"map\", \"big_map\"]);\r\n                    ensureComparableType(s_11[0]);\r\n                    ensureTypesEqual(s_11[0], s_11[2].args[0]);\r\n                    ensureTypesEqual(s_11[1].args[0], s_11[2].args[1]);\r\n                    var va = (_c = ia.v) === null || _c === void 0 ? void 0 : _c.map(function (v) { return v !== \"@\" ? [v] : undefined; });\r\n                    if (s_11[2].prim === \"map\") {\r\n                        return __spreadArray([\r\n                            annotate({ prim: \"option\", args: [s_11[2].args[1]] }, { v: va === null || va === void 0 ? void 0 : va[0] }),\r\n                            annotate({\r\n                                prim: \"map\",\r\n                                args: [\r\n                                    annotate(s_11[0], { t: null }),\r\n                                    annotate(s_11[1].args[0], { t: null }),\r\n                                ],\r\n                            }, { v: va === null || va === void 0 ? void 0 : va[1] })\r\n                        ], __read(stack.slice(3)));\r\n                    }\r\n                    ensureBigMapStorableType(s_11[1].args[0]);\r\n                    return __spreadArray([\r\n                        annotate({ prim: \"option\", args: [s_11[2].args[1]] }, { v: va === null || va === void 0 ? void 0 : va[0] }),\r\n                        annotate({\r\n                            prim: \"big_map\",\r\n                            args: [\r\n                                annotate(s_11[0], { t: null }),\r\n                                annotate(s_11[1].args[0], { t: null }),\r\n                            ],\r\n                        }, { v: va === null || va === void 0 ? void 0 : va[1] })\r\n                    ], __read(stack.slice(3)));\r\n                }\r\n            case \"EXEC\":\r\n                {\r\n                    var s_12 = args(0, null, [\"lambda\"]);\r\n                    ensureTypesEqual(s_12[0], s_12[1].args[0]);\r\n                    return __spreadArray([annotateVar(s_12[1].args[1])], __read(stack.slice(2)));\r\n                }\r\n            case \"APPLY\":\r\n                {\r\n                    var s_13 = args(0, null, [\"lambda\"]);\r\n                    ensureStorableType(s_13[0]);\r\n                    ensurePushableType(s_13[0]);\r\n                    if (!isPairType(s_13[1].args[0])) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": function's argument must be a pair: \" + typeID(s_13[1].args[0]));\r\n                    }\r\n                    var pt = s_13[1].args[0];\r\n                    ensureTypesEqual(s_13[0], typeArgs(pt)[0]);\r\n                    return __spreadArray([annotateVar({ prim: \"lambda\", args: [typeArgs(pt)[1], s_13[1].args[1]] })], __read(stack.slice(2)));\r\n                }\r\n            case \"FAILWITH\":\r\n                {\r\n                    var s_14 = args(0, null)[0];\r\n                    if (proto === Protocol.PtEdo2Zk || proto === Protocol.PsFLorena || proto === Protocol.PtGRANADs) {\r\n                        ensurePackableType(s_14);\r\n                    }\r\n                    return { failed: s_14 };\r\n                }\r\n            case \"NEVER\":\r\n                args(0, [\"never\"]);\r\n                return { failed: { prim: \"never\" } };\r\n            case \"RENAME\":\r\n                return __spreadArray([annotateVar(args(0, null)[0])], __read(stack.slice(1)));\r\n            case \"CONCAT\":\r\n                {\r\n                    var s0 = args(0, [\"string\", \"list\", \"bytes\"]);\r\n                    if (s0[0].prim === \"list\") {\r\n                        if (typeID(s0[0].args[0]) !== \"string\" && typeID(s0[0].args[0]) !== \"bytes\") {\r\n                            throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": can't concatenate list of \" + typeID(s0[0].args[0]) + \"'s\");\r\n                        }\r\n                        return __spreadArray([annotateVar(s0[0].args[0])], __read(stack.slice(1)));\r\n                    }\r\n                    var s1 = args(1, [\"string\", \"bytes\"]);\r\n                    if (s0[0].prim !== s1[0].prim) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": can't concatenate \" + s0[0].prim + \" with \" + s1[0].prim);\r\n                    }\r\n                    return __spreadArray([annotateVar(s1[0])], __read(stack.slice(2)));\r\n                }\r\n            case \"SLICE\":\r\n                return __spreadArray([annotateVar({ prim: \"option\", args: [args(0, [\"nat\"], [\"nat\"], [\"string\", \"bytes\"])[2]] }, \"@slice\")], __read(stack.slice(3)));\r\n            case \"PACK\":\r\n                {\r\n                    var s_15 = args(0, null)[0];\r\n                    ensurePackableType(s_15);\r\n                    return __spreadArray([annotateVar({ prim: \"bytes\" }, \"@packed\")], __read(stack.slice(1)));\r\n                }\r\n            case \"ADD\":\r\n                {\r\n                    var s_16 = args(0, [\"nat\", \"int\", \"timestamp\", \"mutez\", \"bls12_381_g1\", \"bls12_381_g2\", \"bls12_381_fr\"], [\"nat\", \"int\", \"timestamp\", \"mutez\", \"bls12_381_g1\", \"bls12_381_g2\", \"bls12_381_fr\"]);\r\n                    if (s_16[0].prim === \"nat\" && s_16[1].prim === \"int\" || s_16[0].prim === \"int\" && s_16[1].prim === \"nat\") {\r\n                        return __spreadArray([annotateVar({ prim: \"int\" })], __read(stack.slice(2)));\r\n                    }\r\n                    else if (s_16[0].prim === \"int\" && s_16[1].prim === \"timestamp\" || s_16[0].prim === \"timestamp\" && s_16[1].prim === \"int\") {\r\n                        return __spreadArray([annotateVar({ prim: \"timestamp\" })], __read(stack.slice(2)));\r\n                    }\r\n                    else if ((s_16[0].prim === \"int\" || s_16[0].prim === \"nat\" || s_16[0].prim === \"mutez\" || s_16[0].prim === \"bls12_381_g1\" || s_16[0].prim === \"bls12_381_g2\" || s_16[0].prim === \"bls12_381_fr\") && s_16[0].prim === s_16[1].prim) {\r\n                        return __spreadArray([annotateVar(s_16[0])], __read(stack.slice(2)));\r\n                    }\r\n                    throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": can't add \" + s_16[0].prim + \" to \" + s_16[1].prim);\r\n                }\r\n            case \"SUB\":\r\n                {\r\n                    var s_17 = args(0, [\"nat\", \"int\", \"timestamp\", \"mutez\"], [\"nat\", \"int\", \"timestamp\", \"mutez\"]);\r\n                    if (((s_17[0].prim === \"nat\" || s_17[0].prim === \"int\") && (s_17[1].prim === \"nat\" || s_17[1].prim === \"int\")) ||\r\n                        s_17[0].prim === \"timestamp\" && s_17[1].prim === \"timestamp\") {\r\n                        return __spreadArray([annotateVar({ prim: \"int\" })], __read(stack.slice(2)));\r\n                    }\r\n                    else if (s_17[0].prim === \"timestamp\" && s_17[1].prim === \"int\") {\r\n                        return __spreadArray([annotateVar({ prim: \"timestamp\" })], __read(stack.slice(2)));\r\n                    }\r\n                    else if (s_17[0].prim === \"mutez\" && s_17[1].prim === \"mutez\") {\r\n                        return __spreadArray([annotateVar({ prim: \"mutez\" })], __read(stack.slice(2)));\r\n                    }\r\n                    throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": can't subtract \" + s_17[0].prim + \" from \" + s_17[1].prim);\r\n                }\r\n            case \"MUL\":\r\n                {\r\n                    var s_18 = args(0, [\"nat\", \"int\", \"mutez\", \"bls12_381_g1\", \"bls12_381_g2\", \"bls12_381_fr\"], [\"nat\", \"int\", \"mutez\", \"bls12_381_g1\", \"bls12_381_g2\", \"bls12_381_fr\"]);\r\n                    if (s_18[0].prim === \"nat\" && s_18[1].prim === \"int\" || s_18[0].prim === \"int\" && s_18[1].prim === \"nat\") {\r\n                        return __spreadArray([annotateVar({ prim: \"int\" })], __read(stack.slice(2)));\r\n                    }\r\n                    else if (s_18[0].prim === \"nat\" && s_18[1].prim === \"mutez\" || s_18[0].prim === \"mutez\" && s_18[1].prim === \"nat\") {\r\n                        return __spreadArray([annotateVar({ prim: \"mutez\" })], __read(stack.slice(2)));\r\n                    }\r\n                    else if ((s_18[0].prim === \"bls12_381_g1\" || s_18[0].prim === \"bls12_381_g2\" || s_18[0].prim === \"bls12_381_fr\") && s_18[1].prim === \"bls12_381_fr\" ||\r\n                        (s_18[0].prim === \"nat\" || s_18[0].prim === \"int\") && s_18[0].prim === s_18[1].prim) {\r\n                        return __spreadArray([annotateVar(s_18[0])], __read(stack.slice(2)));\r\n                    }\r\n                    else if ((s_18[0].prim === \"nat\" || s_18[0].prim === \"int\") && s_18[1].prim === \"bls12_381_fr\" ||\r\n                        (s_18[1].prim === \"nat\" || s_18[1].prim === \"int\") && s_18[0].prim === \"bls12_381_fr\") {\r\n                        return __spreadArray([annotateVar({ prim: \"bls12_381_fr\" })], __read(stack.slice(2)));\r\n                    }\r\n                    throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": can't multiply \" + s_18[0].prim + \" by \" + s_18[1].prim);\r\n                }\r\n            case \"EDIV\":\r\n                {\r\n                    var res = function (a, b) { return ({ prim: \"option\", args: [{ prim: \"pair\", args: [{ prim: a }, { prim: b }] }] }); };\r\n                    var s_19 = args(0, [\"nat\", \"int\", \"mutez\"], [\"nat\", \"int\", \"mutez\"]);\r\n                    if (s_19[0].prim === \"nat\" && s_19[1].prim === \"nat\") {\r\n                        return __spreadArray([annotateVar(res(\"nat\", \"nat\"))], __read(stack.slice(2)));\r\n                    }\r\n                    else if ((s_19[0].prim === \"nat\" || s_19[0].prim === \"int\") && (s_19[1].prim === \"nat\" || s_19[1].prim === \"int\")) {\r\n                        return __spreadArray([annotateVar(res(\"int\", \"nat\"))], __read(stack.slice(2)));\r\n                    }\r\n                    else if (s_19[0].prim === \"mutez\" && s_19[1].prim === \"nat\") {\r\n                        return __spreadArray([annotateVar(res(\"mutez\", \"mutez\"))], __read(stack.slice(2)));\r\n                    }\r\n                    else if (s_19[0].prim === \"mutez\" && s_19[1].prim === \"mutez\") {\r\n                        return __spreadArray([annotateVar(res(\"nat\", \"mutez\"))], __read(stack.slice(2)));\r\n                    }\r\n                    throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": can't euclideally divide \" + s_19[0].prim + \" by \" + s_19[1].prim);\r\n                }\r\n            case \"ABS\":\r\n                args(0, [\"int\"]);\r\n                return __spreadArray([annotateVar({ prim: \"nat\" })], __read(stack.slice(1)));\r\n            case \"ISNAT\":\r\n                args(0, [\"int\"]);\r\n                return __spreadArray([annotateVar({ prim: \"option\", args: [{ prim: \"nat\" }] })], __read(stack.slice(1)));\r\n            case \"INT\":\r\n                args(0, [\"nat\", \"bls12_381_fr\"]);\r\n                return __spreadArray([annotateVar({ prim: \"int\" })], __read(stack.slice(1)));\r\n            case \"NEG\":\r\n                {\r\n                    var s_20 = args(0, [\"nat\", \"int\", \"bls12_381_g1\", \"bls12_381_g2\", \"bls12_381_fr\"])[0];\r\n                    if (s_20.prim === \"nat\" || s_20.prim === \"int\") {\r\n                        return __spreadArray([annotateVar({ prim: \"int\" })], __read(stack.slice(1)));\r\n                    }\r\n                    return __spreadArray([annotateVar(s_20)], __read(stack.slice(1)));\r\n                }\r\n            case \"LSL\":\r\n            case \"LSR\":\r\n                args(0, [\"nat\"], [\"nat\"]);\r\n                return __spreadArray([annotateVar({ prim: \"nat\" })], __read(stack.slice(2)));\r\n            case \"OR\":\r\n            case \"XOR\":\r\n                {\r\n                    var s_21 = args(0, [\"nat\", \"bool\"], [\"nat\", \"bool\"]);\r\n                    if (s_21[0].prim !== s_21[1].prim) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": both arguments must be of the same type: \" + s_21[0].prim + \", \" + s_21[1].prim);\r\n                    }\r\n                    return __spreadArray([annotateVar(s_21[1])], __read(stack.slice(2)));\r\n                }\r\n            case \"AND\":\r\n                {\r\n                    var s_22 = args(0, [\"nat\", \"bool\", \"int\"], [\"nat\", \"bool\"]);\r\n                    if ((s_22[0].prim !== \"int\" || s_22[1].prim !== \"nat\") && s_22[0].prim !== s_22[1].prim) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": both arguments must be of the same type: \" + s_22[0].prim + \", \" + s_22[1].prim);\r\n                    }\r\n                    return __spreadArray([annotateVar(s_22[1])], __read(stack.slice(2)));\r\n                }\r\n            case \"NOT\":\r\n                {\r\n                    var s_23 = args(0, [\"nat\", \"bool\", \"int\"])[0];\r\n                    if (s_23.prim === \"bool\") {\r\n                        return __spreadArray([annotateVar({ prim: \"bool\" })], __read(stack.slice(1)));\r\n                    }\r\n                    return __spreadArray([annotateVar({ prim: \"int\" })], __read(stack.slice(1)));\r\n                }\r\n            case \"COMPARE\":\r\n                {\r\n                    var s_24 = args(0, null, null);\r\n                    ensureComparableType(s_24[0]);\r\n                    ensureComparableType(s_24[1]);\r\n                    return __spreadArray([annotateVar({ prim: \"int\" })], __read(stack.slice(2)));\r\n                }\r\n            case \"EQ\":\r\n            case \"NEQ\":\r\n            case \"LT\":\r\n            case \"GT\":\r\n            case \"LE\":\r\n            case \"GE\":\r\n                args(0, [\"int\"]);\r\n                return __spreadArray([annotateVar({ prim: \"bool\" })], __read(stack.slice(1)));\r\n            case \"SELF\":\r\n                {\r\n                    if ((ctx === null || ctx === void 0 ? void 0 : ctx.contract) === undefined) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": contract required\");\r\n                    }\r\n                    var ia = instructionAnn({ f: 1, v: 1 });\r\n                    var ep = contractEntryPoint(ctx.contract, (_d = ia.f) === null || _d === void 0 ? void 0 : _d[0]);\r\n                    if (ep === null) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": contract has no entrypoint \" + ep);\r\n                    }\r\n                    return __spreadArray([annotate({ prim: \"contract\", args: [ep] }, { v: ia.v ? ia.v : [\"@self\"] })], __read(stack));\r\n                }\r\n            case \"TRANSFER_TOKENS\":\r\n                {\r\n                    var s_25 = args(0, null, [\"mutez\"], [\"contract\"]);\r\n                    ensureTypesEqual(s_25[0], s_25[2].args[0]);\r\n                    return __spreadArray([annotateVar({ prim: \"operation\" })], __read(stack.slice(3)));\r\n                }\r\n            case \"SET_DELEGATE\":\r\n                {\r\n                    var s_26 = args(0, [\"option\"])[0];\r\n                    if (typeID(s_26.args[0]) !== \"key_hash\") {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": key hash expected: \" + typeID(s_26.args[0]));\r\n                    }\r\n                    return __spreadArray([annotateVar({ prim: \"operation\" })], __read(stack.slice(1)));\r\n                }\r\n            case \"IMPLICIT_ACCOUNT\":\r\n                args(0, [\"key_hash\"]);\r\n                return __spreadArray([annotateVar({ prim: \"contract\", args: [{ prim: \"unit\" }] })], __read(stack.slice(1)));\r\n            case \"NOW\":\r\n                return __spreadArray([annotateVar({ prim: \"timestamp\" }, \"@now\")], __read(stack));\r\n            case \"AMOUNT\":\r\n                return __spreadArray([annotateVar({ prim: \"mutez\" }, \"@amount\")], __read(stack));\r\n            case \"BALANCE\":\r\n                return __spreadArray([annotateVar({ prim: \"mutez\" }, \"@balance\")], __read(stack));\r\n            case \"CHECK_SIGNATURE\":\r\n                args(0, [\"key\"], [\"signature\"], [\"bytes\"]);\r\n                return __spreadArray([annotateVar({ prim: \"bool\" })], __read(stack.slice(3)));\r\n            case \"BLAKE2B\":\r\n            case \"SHA256\":\r\n            case \"SHA512\":\r\n            case \"KECCAK\":\r\n            case \"SHA3\":\r\n                args(0, [\"bytes\"]);\r\n                return __spreadArray([annotateVar({ prim: \"bytes\" })], __read(stack.slice(1)));\r\n            case \"HASH_KEY\":\r\n                args(0, [\"key\"]);\r\n                return __spreadArray([annotateVar({ prim: \"key_hash\" })], __read(stack.slice(1)));\r\n            case \"SOURCE\":\r\n                return __spreadArray([annotateVar({ prim: \"address\" }, \"@source\")], __read(stack));\r\n            case \"SENDER\":\r\n                return __spreadArray([annotateVar({ prim: \"address\" }, \"@sender\")], __read(stack));\r\n            case \"ADDRESS\":\r\n                {\r\n                    var s_27 = args(0, [\"contract\"])[0];\r\n                    var ia = instructionAnn({ v: 1 });\r\n                    return __spreadArray([\r\n                        annotate((_a = { prim: \"address\" }, _a[refContract] = s_27, _a), { v: ia.v ? ia.v : varSuffix(argAnn(s_27), \"address\") })\r\n                    ], __read(stack.slice(1)));\r\n                }\r\n            case \"SELF_ADDRESS\":\r\n                {\r\n                    var addr = { prim: \"address\" };\r\n                    if ((ctx === null || ctx === void 0 ? void 0 : ctx.contract) !== undefined) {\r\n                        addr[refContract] = { prim: \"contract\", args: [contractSection(ctx.contract, \"parameter\").args[0]] };\r\n                    }\r\n                    return __spreadArray([annotateVar(addr, \"@address\")], __read(stack));\r\n                }\r\n            case \"CHAIN_ID\":\r\n                return __spreadArray([annotateVar({ prim: \"chain_id\" })], __read(stack));\r\n            case \"DROP\":\r\n                {\r\n                    instructionAnn({});\r\n                    var n = instruction.args !== undefined ? parseInt(instruction.args[0].int, 10) : 1;\r\n                    args(n - 1, null);\r\n                    return stack.slice(n);\r\n                }\r\n            case \"DIG\":\r\n                {\r\n                    instructionAnn({});\r\n                    var n = parseInt(instruction.args[0].int, 10);\r\n                    return __spreadArray(__spreadArray([args(n, null)[0]], __read(stack.slice(0, n))), __read(stack.slice(n + 1)));\r\n                }\r\n            case \"DUG\":\r\n                {\r\n                    instructionAnn({});\r\n                    var n = parseInt(instruction.args[0].int, 10);\r\n                    return __spreadArray(__spreadArray(__spreadArray([], __read(stack.slice(1, n + 1))), [args(0, null)[0]]), __read(stack.slice(n + 1)));\r\n                }\r\n            case \"NONE\":\r\n                assertTypeAnnotationsValid(instruction.args[0]);\r\n                return __spreadArray([annotate({ prim: \"option\", args: [instruction.args[0]] }, instructionAnn({ t: 1, v: 1 }))], __read(stack));\r\n            case \"LEFT\":\r\n            case \"RIGHT\":\r\n                {\r\n                    var s_28 = args(0, null)[0];\r\n                    var ia = instructionAnn({ f: 2, t: 1, v: 1 }, { specialFields: true });\r\n                    var va = argAnn(s_28);\r\n                    var children = [\r\n                        annotate(s_28, {\r\n                            t: null,\r\n                            v: null,\r\n                            f: ia.f && ia.f.length > 0 && ia.f[0] !== \"%\" ?\r\n                                ia.f[0] === \"%@\" ?\r\n                                    va.v ? [\"%\" + va.v[0].slice(1)] : undefined :\r\n                                    ia.f :\r\n                                undefined,\r\n                        }),\r\n                        annotate(instruction.args[0], {\r\n                            t: null,\r\n                            f: ia.f && ia.f.length > 1 && ia.f[1] !== \"%\" ? ia.f : undefined,\r\n                        }),\r\n                    ];\r\n                    return __spreadArray([annotate({\r\n                            prim: \"or\", args: instruction.prim === \"LEFT\" ? children : [children[1], children[0]]\r\n                        }, { t: ia.t, v: ia.v })], __read(stack.slice(1)));\r\n                }\r\n            case \"NIL\":\r\n                assertTypeAnnotationsValid(instruction.args[0]);\r\n                return __spreadArray([annotate({ prim: \"list\", args: [instruction.args[0]] }, instructionAnn({ t: 1, v: 1 }))], __read(stack));\r\n            case \"UNPACK\":\r\n                args(0, [\"bytes\"]);\r\n                assertTypeAnnotationsValid(instruction.args[0]);\r\n                return __spreadArray([annotateVar({ prim: \"option\", args: [instruction.args[0]] }, \"@unpacked\")], __read(stack.slice(1)));\r\n            case \"CONTRACT\":\r\n                {\r\n                    var s_29 = args(0, [\"address\"])[0];\r\n                    assertTypeAnnotationsValid(instruction.args[0]);\r\n                    var ia = instructionAnn({ v: 1, f: 1 });\r\n                    var contract = s_29[refContract];\r\n                    if (contract !== undefined) {\r\n                        var ep = contractEntryPoint(contract, (_e = ia.f) === null || _e === void 0 ? void 0 : _e[0]);\r\n                        if (ep === null) {\r\n                            throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": contract has no entrypoint \" + ep);\r\n                        }\r\n                        ensureTypesEqual(ep, instruction.args[0]);\r\n                    }\r\n                    return __spreadArray([\r\n                        annotate({ prim: \"option\", args: [{ prim: \"contract\", args: [instruction.args[0]] }] }, { v: ia.v ? ia.v : varSuffix(argAnn(s_29), \"contract\") })\r\n                    ], __read(stack.slice(1)));\r\n                }\r\n            case \"CAST\":\r\n                instructionAnn({});\r\n                var s = args(0, null)[0];\r\n                assertTypeAnnotationsValid(instruction.args[0]);\r\n                ensureTypesEqual(instruction.args[0], s);\r\n                return __spreadArray([instruction.args[0]], __read(stack.slice(1)));\r\n            case \"IF_NONE\":\r\n                {\r\n                    instructionAnn({});\r\n                    var s_30 = args(0, [\"option\"])[0];\r\n                    var tail = stack.slice(1);\r\n                    var br0 = functionTypeInternal(instruction.args[0], tail, ctx);\r\n                    var br1 = functionTypeInternal(instruction.args[1], __spreadArray([annotate(s_30.args[0], { t: null, v: varSuffix(argAnn(s_30), \"some\") })], __read(tail)), ctx);\r\n                    return branchType(br0, br1);\r\n                }\r\n            case \"IF_LEFT\":\r\n                {\r\n                    instructionAnn({});\r\n                    var s_31 = args(0, [\"or\"])[0];\r\n                    var va = argAnn(s_31);\r\n                    var lefta = argAnn(s_31.args[0]);\r\n                    var righta = argAnn(s_31.args[1]);\r\n                    var tail = stack.slice(1);\r\n                    var br0 = functionTypeInternal(instruction.args[0], __spreadArray([\r\n                        annotate(s_31.args[0], { t: null, v: varSuffix(va, lefta.f ? lefta.f[0].slice(1) : \"left\") })\r\n                    ], __read(tail)), ctx);\r\n                    var br1 = functionTypeInternal(instruction.args[1], __spreadArray([\r\n                        annotate(s_31.args[1], { t: null, v: varSuffix(va, righta.f ? righta.f[0].slice(1) : \"right\") })\r\n                    ], __read(tail)), ctx);\r\n                    return branchType(br0, br1);\r\n                }\r\n            case \"IF_CONS\":\r\n                {\r\n                    instructionAnn({});\r\n                    var s_32 = args(0, [\"list\"])[0];\r\n                    var va = argAnn(s_32);\r\n                    var tail = stack.slice(1);\r\n                    var br0 = functionTypeInternal(instruction.args[0], __spreadArray([\r\n                        annotate(s_32.args[0], { t: null, v: varSuffix(va, \"hd\") }),\r\n                        annotate(s_32, { t: null, v: varSuffix(va, \"tl\") })\r\n                    ], __read(tail)), ctx);\r\n                    var br1 = functionTypeInternal(instruction.args[1], tail, ctx);\r\n                    return branchType(br0, br1);\r\n                }\r\n            case \"IF\":\r\n                {\r\n                    instructionAnn({});\r\n                    args(0, [\"bool\"]);\r\n                    var tail = stack.slice(1);\r\n                    var br0 = functionTypeInternal(instruction.args[0], tail, ctx);\r\n                    var br1 = functionTypeInternal(instruction.args[1], tail, ctx);\r\n                    return branchType(br0, br1);\r\n                }\r\n            case \"MAP\":\r\n                {\r\n                    var s_33 = args(0, [\"list\", \"map\"])[0];\r\n                    var tail = stack.slice(1);\r\n                    var elt = s_33.prim === \"map\" ? { prim: \"pair\", args: s_33.args } : s_33.args[0];\r\n                    var body = functionTypeInternal(instruction.args[0], __spreadArray([annotate(elt, { t: null, v: varSuffix(argAnn(s_33), \"elt\") })], __read(tail)), ctx);\r\n                    if (\"failed\" in body) {\r\n                        return body;\r\n                    }\r\n                    if (body.length < 1) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": function must return a value\");\r\n                    }\r\n                    ensureStacksEqual(body.slice(1), tail);\r\n                    if (s_33.prim === \"list\") {\r\n                        return __spreadArray([annotateVar({ prim: \"list\", args: [body[0]] })], __read(tail));\r\n                    }\r\n                    return __spreadArray([annotateVar({ prim: \"map\", args: [s_33.args[0], body[0]] })], __read(tail));\r\n                }\r\n            case \"ITER\":\r\n                {\r\n                    instructionAnn({});\r\n                    var s_34 = args(0, [\"set\", \"list\", \"map\"])[0];\r\n                    var tail = stack.slice(1);\r\n                    var elt = s_34.prim === \"map\" ? { prim: \"pair\", args: s_34.args } : s_34.args[0];\r\n                    var body = functionTypeInternal(instruction.args[0], __spreadArray([annotate(elt, { t: null, v: varSuffix(argAnn(s_34), \"elt\") })], __read(tail)), ctx);\r\n                    if (\"failed\" in body) {\r\n                        return body;\r\n                    }\r\n                    ensureStacksEqual(body, tail);\r\n                    return tail;\r\n                }\r\n            case \"LOOP\":\r\n                {\r\n                    instructionAnn({});\r\n                    args(0, [\"bool\"]);\r\n                    var tail = stack.slice(1);\r\n                    var body = functionTypeInternal(instruction.args[0], tail, ctx);\r\n                    if (\"failed\" in body) {\r\n                        return body;\r\n                    }\r\n                    ensureStacksEqual(body, __spreadArray([{ prim: \"bool\" }], __read(tail)));\r\n                    return tail;\r\n                }\r\n            case \"LOOP_LEFT\":\r\n                {\r\n                    instructionAnn({});\r\n                    var s_35 = args(0, [\"or\"])[0];\r\n                    var tail = stack.slice(1);\r\n                    var body = functionTypeInternal(instruction.args[0], __spreadArray([annotate(s_35.args[0], { t: null, v: varSuffix(argAnn(s_35), \"left\") })], __read(tail)), ctx);\r\n                    if (\"failed\" in body) {\r\n                        return body;\r\n                    }\r\n                    ensureStacksEqual(body, __spreadArray([s_35], __read(tail)));\r\n                    return __spreadArray([annotate(s_35.args[1], { t: null, v: instructionAnn({ v: 1 }).v })], __read(tail));\r\n                }\r\n            case \"DIP\":\r\n                {\r\n                    instructionAnn({});\r\n                    var n = instruction.args.length === 2 ? parseInt(instruction.args[0].int, 10) : 1;\r\n                    args(n - 1, null);\r\n                    var head = stack.slice(0, n);\r\n                    var tail = stack.slice(n);\r\n                    // ternary operator is a type guard so use it instead of just `instruction.args.length - 1`\r\n                    var body = instruction.args.length === 2 ?\r\n                        functionTypeInternal(instruction.args[1], tail, ctx) :\r\n                        functionTypeInternal(instruction.args[0], tail, ctx);\r\n                    if (\"failed\" in body) {\r\n                        return body;\r\n                    }\r\n                    return __spreadArray(__spreadArray([], __read(head)), __read(body));\r\n                }\r\n            case \"CREATE_CONTRACT\":\r\n                {\r\n                    var ia = instructionAnn({ v: 2 });\r\n                    var s_36 = args(0, [\"option\"], [\"mutez\"], null);\r\n                    if (typeID(s_36[0].args[0]) !== \"key_hash\") {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": key hash expected: \" + typeID(s_36[0].args[0]));\r\n                    }\r\n                    if (ensureStorableType(s_36[2])) {\r\n                        assertContractValid(instruction.args[0]);\r\n                        assertScalarTypesEqual(contractSection(instruction.args[0], \"storage\").args[0], s_36[2]);\r\n                    }\r\n                    var va = (_f = ia.v) === null || _f === void 0 ? void 0 : _f.map(function (v) { return v !== \"@\" ? [v] : undefined; });\r\n                    return __spreadArray([\r\n                        annotate({ prim: \"operation\" }, { v: va === null || va === void 0 ? void 0 : va[0] }),\r\n                        annotate((_b = {\r\n                                prim: \"address\"\r\n                            },\r\n                            _b[refContract] = { prim: \"contract\", args: [contractSection(instruction.args[0], \"parameter\").args[0]] },\r\n                            _b), { v: va === null || va === void 0 ? void 0 : va[1] })\r\n                    ], __read(stack.slice(3)));\r\n                }\r\n            case \"PUSH\":\r\n                assertTypeAnnotationsValid(instruction.args[0]);\r\n                assertDataValidInternal(instruction.args[1], instruction.args[0], __assign(__assign({}, ctx), { contract: undefined }));\r\n                return __spreadArray([annotateVar(instruction.args[0])], __read(stack));\r\n            case \"EMPTY_SET\":\r\n                assertTypeAnnotationsValid(instruction.args[0]);\r\n                ensureComparableType(instruction.args[0]);\r\n                return __spreadArray([annotate({ prim: \"set\", args: instruction.args }, instructionAnn({ t: 1, v: 1 }))], __read(stack));\r\n            case \"EMPTY_MAP\":\r\n                assertTypeAnnotationsValid(instruction.args[0]);\r\n                ensureComparableType(instruction.args[0]);\r\n                assertTypeAnnotationsValid(instruction.args[1]);\r\n                return __spreadArray([annotate({ prim: \"map\", args: instruction.args }, instructionAnn({ t: 1, v: 1 }))], __read(stack));\r\n            case \"EMPTY_BIG_MAP\":\r\n                assertTypeAnnotationsValid(instruction.args[0]);\r\n                ensureComparableType(instruction.args[0]);\r\n                assertTypeAnnotationsValid(instruction.args[1]);\r\n                ensureBigMapStorableType(instruction.args[0]);\r\n                return __spreadArray([annotate({ prim: \"big_map\", args: instruction.args }, instructionAnn({ t: 1, v: 1 }))], __read(stack));\r\n            case \"LAMBDA\":\r\n                {\r\n                    assertTypeAnnotationsValid(instruction.args[0]);\r\n                    assertTypeAnnotationsValid(instruction.args[1]);\r\n                    var body = functionTypeInternal(instruction.args[2], [instruction.args[0]], __assign(__assign({}, ctx), { contract: undefined }));\r\n                    if (\"failed\" in body) {\r\n                        return body;\r\n                    }\r\n                    if (body.length !== 1) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": function must return a value\");\r\n                    }\r\n                    ensureTypesEqual(instruction.args[1], body[0]);\r\n                    return __spreadArray([annotateVar({ prim: \"lambda\", args: [instruction.args[0], instruction.args[1]] })], __read(stack));\r\n                }\r\n            case \"LEVEL\":\r\n                return __spreadArray([annotateVar({ prim: \"nat\" }, \"@level\")], __read(stack));\r\n            case \"TOTAL_VOTING_POWER\":\r\n                return __spreadArray([annotateVar({ prim: \"nat\" })], __read(stack));\r\n            case \"VOTING_POWER\":\r\n                args(0, [\"key_hash\"]);\r\n                return __spreadArray([annotateVar({ prim: \"nat\" })], __read(stack.slice(1)));\r\n            case \"TICKET\":\r\n                {\r\n                    var s_37 = args(0, null, [\"nat\"])[0];\r\n                    ensureComparableType(s_37);\r\n                    return __spreadArray([annotate({ prim: \"ticket\", args: [s_37] }, instructionAnn({ t: 1, v: 1 }))], __read(stack.slice(2)));\r\n                }\r\n            case \"JOIN_TICKETS\":\r\n                {\r\n                    var s_38 = unpackComb(\"pair\", args(0, [\"pair\"])[0]);\r\n                    if (typeID(s_38.args[0]) !== \"ticket\") {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": ticket expected: \" + typeID(s_38.args[0]));\r\n                    }\r\n                    ensureTypesEqual(s_38.args[0], s_38.args[1]);\r\n                    return __spreadArray([annotateVar({\r\n                            prim: \"option\",\r\n                            args: [annotate(s_38.args[0], { t: null })],\r\n                        })], __read(stack.slice(1)));\r\n                }\r\n            case \"SPLIT_TICKET\":\r\n                {\r\n                    var s_39 = args(0, [\"ticket\"], [\"pair\"]);\r\n                    var p = unpackComb(\"pair\", s_39[1]);\r\n                    if (typeID(p.args[0]) !== \"nat\") {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": nat expected: \" + typeID(p.args[0]));\r\n                    }\r\n                    ensureTypesEqual(p.args[0], p.args[1]);\r\n                    return __spreadArray([annotateVar({\r\n                            prim: \"option\",\r\n                            args: [{\r\n                                    prim: \"pair\",\r\n                                    args: [\r\n                                        annotate(s_39[0], { t: null }),\r\n                                        annotate(s_39[0], { t: null }),\r\n                                    ],\r\n                                }],\r\n                        })], __read(stack.slice(2)));\r\n                }\r\n            case \"READ_TICKET\":\r\n                {\r\n                    var ia = instructionAnn({ v: 2 });\r\n                    var s_40 = args(0, [\"ticket\"])[0];\r\n                    var va = (_g = ia.v) === null || _g === void 0 ? void 0 : _g.map(function (v) { return v !== \"@\" ? [v] : undefined; });\r\n                    return __spreadArray([\r\n                        annotate({\r\n                            prim: \"pair\",\r\n                            args: [\r\n                                { prim: \"address\" },\r\n                                annotate(s_40.args[0], { t: null }),\r\n                                { prim: \"nat\" },\r\n                            ]\r\n                        }, { v: va === null || va === void 0 ? void 0 : va[0] }),\r\n                        annotate(s_40, { v: va === null || va === void 0 ? void 0 : va[1], t: null })\r\n                    ], __read(stack.slice(1)));\r\n                }\r\n            case \"PAIRING_CHECK\":\r\n                {\r\n                    var p = args(0, [\"list\"])[0].args[0];\r\n                    if (!isPairType(p)) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": pair expected: \" + typeID(p));\r\n                    }\r\n                    var c = unpackComb(\"pair\", p);\r\n                    if (typeID(c.args[0]) !== \"bls12_381_g1\") {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": bls12_381_g1 expected: \" + typeID(c.args[0]));\r\n                    }\r\n                    if (typeID(c.args[1]) !== \"bls12_381_g2\") {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": bls12_381_g2 expected: \" + typeID(c.args[1]));\r\n                    }\r\n                    return __spreadArray([annotateVar({ prim: \"bool\" })], __read(stack.slice(1)));\r\n                }\r\n            case \"SAPLING_EMPTY_STATE\":\r\n                return __spreadArray([annotate({ prim: \"sapling_state\", args: [instruction.args[0]] }, instructionAnn({ v: 1, t: 1 }))], __read(stack));\r\n            case \"SAPLING_VERIFY_UPDATE\":\r\n                {\r\n                    var s_41 = args(0, [\"sapling_transaction\"], [\"sapling_state\"]);\r\n                    if (parseInt(s_41[0].args[0].int, 10) !== parseInt(s_41[1].args[0].int, 10)) {\r\n                        throw new MichelsonInstructionError(instruction, stack, instruction.prim + \": sapling memo size mismatch: \" + s_41[0].args[0].int + \" != \" + s_41[1].args[0].int);\r\n                    }\r\n                    return __spreadArray([annotateVar({\r\n                            prim: \"option\",\r\n                            args: [{\r\n                                    prim: \"pair\",\r\n                                    args: [\r\n                                        { prim: \"int\" },\r\n                                        annotate(s_41[1], { t: null }),\r\n                                    ],\r\n                                }],\r\n                        })], __read(stack.slice(2)));\r\n                }\r\n            default:\r\n                throw new MichelsonError(instruction, \"unexpected instruction: \" + instruction.prim);\r\n        }\r\n    })(instruction);\r\n    if ((ctx === null || ctx === void 0 ? void 0 : ctx.traceCallback) !== undefined) {\r\n        var trace = {\r\n            op: instruction,\r\n            in: stack,\r\n            out: retStack,\r\n        };\r\n        ctx.traceCallback(trace);\r\n    }\r\n    return retStack;\r\n}\r\nfunction contractSection(contract, section) {\r\n    var e_8, _a;\r\n    try {\r\n        for (var contract_1 = __values(contract), contract_1_1 = contract_1.next(); !contract_1_1.done; contract_1_1 = contract_1.next()) {\r\n            var s = contract_1_1.value;\r\n            if (s.prim === section) {\r\n                return s;\r\n            }\r\n        }\r\n    }\r\n    catch (e_8_1) { e_8 = { error: e_8_1 }; }\r\n    finally {\r\n        try {\r\n            if (contract_1_1 && !contract_1_1.done && (_a = contract_1.return)) _a.call(contract_1);\r\n        }\r\n        finally { if (e_8) throw e_8.error; }\r\n    }\r\n    throw new MichelsonError(contract, \"missing contract section: \" + section);\r\n}\r\nfunction isContract(v) {\r\n    var e_9, _a;\r\n    if (Array.isArray(v)) {\r\n        try {\r\n            for (var v_1 = __values(v), v_1_1 = v_1.next(); !v_1_1.done; v_1_1 = v_1.next()) {\r\n                var s = v_1_1.value;\r\n                if (\"prim\" in s && (s.prim === \"parameter\" || s.prim === \"storage\" || s.prim === \"code\")) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        catch (e_9_1) { e_9 = { error: e_9_1 }; }\r\n        finally {\r\n            try {\r\n                if (v_1_1 && !v_1_1.done && (_a = v_1.return)) _a.call(v_1);\r\n            }\r\n            finally { if (e_9) throw e_9.error; }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction contractEntryPoint(src, ep) {\r\n    ep = ep || \"%default\";\r\n    var entryPoint = contractEntryPoints(src).find(function (x) { return x[0] === ep; });\r\n    if (entryPoint !== undefined) {\r\n        return entryPoint[1];\r\n    }\r\n    else if (ep === \"%default\") {\r\n        return isContract(src) ? contractSection(src, \"parameter\").args[0] : src;\r\n    }\r\n    return null;\r\n}\r\nfunction isOrType(t) {\r\n    return Array.isArray(t) || t.prim === \"or\";\r\n}\r\nfunction contractEntryPoints(src) {\r\n    if (isContract(src)) {\r\n        var param = contractSection(src, \"parameter\");\r\n        var ch = contractEntryPoints(param.args[0]);\r\n        var a = unpackAnnotations(param);\r\n        return a.f ? __spreadArray([[a.f[0], param.args[0]]], __read(ch)) : ch;\r\n    }\r\n    if (isOrType(src)) {\r\n        var args_2 = typeArgs(src);\r\n        var getArg = function (n) {\r\n            var a = unpackAnnotations(args_2[n]);\r\n            if (typeID(args_2[n]) === \"or\") {\r\n                var ch = contractEntryPoints(args_2[n]);\r\n                return a.f ? __spreadArray([[a.f[0], args_2[n]]], __read(ch)) : ch;\r\n            }\r\n            return a.f ? [[a.f[0], args_2[n]]] : [];\r\n        };\r\n        return __spreadArray(__spreadArray([], __read(getArg(0))), __read(getArg(1)));\r\n    }\r\n    return [];\r\n}\r\n// Contract validation\r\nfunction assertContractValid(contract, ctx) {\r\n    var parameter = contractSection(contract, \"parameter\").args[0];\r\n    assertTypeAnnotationsValid(parameter, true);\r\n    var storage = contractSection(contract, \"storage\").args[0];\r\n    assertTypeAnnotationsValid(storage);\r\n    var arg = {\r\n        \"prim\": \"pair\",\r\n        args: [\r\n            __assign(__assign({}, parameter), { annots: [\"@parameter\"] }),\r\n            __assign(__assign({}, storage), { annots: [\"@storage\"] }),\r\n        ]\r\n    };\r\n    var code = contractSection(contract, \"code\").args[0];\r\n    var ret = functionTypeInternal(code, [arg], __assign(__assign({}, ctx), { contract: contract }));\r\n    if (\"failed\" in ret) {\r\n        return ret;\r\n    }\r\n    var expected = {\r\n        \"prim\": \"pair\",\r\n        args: [\r\n            { \"prim\": \"list\", args: [{ \"prim\": \"operation\" }] },\r\n            storage,\r\n        ]\r\n    };\r\n    try {\r\n        assertStacksEqual(ret, [expected]);\r\n    }\r\n    catch (err) {\r\n        if (err instanceof MichelsonError) {\r\n            throw new MichelsonInstructionError(code, ret, err.message);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n// Exported wrapper functions\r\nfunction assertDataValid(d, t, ctx) {\r\n    assertTypeAnnotationsValid(t);\r\n    assertDataValidInternal(d, t, ctx || null);\r\n}\r\nfunction functionType(inst, stack, ctx) {\r\n    var e_10, _a, e_11, _b;\r\n    try {\r\n        for (var stack_1 = __values(stack), stack_1_1 = stack_1.next(); !stack_1_1.done; stack_1_1 = stack_1.next()) {\r\n            var t = stack_1_1.value;\r\n            assertTypeAnnotationsValid(t);\r\n        }\r\n    }\r\n    catch (e_10_1) { e_10 = { error: e_10_1 }; }\r\n    finally {\r\n        try {\r\n            if (stack_1_1 && !stack_1_1.done && (_a = stack_1.return)) _a.call(stack_1);\r\n        }\r\n        finally { if (e_10) throw e_10.error; }\r\n    }\r\n    if ((ctx === null || ctx === void 0 ? void 0 : ctx.contract) !== undefined) {\r\n        try {\r\n            for (var _c = __values([\"parameter\", \"storage\"]), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var typesec = _d.value;\r\n                var sec = contractSection(ctx.contract, typesec).args[0];\r\n                assertTypeAnnotationsValid(sec);\r\n            }\r\n        }\r\n        catch (e_11_1) { e_11 = { error: e_11_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\r\n            }\r\n            finally { if (e_11) throw e_11.error; }\r\n        }\r\n    }\r\n    return functionTypeInternal(inst, stack, ctx || null);\r\n}\r\nfunction assertTypesEqual(a, b, field) {\r\n    var e_12, _a, e_13, _b;\r\n    if (field === void 0) { field = false; }\r\n    if (Array.isArray(a)) {\r\n        try {\r\n            // type guards don't work for parametrized generic types\r\n            for (var _c = __values(a), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                var v = _d.value;\r\n                assertTypeAnnotationsValid(v);\r\n            }\r\n        }\r\n        catch (e_12_1) { e_12 = { error: e_12_1 }; }\r\n        finally {\r\n            try {\r\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n            }\r\n            finally { if (e_12) throw e_12.error; }\r\n        }\r\n        try {\r\n            for (var _e = __values(b), _f = _e.next(); !_f.done; _f = _e.next()) {\r\n                var v = _f.value;\r\n                assertTypeAnnotationsValid(v);\r\n            }\r\n        }\r\n        catch (e_13_1) { e_13 = { error: e_13_1 }; }\r\n        finally {\r\n            try {\r\n                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\r\n            }\r\n            finally { if (e_13) throw e_13.error; }\r\n        }\r\n    }\r\n    else {\r\n        assertTypeAnnotationsValid(a);\r\n        assertTypeAnnotationsValid(b);\r\n    }\r\n    assertScalarTypesEqual(a, b, field);\r\n}\r\nfunction isTypeAnnotationsValid(t, field) {\r\n    if (field === void 0) { field = false; }\r\n    try {\r\n        assertTypeAnnotationsValid(t, field);\r\n        return true;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\r\nfunction isContractValid(contract, ctx) {\r\n    try {\r\n        return assertContractValid(contract, ctx);\r\n    }\r\n    catch (_a) {\r\n        return null;\r\n    }\r\n}\r\nfunction isDataValid(d, t, ctx) {\r\n    try {\r\n        assertDataValid(d, t, ctx);\r\n        return true;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\r\nfunction isTypeEqual(a, b, field) {\r\n    if (field === void 0) { field = false; }\r\n    try {\r\n        assertTypesEqual(a, b, field);\r\n        return true;\r\n    }\r\n    catch (_a) {\r\n        return false;\r\n    }\r\n}\n\nvar Contract = /** @class */ (function () {\r\n    function Contract(contract, opt) {\r\n        this.contract = contract;\r\n        this.ctx = __assign({ contract: contract }, opt);\r\n        this.output = assertContractValid(contract, this.ctx);\r\n    }\r\n    Contract.parse = function (src, opt) {\r\n        var p = new Parser(opt);\r\n        var expr = typeof src === \"string\" ? p.parseScript(src) : p.parseJSON(src);\r\n        if (expr === null) {\r\n            throw new Error(\"empty contract\");\r\n        }\r\n        if (assertMichelsonContract(expr)) {\r\n            return new Contract(expr, opt);\r\n        }\r\n    };\r\n    Contract.parseTypeExpression = function (src, opt) {\r\n        var p = new Parser(opt);\r\n        var expr = typeof src === \"string\" ? p.parseScript(src) : p.parseJSON(src);\r\n        if (expr === null) {\r\n            throw new Error(\"empty type expression\");\r\n        }\r\n        if (assertMichelsonType(expr) && assertTypeAnnotationsValid(expr)) {\r\n            return expr;\r\n        }\r\n        throw undefined;\r\n    };\r\n    Contract.parseDataExpression = function (src, opt) {\r\n        var p = new Parser(opt);\r\n        var expr = typeof src === \"string\" ? p.parseScript(src) : p.parseJSON(src);\r\n        if (expr === null) {\r\n            throw new Error(\"empty data expression\");\r\n        }\r\n        if (assertMichelsonData(expr)) {\r\n            return expr;\r\n        }\r\n        throw undefined;\r\n    };\r\n    Contract.prototype.section = function (section) {\r\n        return contractSection(this.contract, section);\r\n    };\r\n    Contract.prototype.entryPoints = function () {\r\n        return contractEntryPoints(this.contract);\r\n    };\r\n    Contract.prototype.entryPoint = function (ep) {\r\n        return contractEntryPoint(this.contract, ep);\r\n    };\r\n    Contract.prototype.assertDataValid = function (d, t) {\r\n        assertDataValid(d, t, this.ctx);\r\n    };\r\n    Contract.prototype.isDataValid = function (d, t) {\r\n        return isDataValid(d, t, this.ctx);\r\n    };\r\n    Contract.prototype.assertParameterValid = function (ep, d) {\r\n        var t = this.entryPoint(ep || undefined);\r\n        if (t === null) {\r\n            throw new Error(\"contract has no entrypoint named \" + ep);\r\n        }\r\n        this.assertDataValid(d, t);\r\n    };\r\n    Contract.prototype.isParameterValid = function (ep, d) {\r\n        try {\r\n            this.assertParameterValid(ep, d);\r\n            return true;\r\n        }\r\n        catch (_a) {\r\n            return false;\r\n        }\r\n    };\r\n    Contract.prototype.functionType = function (inst, stack) {\r\n        return functionType(inst, stack, this.ctx);\r\n    };\r\n    return Contract;\r\n}());\r\nvar dummyContract = new Contract([\r\n    { prim: \"parameter\", args: [{ prim: \"unit\" }] },\r\n    { prim: \"storage\", args: [{ prim: \"unit\" }] },\r\n    {\r\n        prim: \"code\", args: [\r\n            [\r\n                { prim: \"CAR\" },\r\n                { prim: \"NIL\", args: [{ prim: \"operation\" }] },\r\n                { prim: \"PAIR\" },\r\n            ]\r\n        ]\r\n    },\r\n]);\n\nfunction formatStack(s) {\r\n    if (\"failed\" in s) {\r\n        return \"[FAILED: \" + emitMicheline(s.failed) + \"]\";\r\n    }\r\n    return s.map(function (v, i) {\r\n        var ann = unpackAnnotations(v);\r\n        return \"[\" + i + (ann.v ? \"/\" + ann.v[0] : \"\") + \"]: \" + emitMicheline(v);\r\n    }).join(\"\\n\");\r\n}\r\nfunction traceDumpFunc(blocks, cb) {\r\n    return function (v) {\r\n        var _a;\r\n        if (Array.isArray(v) && !blocks) {\r\n            return;\r\n        }\r\n        var macro = (_a = v.op[sourceReference]) === null || _a === void 0 ? void 0 : _a.macro;\r\n        var msg = (macro ? \"Macro\" : \"Op\") + \": \" + (macro ? emitMicheline(macro, undefined, true) + \" / \" : \"\") + emitMicheline(v.op) + \"\\nInput:\\n\" + formatStack(v.in) + \"\\nOutput:\\n\" + formatStack(v.out) + \"\\n\";\r\n        cb(msg);\r\n    };\r\n}\r\nfunction formatError(err) {\r\n    var _a;\r\n    if (err instanceof MichelsonInstructionError) {\r\n        var macro = (_a = err.val[sourceReference]) === null || _a === void 0 ? void 0 : _a.macro;\r\n        return (macro ? \"Macro\" : \"Op\") + \": \" + (macro ? emitMicheline(macro, undefined, true) + \" / \" : \"\") + emitMicheline(err.val) + \"\\nStack:\\n\" + formatStack(err.stackState) + \"\\n\";\r\n    }\r\n    else if (err instanceof MichelsonTypeError) {\r\n        var type = Array.isArray(err.val) ?\r\n            \"[\" + err.val.map(function (v, i) { return \"[\" + i + \"]: \" + emitMicheline(v); }).join(\"; \") + \"]\" :\r\n            emitMicheline(err.val);\r\n        return \"Type: \" + type + \"\\n\" + (err.data ? \"Data: \" + emitMicheline(err.data) + \"\\n\" : \"\") + \"\\n\";\r\n    }\r\n    else {\r\n        return \"Value: \" + emitMicheline(err.val);\r\n    }\r\n}\n\n// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\r\n/* tslint:disable */\r\nvar VERSION = {\r\n    \"commitHash\": \"5711569ffaf481d88ba3251343a1788090b35dd4\",\r\n    \"version\": \"10.2.1\"\r\n};\r\n/* tslint:enable */\n\nexport { Contract, DefaultProtocol, JSONParseError, MacroError, MichelineParseError, MichelsonError, MichelsonInstructionError, MichelsonTypeError, MichelsonValidationError, Parser, Protocol, VERSION, assertContractValid, assertDataListIfAny, assertDataValid, assertMichelsonBigMapStorableType, assertMichelsonComparableType, assertMichelsonContract, assertMichelsonData, assertMichelsonInstruction, assertMichelsonPackableType, assertMichelsonPassableType, assertMichelsonPushableType, assertMichelsonStorableType, assertMichelsonType, assertTypeAnnotationsValid, assertTypesEqual, contractEntryPoint, contractEntryPoints, contractSection, decodeAddressBytes, decodePublicKeyBytes, decodePublicKeyHashBytes, dummyContract, emitMicheline, formatError, formatStack, functionType, instructionIDs, isContractValid, isDataValid, isInstruction, isMichelsonCode, isMichelsonData, isMichelsonError, isMichelsonScript, isMichelsonType, isTypeAnnotationsValid, isTypeEqual, packData, packDataBytes, refContract, sourceReference, traceDumpFunc, unpackData, unpackDataBytes };\n//# sourceMappingURL=taquito-michel-codec.es5.js.map\n","import { OpKind, RpcClient } from '@taquito/rpc';\nexport { OpKind } from '@taquito/rpc';\nimport { ReplaySubject, defer, timer, from, of, EMPTY, combineLatest, throwError, range, concat, BehaviorSubject, Subject, NEVER, Observable } from 'rxjs';\nimport { first, tap, map, switchMap, mapTo, switchMapTo, filter, shareReplay, catchError, distinctUntilChanged, takeWhile, distinctUntilKeyChanged, timeoutWith, startWith, concatMap, retry, takeUntil, pluck, publish, refCount } from 'rxjs/operators';\nimport { Schema, ParameterSchema, MichelsonMap } from '@taquito/michelson-encoder';\nexport { MichelsonMap, UnitValue } from '@taquito/michelson-encoder';\nimport BigNumber from 'bignumber.js';\nimport { HttpResponseError, STATUS_CODE } from '@taquito/http-utils';\nimport { encodeExpr } from '@taquito/utils';\nimport { Parser, packDataBytes } from '@taquito/michel-codec';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\n\nvar RpcForger = /** @class */ (function () {\r\n    function RpcForger(context) {\r\n        this.context = context;\r\n    }\r\n    RpcForger.prototype.forge = function (_a) {\r\n        var branch = _a.branch, contents = _a.contents;\r\n        return this.context.rpc.forgeOperations({ branch: branch, contents: contents });\r\n    };\r\n    return RpcForger;\r\n}());\n\nvar RpcInjector = /** @class */ (function () {\r\n    function RpcInjector(context) {\r\n        this.context = context;\r\n    }\r\n    RpcInjector.prototype.inject = function (signedOperationBytes) {\r\n        return this.context.rpc.injectOperation(signedOperationBytes);\r\n    };\r\n    return RpcInjector;\r\n}());\n\nvar UnconfiguredSignerError = /** @class */ (function () {\r\n    function UnconfiguredSignerError() {\r\n        this.name = 'UnconfiguredSignerError';\r\n        this.message = 'No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance.';\r\n    }\r\n    return UnconfiguredSignerError;\r\n}());\r\n/**\r\n * @description Default signer implementation which does nothing and produce invalid signature\r\n */\r\nvar NoopSigner = /** @class */ (function () {\r\n    function NoopSigner() {\r\n    }\r\n    NoopSigner.prototype.publicKey = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw new UnconfiguredSignerError();\r\n            });\r\n        });\r\n    };\r\n    NoopSigner.prototype.publicKeyHash = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw new UnconfiguredSignerError();\r\n            });\r\n        });\r\n    };\r\n    NoopSigner.prototype.secretKey = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw new UnconfiguredSignerError();\r\n            });\r\n        });\r\n    };\r\n    NoopSigner.prototype.sign = function (_bytes, _watermark) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw new UnconfiguredSignerError();\r\n            });\r\n        });\r\n    };\r\n    return NoopSigner;\r\n}());\n\nvar DEFAULT_GAS_LIMIT;\r\n(function (DEFAULT_GAS_LIMIT) {\r\n    DEFAULT_GAS_LIMIT[DEFAULT_GAS_LIMIT[\"DELEGATION\"] = 10600] = \"DELEGATION\";\r\n    DEFAULT_GAS_LIMIT[DEFAULT_GAS_LIMIT[\"ORIGINATION\"] = 10600] = \"ORIGINATION\";\r\n    DEFAULT_GAS_LIMIT[DEFAULT_GAS_LIMIT[\"TRANSFER\"] = 10600] = \"TRANSFER\";\r\n    DEFAULT_GAS_LIMIT[DEFAULT_GAS_LIMIT[\"REVEAL\"] = 1100] = \"REVEAL\";\r\n})(DEFAULT_GAS_LIMIT || (DEFAULT_GAS_LIMIT = {}));\r\nvar DEFAULT_FEE;\r\n(function (DEFAULT_FEE) {\r\n    DEFAULT_FEE[DEFAULT_FEE[\"DELEGATION\"] = 1257] = \"DELEGATION\";\r\n    DEFAULT_FEE[DEFAULT_FEE[\"ORIGINATION\"] = 10000] = \"ORIGINATION\";\r\n    DEFAULT_FEE[DEFAULT_FEE[\"TRANSFER\"] = 10000] = \"TRANSFER\";\r\n    DEFAULT_FEE[DEFAULT_FEE[\"REVEAL\"] = 374] = \"REVEAL\";\r\n})(DEFAULT_FEE || (DEFAULT_FEE = {}));\r\nvar DEFAULT_STORAGE_LIMIT;\r\n(function (DEFAULT_STORAGE_LIMIT) {\r\n    DEFAULT_STORAGE_LIMIT[DEFAULT_STORAGE_LIMIT[\"DELEGATION\"] = 0] = \"DELEGATION\";\r\n    DEFAULT_STORAGE_LIMIT[DEFAULT_STORAGE_LIMIT[\"ORIGINATION\"] = 257] = \"ORIGINATION\";\r\n    DEFAULT_STORAGE_LIMIT[DEFAULT_STORAGE_LIMIT[\"TRANSFER\"] = 257] = \"TRANSFER\";\r\n    DEFAULT_STORAGE_LIMIT[DEFAULT_STORAGE_LIMIT[\"REVEAL\"] = 0] = \"REVEAL\";\r\n})(DEFAULT_STORAGE_LIMIT || (DEFAULT_STORAGE_LIMIT = {}));\r\nvar Protocols;\r\n(function (Protocols) {\r\n    Protocols[\"Pt24m4xi\"] = \"Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd\";\r\n    Protocols[\"PsBABY5H\"] = \"PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU\";\r\n    Protocols[\"PsBabyM1\"] = \"PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS\";\r\n    Protocols[\"PsCARTHA\"] = \"PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb\";\r\n    Protocols[\"PsDELPH1\"] = \"PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo\";\r\n    Protocols[\"PtEdo2Zk\"] = \"PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA\";\r\n    Protocols[\"PsFLorena\"] = \"PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i\";\r\n    Protocols[\"PtGRANADs\"] = \"PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV\";\r\n    Protocols[\"PtHangzH\"] = \"PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r\";\r\n})(Protocols || (Protocols = {}));\r\nvar protocols = {\r\n    '004': [Protocols.Pt24m4xi],\r\n    '005': [Protocols.PsBABY5H, Protocols.PsBabyM1],\r\n    '006': [Protocols.PsCARTHA],\r\n    '007': [Protocols.PsDELPH1],\r\n    '008': [Protocols.PtEdo2Zk],\r\n    '009': [Protocols.PsFLorena],\r\n    '010': [Protocols.PtGRANADs],\r\n    '011': [Protocols.PtHangzH]\r\n};\r\nvar DefaultLambdaAddresses;\r\n(function (DefaultLambdaAddresses) {\r\n    DefaultLambdaAddresses[\"MAINNET\"] = \"KT1CPuTzwC7h7uLXd5WQmpMFso1HxrLBUtpE\";\r\n    DefaultLambdaAddresses[\"CARTHAGENET\"] = \"KT1VAy1o1FGiXYfD3YT7x7k5eF5HSHhmc1u6\";\r\n    DefaultLambdaAddresses[\"DELPHINET\"] = \"KT19abMFs3haqyKYwqdLjK9GbtofryZLvpiK\";\r\n    DefaultLambdaAddresses[\"EDONET\"] = \"KT1A64nVZDccAHGAsf1ZyVajXZcbiwjV3SnN\";\r\n    DefaultLambdaAddresses[\"FLORENCENET\"] = \"KT1KCe3YqGnudsiCWb5twbe2DH5T3EMdLpSE\";\r\n    DefaultLambdaAddresses[\"GRANADANET\"] = \"KT1BCun2vsA4GBQvsKAuGD5x873MfW2jsN9z\";\r\n    DefaultLambdaAddresses[\"HANGZHOUNET\"] = \"KT1UHUE6ZxjMuFPnPqgDSt13A6zFAAWDReso\";\r\n})(DefaultLambdaAddresses || (DefaultLambdaAddresses = {}));\r\nvar ChainIds;\r\n(function (ChainIds) {\r\n    ChainIds[\"MAINNET\"] = \"NetXdQprcVkpaWU\";\r\n    ChainIds[\"CARTHAGENET\"] = \"NetXjD3HPJJjmcd\";\r\n    ChainIds[\"DELPHINET\"] = \"NetXm8tYqnMWky1\";\r\n    ChainIds[\"EDONET\"] = \"NetXSgo1ZT2DRUG\";\r\n    ChainIds[\"FLORENCENET\"] = \"NetXxkAx4woPLyu\";\r\n    ChainIds[\"GRANADANET\"] = \"NetXz969SFaFn8k\";\r\n    ChainIds[\"HANGZHOUNET\"] = \"NetXuXoGoLxNK6o\";\r\n})(ChainIds || (ChainIds = {}));\n\nvar TZ_DECIMALS = 6;\r\nvar MTZ_DECIMALS = 3;\r\nfunction getDecimal(format) {\r\n    switch (format) {\r\n        case 'tz':\r\n            return TZ_DECIMALS;\r\n        case 'mtz':\r\n            return MTZ_DECIMALS;\r\n        case 'mutez':\r\n        default:\r\n            return 0;\r\n    }\r\n}\r\nfunction format(from, to, amount) {\r\n    if (from === void 0) { from = 'mutez'; }\r\n    if (to === void 0) { to = 'mutez'; }\r\n    var bigNum = new BigNumber(amount);\r\n    if (bigNum.isNaN()) {\r\n        return amount;\r\n    }\r\n    return bigNum\r\n        .multipliedBy(Math.pow(10, getDecimal(from)))\r\n        .dividedBy(Math.pow(10, getDecimal(to)));\r\n}\n\nvar InvalidParameterError = /** @class */ (function () {\r\n    function InvalidParameterError(smartContractMethodName, sigs, args) {\r\n        this.smartContractMethodName = smartContractMethodName;\r\n        this.sigs = sigs;\r\n        this.args = args;\r\n        this.name = 'Invalid parameters error';\r\n        this.message = smartContractMethodName + \" Received \" + args.length + \" arguments while expecting one of the following signatures (\" + JSON.stringify(sigs) + \")\";\r\n    }\r\n    return InvalidParameterError;\r\n}());\r\nvar UndefinedLambdaContractError = /** @class */ (function () {\r\n    function UndefinedLambdaContractError() {\r\n        this.name = 'Undefined LambdaContract error';\r\n        this.message = \"This might happen if you are using a sandbox. Please provide the address of a lambda contract as a parameter of the read method.\";\r\n    }\r\n    return UndefinedLambdaContractError;\r\n}());\r\nvar InvalidDelegationSource = /** @class */ (function () {\r\n    function InvalidDelegationSource(source) {\r\n        this.source = source;\r\n        this.name = 'Invalid delegation source error';\r\n        this.message = \"Since Babylon delegation source can no longer be a contract address \" + source + \". Please use the smart contract abstraction to set your delegate.\";\r\n    }\r\n    return InvalidDelegationSource;\r\n}());\r\nvar InvalidCodeParameter = /** @class */ (function () {\r\n    function InvalidCodeParameter(message, data) {\r\n        this.message = message;\r\n        this.data = data;\r\n        this.name = 'InvalidCodeParameter';\r\n    }\r\n    return InvalidCodeParameter;\r\n}());\r\nvar InvalidInitParameter = /** @class */ (function () {\r\n    function InvalidInitParameter(message, data) {\r\n        this.message = message;\r\n        this.data = data;\r\n        this.name = 'InvalidInitParameter';\r\n    }\r\n    return InvalidInitParameter;\r\n}());\n\nvar createOriginationOperation = function (_a) {\r\n    var code = _a.code, init = _a.init, _b = _a.balance, balance = _b === void 0 ? \"0\" : _b, delegate = _a.delegate, storage = _a.storage, _c = _a.fee, fee = _c === void 0 ? DEFAULT_FEE.ORIGINATION : _c, _d = _a.gasLimit, gasLimit = _d === void 0 ? DEFAULT_GAS_LIMIT.ORIGINATION : _d, _e = _a.storageLimit, storageLimit = _e === void 0 ? DEFAULT_STORAGE_LIMIT.ORIGINATION : _e, _f = _a.mutez, mutez = _f === void 0 ? false : _f;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var contractStorage, storageType, schema, script, operation;\r\n        return __generator(this, function (_g) {\r\n            // tslint:disable-next-line: strict-type-predicates\r\n            if (storage !== undefined && init !== undefined) {\r\n                throw new Error(\"Storage and Init cannot be set a the same time. Please either use storage or init but not both.\");\r\n            }\r\n            if (!Array.isArray(code)) {\r\n                throw new InvalidCodeParameter('Wrong code parameter type, expected an array', code);\r\n            }\r\n            if (storage !== undefined) {\r\n                storageType = code.find(function (p) { return ('prim' in p) && p.prim === 'storage'; });\r\n                if ((storageType === null || storageType === void 0 ? void 0 : storageType.args) === undefined) {\r\n                    throw new InvalidCodeParameter('The storage section is missing from the script', code);\r\n                }\r\n                schema = new Schema(storageType.args[0]);\r\n                contractStorage = schema.Encode(storage);\r\n            }\r\n            else if (init !== undefined && typeof init === 'object') {\r\n                contractStorage = init;\r\n            }\r\n            else {\r\n                throw new InvalidInitParameter('Wrong init parameter type, expected JSON Michelson', init);\r\n            }\r\n            script = {\r\n                code: code,\r\n                storage: contractStorage,\r\n            };\r\n            operation = {\r\n                kind: OpKind.ORIGINATION,\r\n                fee: fee,\r\n                gas_limit: gasLimit,\r\n                storage_limit: storageLimit,\r\n                balance: mutez\r\n                    ? balance.toString()\r\n                    : format('tz', 'mutez', balance).toString(),\r\n                script: script,\r\n            };\r\n            if (delegate) {\r\n                operation.delegate = delegate;\r\n            }\r\n            return [2 /*return*/, operation];\r\n        });\r\n    });\r\n};\r\nvar createTransferOperation = function (_a) {\r\n    var to = _a.to, amount = _a.amount, parameter = _a.parameter, _b = _a.fee, fee = _b === void 0 ? DEFAULT_FEE.TRANSFER : _b, _c = _a.gasLimit, gasLimit = _c === void 0 ? DEFAULT_GAS_LIMIT.TRANSFER : _c, _d = _a.storageLimit, storageLimit = _d === void 0 ? DEFAULT_STORAGE_LIMIT.TRANSFER : _d, _e = _a.mutez, mutez = _e === void 0 ? false : _e;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var operation;\r\n        return __generator(this, function (_f) {\r\n            operation = {\r\n                kind: OpKind.TRANSACTION,\r\n                fee: fee,\r\n                gas_limit: gasLimit,\r\n                storage_limit: storageLimit,\r\n                amount: mutez\r\n                    ? amount.toString()\r\n                    : format(\"tz\", \"mutez\", amount).toString(),\r\n                destination: to,\r\n                parameters: parameter,\r\n            };\r\n            return [2 /*return*/, operation];\r\n        });\r\n    });\r\n};\r\nvar createSetDelegateOperation = function (_a) {\r\n    var delegate = _a.delegate, source = _a.source, _b = _a.fee, fee = _b === void 0 ? DEFAULT_FEE.DELEGATION : _b, _c = _a.gasLimit, gasLimit = _c === void 0 ? DEFAULT_GAS_LIMIT.DELEGATION : _c, _d = _a.storageLimit, storageLimit = _d === void 0 ? DEFAULT_STORAGE_LIMIT.DELEGATION : _d;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var operation;\r\n        return __generator(this, function (_e) {\r\n            operation = {\r\n                kind: OpKind.DELEGATION,\r\n                source: source,\r\n                fee: fee,\r\n                gas_limit: gasLimit,\r\n                storage_limit: storageLimit,\r\n                delegate: delegate,\r\n            };\r\n            return [2 /*return*/, operation];\r\n        });\r\n    });\r\n};\r\nvar createRegisterDelegateOperation = function (_a, source) {\r\n    var _b = _a.fee, fee = _b === void 0 ? DEFAULT_FEE.DELEGATION : _b, _c = _a.gasLimit, gasLimit = _c === void 0 ? DEFAULT_GAS_LIMIT.DELEGATION : _c, _d = _a.storageLimit, storageLimit = _d === void 0 ? DEFAULT_STORAGE_LIMIT.DELEGATION : _d;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_e) {\r\n            return [2 /*return*/, {\r\n                    kind: OpKind.DELEGATION,\r\n                    fee: fee,\r\n                    gas_limit: gasLimit,\r\n                    storage_limit: storageLimit,\r\n                    delegate: source,\r\n                }];\r\n        });\r\n    });\r\n};\r\nvar createRevealOperation = function (_a, source, publicKey) {\r\n    var _b = _a.fee, fee = _b === void 0 ? DEFAULT_FEE.REVEAL : _b, _c = _a.gasLimit, gasLimit = _c === void 0 ? DEFAULT_GAS_LIMIT.REVEAL : _c, _d = _a.storageLimit, storageLimit = _d === void 0 ? DEFAULT_STORAGE_LIMIT.REVEAL : _d;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_e) {\r\n            return [2 /*return*/, {\r\n                    kind: OpKind.REVEAL,\r\n                    fee: fee,\r\n                    public_key: publicKey,\r\n                    source: source,\r\n                    gas_limit: gasLimit,\r\n                    storage_limit: storageLimit\r\n                }];\r\n        });\r\n    });\r\n};\n\nvar attachKind = function (op, kind) {\r\n    return __assign(__assign({}, op), { kind: kind });\r\n};\r\nvar findWithKind = function (arr, kind) {\r\n    if (Array.isArray(arr)) {\r\n        var found = arr.find(function (op) { return op.kind === kind; });\r\n        if (found && isKind(found, kind)) {\r\n            return found;\r\n        }\r\n    }\r\n};\r\nvar isKind = function (op, kind) {\r\n    return op.kind === kind;\r\n};\r\nvar isOpWithFee = function (op) {\r\n    return ['transaction', 'delegation', 'origination', 'reveal'].indexOf(op.kind) !== -1;\r\n};\r\nvar isOpRequireReveal = function (op) {\r\n    return ['transaction', 'delegation', 'origination'].indexOf(op.kind) !== -1;\r\n};\r\nvar hasMetadata = function (op) {\r\n    return 'metadata' in op;\r\n};\r\nvar hasMetadataWithResult = function (op) {\r\n    return hasMetadata(op) && 'operation_result' in op.metadata;\r\n};\r\nvar hasMetadataWithInternalOperationResult = function (op) {\r\n    return hasMetadata(op) && 'internal_operation_results' in op.metadata;\r\n};\n\nvar isErrorWithMessage = function (error) {\r\n    return 'with' in error;\r\n};\r\nvar TezosOperationError = /** @class */ (function () {\r\n    function TezosOperationError(errors) {\r\n        this.errors = errors;\r\n        this.name = 'TezosOperationError';\r\n        // Last error is 'often' the one with more detail\r\n        var lastError = errors[errors.length - 1];\r\n        this.id = lastError.id;\r\n        this.kind = lastError.kind;\r\n        this.message = \"(\" + this.kind + \") \" + this.id;\r\n        if (isErrorWithMessage(lastError) && lastError.with.string) {\r\n            this.message = lastError.with.string;\r\n        }\r\n    }\r\n    return TezosOperationError;\r\n}());\r\nvar TezosPreapplyFailureError = /** @class */ (function () {\r\n    function TezosPreapplyFailureError(result) {\r\n        this.result = result;\r\n        this.name = 'TezosPreapplyFailureError';\r\n        this.message = 'Preapply returned an unexpected result';\r\n    }\r\n    return TezosPreapplyFailureError;\r\n}());\r\n// Flatten all operation content results and internal operation results into a single array\r\n// Some cases where we can have multiple operation results or internal operation results are:\r\n// - When an operation includes a reveal operation\r\n// - When an operation is made using the batch API\r\n// - Smart contract call can contains internal operation results when they call other smart contract internally or originate contracts\r\nvar flattenOperationResult = function (response) {\r\n    var results = Array.isArray(response) ? response : [response];\r\n    var returnedResults = [];\r\n    for (var i = 0; i < results.length; i++) {\r\n        for (var j = 0; j < results[i].contents.length; j++) {\r\n            var content = results[i].contents[j];\r\n            if (hasMetadataWithResult(content)) {\r\n                returnedResults.push(__assign({ fee: content.fee }, content.metadata.operation_result));\r\n                if (Array.isArray(content.metadata.internal_operation_results)) {\r\n                    content.metadata.internal_operation_results.forEach(function (x) { return returnedResults.push(x.result); });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return returnedResults;\r\n};\r\n/***\r\n * @description Flatten all error from preapply response (including internal error)\r\n */\r\nvar flattenErrors = function (response, status) {\r\n    var e_1, _a;\r\n    if (status === void 0) { status = 'failed'; }\r\n    var results = Array.isArray(response) ? response : [response];\r\n    var errors = [];\r\n    // Transaction that do not fail will be backtracked in case one failure occur\r\n    for (var i = 0; i < results.length; i++) {\r\n        for (var j = 0; j < results[i].contents.length; j++) {\r\n            var content = results[i].contents[j];\r\n            if (hasMetadata(content)) {\r\n                if (hasMetadataWithResult(content) && content.metadata.operation_result.status === status) {\r\n                    errors = errors.concat(content.metadata.operation_result.errors || []);\r\n                }\r\n                if (hasMetadataWithInternalOperationResult(content) &&\r\n                    Array.isArray(content.metadata.internal_operation_results)) {\r\n                    try {\r\n                        for (var _b = (e_1 = void 0, __values(content.metadata.internal_operation_results)), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                            var internalResult = _c.value;\r\n                            if ('result' in internalResult && internalResult.result.status === status) {\r\n                                errors = errors.concat(internalResult.result.errors || []);\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return errors;\r\n};\n\n/**\r\n * @description Utility class to interact with Tezos operations\r\n */\r\nvar Operation = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param hash Operation hash\r\n     * @param raw Raw operation that was injected\r\n     * @param context Taquito context allowing access to rpc and signer\r\n     */\r\n    function Operation(hash, raw, results, context) {\r\n        var _this = this;\r\n        this.hash = hash;\r\n        this.raw = raw;\r\n        this.results = results;\r\n        this.context = context;\r\n        this._pollingConfig$ = new ReplaySubject(1);\r\n        this._currentHeadPromise = undefined;\r\n        // Caching the current head for one second\r\n        this.currentHead$ = defer(function () {\r\n            if (!_this._currentHeadPromise) {\r\n                _this._currentHeadPromise = _this.context.rpc.getBlock();\r\n                timer(1000)\r\n                    .pipe(first())\r\n                    .subscribe(function () {\r\n                    _this._currentHeadPromise = undefined;\r\n                });\r\n            }\r\n            return from(_this._currentHeadPromise);\r\n        });\r\n        // Polling observable that emit until timeout is reached\r\n        this.polling$ = defer(function () {\r\n            return _this._pollingConfig$.pipe(tap(function (_a) {\r\n                var timeout = _a.timeout, interval = _a.interval;\r\n                if (timeout <= 0) {\r\n                    throw new Error('Timeout must be more than 0');\r\n                }\r\n                if (interval <= 0) {\r\n                    throw new Error('Interval must be more than 0');\r\n                }\r\n            }), map(function (config) { return (__assign(__assign({}, config), { timeoutAt: Math.ceil(config.timeout / config.interval) + 1, count: 0 })); }), switchMap(function (config) { return timer(0, config.interval * 1000).pipe(mapTo(config)); }), tap(function (config) {\r\n                config.count++;\r\n                if (config.count > config.timeoutAt) {\r\n                    throw new Error(\"Confirmation polling timed out\");\r\n                }\r\n            }));\r\n        });\r\n        // Observable that emit once operation is seen in a block\r\n        this.confirmed$ = this.polling$.pipe(switchMapTo(this.currentHead$), map(function (head) {\r\n            for (var i = 3; i >= 0; i--) {\r\n                head.operations[i].forEach(function (op) {\r\n                    if (op.hash === _this.hash) {\r\n                        _this._foundAt = head.header.level;\r\n                    }\r\n                });\r\n            }\r\n            if (head.header.level - _this._foundAt >= 0) {\r\n                return _this._foundAt;\r\n            }\r\n        }), filter(function (x) { return x !== undefined; }), first(), shareReplay());\r\n        this._foundAt = Number.POSITIVE_INFINITY;\r\n        this.confirmed$.pipe(first(), catchError(function () {\r\n            return of(EMPTY);\r\n        })).subscribe();\r\n    }\r\n    Object.defineProperty(Operation.prototype, \"includedInBlock\", {\r\n        get: function () {\r\n            return this._foundAt;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Operation.prototype, \"revealOperation\", {\r\n        get: function () {\r\n            return (Array.isArray(this.results) &&\r\n                this.results.find(function (op) { return op.kind === 'reveal'; }));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Operation.prototype, \"revealStatus\", {\r\n        get: function () {\r\n            if (this.revealOperation) {\r\n                return this.revealOperation.metadata.operation_result.status;\r\n            }\r\n            else {\r\n                return 'unknown';\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Operation.prototype, \"status\", {\r\n        get: function () {\r\n            return (this.results.map(function (result) {\r\n                if (hasMetadataWithResult(result)) {\r\n                    return result.metadata.operation_result.status;\r\n                }\r\n                else {\r\n                    return 'unknown';\r\n                }\r\n            })[0] || 'unknown');\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     *\r\n     * @param confirmations [0] Number of confirmation to wait for\r\n     * @param interval [10] Polling interval\r\n     * @param timeout [180] Timeout\r\n     */\r\n    Operation.prototype.confirmation = function (confirmations, interval, timeout) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var confirmationPollingIntervalSecond, _a, _b, defaultConfirmationCount, confirmationPollingTimeoutSecond, conf;\r\n            var _this = this;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        if (typeof confirmations !== 'undefined' && confirmations < 1) {\r\n                            throw new Error('Confirmation count must be at least 1');\r\n                        }\r\n                        if (!(this.context.config.confirmationPollingIntervalSecond !== undefined)) return [3 /*break*/, 1];\r\n                        _a = this.context.config.confirmationPollingIntervalSecond;\r\n                        return [3 /*break*/, 3];\r\n                    case 1: return [4 /*yield*/, this.context.getConfirmationPollingInterval()];\r\n                    case 2:\r\n                        _a = _c.sent();\r\n                        _c.label = 3;\r\n                    case 3:\r\n                        confirmationPollingIntervalSecond = _a;\r\n                        _b = this.context.config, defaultConfirmationCount = _b.defaultConfirmationCount, confirmationPollingTimeoutSecond = _b.confirmationPollingTimeoutSecond;\r\n                        this._pollingConfig$.next({\r\n                            interval: interval || confirmationPollingIntervalSecond,\r\n                            timeout: timeout || confirmationPollingTimeoutSecond,\r\n                        });\r\n                        conf = confirmations !== undefined ? confirmations : defaultConfirmationCount;\r\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                                _this.confirmed$\r\n                                    .pipe(switchMap(function () { return _this.polling$; }), switchMap(function () { return _this.currentHead$; }), filter(function (head) { return head.header.level - _this._foundAt >= conf - 1; }), first())\r\n                                    .subscribe(function (_) {\r\n                                    resolve(_this._foundAt + (conf - 1));\r\n                                }, reject);\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Operation;\r\n}());\n\nvar BatchOperation = /** @class */ (function (_super) {\r\n    __extends(BatchOperation, _super);\r\n    function BatchOperation(hash, params, source, raw, results, context) {\r\n        var _this = _super.call(this, hash, raw, results, context) || this;\r\n        _this.params = params;\r\n        _this.source = source;\r\n        return _this;\r\n    }\r\n    BatchOperation.prototype.sumProp = function (arr, prop) {\r\n        return arr.reduce(function (prev, current) {\r\n            return prop in current ? Number(current[prop]) + prev : prev;\r\n        }, 0);\r\n    };\r\n    Object.defineProperty(BatchOperation.prototype, \"status\", {\r\n        get: function () {\r\n            return (this.results\r\n                .filter(function (result) { return BATCH_KINDS.indexOf(result.kind) !== -1; })\r\n                .map(function (result) {\r\n                if (hasMetadataWithResult(result)) {\r\n                    return result.metadata.operation_result.status;\r\n                }\r\n                else {\r\n                    return 'unknown';\r\n                }\r\n            })[0] || 'unknown');\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BatchOperation.prototype, \"fee\", {\r\n        get: function () {\r\n            return this.sumProp(this.params, 'fee');\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BatchOperation.prototype, \"gasLimit\", {\r\n        get: function () {\r\n            return this.sumProp(this.params, 'gas_limit');\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BatchOperation.prototype, \"storageLimit\", {\r\n        get: function () {\r\n            return this.sumProp(this.params, 'storage_limit');\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BatchOperation.prototype, \"consumedGas\", {\r\n        get: function () {\r\n            return String(this.sumProp(flattenOperationResult({ contents: this.results }), 'consumed_gas'));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BatchOperation.prototype, \"storageDiff\", {\r\n        get: function () {\r\n            return String(this.sumProp(flattenOperationResult({ contents: this.results }), 'paid_storage_size_diff'));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BatchOperation.prototype, \"errors\", {\r\n        get: function () {\r\n            return flattenErrors({ contents: this.results });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return BatchOperation;\r\n}(Operation));\n\nvar OperationEmitter = /** @class */ (function () {\r\n    function OperationEmitter(context) {\r\n        this.context = context;\r\n    }\r\n    Object.defineProperty(OperationEmitter.prototype, \"rpc\", {\r\n        get: function () {\r\n            return this.context.rpc;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OperationEmitter.prototype, \"signer\", {\r\n        get: function () {\r\n            return this.context.signer;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    OperationEmitter.prototype.isRevealOpNeeded = function (op, pkh) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.isAccountRevealRequired(pkh)];\r\n                    case 1: return [2 /*return*/, (!(_a.sent()) || !this.isRevealRequiredForOpType(op)) ? false : true];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationEmitter.prototype.isAccountRevealRequired = function (publicKeyHash) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var manager, haveManager;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.rpc.getManagerKey(publicKeyHash)];\r\n                    case 1:\r\n                        manager = _a.sent();\r\n                        haveManager = manager && typeof manager === 'object' ? !!manager.key : !!manager;\r\n                        return [2 /*return*/, !haveManager];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationEmitter.prototype.isRevealRequiredForOpType = function (op) {\r\n        var e_1, _a;\r\n        var opRequireReveal = false;\r\n        try {\r\n            for (var op_1 = __values(op), op_1_1 = op_1.next(); !op_1_1.done; op_1_1 = op_1.next()) {\r\n                var operation = op_1_1.value;\r\n                if (isOpRequireReveal(operation)) {\r\n                    opRequireReveal = true;\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (op_1_1 && !op_1_1.done && (_a = op_1.return)) _a.call(op_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return opRequireReveal;\r\n    };\r\n    // Originally from sotez (Copyright (c) 2018 Andrew Kishino)\r\n    OperationEmitter.prototype.prepareOperation = function (_a) {\r\n        var operation = _a.operation, source = _a.source;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var counter, counters, ops, head, blockHeaderPromise, blockMetaPromise, publicKeyHash, counterPromise, i, counter_1, _b, header, metadata, headCounter, getFee, getSource, constructOps, branch, contents, protocol;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        counters = {};\r\n                        ops = [];\r\n                        blockHeaderPromise = this.rpc.getBlockHeader();\r\n                        blockMetaPromise = this.rpc.getBlockMetadata();\r\n                        if (Array.isArray(operation)) {\r\n                            ops = __spreadArray([], __read(operation));\r\n                        }\r\n                        else {\r\n                            ops = [operation];\r\n                        }\r\n                        return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        publicKeyHash = _c.sent();\r\n                        counterPromise = Promise.resolve(undefined);\r\n                        i = 0;\r\n                        _c.label = 2;\r\n                    case 2:\r\n                        if (!(i < ops.length)) return [3 /*break*/, 5];\r\n                        if (!(isOpRequireReveal(ops[i]) || ops[i].kind === 'reveal')) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this.rpc.getContract(publicKeyHash)];\r\n                    case 3:\r\n                        counter_1 = (_c.sent()).counter;\r\n                        counterPromise = Promise.resolve(counter_1);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [4 /*yield*/, Promise.all([\r\n                            blockHeaderPromise,\r\n                            blockMetaPromise,\r\n                            counterPromise\r\n                        ])];\r\n                    case 6:\r\n                        _b = __read.apply(void 0, [_c.sent(), 3]), header = _b[0], metadata = _b[1], headCounter = _b[2];\r\n                        if (!header) {\r\n                            throw new Error('Unable to fetch latest block header');\r\n                        }\r\n                        if (!metadata) {\r\n                            throw new Error('Unable to fetch latest metadata');\r\n                        }\r\n                        head = header;\r\n                        counter = parseInt(headCounter || '0', 10);\r\n                        if (!counters[publicKeyHash] || counters[publicKeyHash] < counter) {\r\n                            counters[publicKeyHash] = counter;\r\n                        }\r\n                        getFee = function (op) {\r\n                            var opCounter = ++counters[publicKeyHash];\r\n                            return {\r\n                                counter: \"\" + opCounter,\r\n                                // tslint:disable-next-line: strict-type-predicates\r\n                                fee: typeof op.fee === 'undefined' ? '0' : \"\" + op.fee,\r\n                                // tslint:disable-next-line: strict-type-predicates\r\n                                gas_limit: typeof op.gas_limit === 'undefined' ? '0' : \"\" + op.gas_limit,\r\n                                // tslint:disable-next-line: strict-type-predicates\r\n                                storage_limit: typeof op.storage_limit === 'undefined' ? '0' : \"\" + op.storage_limit,\r\n                            };\r\n                        };\r\n                        getSource = function (op) {\r\n                            return {\r\n                                source: typeof op.source === 'undefined' ? source || publicKeyHash : op.source,\r\n                            };\r\n                        };\r\n                        constructOps = function (cOps) {\r\n                            // tslint:disable strict-type-predicates\r\n                            return cOps.map(function (op) {\r\n                                switch (op.kind) {\r\n                                    case OpKind.ACTIVATION:\r\n                                        return __assign({}, op);\r\n                                    case OpKind.REVEAL:\r\n                                        return __assign(__assign(__assign({}, op), getSource(op)), getFee(op));\r\n                                    case OpKind.ORIGINATION:\r\n                                        return __assign(__assign(__assign(__assign({}, op), { balance: typeof op.balance !== 'undefined' ? \"\" + op.balance : '0' }), getSource(op)), getFee(op));\r\n                                    case OpKind.TRANSACTION:\r\n                                        var cops = __assign(__assign(__assign(__assign({}, op), { amount: typeof op.amount !== 'undefined' ? \"\" + op.amount : '0' }), getSource(op)), getFee(op));\r\n                                        if (cops.source.toLowerCase().startsWith('kt1')) {\r\n                                            throw new Error(\"KT1 addresses are not supported as source since \" + Protocols.PsBabyM1);\r\n                                        }\r\n                                        return cops;\r\n                                    case OpKind.DELEGATION:\r\n                                        return __assign(__assign(__assign({}, op), getSource(op)), getFee(op));\r\n                                    default:\r\n                                        throw new Error('Unsupported operation');\r\n                                }\r\n                            });\r\n                        };\r\n                        branch = head.hash;\r\n                        contents = constructOps(ops);\r\n                        protocol = metadata.next_protocol;\r\n                        return [2 /*return*/, {\r\n                                opOb: {\r\n                                    branch: branch,\r\n                                    contents: contents,\r\n                                    protocol: protocol,\r\n                                },\r\n                                counter: counter,\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationEmitter.prototype.forge = function (_a) {\r\n        var _b = _a.opOb, branch = _b.branch, contents = _b.contents, protocol = _b.protocol, counter = _a.counter;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var forgedBytes;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.context.forger.forge({ branch: branch, contents: contents })];\r\n                    case 1:\r\n                        forgedBytes = _c.sent();\r\n                        return [2 /*return*/, {\r\n                                opbytes: forgedBytes,\r\n                                opOb: {\r\n                                    branch: branch,\r\n                                    contents: contents,\r\n                                    protocol: protocol,\r\n                                },\r\n                                counter: counter,\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationEmitter.prototype.simulate = function (op) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = {};\r\n                        return [4 /*yield*/, this.rpc.runOperation(op)];\r\n                    case 1: return [2 /*return*/, (_a.opResponse = _b.sent(),\r\n                            _a.op = op,\r\n                            _a.context = this.context.clone(),\r\n                            _a)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationEmitter.prototype.estimate = function (_a, estimator) {\r\n        var fee = _a.fee, gasLimit = _a.gasLimit, storageLimit = _a.storageLimit, rest = __rest(_a, [\"fee\", \"gasLimit\", \"storageLimit\"]);\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var calculatedFee, calculatedGas, calculatedStorage, estimation;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        calculatedFee = fee;\r\n                        calculatedGas = gasLimit;\r\n                        calculatedStorage = storageLimit;\r\n                        if (!(fee === undefined || gasLimit === undefined || storageLimit === undefined)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, estimator(__assign({ fee: fee, gasLimit: gasLimit, storageLimit: storageLimit }, rest))];\r\n                    case 1:\r\n                        estimation = _b.sent();\r\n                        if (calculatedFee === undefined) {\r\n                            calculatedFee = estimation.suggestedFeeMutez;\r\n                        }\r\n                        if (calculatedGas === undefined) {\r\n                            calculatedGas = estimation.gasLimit;\r\n                        }\r\n                        if (calculatedStorage === undefined) {\r\n                            calculatedStorage = estimation.storageLimit;\r\n                        }\r\n                        _b.label = 2;\r\n                    case 2: return [2 /*return*/, {\r\n                            fee: calculatedFee,\r\n                            gasLimit: calculatedGas,\r\n                            storageLimit: calculatedStorage,\r\n                        }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationEmitter.prototype.signAndInject = function (forgedBytes) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var signed, opResponse, results, i, j, errors;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.sign(forgedBytes.opbytes, new Uint8Array([3]))];\r\n                    case 1:\r\n                        signed = _b.sent();\r\n                        forgedBytes.opbytes = signed.sbytes;\r\n                        forgedBytes.opOb.signature = signed.prefixSig;\r\n                        opResponse = [];\r\n                        return [4 /*yield*/, this.rpc.preapplyOperations([forgedBytes.opOb])];\r\n                    case 2:\r\n                        results = _b.sent();\r\n                        if (!Array.isArray(results)) {\r\n                            throw new TezosPreapplyFailureError(results);\r\n                        }\r\n                        for (i = 0; i < results.length; i++) {\r\n                            for (j = 0; j < results[i].contents.length; j++) {\r\n                                opResponse.push(results[i].contents[j]);\r\n                            }\r\n                        }\r\n                        errors = flattenErrors(results);\r\n                        if (errors.length) {\r\n                            // @ts-ignore\r\n                            throw new TezosOperationError(errors);\r\n                        }\r\n                        _a = {};\r\n                        return [4 /*yield*/, this.context.injector.inject(forgedBytes.opbytes)];\r\n                    case 3: return [2 /*return*/, (_a.hash = _b.sent(),\r\n                            _a.forgedBytes = forgedBytes,\r\n                            _a.opResponse = opResponse,\r\n                            _a.context = this.context.clone(),\r\n                            _a)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OperationEmitter;\r\n}());\n\nvar BATCH_KINDS = [\r\n    OpKind.ACTIVATION,\r\n    OpKind.ORIGINATION,\r\n    OpKind.TRANSACTION,\r\n    OpKind.DELEGATION,\r\n];\r\nvar OperationBatch = /** @class */ (function (_super) {\r\n    __extends(OperationBatch, _super);\r\n    function OperationBatch(context, estimator) {\r\n        var _this = _super.call(this, context) || this;\r\n        _this.estimator = estimator;\r\n        _this.operations = [];\r\n        return _this;\r\n    }\r\n    /**\r\n     *\r\n     * @description Add a transaction operation to the batch\r\n     *\r\n     * @param params Transfer operation parameter\r\n     */\r\n    OperationBatch.prototype.withTransfer = function (params) {\r\n        this.operations.push(__assign({ kind: OpKind.TRANSACTION }, params));\r\n        return this;\r\n    };\r\n    /**\r\n     *\r\n     * @description Add a transaction operation to the batch\r\n     *\r\n     * @param params Transfer operation parameter\r\n     */\r\n    OperationBatch.prototype.withContractCall = function (params) {\r\n        return this.withTransfer(params.toTransferParams());\r\n    };\r\n    /**\r\n     *\r\n     * @description Add a delegation operation to the batch\r\n     *\r\n     * @param params Delegation operation parameter\r\n     */\r\n    OperationBatch.prototype.withDelegation = function (params) {\r\n        this.operations.push(__assign({ kind: OpKind.DELEGATION }, params));\r\n        return this;\r\n    };\r\n    /**\r\n     *\r\n     * @description Add an activation operation to the batch\r\n     *\r\n     * @param params Activation operation parameter\r\n     */\r\n    OperationBatch.prototype.withActivation = function (_a) {\r\n        var pkh = _a.pkh, secret = _a.secret;\r\n        this.operations.push({ kind: OpKind.ACTIVATION, pkh: pkh, secret: secret });\r\n        return this;\r\n    };\r\n    /**\r\n     *\r\n     * @description Add an origination operation to the batch\r\n     *\r\n     * @param params Origination operation parameter\r\n     */\r\n    OperationBatch.prototype.withOrigination = function (params) {\r\n        this.operations.push(__assign({ kind: OpKind.ORIGINATION }, params));\r\n        return this;\r\n    };\r\n    OperationBatch.prototype.getRPCOp = function (param) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = param.kind;\r\n                        switch (_a) {\r\n                            case OpKind.TRANSACTION: return [3 /*break*/, 1];\r\n                            case OpKind.ORIGINATION: return [3 /*break*/, 2];\r\n                            case OpKind.DELEGATION: return [3 /*break*/, 4];\r\n                            case OpKind.ACTIVATION: return [3 /*break*/, 5];\r\n                        }\r\n                        return [3 /*break*/, 6];\r\n                    case 1: return [2 /*return*/, createTransferOperation(__assign({}, param))];\r\n                    case 2:\r\n                        _b = createOriginationOperation;\r\n                        return [4 /*yield*/, this.context.parser.prepareCodeOrigination(__assign({}, param))];\r\n                    case 3: return [2 /*return*/, _b.apply(void 0, [_c.sent()])];\r\n                    case 4: return [2 /*return*/, createSetDelegateOperation(__assign({}, param))];\r\n                    case 5: return [2 /*return*/, __assign({}, param)];\r\n                    case 6: throw new Error(\"Unsupported operation kind: \" + param.kind);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Add a group operation to the batch. Operation will be applied in the order they are in the params array\r\n     *\r\n     * @param params Operations parameter\r\n     */\r\n    OperationBatch.prototype.with = function (params) {\r\n        var e_1, _a;\r\n        try {\r\n            for (var params_1 = __values(params), params_1_1 = params_1.next(); !params_1_1.done; params_1_1 = params_1.next()) {\r\n                var param = params_1_1.value;\r\n                switch (param.kind) {\r\n                    case OpKind.TRANSACTION:\r\n                        this.withTransfer(param);\r\n                        break;\r\n                    case OpKind.ORIGINATION:\r\n                        this.withOrigination(param);\r\n                        break;\r\n                    case OpKind.DELEGATION:\r\n                        this.withDelegation(param);\r\n                        break;\r\n                    case OpKind.ACTIVATION:\r\n                        this.withActivation(param);\r\n                        break;\r\n                    default:\r\n                        throw new Error(\"Unsupported operation kind: \" + param.kind);\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (params_1_1 && !params_1_1.done && (_a = params_1.return)) _a.call(params_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     *\r\n     * @description Forge and Inject the operation batch\r\n     *\r\n     * @param params Optionally specify the source of the operation\r\n     */\r\n    OperationBatch.prototype.send = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var publicKeyHash, publicKey, estimates, revealNeeded, i, ops, _a, _b, op, estimated, _c, _d, e_2_1, reveal, estimatedReveal, _e, _f, source, prepared, opBytes, _g, hash, context, forgedBytes, opResponse;\r\n            var e_2, _h;\r\n            var _this = this;\r\n            return __generator(this, function (_j) {\r\n                switch (_j.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        publicKeyHash = _j.sent();\r\n                        return [4 /*yield*/, this.signer.publicKey()];\r\n                    case 2:\r\n                        publicKey = _j.sent();\r\n                        return [4 /*yield*/, this.estimator.batch(this.operations)];\r\n                    case 3:\r\n                        estimates = _j.sent();\r\n                        return [4 /*yield*/, this.isRevealOpNeeded(this.operations, publicKeyHash)];\r\n                    case 4:\r\n                        revealNeeded = _j.sent();\r\n                        i = revealNeeded ? 1 : 0;\r\n                        ops = [];\r\n                        _j.label = 5;\r\n                    case 5:\r\n                        _j.trys.push([5, 13, 14, 15]);\r\n                        _a = __values(this.operations), _b = _a.next();\r\n                        _j.label = 6;\r\n                    case 6:\r\n                        if (!!_b.done) return [3 /*break*/, 12];\r\n                        op = _b.value;\r\n                        if (!isOpWithFee(op)) return [3 /*break*/, 9];\r\n                        return [4 /*yield*/, this.estimate(op, function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                                return [2 /*return*/, estimates[i]];\r\n                            }); }); })];\r\n                    case 7:\r\n                        estimated = _j.sent();\r\n                        _d = (_c = ops).push;\r\n                        return [4 /*yield*/, this.getRPCOp(__assign(__assign({}, op), estimated))];\r\n                    case 8:\r\n                        _d.apply(_c, [_j.sent()]);\r\n                        return [3 /*break*/, 10];\r\n                    case 9:\r\n                        ops.push(__assign({}, op));\r\n                        _j.label = 10;\r\n                    case 10:\r\n                        i++;\r\n                        _j.label = 11;\r\n                    case 11:\r\n                        _b = _a.next();\r\n                        return [3 /*break*/, 6];\r\n                    case 12: return [3 /*break*/, 15];\r\n                    case 13:\r\n                        e_2_1 = _j.sent();\r\n                        e_2 = { error: e_2_1 };\r\n                        return [3 /*break*/, 15];\r\n                    case 14:\r\n                        try {\r\n                            if (_b && !_b.done && (_h = _a.return)) _h.call(_a);\r\n                        }\r\n                        finally { if (e_2) throw e_2.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 15:\r\n                        if (!revealNeeded) return [3 /*break*/, 18];\r\n                        reveal = { kind: OpKind.REVEAL };\r\n                        return [4 /*yield*/, this.estimate(reveal, function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                                return [2 /*return*/, estimates[0]];\r\n                            }); }); })];\r\n                    case 16:\r\n                        estimatedReveal = _j.sent();\r\n                        _f = (_e = ops).unshift;\r\n                        return [4 /*yield*/, createRevealOperation(__assign({}, estimatedReveal), publicKeyHash, publicKey)];\r\n                    case 17:\r\n                        _f.apply(_e, [_j.sent()]);\r\n                        _j.label = 18;\r\n                    case 18:\r\n                        source = (params && params.source) || publicKeyHash;\r\n                        return [4 /*yield*/, this.prepareOperation({\r\n                                operation: ops,\r\n                                source: source,\r\n                            })];\r\n                    case 19:\r\n                        prepared = _j.sent();\r\n                        return [4 /*yield*/, this.forge(prepared)];\r\n                    case 20:\r\n                        opBytes = _j.sent();\r\n                        return [4 /*yield*/, this.signAndInject(opBytes)];\r\n                    case 21:\r\n                        _g = _j.sent(), hash = _g.hash, context = _g.context, forgedBytes = _g.forgedBytes, opResponse = _g.opResponse;\r\n                        return [2 /*return*/, new BatchOperation(hash, ops, source, forgedBytes, opResponse, context)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OperationBatch;\r\n}(OperationEmitter));\r\nvar RPCBatchProvider = /** @class */ (function () {\r\n    function RPCBatchProvider(context, estimator) {\r\n        this.context = context;\r\n        this.estimator = estimator;\r\n    }\r\n    /***\r\n     *\r\n     * @description Batch a group of operation together. Operations will be applied in the order in which they are added to the batch\r\n     *\r\n     * @param params List of operation to batch together\r\n     */\r\n    RPCBatchProvider.prototype.batch = function (params) {\r\n        var batch = new OperationBatch(this.context, this.estimator);\r\n        if (Array.isArray(params)) {\r\n            batch.with(params);\r\n        }\r\n        return batch;\r\n    };\r\n    return RPCBatchProvider;\r\n}());\n\nvar receiptFromOperation = function (op, _a) {\r\n    var _b = _a === void 0 ? {\r\n        ALLOCATION_BURN: 257,\r\n        ORIGINATION_BURN: 257,\r\n    } : _a, ALLOCATION_BURN = _b.ALLOCATION_BURN, ORIGINATION_BURN = _b.ORIGINATION_BURN;\r\n    var operationResults = flattenOperationResult({ contents: op });\r\n    var totalGas = new BigNumber(0);\r\n    var totalStorage = new BigNumber(0);\r\n    var totalFee = new BigNumber(0);\r\n    var totalOriginationBurn = new BigNumber(0);\r\n    var totalAllocationBurn = new BigNumber(0);\r\n    var totalPaidStorageDiff = new BigNumber(0);\r\n    operationResults.forEach(function (result) {\r\n        totalFee = totalFee.plus(result.fee || 0);\r\n        totalOriginationBurn = totalOriginationBurn.plus(Array.isArray(result.originated_contracts)\r\n            ? result.originated_contracts.length * ORIGINATION_BURN\r\n            : 0);\r\n        totalAllocationBurn = totalAllocationBurn.plus('allocated_destination_contract' in result ? ALLOCATION_BURN : 0);\r\n        totalGas = totalGas.plus(result.consumed_gas || 0);\r\n        totalPaidStorageDiff = totalPaidStorageDiff.plus('paid_storage_size_diff' in result ? Number(result.paid_storage_size_diff) || 0 : 0);\r\n    });\r\n    totalStorage = totalStorage\r\n        .plus(totalAllocationBurn)\r\n        .plus(totalOriginationBurn)\r\n        .plus(totalPaidStorageDiff);\r\n    return {\r\n        totalFee: totalFee,\r\n        totalGas: totalGas,\r\n        totalStorage: totalStorage,\r\n        totalAllocationBurn: totalAllocationBurn,\r\n        totalOriginationBurn: totalOriginationBurn,\r\n        totalPaidStorageDiff: totalPaidStorageDiff,\r\n        totalStorageBurn: new BigNumber(totalStorage.multipliedBy(1000)),\r\n    };\r\n};\n\nvar MissedBlockDuringConfirmationError = /** @class */ (function () {\r\n    function MissedBlockDuringConfirmationError() {\r\n        this.name = 'MissedBlockDuringConfirmationError';\r\n        this.message = 'Taquito missed a block while waiting for operation confirmation and was not able to find the operation';\r\n    }\r\n    return MissedBlockDuringConfirmationError;\r\n}());\r\nvar MAX_BRANCH_ANCESTORS = 60;\r\n/**\r\n * @description WalletOperation allows to monitor operation inclusion on chains and surface information related to the operation\r\n */\r\nvar WalletOperation = /** @class */ (function () {\r\n    /**\r\n     *\r\n     * @param opHash Operation hash\r\n     * @param raw Raw operation that was injected\r\n     * @param context Taquito context allowing access to rpc and signer\r\n     */\r\n    function WalletOperation(opHash, context, _newHead$) {\r\n        var _this = this;\r\n        this.opHash = opHash;\r\n        this.context = context;\r\n        this._newHead$ = _newHead$;\r\n        this._operationResult = new ReplaySubject(1);\r\n        this._includedInBlock = new ReplaySubject(1);\r\n        this._included = false;\r\n        this.newHead$ = this._newHead$.pipe(tap(function (newHead) {\r\n            if (!_this._included &&\r\n                _this.lastHead &&\r\n                newHead.header.level - _this.lastHead.header.level > 1) {\r\n                throw new MissedBlockDuringConfirmationError();\r\n            }\r\n            _this.lastHead = newHead;\r\n        }), shareReplay({ bufferSize: 1, refCount: true }));\r\n        // Observable that emit once operation is seen in a block\r\n        this.confirmed$ = this.newHead$.pipe(map(function (head) {\r\n            var e_1, _a, e_2, _b;\r\n            try {\r\n                for (var _c = __values(head.operations), _d = _c.next(); !_d.done; _d = _c.next()) {\r\n                    var opGroup = _d.value;\r\n                    try {\r\n                        for (var opGroup_1 = (e_2 = void 0, __values(opGroup)), opGroup_1_1 = opGroup_1.next(); !opGroup_1_1.done; opGroup_1_1 = opGroup_1.next()) {\r\n                            var op = opGroup_1_1.value;\r\n                            if (op.hash === _this.opHash) {\r\n                                _this._included = true;\r\n                                _this._includedInBlock.next(head);\r\n                                _this._operationResult.next(op.contents);\r\n                                // Return the block where the operation was found\r\n                                return head;\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (opGroup_1_1 && !opGroup_1_1.done && (_b = opGroup_1.return)) _b.call(opGroup_1);\r\n                        }\r\n                        finally { if (e_2) throw e_2.error; }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }), filter(function (x) {\r\n            return typeof x !== 'undefined';\r\n        }), first(), shareReplay({ bufferSize: 1, refCount: true }));\r\n        this.confirmed$.pipe(first(), catchError(function () { return of(undefined); })).subscribe();\r\n    }\r\n    WalletOperation.prototype.operationResults = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._operationResult.pipe(first()).toPromise()];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @description Receipt expose the total amount of tezos token burn and spent on fees\r\n     * The promise returned by receipt will resolve only once the transaction is included\r\n     */\r\n    WalletOperation.prototype.receipt = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = receiptFromOperation;\r\n                        return [4 /*yield*/, this.operationResults()];\r\n                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WalletOperation.prototype.getCurrentConfirmation = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (!this._included) {\r\n                    return [2 /*return*/, 0];\r\n                }\r\n                return [2 /*return*/, combineLatest([this._includedInBlock, from(this.context.rpc.getBlock())])\r\n                        .pipe(map(function (_a) {\r\n                        var _b = __read(_a, 2), foundAtBlock = _b[0], head = _b[1];\r\n                        return head.header.level - foundAtBlock.header.level + 1;\r\n                    }), first())\r\n                        .toPromise()];\r\n            });\r\n        });\r\n    };\r\n    WalletOperation.prototype.isInCurrentBranch = function (tipBlockIdentifier) {\r\n        if (tipBlockIdentifier === void 0) { tipBlockIdentifier = 'head'; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var tipBlockHeader, inclusionBlock, levelDiff, tipBlockLevel, blocks, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        // By default it is assumed that the operation is in the current branch\r\n                        if (!this._included) {\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [4 /*yield*/, this.context.rpc.getBlockHeader({ block: tipBlockIdentifier })];\r\n                    case 1:\r\n                        tipBlockHeader = _b.sent();\r\n                        return [4 /*yield*/, this._includedInBlock.pipe(first()).toPromise()];\r\n                    case 2:\r\n                        inclusionBlock = _b.sent();\r\n                        levelDiff = tipBlockHeader.level - inclusionBlock.header.level;\r\n                        // Block produced before the operation is included are assumed to be part of the current branch\r\n                        if (levelDiff <= 0) {\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        tipBlockLevel = Math.min(inclusionBlock.header.level + levelDiff, inclusionBlock.header.level + MAX_BRANCH_ANCESTORS);\r\n                        _a = Set.bind;\r\n                        return [4 /*yield*/, this.context.rpc.getLiveBlocks({ block: String(tipBlockLevel) })];\r\n                    case 3:\r\n                        blocks = new (_a.apply(Set, [void 0, _b.sent()]))();\r\n                        return [2 /*return*/, blocks.has(inclusionBlock.hash)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WalletOperation.prototype.confirmationObservable = function (confirmations) {\r\n        var _this = this;\r\n        if (typeof confirmations !== 'undefined' && confirmations < 1) {\r\n            throw new Error('Confirmation count must be at least 1');\r\n        }\r\n        var defaultConfirmationCount = this.context.config.defaultConfirmationCount;\r\n        var conf = confirmations !== undefined ? confirmations : defaultConfirmationCount;\r\n        if (conf === undefined) {\r\n            throw new Error('Default confirmation count can not be undefined!');\r\n        }\r\n        return combineLatest([this._includedInBlock, this.newHead$]).pipe(distinctUntilChanged(function (_a, _b) {\r\n            var _c = __read(_a, 2), previousHead = _c[1];\r\n            var _d = __read(_b, 2), newHead = _d[1];\r\n            return previousHead.hash === newHead.hash;\r\n        }), map(function (_a) {\r\n            var _b = __read(_a, 2), foundAtBlock = _b[0], head = _b[1];\r\n            return {\r\n                block: head,\r\n                expectedConfirmation: conf,\r\n                currentConfirmation: head.header.level - foundAtBlock.header.level + 1,\r\n                completed: head.header.level - foundAtBlock.header.level >= conf - 1,\r\n                isInCurrentBranch: function () { return _this.isInCurrentBranch(head.hash); },\r\n            };\r\n        }), takeWhile(function (_a) {\r\n            var completed = _a.completed;\r\n            return !completed;\r\n        }, true));\r\n    };\r\n    /**\r\n     *\r\n     * @param confirmations [0] Number of confirmation to wait for\r\n     */\r\n    WalletOperation.prototype.confirmation = function (confirmations) {\r\n        return this.confirmationObservable(confirmations).toPromise();\r\n    };\r\n    return WalletOperation;\r\n}());\n\nvar BatchWalletOperation = /** @class */ (function (_super) {\r\n    __extends(BatchWalletOperation, _super);\r\n    function BatchWalletOperation(opHash, context, newHead$) {\r\n        var _this = _super.call(this, opHash, context, newHead$) || this;\r\n        _this.opHash = opHash;\r\n        _this.context = context;\r\n        return _this;\r\n    }\r\n    BatchWalletOperation.prototype.revealOperation = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operationResult;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.operationResults()];\r\n                    case 1:\r\n                        operationResult = _a.sent();\r\n                        return [2 /*return*/, operationResult.find(function (x) { return x.kind === OpKind.REVEAL; })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BatchWalletOperation.prototype.status = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var op;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._included) {\r\n                            return [2 /*return*/, 'pending'];\r\n                        }\r\n                        return [4 /*yield*/, this.operationResults()];\r\n                    case 1:\r\n                        op = _a.sent();\r\n                        return [2 /*return*/, (op\r\n                                .filter(function (result) { return BATCH_KINDS.indexOf(result.kind) !== -1; })\r\n                                .map(function (result) {\r\n                                if (hasMetadataWithResult(result)) {\r\n                                    return result.metadata.operation_result.status;\r\n                                }\r\n                                else {\r\n                                    return 'unknown';\r\n                                }\r\n                            })[0] || 'unknown')];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return BatchWalletOperation;\r\n}(WalletOperation));\n\nvar DelegationWalletOperation = /** @class */ (function (_super) {\r\n    __extends(DelegationWalletOperation, _super);\r\n    function DelegationWalletOperation(opHash, context, newHead$) {\r\n        var _this = _super.call(this, opHash, context, newHead$) || this;\r\n        _this.opHash = opHash;\r\n        _this.context = context;\r\n        return _this;\r\n    }\r\n    DelegationWalletOperation.prototype.revealOperation = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operationResult;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.operationResults()];\r\n                    case 1:\r\n                        operationResult = _a.sent();\r\n                        return [2 /*return*/, operationResult.find(function (x) { return x.kind === OpKind.REVEAL; })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DelegationWalletOperation.prototype.delegationOperation = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operationResult;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.operationResults()];\r\n                    case 1:\r\n                        operationResult = _a.sent();\r\n                        return [2 /*return*/, operationResult.find(function (x) { return x.kind === OpKind.DELEGATION; })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DelegationWalletOperation.prototype.status = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var op;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._included) {\r\n                            return [2 /*return*/, 'pending'];\r\n                        }\r\n                        return [4 /*yield*/, this.delegationOperation()];\r\n                    case 1:\r\n                        op = _a.sent();\r\n                        if (!op) {\r\n                            return [2 /*return*/, 'unknown'];\r\n                        }\r\n                        return [2 /*return*/, op.metadata.operation_result.status];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return DelegationWalletOperation;\r\n}(WalletOperation));\n\nvar OriginationWalletOperation = /** @class */ (function (_super) {\r\n    __extends(OriginationWalletOperation, _super);\r\n    function OriginationWalletOperation(opHash, context, newHead$) {\r\n        var _this = _super.call(this, opHash, context, newHead$) || this;\r\n        _this.opHash = opHash;\r\n        _this.context = context;\r\n        return _this;\r\n    }\r\n    OriginationWalletOperation.prototype.originationOperation = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operationResult;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.operationResults()];\r\n                    case 1:\r\n                        operationResult = _a.sent();\r\n                        return [2 /*return*/, findWithKind(operationResult, OpKind.ORIGINATION)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OriginationWalletOperation.prototype.revealOperation = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operationResult;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.operationResults()];\r\n                    case 1:\r\n                        operationResult = _a.sent();\r\n                        return [2 /*return*/, findWithKind(operationResult, OpKind.REVEAL)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OriginationWalletOperation.prototype.status = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var op;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._included) {\r\n                            return [2 /*return*/, 'pending'];\r\n                        }\r\n                        return [4 /*yield*/, this.originationOperation()];\r\n                    case 1:\r\n                        op = _a.sent();\r\n                        if (!op) {\r\n                            return [2 /*return*/, 'unknown'];\r\n                        }\r\n                        return [2 /*return*/, op.metadata.operation_result.status];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OriginationWalletOperation.prototype.contract = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var op, address;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.originationOperation()];\r\n                    case 1:\r\n                        op = _a.sent();\r\n                        address = (op.metadata.operation_result.originated_contracts || [])[0];\r\n                        return [2 /*return*/, this.context.wallet.at(address)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OriginationWalletOperation;\r\n}(WalletOperation));\n\nvar TransactionWalletOperation = /** @class */ (function (_super) {\r\n    __extends(TransactionWalletOperation, _super);\r\n    function TransactionWalletOperation(opHash, context, newHead$) {\r\n        var _this = _super.call(this, opHash, context, newHead$) || this;\r\n        _this.opHash = opHash;\r\n        _this.context = context;\r\n        return _this;\r\n    }\r\n    TransactionWalletOperation.prototype.revealOperation = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operationResult;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.operationResults()];\r\n                    case 1:\r\n                        operationResult = _a.sent();\r\n                        return [2 /*return*/, operationResult.find(function (x) { return x.kind === OpKind.REVEAL; })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TransactionWalletOperation.prototype.transactionOperation = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operationResult;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.operationResults()];\r\n                    case 1:\r\n                        operationResult = _a.sent();\r\n                        return [2 /*return*/, operationResult.find(function (x) { return x.kind === OpKind.TRANSACTION; })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TransactionWalletOperation.prototype.status = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var op;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._included) {\r\n                            return [2 /*return*/, 'pending'];\r\n                        }\r\n                        return [4 /*yield*/, this.transactionOperation()];\r\n                    case 1:\r\n                        op = _a.sent();\r\n                        if (!op) {\r\n                            return [2 /*return*/, 'unknown'];\r\n                        }\r\n                        return [2 /*return*/, op.metadata.operation_result.status];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return TransactionWalletOperation;\r\n}(WalletOperation));\n\nvar cacheUntil = function (cacheUntilObs) { return function (source) {\r\n    var subject = null;\r\n    return defer(function () {\r\n        if (!subject) {\r\n            subject = new ReplaySubject();\r\n            source.pipe(first()).subscribe(subject);\r\n            cacheUntilObs.pipe(first()).subscribe(function () {\r\n                subject = null;\r\n            });\r\n        }\r\n        return subject;\r\n    });\r\n}; };\r\nvar createNewPollingBasedHeadObservable = function (pollingTimer, sharedHeadOb, context, scheduler) {\r\n    return pollingTimer.pipe(switchMap(function () { return sharedHeadOb; }), distinctUntilKeyChanged('hash'), timeoutWith(context.config.confirmationPollingTimeoutSecond * 1000, throwError(new Error('Confirmation polling timed out')), scheduler), shareReplay({\r\n        refCount: true,\r\n        scheduler: scheduler,\r\n    }));\r\n};\r\nvar OperationFactory = /** @class */ (function () {\r\n    function OperationFactory(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        // Cache the last block for one second across all operations\r\n        this.sharedHeadObs = defer(function () { return from(_this.context.rpc.getBlock()); }).pipe(cacheUntil(timer(0, 1000)));\r\n    }\r\n    OperationFactory.prototype.createNewHeadObservable = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var confirmationPollingIntervalSecond, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!(this.context.config.confirmationPollingIntervalSecond !== undefined)) return [3 /*break*/, 1];\r\n                        _a = this.context.config.confirmationPollingIntervalSecond;\r\n                        return [3 /*break*/, 3];\r\n                    case 1: return [4 /*yield*/, this.context.getConfirmationPollingInterval()];\r\n                    case 2:\r\n                        _a = _b.sent();\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        confirmationPollingIntervalSecond = _a;\r\n                        return [2 /*return*/, createNewPollingBasedHeadObservable(timer(0, confirmationPollingIntervalSecond * 1000), this.sharedHeadObs, this.context)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationFactory.prototype.createPastBlockWalker = function (startBlock, count) {\r\n        var _this = this;\r\n        if (count === void 0) { count = 1; }\r\n        return from(this.context.rpc.getBlock({ block: startBlock })).pipe(switchMap(function (block) {\r\n            if (count === 1) {\r\n                return of(block);\r\n            }\r\n            return range(block.header.level, count - 1).pipe(startWith(block), concatMap(function (level) { return __awaiter(_this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    return [2 /*return*/, this.context.rpc.getBlock({ block: String(level) })];\r\n                });\r\n            }); }));\r\n        }));\r\n    };\r\n    OperationFactory.prototype.createHeadObservableFromConfig = function (_a) {\r\n        var blockIdentifier = _a.blockIdentifier;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var observableSequence, _b, _c;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        observableSequence = [];\r\n                        if (blockIdentifier) {\r\n                            observableSequence.push(this.createPastBlockWalker(blockIdentifier));\r\n                        }\r\n                        _c = (_b = observableSequence).push;\r\n                        return [4 /*yield*/, this.createNewHeadObservable()];\r\n                    case 1:\r\n                        _c.apply(_b, [_d.sent()]);\r\n                        return [2 /*return*/, concat.apply(void 0, __spreadArray([], __read(observableSequence)))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationFactory.prototype.createOperation = function (hash, config) {\r\n        if (config === void 0) { config = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = WalletOperation.bind;\r\n                        _b = [void 0, hash,\r\n                            this.context.clone()];\r\n                        return [4 /*yield*/, this.createHeadObservableFromConfig(config)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(WalletOperation, _b.concat([_c.sent()])))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationFactory.prototype.createBatchOperation = function (hash, config) {\r\n        if (config === void 0) { config = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = BatchWalletOperation.bind;\r\n                        _b = [void 0, hash,\r\n                            this.context.clone()];\r\n                        return [4 /*yield*/, this.createHeadObservableFromConfig(config)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(BatchWalletOperation, _b.concat([_c.sent()])))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationFactory.prototype.createTransactionOperation = function (hash, config) {\r\n        if (config === void 0) { config = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = TransactionWalletOperation.bind;\r\n                        _b = [void 0, hash,\r\n                            this.context.clone()];\r\n                        return [4 /*yield*/, this.createHeadObservableFromConfig(config)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(TransactionWalletOperation, _b.concat([_c.sent()])))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationFactory.prototype.createDelegationOperation = function (hash, config) {\r\n        if (config === void 0) { config = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = DelegationWalletOperation.bind;\r\n                        _b = [void 0, hash,\r\n                            this.context.clone()];\r\n                        return [4 /*yield*/, this.createHeadObservableFromConfig(config)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(DelegationWalletOperation, _b.concat([_c.sent()])))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OperationFactory.prototype.createOriginationOperation = function (hash, config) {\r\n        if (config === void 0) { config = {}; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = OriginationWalletOperation.bind;\r\n                        _b = [void 0, hash,\r\n                            this.context.clone()];\r\n                        return [4 /*yield*/, this.createHeadObservableFromConfig(config)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(OriginationWalletOperation, _b.concat([_c.sent()])))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OperationFactory;\r\n}());\n\nvar RpcTzProvider = /** @class */ (function (_super) {\r\n    __extends(RpcTzProvider, _super);\r\n    function RpcTzProvider(context) {\r\n        return _super.call(this, context) || this;\r\n    }\r\n    RpcTzProvider.prototype.getBalance = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.rpc.getBalance(address)];\r\n            });\r\n        });\r\n    };\r\n    RpcTzProvider.prototype.getDelegate = function (address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.rpc.getDelegate(address)];\r\n            });\r\n        });\r\n    };\r\n    RpcTzProvider.prototype.activate = function (pkh, secret) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var operation, prepared, forgedBytes, bytes, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        operation = {\r\n                            kind: OpKind.ACTIVATION,\r\n                            pkh: pkh,\r\n                            secret: secret,\r\n                        };\r\n                        return [4 /*yield*/, this.prepareOperation({ operation: [operation], source: pkh })];\r\n                    case 1:\r\n                        prepared = _b.sent();\r\n                        return [4 /*yield*/, this.forge(prepared)];\r\n                    case 2:\r\n                        forgedBytes = _b.sent();\r\n                        bytes = forgedBytes.opbytes + \"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\";\r\n                        _a = Operation.bind;\r\n                        return [4 /*yield*/, this.rpc.injectOperation(bytes)];\r\n                    case 3: return [2 /*return*/, new (_a.apply(Operation, [void 0, _b.sent(), __assign(__assign({}, forgedBytes), { opbytes: bytes }), [],\r\n                            this.context.clone()]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RpcTzProvider;\r\n}(OperationEmitter));\n\nvar MINIMAL_FEE_MUTEZ = 100;\r\nvar MINIMAL_FEE_PER_BYTE_MUTEZ = 1;\r\nvar MINIMAL_FEE_PER_GAS_MUTEZ = 0.1;\r\nvar GAS_BUFFER = 100;\r\n/**\r\n * Examples of use :\r\n *\r\n *  Estimate a transfer operation :\r\n * ```\r\n * // Assuming that provider and signer are already configured...\r\n *\r\n * const amount = 2;\r\n * const address = 'tz1h3rQ8wBxFd8L9B3d7Jhaawu6Z568XU3xY';\r\n *\r\n * // Estimate gasLimit, storageLimit and fees for a transfer operation\r\n * const est = await Tezos.estimate.transfer({ to: address, amount: amount })\r\n * console.log(est.burnFeeMutez, est.gasLimit, est.minimalFeeMutez, est.storageLimit,\r\n *  est.suggestedFeeMutez, est.totalCost, est.usingBaseFeeMutez)\r\n *\r\n * ```\r\n *\r\n * Estimate a contract origination :\r\n * ```\r\n * // generic.json is referring to a Michelson Smart Contract\r\n *\r\n * const genericMultisigJSON = require('./generic.json')\r\n * const est = await Tezos.estimate.originate({\r\n *   code: genericMultisigJSON,\r\n *   storage: {\r\n *     stored_counter: 0,\r\n *     threshold: 1,\r\n *     keys: ['edpkuLxx9PQD8fZ45eUzrK3BhfDZJHhBuK4Zi49DcEGANwd2rpX82t']\r\n *   }\r\n * })\r\n * console.log(est.burnFeeMutez, est.gasLimit, est.minimalFeeMutez, est.storageLimit,\r\n *   est.suggestedFeeMutez, est.totalCost, est.usingBaseFeeMutez)\r\n *\r\n * ```\r\n */\r\nvar Estimate = /** @class */ (function () {\r\n    function Estimate(_milligasLimit, _storageLimit, opSize, minimalFeePerStorageByteMutez, \r\n    /**\r\n     * @description Base fee in mutez (1 mutez = 1e106 tez)\r\n     */\r\n    baseFeeMutez) {\r\n        if (baseFeeMutez === void 0) { baseFeeMutez = MINIMAL_FEE_MUTEZ; }\r\n        this._milligasLimit = _milligasLimit;\r\n        this._storageLimit = _storageLimit;\r\n        this.opSize = opSize;\r\n        this.minimalFeePerStorageByteMutez = minimalFeePerStorageByteMutez;\r\n        this.baseFeeMutez = baseFeeMutez;\r\n    }\r\n    Object.defineProperty(Estimate.prototype, \"burnFeeMutez\", {\r\n        /**\r\n         * @description The number of Mutez that will be burned for the storage of the [operation](https://tezos.gitlab.io/user/glossary.html#operations). (Storage + Allocation fees)\r\n         */\r\n        get: function () {\r\n            return this.roundUp(Number(this.storageLimit) * Number(this.minimalFeePerStorageByteMutez));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Estimate.prototype, \"storageLimit\", {\r\n        /**\r\n         * @description  The limit on the amount of storage an [operation](https://tezos.gitlab.io/user/glossary.html#operations) can use.\r\n         */\r\n        get: function () {\r\n            var limit = Math.max(Number(this._storageLimit), 0);\r\n            return limit > 0 ? limit : 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Estimate.prototype, \"gasLimit\", {\r\n        /**\r\n         * @description The limit on the amount of [gas](https://tezos.gitlab.io/user/glossary.html#gas) a given operation can consume.\r\n         */\r\n        get: function () {\r\n            return this.roundUp(Number(this._milligasLimit) / 1000 + GAS_BUFFER);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Estimate.prototype, \"operationFeeMutez\", {\r\n        get: function () {\r\n            return ((Number(this._milligasLimit) / 1000 + GAS_BUFFER) * MINIMAL_FEE_PER_GAS_MUTEZ + Number(this.opSize) * MINIMAL_FEE_PER_BYTE_MUTEZ);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Estimate.prototype.roundUp = function (nanotez) {\r\n        return Math.ceil(Number(nanotez));\r\n    };\r\n    Object.defineProperty(Estimate.prototype, \"minimalFeeMutez\", {\r\n        /**\r\n         * @description Minimum fees for the [operation](https://tezos.gitlab.io/user/glossary.html#operations) according to [baker](https://tezos.gitlab.io/user/glossary.html#baker) defaults.\r\n         */\r\n        get: function () {\r\n            return this.roundUp(MINIMAL_FEE_MUTEZ + this.operationFeeMutez);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Estimate.prototype, \"suggestedFeeMutez\", {\r\n        /**\r\n         * @description The suggested fee for the operation which includes minimal fees and a small buffer.\r\n         */\r\n        get: function () {\r\n            return this.roundUp(this.operationFeeMutez + MINIMAL_FEE_MUTEZ * 2);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Estimate.prototype, \"usingBaseFeeMutez\", {\r\n        /**\r\n         * @description Fees according to your specified base fee will ensure that at least minimum fees are used.\r\n         */\r\n        get: function () {\r\n            return (Math.max(Number(this.baseFeeMutez), MINIMAL_FEE_MUTEZ) + this.roundUp(this.operationFeeMutez));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Estimate.prototype, \"totalCost\", {\r\n        /**\r\n         * @description The sum of `minimalFeeMutez` + `burnFeeMutez`.\r\n         */\r\n        get: function () {\r\n            return this.minimalFeeMutez + this.burnFeeMutez;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Estimate.prototype, \"consumedMilligas\", {\r\n        /**\r\n         * @description Since Delphinet, consumed gas is provided in milligas for more precision.\r\n         * This function returns an estimation of the gas that operation will consume in milligas.\r\n         */\r\n        get: function () {\r\n            return Number(this._milligasLimit);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Estimate.createEstimateInstanceFromProperties = function (estimateProperties) {\r\n        var milligasLimit = 0;\r\n        var storageLimit = 0;\r\n        var opSize = 0;\r\n        var minimalFeePerStorageByteMutez = 0;\r\n        var baseFeeMutez;\r\n        estimateProperties.forEach(function (estimate) {\r\n            milligasLimit += estimate.milligasLimit;\r\n            storageLimit += estimate.storageLimit;\r\n            opSize += estimate.opSize;\r\n            minimalFeePerStorageByteMutez = Math.max(estimate.minimalFeePerStorageByteMutez, minimalFeePerStorageByteMutez);\r\n            if (estimate.baseFeeMutez) {\r\n                baseFeeMutez = baseFeeMutez ? baseFeeMutez + estimate.baseFeeMutez : estimate.baseFeeMutez;\r\n            }\r\n        });\r\n        return new Estimate(milligasLimit, storageLimit, opSize, minimalFeePerStorageByteMutez, baseFeeMutez);\r\n    };\r\n    Estimate.createArrayEstimateInstancesFromProperties = function (estimateProperties) {\r\n        return estimateProperties.map(function (x) { return new Estimate(x.milligasLimit, x.storageLimit, x.opSize, x.minimalFeePerStorageByteMutez, x.baseFeeMutez); });\r\n    };\r\n    return Estimate;\r\n}());\n\nvar mergeLimits = function (userDefinedLimit, defaultLimits) {\r\n    return {\r\n        fee: typeof userDefinedLimit.fee === 'undefined' ? defaultLimits.fee : userDefinedLimit.fee,\r\n        gasLimit: typeof userDefinedLimit.gasLimit === 'undefined'\r\n            ? defaultLimits.gasLimit\r\n            : userDefinedLimit.gasLimit,\r\n        storageLimit: typeof userDefinedLimit.storageLimit === 'undefined'\r\n            ? defaultLimits.storageLimit\r\n            : userDefinedLimit.storageLimit,\r\n    };\r\n};\r\n// RPC requires a signature but does not verify it\r\nvar SIGNATURE_STUB = 'edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg';\r\nvar RPCEstimateProvider = /** @class */ (function (_super) {\r\n    __extends(RPCEstimateProvider, _super);\r\n    function RPCEstimateProvider() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.ALLOCATION_STORAGE = 257;\r\n        _this.ORIGINATION_STORAGE = 257;\r\n        _this.OP_SIZE_REVEAL = 128;\r\n        return _this;\r\n    }\r\n    // Maximum values defined by the protocol\r\n    RPCEstimateProvider.prototype.getAccountLimits = function (pkh, constants, numberOfOps) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var balance, hard_gas_limit_per_operation, hard_gas_limit_per_block, hard_storage_limit_per_operation, cost_per_byte;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.rpc.getBalance(pkh)];\r\n                    case 1:\r\n                        balance = _a.sent();\r\n                        hard_gas_limit_per_operation = constants.hard_gas_limit_per_operation, hard_gas_limit_per_block = constants.hard_gas_limit_per_block, hard_storage_limit_per_operation = constants.hard_storage_limit_per_operation, cost_per_byte = constants.cost_per_byte;\r\n                        return [2 /*return*/, {\r\n                                fee: 0,\r\n                                gasLimit: numberOfOps\r\n                                    ? Math.floor(this.ajustGasForBatchOperation(hard_gas_limit_per_block, hard_gas_limit_per_operation, numberOfOps).toNumber())\r\n                                    : hard_gas_limit_per_operation.toNumber(),\r\n                                storageLimit: Math.floor(BigNumber.min(balance.dividedBy(cost_per_byte), hard_storage_limit_per_operation).toNumber()),\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // Fix for Granada where the total gasLimit of a batch can not exceed the hard_gas_limit_per_block.\r\n    // If the total gasLimit of the batch is higher than the hard_gas_limit_per_block,\r\n    // the gasLimit is calculated by dividing the hard_gas_limit_per_block by the number of operation in the batch (numberOfOps).\r\n    // numberOfOps is incremented by 1 for safety in case a reveal operation is needed\r\n    RPCEstimateProvider.prototype.ajustGasForBatchOperation = function (gasLimitBlock, gaslimitOp, numberOfOps) {\r\n        return BigNumber.min(gaslimitOp, gasLimitBlock.div(numberOfOps + 1));\r\n    };\r\n    RPCEstimateProvider.prototype.getEstimationPropertiesFromOperationContent = function (content, size, costPerByte) {\r\n        var _this = this;\r\n        var operationResults = flattenOperationResult({ contents: [content] });\r\n        var totalGas = 0;\r\n        var totalMilligas = 0;\r\n        var totalStorage = 0;\r\n        operationResults.forEach(function (result) {\r\n            totalStorage +=\r\n                'originated_contracts' in result && typeof result.originated_contracts !== 'undefined'\r\n                    ? result.originated_contracts.length * _this.ORIGINATION_STORAGE\r\n                    : 0;\r\n            totalStorage += 'allocated_destination_contract' in result ? _this.ALLOCATION_STORAGE : 0;\r\n            totalGas += Number(result.consumed_gas) || 0;\r\n            totalMilligas += Number(result.consumed_milligas) || 0;\r\n            totalStorage +=\r\n                'paid_storage_size_diff' in result ? Number(result.paid_storage_size_diff) || 0 : 0;\r\n        });\r\n        if (totalGas !== 0 && totalMilligas === 0) {\r\n            // This will convert gas to milligas for Carthagenet where result does not contain consumed gas in milligas.\r\n            totalMilligas = totalGas * 1000;\r\n        }\r\n        if (isOpWithFee(content)) {\r\n            return {\r\n                milligasLimit: totalMilligas || 0,\r\n                storageLimit: Number(totalStorage || 0),\r\n                opSize: size,\r\n                minimalFeePerStorageByteMutez: costPerByte.toNumber(),\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                milligasLimit: 0,\r\n                storageLimit: 0,\r\n                opSize: size,\r\n                minimalFeePerStorageByteMutez: costPerByte.toNumber(),\r\n                baseFeeMutez: 0,\r\n            };\r\n        }\r\n    };\r\n    RPCEstimateProvider.prototype.prepareEstimate = function (params, constants) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var prepared, _a, opbytes, _b, branch, contents, operation, opResponse, cost_per_byte, errors, numberOfOps;\r\n            var _c;\r\n            var _this = this;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0: return [4 /*yield*/, this.prepareOperation(params)];\r\n                    case 1:\r\n                        prepared = _d.sent();\r\n                        return [4 /*yield*/, this.forge(prepared)];\r\n                    case 2:\r\n                        _a = _d.sent(), opbytes = _a.opbytes, _b = _a.opOb, branch = _b.branch, contents = _b.contents;\r\n                        _c = {\r\n                            operation: { branch: branch, contents: contents, signature: SIGNATURE_STUB }\r\n                        };\r\n                        return [4 /*yield*/, this.rpc.getChainId()];\r\n                    case 3:\r\n                        operation = (_c.chain_id = _d.sent(),\r\n                            _c);\r\n                        return [4 /*yield*/, this.simulate(operation)];\r\n                    case 4:\r\n                        opResponse = (_d.sent()).opResponse;\r\n                        cost_per_byte = constants.cost_per_byte;\r\n                        errors = __spreadArray(__spreadArray([], __read(flattenErrors(opResponse, 'backtracked'))), __read(flattenErrors(opResponse)));\r\n                        // Fail early in case of errors\r\n                        if (errors.length) {\r\n                            throw new TezosOperationError(errors);\r\n                        }\r\n                        numberOfOps = 1;\r\n                        if (Array.isArray(params.operation) && params.operation.length > 1) {\r\n                            numberOfOps =\r\n                                opResponse.contents[0].kind === 'reveal'\r\n                                    ? params.operation.length - 1\r\n                                    : params.operation.length;\r\n                        }\r\n                        return [2 /*return*/, opResponse.contents.map(function (x) {\r\n                                return _this.getEstimationPropertiesFromOperationContent(x, \r\n                                // TODO: Calculate a specific opSize for each operation.\r\n                                x.kind === 'reveal' ? _this.OP_SIZE_REVEAL / 2 : opbytes.length / 2 / numberOfOps, cost_per_byte);\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Estimate gasLimit, storageLimit and fees for an origination operation\r\n     *\r\n     * @returns An estimation of gasLimit, storageLimit and fees for the operation\r\n     *\r\n     * @param OriginationOperation Originate operation parameter\r\n     */\r\n    RPCEstimateProvider.prototype.originate = function (_a) {\r\n        var fee = _a.fee, storageLimit = _a.storageLimit, gasLimit = _a.gasLimit, rest = __rest(_a, [\"fee\", \"storageLimit\", \"gasLimit\"]);\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var pkh, protocolConstants, DEFAULT_PARAMS, op, _b, isRevealNeeded, ops, _c, estimateProperties;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        pkh = _d.sent();\r\n                        return [4 /*yield*/, this.rpc.getConstants()];\r\n                    case 2:\r\n                        protocolConstants = _d.sent();\r\n                        return [4 /*yield*/, this.getAccountLimits(pkh, protocolConstants)];\r\n                    case 3:\r\n                        DEFAULT_PARAMS = _d.sent();\r\n                        _b = createOriginationOperation;\r\n                        return [4 /*yield*/, this.context.parser.prepareCodeOrigination(__assign(__assign({}, rest), mergeLimits({ fee: fee, storageLimit: storageLimit, gasLimit: gasLimit }, DEFAULT_PARAMS)))];\r\n                    case 4: return [4 /*yield*/, _b.apply(void 0, [_d.sent()])];\r\n                    case 5:\r\n                        op = _d.sent();\r\n                        return [4 /*yield*/, this.isRevealOpNeeded([op], pkh)];\r\n                    case 6:\r\n                        isRevealNeeded = _d.sent();\r\n                        if (!isRevealNeeded) return [3 /*break*/, 8];\r\n                        return [4 /*yield*/, this.addRevealOp([op], pkh)];\r\n                    case 7:\r\n                        _c = _d.sent();\r\n                        return [3 /*break*/, 9];\r\n                    case 8:\r\n                        _c = op;\r\n                        _d.label = 9;\r\n                    case 9:\r\n                        ops = _c;\r\n                        return [4 /*yield*/, this.prepareEstimate({ operation: ops, source: pkh }, protocolConstants)];\r\n                    case 10:\r\n                        estimateProperties = _d.sent();\r\n                        if (isRevealNeeded) {\r\n                            estimateProperties.shift();\r\n                        }\r\n                        return [2 /*return*/, Estimate.createEstimateInstanceFromProperties(estimateProperties)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Estimate gasLimit, storageLimit and fees for an transfer operation\r\n     *\r\n     * @returns An estimation of gasLimit, storageLimit and fees for the operation\r\n     *\r\n     * @param TransferOperation Originate operation parameter\r\n     */\r\n    RPCEstimateProvider.prototype.transfer = function (_a) {\r\n        var fee = _a.fee, storageLimit = _a.storageLimit, gasLimit = _a.gasLimit, rest = __rest(_a, [\"fee\", \"storageLimit\", \"gasLimit\"]);\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var pkh, protocolConstants, DEFAULT_PARAMS, op, isRevealNeeded, ops, _b, estimateProperties;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        pkh = _c.sent();\r\n                        return [4 /*yield*/, this.rpc.getConstants()];\r\n                    case 2:\r\n                        protocolConstants = _c.sent();\r\n                        return [4 /*yield*/, this.getAccountLimits(pkh, protocolConstants)];\r\n                    case 3:\r\n                        DEFAULT_PARAMS = _c.sent();\r\n                        return [4 /*yield*/, createTransferOperation(__assign(__assign({}, rest), mergeLimits({ fee: fee, storageLimit: storageLimit, gasLimit: gasLimit }, DEFAULT_PARAMS)))];\r\n                    case 4:\r\n                        op = _c.sent();\r\n                        return [4 /*yield*/, this.isRevealOpNeeded([op], pkh)];\r\n                    case 5:\r\n                        isRevealNeeded = _c.sent();\r\n                        if (!isRevealNeeded) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, this.addRevealOp([op], pkh)];\r\n                    case 6:\r\n                        _b = _c.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        _b = op;\r\n                        _c.label = 8;\r\n                    case 8:\r\n                        ops = _b;\r\n                        return [4 /*yield*/, this.prepareEstimate({ operation: ops, source: pkh }, protocolConstants)];\r\n                    case 9:\r\n                        estimateProperties = _c.sent();\r\n                        if (isRevealNeeded) {\r\n                            estimateProperties.shift();\r\n                        }\r\n                        return [2 /*return*/, Estimate.createEstimateInstanceFromProperties(estimateProperties)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Estimate gasLimit, storageLimit and fees for a delegate operation\r\n     *\r\n     * @returns An estimation of gasLimit, storageLimit and fees for the operation\r\n     *\r\n     * @param Estimate\r\n     */\r\n    RPCEstimateProvider.prototype.setDelegate = function (_a) {\r\n        var fee = _a.fee, gasLimit = _a.gasLimit, storageLimit = _a.storageLimit, rest = __rest(_a, [\"fee\", \"gasLimit\", \"storageLimit\"]);\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var pkh, sourceOrDefault, protocolConstants, DEFAULT_PARAMS, op, isRevealNeeded, ops, _b, estimateProperties;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        pkh = _c.sent();\r\n                        sourceOrDefault = rest.source || pkh;\r\n                        return [4 /*yield*/, this.rpc.getConstants()];\r\n                    case 2:\r\n                        protocolConstants = _c.sent();\r\n                        return [4 /*yield*/, this.getAccountLimits(sourceOrDefault, protocolConstants)];\r\n                    case 3:\r\n                        DEFAULT_PARAMS = _c.sent();\r\n                        return [4 /*yield*/, createSetDelegateOperation(__assign(__assign({}, rest), mergeLimits({ fee: fee, storageLimit: storageLimit, gasLimit: gasLimit }, DEFAULT_PARAMS)))];\r\n                    case 4:\r\n                        op = _c.sent();\r\n                        return [4 /*yield*/, this.isRevealOpNeeded([op], pkh)];\r\n                    case 5:\r\n                        isRevealNeeded = _c.sent();\r\n                        if (!isRevealNeeded) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, this.addRevealOp([op], pkh)];\r\n                    case 6:\r\n                        _b = _c.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        _b = op;\r\n                        _c.label = 8;\r\n                    case 8:\r\n                        ops = _b;\r\n                        return [4 /*yield*/, this.prepareEstimate({ operation: ops, source: pkh }, protocolConstants)];\r\n                    case 9:\r\n                        estimateProperties = _c.sent();\r\n                        if (isRevealNeeded) {\r\n                            estimateProperties.shift();\r\n                        }\r\n                        return [2 /*return*/, Estimate.createEstimateInstanceFromProperties(estimateProperties)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Estimate gasLimit, storageLimit and fees for a each operation in the batch\r\n     *\r\n     * @returns An array of Estimate objects. If a reveal operation is needed, the first element of the array is the Estimate for the reveal operation.\r\n     */\r\n    RPCEstimateProvider.prototype.batch = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var pkh, operations, protocolConstants, DEFAULT_PARAMS, params_1, params_1_1, param, _a, _b, _c, _d, _e, _f, _g, _h, e_1_1, isRevealNeeded, _j, estimateProperties;\r\n            var e_1, _k;\r\n            return __generator(this, function (_l) {\r\n                switch (_l.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        pkh = _l.sent();\r\n                        operations = [];\r\n                        return [4 /*yield*/, this.rpc.getConstants()];\r\n                    case 2:\r\n                        protocolConstants = _l.sent();\r\n                        return [4 /*yield*/, this.getAccountLimits(pkh, protocolConstants, params.length)];\r\n                    case 3:\r\n                        DEFAULT_PARAMS = _l.sent();\r\n                        _l.label = 4;\r\n                    case 4:\r\n                        _l.trys.push([4, 17, 18, 19]);\r\n                        params_1 = __values(params), params_1_1 = params_1.next();\r\n                        _l.label = 5;\r\n                    case 5:\r\n                        if (!!params_1_1.done) return [3 /*break*/, 16];\r\n                        param = params_1_1.value;\r\n                        _a = param.kind;\r\n                        switch (_a) {\r\n                            case OpKind.TRANSACTION: return [3 /*break*/, 6];\r\n                            case OpKind.ORIGINATION: return [3 /*break*/, 8];\r\n                            case OpKind.DELEGATION: return [3 /*break*/, 11];\r\n                            case OpKind.ACTIVATION: return [3 /*break*/, 13];\r\n                        }\r\n                        return [3 /*break*/, 14];\r\n                    case 6:\r\n                        _c = (_b = operations).push;\r\n                        return [4 /*yield*/, createTransferOperation(__assign(__assign({}, param), mergeLimits(param, DEFAULT_PARAMS)))];\r\n                    case 7:\r\n                        _c.apply(_b, [_l.sent()]);\r\n                        return [3 /*break*/, 15];\r\n                    case 8:\r\n                        _e = (_d = operations).push;\r\n                        _f = createOriginationOperation;\r\n                        return [4 /*yield*/, this.context.parser.prepareCodeOrigination(__assign(__assign({}, param), mergeLimits(param, DEFAULT_PARAMS)))];\r\n                    case 9: return [4 /*yield*/, _f.apply(void 0, [_l.sent()])];\r\n                    case 10:\r\n                        _e.apply(_d, [_l.sent()]);\r\n                        return [3 /*break*/, 15];\r\n                    case 11:\r\n                        _h = (_g = operations).push;\r\n                        return [4 /*yield*/, createSetDelegateOperation(__assign(__assign({}, param), mergeLimits(param, DEFAULT_PARAMS)))];\r\n                    case 12:\r\n                        _h.apply(_g, [_l.sent()]);\r\n                        return [3 /*break*/, 15];\r\n                    case 13:\r\n                        operations.push(__assign(__assign({}, param), DEFAULT_PARAMS));\r\n                        return [3 /*break*/, 15];\r\n                    case 14: throw new Error(\"Unsupported operation kind: \" + param.kind);\r\n                    case 15:\r\n                        params_1_1 = params_1.next();\r\n                        return [3 /*break*/, 5];\r\n                    case 16: return [3 /*break*/, 19];\r\n                    case 17:\r\n                        e_1_1 = _l.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 19];\r\n                    case 18:\r\n                        try {\r\n                            if (params_1_1 && !params_1_1.done && (_k = params_1.return)) _k.call(params_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 19: return [4 /*yield*/, this.isRevealOpNeeded(operations, pkh)];\r\n                    case 20:\r\n                        isRevealNeeded = _l.sent();\r\n                        if (!isRevealNeeded) return [3 /*break*/, 22];\r\n                        return [4 /*yield*/, this.addRevealOp(operations, pkh)];\r\n                    case 21:\r\n                        _j = _l.sent();\r\n                        return [3 /*break*/, 23];\r\n                    case 22:\r\n                        _j = operations;\r\n                        _l.label = 23;\r\n                    case 23:\r\n                        operations = _j;\r\n                        return [4 /*yield*/, this.prepareEstimate({ operation: operations, source: pkh }, protocolConstants)];\r\n                    case 24:\r\n                        estimateProperties = _l.sent();\r\n                        return [2 /*return*/, Estimate.createArrayEstimateInstancesFromProperties(estimateProperties)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Estimate gasLimit, storageLimit and fees for a delegate operation\r\n     *\r\n     * @returns An estimation of gasLimit, storageLimit and fees for the operation\r\n     *\r\n     * @param Estimate\r\n     */\r\n    RPCEstimateProvider.prototype.registerDelegate = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var pkh, protocolConstants, DEFAULT_PARAMS, op, isRevealNeeded, ops, _a, estimateProperties;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        pkh = _b.sent();\r\n                        return [4 /*yield*/, this.rpc.getConstants()];\r\n                    case 2:\r\n                        protocolConstants = _b.sent();\r\n                        return [4 /*yield*/, this.getAccountLimits(pkh, protocolConstants)];\r\n                    case 3:\r\n                        DEFAULT_PARAMS = _b.sent();\r\n                        return [4 /*yield*/, createRegisterDelegateOperation(__assign(__assign({}, params), DEFAULT_PARAMS), pkh)];\r\n                    case 4:\r\n                        op = _b.sent();\r\n                        return [4 /*yield*/, this.isRevealOpNeeded([op], pkh)];\r\n                    case 5:\r\n                        isRevealNeeded = _b.sent();\r\n                        if (!isRevealNeeded) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, this.addRevealOp([op], pkh)];\r\n                    case 6:\r\n                        _a = _b.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        _a = op;\r\n                        _b.label = 8;\r\n                    case 8:\r\n                        ops = _a;\r\n                        return [4 /*yield*/, this.prepareEstimate({ operation: ops, source: pkh }, protocolConstants)];\r\n                    case 9:\r\n                        estimateProperties = _b.sent();\r\n                        if (isRevealNeeded) {\r\n                            estimateProperties.shift();\r\n                        }\r\n                        return [2 /*return*/, Estimate.createEstimateInstanceFromProperties(estimateProperties)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Estimate gasLimit, storageLimit and fees to reveal the current account\r\n     *\r\n     * @returns An estimation of gasLimit, storageLimit and fees for the operation or undefined if the account is already revealed\r\n     *\r\n     * @param Estimate\r\n     */\r\n    RPCEstimateProvider.prototype.reveal = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var pkh, protocolConstants, DEFAULT_PARAMS, op, _a, _b, estimateProperties;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        pkh = _c.sent();\r\n                        return [4 /*yield*/, this.isAccountRevealRequired(pkh)];\r\n                    case 2:\r\n                        if (!_c.sent()) return [3 /*break*/, 8];\r\n                        return [4 /*yield*/, this.rpc.getConstants()];\r\n                    case 3:\r\n                        protocolConstants = _c.sent();\r\n                        return [4 /*yield*/, this.getAccountLimits(pkh, protocolConstants)];\r\n                    case 4:\r\n                        DEFAULT_PARAMS = _c.sent();\r\n                        _a = createRevealOperation;\r\n                        _b = [__assign(__assign({}, params), DEFAULT_PARAMS), pkh];\r\n                        return [4 /*yield*/, this.signer.publicKey()];\r\n                    case 5: return [4 /*yield*/, _a.apply(void 0, _b.concat([_c.sent()]))];\r\n                    case 6:\r\n                        op = _c.sent();\r\n                        return [4 /*yield*/, this.prepareEstimate({ operation: op, source: pkh }, protocolConstants)];\r\n                    case 7:\r\n                        estimateProperties = _c.sent();\r\n                        return [2 /*return*/, Estimate.createEstimateInstanceFromProperties(estimateProperties)];\r\n                    case 8: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RPCEstimateProvider.prototype.addRevealOp = function (op, pkh) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b, _c, _d;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        _b = (_a = op).unshift;\r\n                        _c = createRevealOperation;\r\n                        _d = [__assign({\r\n                                fee: DEFAULT_FEE.REVEAL,\r\n                                gasLimit: DEFAULT_GAS_LIMIT.REVEAL,\r\n                                storageLimit: DEFAULT_STORAGE_LIMIT.REVEAL,\r\n                            }), pkh];\r\n                        return [4 /*yield*/, this.signer.publicKey()];\r\n                    case 1: return [4 /*yield*/, _c.apply(void 0, _d.concat([_e.sent()]))];\r\n                    case 2:\r\n                        _b.apply(_a, [_e.sent()]);\r\n                        return [2 /*return*/, op];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RPCEstimateProvider;\r\n}(OperationEmitter));\n\n/**\r\n * @description Delegation operation provide utility function to fetch newly issued delegation\r\n *\r\n * @warn Currently support only one delegation per operation\r\n */\r\nvar DelegateOperation = /** @class */ (function (_super) {\r\n    __extends(DelegateOperation, _super);\r\n    function DelegateOperation(hash, params, source, raw, results, context) {\r\n        var _this = _super.call(this, hash, raw, results, context) || this;\r\n        _this.params = params;\r\n        _this.source = source;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(DelegateOperation.prototype, \"operationResults\", {\r\n        get: function () {\r\n            var delegationOp = Array.isArray(this.results) &&\r\n                this.results.find(function (op) { return op.kind === 'delegation'; });\r\n            var result = delegationOp && delegationOp.metadata && delegationOp.metadata.operation_result;\r\n            return result ? result : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DelegateOperation.prototype, \"status\", {\r\n        get: function () {\r\n            var operationResults = this.operationResults;\r\n            if (operationResults) {\r\n                return operationResults.status;\r\n            }\r\n            else {\r\n                return 'unknown';\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DelegateOperation.prototype, \"delegate\", {\r\n        get: function () {\r\n            return this.delegate;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DelegateOperation.prototype, \"isRegisterOperation\", {\r\n        get: function () {\r\n            return this.delegate === this.source;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DelegateOperation.prototype, \"fee\", {\r\n        get: function () {\r\n            return this.params.fee;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DelegateOperation.prototype, \"gasLimit\", {\r\n        get: function () {\r\n            return this.params.gas_limit;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DelegateOperation.prototype, \"storageLimit\", {\r\n        get: function () {\r\n            return this.params.storage_limit;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DelegateOperation.prototype, \"consumedGas\", {\r\n        get: function () {\r\n            var consumedGas = this.operationResults && this.operationResults.consumed_gas;\r\n            return consumedGas ? consumedGas : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DelegateOperation.prototype, \"errors\", {\r\n        get: function () {\r\n            return this.operationResults && this.operationResults.errors;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return DelegateOperation;\r\n}(Operation));\n\n/**\r\n * @description Origination operation provide utility function to fetch newly originated contract\r\n *\r\n * @warn Currently support only one origination per operation\r\n */\r\nvar OriginationOperation = /** @class */ (function (_super) {\r\n    __extends(OriginationOperation, _super);\r\n    function OriginationOperation(hash, params, raw, results, context, contractProvider) {\r\n        var _this = _super.call(this, hash, raw, results, context) || this;\r\n        _this.params = params;\r\n        _this.contractProvider = contractProvider;\r\n        var originatedContracts = _this.operationResults && _this.operationResults.originated_contracts;\r\n        if (Array.isArray(originatedContracts)) {\r\n            _this.contractAddress = originatedContracts[0];\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(OriginationOperation.prototype, \"status\", {\r\n        get: function () {\r\n            var operationResults = this.operationResults;\r\n            if (operationResults) {\r\n                return operationResults.status;\r\n            }\r\n            else {\r\n                return 'unknown';\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OriginationOperation.prototype, \"operationResults\", {\r\n        get: function () {\r\n            var originationOp = Array.isArray(this.results) &&\r\n                this.results.find(function (op) { return op.kind === 'origination'; });\r\n            var result = originationOp &&\r\n                hasMetadataWithResult(originationOp) &&\r\n                originationOp.metadata.operation_result;\r\n            return result ? result : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OriginationOperation.prototype, \"fee\", {\r\n        get: function () {\r\n            return this.params.fee;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OriginationOperation.prototype, \"gasLimit\", {\r\n        get: function () {\r\n            return this.params.gas_limit;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OriginationOperation.prototype, \"storageLimit\", {\r\n        get: function () {\r\n            return this.params.storage_limit;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OriginationOperation.prototype, \"consumedGas\", {\r\n        get: function () {\r\n            var consumedGas = this.operationResults && this.operationResults.consumed_gas;\r\n            return consumedGas ? consumedGas : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OriginationOperation.prototype, \"storageDiff\", {\r\n        get: function () {\r\n            var storageDiff = this.operationResults && this.operationResults.paid_storage_size_diff;\r\n            return storageDiff ? storageDiff : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OriginationOperation.prototype, \"storageSize\", {\r\n        get: function () {\r\n            var storageSize = this.operationResults && this.operationResults.storage_size;\r\n            return storageSize ? storageSize : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OriginationOperation.prototype, \"errors\", {\r\n        get: function () {\r\n            return this.operationResults && this.operationResults.errors;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @description Provide the contract abstract of the newly originated contract\r\n     */\r\n    OriginationOperation.prototype.contract = function (confirmations, interval, timeout) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.contractAddress) {\r\n                            throw new Error('No contract was originated in this operation');\r\n                        }\r\n                        return [4 /*yield*/, this.confirmation(confirmations, interval, timeout)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, this.contractProvider.at(this.contractAddress)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OriginationOperation;\r\n}(Operation));\n\n/**\r\n * @description Reveal operation provides utility functions to fetch a newly issued revelation\r\n */\r\nvar RevealOperation = /** @class */ (function (_super) {\r\n    __extends(RevealOperation, _super);\r\n    function RevealOperation(hash, params, source, raw, results, context) {\r\n        var _this = _super.call(this, hash, raw, results, context) || this;\r\n        _this.params = params;\r\n        _this.source = source;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(RevealOperation.prototype, \"operationResults\", {\r\n        get: function () {\r\n            var revealOp = Array.isArray(this.results) &&\r\n                this.results.find(function (op) { return op.kind === 'reveal'; });\r\n            return revealOp ? [revealOp] : [];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RevealOperation.prototype, \"status\", {\r\n        get: function () {\r\n            var operationResults = this.operationResults;\r\n            var txResult = operationResults[0];\r\n            if (txResult) {\r\n                return txResult.metadata.operation_result.status;\r\n            }\r\n            else {\r\n                return 'unknown';\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RevealOperation.prototype, \"fee\", {\r\n        get: function () {\r\n            return this.params.fee;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RevealOperation.prototype, \"gasLimit\", {\r\n        get: function () {\r\n            return this.params.gas_limit;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RevealOperation.prototype, \"storageLimit\", {\r\n        get: function () {\r\n            return this.params.storage_limit;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RevealOperation.prototype, \"publicKey\", {\r\n        get: function () {\r\n            return this.params.public_key;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    RevealOperation.prototype.sumProp = function (arr, prop) {\r\n        return arr.reduce(function (prev, current) {\r\n            return prop in current ? Number(current[prop]) + prev : prev;\r\n        }, 0);\r\n    };\r\n    Object.defineProperty(RevealOperation.prototype, \"consumedGas\", {\r\n        get: function () {\r\n            return String(this.sumProp(flattenOperationResult({ contents: this.operationResults }), 'consumed_gas'));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RevealOperation.prototype, \"storageDiff\", {\r\n        get: function () {\r\n            return String(this.sumProp(flattenOperationResult({ contents: this.operationResults }), 'paid_storage_size_diff'));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RevealOperation.prototype, \"storageSize\", {\r\n        get: function () {\r\n            return String(this.sumProp(flattenOperationResult({ contents: this.operationResults }), 'storage_size'));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RevealOperation.prototype, \"errors\", {\r\n        get: function () {\r\n            return flattenErrors({ contents: this.operationResults });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return RevealOperation;\r\n}(Operation));\n\n/**\r\n * @description Transaction operation provides utility functions to fetch a newly issued transaction\r\n *\r\n * @warn Currently supports one transaction per operation\r\n */\r\nvar TransactionOperation = /** @class */ (function (_super) {\r\n    __extends(TransactionOperation, _super);\r\n    function TransactionOperation(hash, params, source, raw, results, context) {\r\n        var _this = _super.call(this, hash, raw, results, context) || this;\r\n        _this.params = params;\r\n        _this.source = source;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(TransactionOperation.prototype, \"operationResults\", {\r\n        get: function () {\r\n            var transactionOp = Array.isArray(this.results) &&\r\n                this.results.find(function (op) { return op.kind === 'transaction'; });\r\n            return transactionOp ? [transactionOp] : [];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"status\", {\r\n        get: function () {\r\n            var operationResults = this.operationResults;\r\n            var txResult = operationResults[0];\r\n            if (txResult) {\r\n                return txResult.metadata.operation_result.status;\r\n            }\r\n            else {\r\n                return 'unknown';\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"amount\", {\r\n        get: function () {\r\n            return new BigNumber(this.params.amount);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"destination\", {\r\n        get: function () {\r\n            return this.params.destination;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"fee\", {\r\n        get: function () {\r\n            return this.params.fee;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"gasLimit\", {\r\n        get: function () {\r\n            return this.params.gas_limit;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"storageLimit\", {\r\n        get: function () {\r\n            return this.params.storage_limit;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TransactionOperation.prototype.sumProp = function (arr, prop) {\r\n        return arr.reduce(function (prev, current) {\r\n            return prop in current ? Number(current[prop]) + prev : prev;\r\n        }, 0);\r\n    };\r\n    Object.defineProperty(TransactionOperation.prototype, \"consumedGas\", {\r\n        get: function () {\r\n            return String(this.sumProp(flattenOperationResult({ contents: this.operationResults }), 'consumed_gas'));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"storageDiff\", {\r\n        get: function () {\r\n            return String(this.sumProp(flattenOperationResult({ contents: this.operationResults }), 'paid_storage_size_diff'));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"storageSize\", {\r\n        get: function () {\r\n            return String(this.sumProp(flattenOperationResult({ contents: this.operationResults }), 'storage_size'));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TransactionOperation.prototype, \"errors\", {\r\n        get: function () {\r\n            return flattenErrors({ contents: this.operationResults });\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return TransactionOperation;\r\n}(Operation));\n\nvar setDelegate = function (key) {\r\n    return [\r\n        { prim: 'DROP' },\r\n        { prim: 'NIL', args: [{ prim: 'operation' }] },\r\n        {\r\n            prim: 'PUSH',\r\n            args: [{ prim: 'key_hash' }, { string: key }],\r\n        },\r\n        { prim: 'SOME' },\r\n        { prim: 'SET_DELEGATE' },\r\n        { prim: 'CONS' },\r\n    ];\r\n};\r\nvar transferImplicit = function (key, mutez) {\r\n    return [\r\n        { prim: 'DROP' },\r\n        { prim: 'NIL', args: [{ prim: 'operation' }] },\r\n        {\r\n            prim: 'PUSH',\r\n            args: [{ prim: 'key_hash' }, { string: key }],\r\n        },\r\n        { prim: 'IMPLICIT_ACCOUNT' },\r\n        {\r\n            prim: 'PUSH',\r\n            args: [{ prim: 'mutez' }, { int: \"\" + mutez }],\r\n        },\r\n        { prim: 'UNIT' },\r\n        { prim: 'TRANSFER_TOKENS' },\r\n        { prim: 'CONS' },\r\n    ];\r\n};\r\nvar removeDelegate = function () {\r\n    return [\r\n        { prim: 'DROP' },\r\n        { prim: 'NIL', args: [{ prim: 'operation' }] },\r\n        { prim: 'NONE', args: [{ prim: 'key_hash' }] },\r\n        { prim: 'SET_DELEGATE' },\r\n        { prim: 'CONS' },\r\n    ];\r\n};\r\nvar transferToContract = function (key, amount) {\r\n    return [\r\n        { prim: 'DROP' },\r\n        { prim: 'NIL', args: [{ prim: 'operation' }] },\r\n        {\r\n            prim: 'PUSH',\r\n            args: [{ prim: 'address' }, { string: key }],\r\n        },\r\n        { prim: 'CONTRACT', args: [{ prim: 'unit' }] },\r\n        [\r\n            {\r\n                prim: 'IF_NONE',\r\n                args: [[[{ prim: 'UNIT' }, { prim: 'FAILWITH' }]], []],\r\n            },\r\n        ],\r\n        {\r\n            prim: 'PUSH',\r\n            args: [{ prim: 'mutez' }, { int: \"\" + amount }],\r\n        },\r\n        { prim: 'UNIT' },\r\n        { prim: 'TRANSFER_TOKENS' },\r\n        { prim: 'CONS' },\r\n    ];\r\n};\r\nvar MANAGER_LAMBDA = {\r\n    setDelegate: setDelegate,\r\n    removeDelegate: removeDelegate,\r\n    transferImplicit: transferImplicit,\r\n    transferToContract: transferToContract,\r\n};\n\nvar code = [\r\n    {\r\n        prim: 'parameter',\r\n        args: [\r\n            {\r\n                prim: 'lambda',\r\n                args: [\r\n                    { prim: 'unit' },\r\n                    {\r\n                        prim: 'pair',\r\n                        args: [{ prim: 'list', args: [{ prim: 'operation' }] }, { prim: 'unit' }],\r\n                    },\r\n                ],\r\n            },\r\n        ],\r\n    },\r\n    { prim: 'storage', args: [{ prim: 'unit' }] },\r\n    { prim: 'code', args: [[{ prim: 'CAR' }, { prim: 'UNIT' }, { prim: 'EXEC' }]] },\r\n];\r\nvar storage = 'Unit';\r\nvar VIEW_LAMBDA = {\r\n    code: code,\r\n    storage: storage\r\n};\n\nfunction compose(functioncomposer1, functioncomposer2) {\r\n    return function (contractAbstraction, context) {\r\n        return functioncomposer2(functioncomposer1(contractAbstraction, context), context);\r\n    };\r\n}\n\n/**\r\n * @description Utility class to send smart contract operation\r\n * The format for the arguments is the flattened representation\r\n */\r\nvar ContractMethod = /** @class */ (function () {\r\n    function ContractMethod(provider, address, parameterSchema, name, args, isMultipleEntrypoint, isAnonymous) {\r\n        if (isMultipleEntrypoint === void 0) { isMultipleEntrypoint = true; }\r\n        if (isAnonymous === void 0) { isAnonymous = false; }\r\n        this.provider = provider;\r\n        this.address = address;\r\n        this.parameterSchema = parameterSchema;\r\n        this.name = name;\r\n        this.args = args;\r\n        this.isMultipleEntrypoint = isMultipleEntrypoint;\r\n        this.isAnonymous = isAnonymous;\r\n    }\r\n    ContractMethod.prototype.validateArgs = function (args, schema, name) {\r\n        var sigs = schema.ExtractSignatures();\r\n        if (!sigs.find(function (x) { return x.length === args.length; })) {\r\n            throw new InvalidParameterError(name, sigs, args);\r\n        }\r\n    };\r\n    Object.defineProperty(ContractMethod.prototype, \"schema\", {\r\n        /**\r\n         * @description Get the schema of the smart contract method\r\n         */\r\n        get: function () {\r\n            return this.isAnonymous\r\n                ? this.parameterSchema.ExtractSchema()[this.name]\r\n                : this.parameterSchema.ExtractSchema();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @description Get the signature of the smart contract method\r\n     */\r\n    ContractMethod.prototype.getSignature = function () {\r\n        var _this = this;\r\n        if (this.isAnonymous) {\r\n            var sig = this.parameterSchema.ExtractSignatures().find(function (x) { return x[0] === _this.name; });\r\n            if (sig) {\r\n                sig.shift();\r\n                return sig;\r\n            }\r\n        }\r\n        else {\r\n            var sig = this.parameterSchema.ExtractSignatures();\r\n            return (sig.length == 1) ? sig[0] : sig;\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @description Send the smart contract operation\r\n     *\r\n     * @param Options generic operation parameter\r\n     */\r\n    ContractMethod.prototype.send = function (params) {\r\n        if (params === void 0) { params = {}; }\r\n        if (this.provider instanceof Wallet) {\r\n            return this.provider.transfer(this.toTransferParams(params)).send();\r\n        }\r\n        else {\r\n            return this.provider.transfer(this.toTransferParams(params));\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @description Create transfer params to be used with TezosToolkit.contract.transfer methods\r\n     *\r\n     * @param Options generic transfer operation parameters\r\n     */\r\n    ContractMethod.prototype.toTransferParams = function (_a) {\r\n        var _b, _c;\r\n        var _d = _a === void 0 ? {} : _a, fee = _d.fee, gasLimit = _d.gasLimit, storageLimit = _d.storageLimit, source = _d.source, _e = _d.amount, amount = _e === void 0 ? 0 : _e, _f = _d.mutez, mutez = _f === void 0 ? false : _f;\r\n        var fullTransferParams = {\r\n            to: this.address,\r\n            amount: amount,\r\n            fee: fee,\r\n            mutez: mutez,\r\n            source: source,\r\n            gasLimit: gasLimit,\r\n            storageLimit: storageLimit,\r\n            parameter: {\r\n                entrypoint: this.isMultipleEntrypoint ? this.name : DEFAULT_SMART_CONTRACT_METHOD_NAME,\r\n                value: this.isAnonymous\r\n                    ? (_b = this.parameterSchema).Encode.apply(_b, __spreadArray([this.name], __read(this.args))) : (_c = this.parameterSchema).Encode.apply(_c, __spreadArray([], __read(this.args))),\r\n            },\r\n        };\r\n        return fullTransferParams;\r\n    };\r\n    return ContractMethod;\r\n}());\n\nvar WalletOperationBatch = /** @class */ (function () {\r\n    function WalletOperationBatch(walletProvider, context) {\r\n        this.walletProvider = walletProvider;\r\n        this.context = context;\r\n        this.operations = [];\r\n    }\r\n    /**\r\n     *\r\n     * @description Add a transaction operation to the batch\r\n     *\r\n     * @param params Transfer operation parameter\r\n     */\r\n    WalletOperationBatch.prototype.withTransfer = function (params) {\r\n        this.operations.push(__assign({ kind: OpKind.TRANSACTION }, params));\r\n        return this;\r\n    };\r\n    /**\r\n     *\r\n     * @description Add a transaction operation to the batch\r\n     *\r\n     * @param params Transfer operation parameter\r\n     */\r\n    WalletOperationBatch.prototype.withContractCall = function (params) {\r\n        return this.withTransfer(params.toTransferParams());\r\n    };\r\n    /**\r\n     *\r\n     * @description Add a delegation operation to the batch\r\n     *\r\n     * @param params Delegation operation parameter\r\n     */\r\n    WalletOperationBatch.prototype.withDelegation = function (params) {\r\n        this.operations.push(__assign({ kind: OpKind.DELEGATION }, params));\r\n        return this;\r\n    };\r\n    /**\r\n     *\r\n     * @description Add an origination operation to the batch\r\n     *\r\n     * @param params Origination operation parameter\r\n     */\r\n    WalletOperationBatch.prototype.withOrigination = function (params) {\r\n        this.operations.push(__assign({ kind: OpKind.ORIGINATION }, params));\r\n        return this;\r\n    };\r\n    WalletOperationBatch.prototype.mapOperation = function (param) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (param.kind) {\r\n                    case OpKind.TRANSACTION:\r\n                        return [2 /*return*/, this.walletProvider.mapTransferParamsToWalletParams(function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                                return [2 /*return*/, param];\r\n                            }); }); })];\r\n                    case OpKind.ORIGINATION:\r\n                        return [2 /*return*/, this.walletProvider.mapOriginateParamsToWalletParams(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                return __generator(this, function (_a) {\r\n                                    return [2 /*return*/, this.context.parser.prepareCodeOrigination(__assign({}, param))];\r\n                                });\r\n                            }); })];\r\n                    case OpKind.DELEGATION:\r\n                        return [2 /*return*/, this.walletProvider.mapDelegateParamsToWalletParams(function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                                return [2 /*return*/, param];\r\n                            }); }); })];\r\n                    default:\r\n                        throw new Error(\"Unsupported operation kind: \" + param.kind);\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Add a group operation to the batch. Operation will be applied in the order they are in the params array\r\n     *\r\n     * @param params Operations parameter\r\n     */\r\n    WalletOperationBatch.prototype.with = function (params) {\r\n        var e_1, _a;\r\n        try {\r\n            for (var params_1 = __values(params), params_1_1 = params_1.next(); !params_1_1.done; params_1_1 = params_1.next()) {\r\n                var param = params_1_1.value;\r\n                switch (param.kind) {\r\n                    case OpKind.TRANSACTION:\r\n                        this.withTransfer(param);\r\n                        break;\r\n                    case OpKind.ORIGINATION:\r\n                        this.withOrigination(param);\r\n                        break;\r\n                    case OpKind.DELEGATION:\r\n                        this.withDelegation(param);\r\n                        break;\r\n                    default:\r\n                        throw new Error(\"Unsupported operation kind: \" + param.kind);\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (params_1_1 && !params_1_1.done && (_a = params_1.return)) _a.call(params_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     *\r\n     * @description Submit batch operation to wallet\r\n     *\r\n     */\r\n    WalletOperationBatch.prototype.send = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ops, _a, _b, op, _c, _d, e_2_1, opHash;\r\n            var e_2, _e;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        ops = [];\r\n                        _f.label = 1;\r\n                    case 1:\r\n                        _f.trys.push([1, 6, 7, 8]);\r\n                        _a = __values(this.operations), _b = _a.next();\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        if (!!_b.done) return [3 /*break*/, 5];\r\n                        op = _b.value;\r\n                        _d = (_c = ops).push;\r\n                        return [4 /*yield*/, this.mapOperation(op)];\r\n                    case 3:\r\n                        _d.apply(_c, [_f.sent()]);\r\n                        _f.label = 4;\r\n                    case 4:\r\n                        _b = _a.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_2_1 = _f.sent();\r\n                        e_2 = { error: e_2_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (_b && !_b.done && (_e = _a.return)) _e.call(_a);\r\n                        }\r\n                        finally { if (e_2) throw e_2.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 8: return [4 /*yield*/, this.walletProvider.sendOperations(ops)];\r\n                    case 9:\r\n                        opHash = _f.sent();\r\n                        return [2 /*return*/, this.context.operationFactory.createBatchOperation(opHash)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return WalletOperationBatch;\r\n}());\r\nvar Wallet = /** @class */ (function () {\r\n    function Wallet(context) {\r\n        this.context = context;\r\n        this.walletCommand = function (send) {\r\n            return {\r\n                send: send,\r\n            };\r\n        };\r\n    }\r\n    Object.defineProperty(Wallet.prototype, \"walletProvider\", {\r\n        get: function () {\r\n            return this.context.walletProvider;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @description Retrieve the PKH of the account that is currently in use by the wallet\r\n     *\r\n     * @param option Option to use while fetching the PKH.\r\n     * If forceRefetch is specified the wallet provider implementation will refetch the PKH from the wallet\r\n     */\r\n    Wallet.prototype.pkh = function (_a) {\r\n        var _b = _a === void 0 ? {} : _a, forceRefetch = _b.forceRefetch;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _c;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        if (!(!this._pkh || forceRefetch)) return [3 /*break*/, 2];\r\n                        _c = this;\r\n                        return [4 /*yield*/, this.walletProvider.getPKH()];\r\n                    case 1:\r\n                        _c._pkh = _d.sent();\r\n                        _d.label = 2;\r\n                    case 2: return [2 /*return*/, this._pkh];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Originate a new contract according to the script in parameters.\r\n     *\r\n     * @returns An operation handle with the result from the rpc node\r\n     *\r\n     * @param originateParams Originate operation parameter\r\n     */\r\n    Wallet.prototype.originate = function (params) {\r\n        var _this = this;\r\n        return this.walletCommand(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var mappedParams, opHash, _a;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.walletProvider.mapOriginateParamsToWalletParams(function () {\r\n                            return _this.context.parser.prepareCodeOrigination(__assign({}, params));\r\n                        })];\r\n                    case 1:\r\n                        mappedParams = _b.sent();\r\n                        return [4 /*yield*/, this.walletProvider.sendOperations([mappedParams])];\r\n                    case 2:\r\n                        opHash = _b.sent();\r\n                        if (!!this.context.proto) return [3 /*break*/, 4];\r\n                        _a = this.context;\r\n                        return [4 /*yield*/, this.context.rpc.getBlock()];\r\n                    case 3:\r\n                        _a.proto = (_b.sent()).protocol;\r\n                        _b.label = 4;\r\n                    case 4: return [2 /*return*/, this.context.operationFactory.createOriginationOperation(opHash)];\r\n                }\r\n            });\r\n        }); });\r\n    };\r\n    /**\r\n     *\r\n     * @description Set the delegate for a contract.\r\n     *\r\n     * @returns An operation handle with the result from the rpc node\r\n     *\r\n     * @param delegateParams operation parameter\r\n     */\r\n    Wallet.prototype.setDelegate = function (params) {\r\n        var _this = this;\r\n        return this.walletCommand(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var mappedParams, opHash;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.walletProvider.mapDelegateParamsToWalletParams(function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                            return [2 /*return*/, params];\r\n                        }); }); })];\r\n                    case 1:\r\n                        mappedParams = _a.sent();\r\n                        return [4 /*yield*/, this.walletProvider.sendOperations([mappedParams])];\r\n                    case 2:\r\n                        opHash = _a.sent();\r\n                        return [2 /*return*/, this.context.operationFactory.createDelegationOperation(opHash)];\r\n                }\r\n            });\r\n        }); });\r\n    };\r\n    /**\r\n     *\r\n     * @description Register the current address as delegate.\r\n     *\r\n     * @returns An operation handle with the result from the rpc node\r\n     *\r\n     */\r\n    Wallet.prototype.registerDelegate = function () {\r\n        var _this = this;\r\n        return this.walletCommand(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var mappedParams, opHash;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.walletProvider.mapDelegateParamsToWalletParams(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                            var delegate;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0: return [4 /*yield*/, this.pkh()];\r\n                                    case 1:\r\n                                        delegate = _a.sent();\r\n                                        return [2 /*return*/, { delegate: delegate }];\r\n                                }\r\n                            });\r\n                        }); })];\r\n                    case 1:\r\n                        mappedParams = _a.sent();\r\n                        return [4 /*yield*/, this.walletProvider.sendOperations([mappedParams])];\r\n                    case 2:\r\n                        opHash = _a.sent();\r\n                        return [2 /*return*/, this.context.operationFactory.createDelegationOperation(opHash)];\r\n                }\r\n            });\r\n        }); });\r\n    };\r\n    /**\r\n     *\r\n     * @description Transfer tezos tokens from current address to a specific address or call a smart contract.\r\n     *\r\n     * @returns A wallet command from which we can send the operation to the wallet\r\n     *\r\n     * @param params operation parameter\r\n     */\r\n    Wallet.prototype.transfer = function (params) {\r\n        var _this = this;\r\n        return this.walletCommand(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var mappedParams, opHash;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.walletProvider.mapTransferParamsToWalletParams(function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                            return [2 /*return*/, params];\r\n                        }); }); })];\r\n                    case 1:\r\n                        mappedParams = _a.sent();\r\n                        return [4 /*yield*/, this.walletProvider.sendOperations([mappedParams])];\r\n                    case 2:\r\n                        opHash = _a.sent();\r\n                        return [2 /*return*/, this.context.operationFactory.createTransactionOperation(opHash)];\r\n                }\r\n            });\r\n        }); });\r\n    };\r\n    /**\r\n     *\r\n     * @description Create a batch of operation\r\n     *\r\n     * @returns A batch object from which we can add more operation or send a command to the wallet to execute the batch\r\n     *\r\n     * @param params List of operation to initialize the batch with\r\n     */\r\n    Wallet.prototype.batch = function (params) {\r\n        var batch = new WalletOperationBatch(this.walletProvider, this.context);\r\n        if (Array.isArray(params)) {\r\n            batch.with(params);\r\n        }\r\n        return batch;\r\n    };\r\n    /**\r\n     *\r\n     * @description Create an smart contract abstraction for the address specified. Calling entrypoints with the returned\r\n     * smart contract abstraction will leverage the wallet provider to make smart contract calls\r\n     *\r\n     * @param address Smart contract address\r\n     */\r\n    Wallet.prototype.at = function (address, contractAbstractionComposer) {\r\n        if (contractAbstractionComposer === void 0) { contractAbstractionComposer = function (x) {\r\n            return x;\r\n        }; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var rpc, script, entrypoints, blockHeader, chainId, abs;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        rpc = this.context.withExtensions().rpc;\r\n                        return [4 /*yield*/, rpc.getScript(address)];\r\n                    case 1:\r\n                        script = _a.sent();\r\n                        return [4 /*yield*/, rpc.getEntrypoints(address)];\r\n                    case 2:\r\n                        entrypoints = _a.sent();\r\n                        return [4 /*yield*/, this.context.rpc.getBlockHeader()];\r\n                    case 3:\r\n                        blockHeader = _a.sent();\r\n                        chainId = blockHeader.chain_id;\r\n                        abs = new ContractAbstraction(address, script, this, this.context.contract, entrypoints, chainId);\r\n                        return [2 /*return*/, contractAbstractionComposer(abs, this.context)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Wallet;\r\n}());\n\nvar LegacyWalletProvider = /** @class */ (function () {\r\n    function LegacyWalletProvider(context) {\r\n        this.context = context;\r\n    }\r\n    LegacyWalletProvider.prototype.getPKH = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.context.signer.publicKeyHash()];\r\n            });\r\n        });\r\n    };\r\n    LegacyWalletProvider.prototype.mapTransferParamsToWalletParams = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = attachKind;\r\n                        return [4 /*yield*/, params()];\r\n                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent(), OpKind.TRANSACTION])];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LegacyWalletProvider.prototype.mapOriginateParamsToWalletParams = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = attachKind;\r\n                        return [4 /*yield*/, params()];\r\n                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent(), OpKind.ORIGINATION])];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LegacyWalletProvider.prototype.mapDelegateParamsToWalletParams = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = attachKind;\r\n                        return [4 /*yield*/, params()];\r\n                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent(), OpKind.DELEGATION])];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LegacyWalletProvider.prototype.sendOperations = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var op;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.context.batch.batch(params).send()];\r\n                    case 1:\r\n                        op = _a.sent();\r\n                        return [2 /*return*/, op.hash];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return LegacyWalletProvider;\r\n}());\n\n/**\r\n * @description Utility class to send smart contract operation\r\n * The format for the arguments is the object representation\r\n */\r\nvar ContractMethodObject = /** @class */ (function () {\r\n    function ContractMethodObject(provider, address, parameterSchema, name, args, isMultipleEntrypoint, isAnonymous) {\r\n        if (args === void 0) { args = 'unit'; }\r\n        if (isMultipleEntrypoint === void 0) { isMultipleEntrypoint = true; }\r\n        if (isAnonymous === void 0) { isAnonymous = false; }\r\n        this.provider = provider;\r\n        this.address = address;\r\n        this.parameterSchema = parameterSchema;\r\n        this.name = name;\r\n        this.args = args;\r\n        this.isMultipleEntrypoint = isMultipleEntrypoint;\r\n        this.isAnonymous = isAnonymous;\r\n    }\r\n    /**\r\n   * @description Get the signature of the smart contract method\r\n   */\r\n    ContractMethodObject.prototype.getSignature = function () {\r\n        return this.isAnonymous\r\n            ? this.parameterSchema.ExtractSchema()[this.name]\r\n            : this.parameterSchema.ExtractSchema();\r\n    };\r\n    /**\r\n     *\r\n     * @description Send the smart contract operation\r\n     *\r\n     * @param Options generic operation parameter\r\n     */\r\n    ContractMethodObject.prototype.send = function (params) {\r\n        if (params === void 0) { params = {}; }\r\n        if (this.provider instanceof Wallet) {\r\n            return this.provider.transfer(this.toTransferParams(params)).send();\r\n        }\r\n        else {\r\n            return this.provider.transfer(this.toTransferParams(params));\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @description Create transfer params to be used with TezosToolkit.contract.transfer methods\r\n     *\r\n     * @param Options generic transfer operation parameters\r\n     */\r\n    ContractMethodObject.prototype.toTransferParams = function (_a) {\r\n        var _b;\r\n        var _c = _a === void 0 ? {} : _a, fee = _c.fee, gasLimit = _c.gasLimit, storageLimit = _c.storageLimit, source = _c.source, _d = _c.amount, amount = _d === void 0 ? 0 : _d, _e = _c.mutez, mutez = _e === void 0 ? false : _e;\r\n        var fullTransferParams = {\r\n            to: this.address,\r\n            amount: amount,\r\n            fee: fee,\r\n            mutez: mutez,\r\n            source: source,\r\n            gasLimit: gasLimit,\r\n            storageLimit: storageLimit,\r\n            parameter: {\r\n                entrypoint: this.isMultipleEntrypoint ? this.name : DEFAULT_SMART_CONTRACT_METHOD_NAME,\r\n                value: this.isAnonymous\r\n                    ? this.parameterSchema.EncodeObject((_b = {}, _b[this.name] = this.args, _b))\r\n                    : this.parameterSchema.EncodeObject(this.args),\r\n            },\r\n        };\r\n        return fullTransferParams;\r\n    };\r\n    return ContractMethodObject;\r\n}());\n\nvar ContractMethodFactory = /** @class */ (function () {\r\n    function ContractMethodFactory() {\r\n    }\r\n    ContractMethodFactory.prototype.createContractMethodFlatParams = function (provider, address, smartContractMethodSchema, smartContractMethodName, args, isMultipleEntrypoint, isAnonymous) {\r\n        if (isMultipleEntrypoint === void 0) { isMultipleEntrypoint = true; }\r\n        if (isAnonymous === void 0) { isAnonymous = false; }\r\n        return new ContractMethod(provider, address, smartContractMethodSchema, smartContractMethodName, args, isMultipleEntrypoint, isAnonymous);\r\n    };\r\n    ContractMethodFactory.prototype.createContractMethodObjectParam = function (provider, address, smartContractMethodSchema, smartContractMethodName, args, isMultipleEntrypoint, isAnonymous) {\r\n        if (isMultipleEntrypoint === void 0) { isMultipleEntrypoint = true; }\r\n        if (isAnonymous === void 0) { isAnonymous = false; }\r\n        return new ContractMethodObject(provider, address, smartContractMethodSchema, smartContractMethodName, args, isMultipleEntrypoint, isAnonymous);\r\n    };\r\n    return ContractMethodFactory;\r\n}());\n\nvar LambdaView = /** @class */ (function () {\r\n    function LambdaView(lambdaContract, viewContract, viewMethod, contractParameter) {\r\n        if (viewMethod === void 0) { viewMethod = 'default'; }\r\n        if (contractParameter === void 0) { contractParameter = { prim: 'Unit' }; }\r\n        this.lambdaContract = lambdaContract;\r\n        this.viewContract = viewContract;\r\n        this.viewMethod = viewMethod;\r\n        this.contractParameter = contractParameter;\r\n        this.voidLambda = this.createVoidLambda();\r\n    }\r\n    LambdaView.prototype.execute = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ex_1, lastError, failedWith;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.lambdaContract.methods.default(this.voidLambda).send()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        ex_1 = _a.sent();\r\n                        if (ex_1 instanceof TezosOperationError) {\r\n                            lastError = ex_1.errors[ex_1.errors.length - 1];\r\n                            failedWith = lastError.with;\r\n                            return [2 /*return*/, failedWith];\r\n                        }\r\n                        else {\r\n                            throw ex_1;\r\n                        }\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    LambdaView.prototype.createVoidLambda = function () {\r\n        var _a = __read(this.getView(), 2), parameter = _a[0], callback = _a[1];\r\n        var contractArgs = [\r\n            {\r\n                prim: 'pair',\r\n                args: [parameter, { prim: 'contract', args: [callback] }],\r\n            },\r\n        ];\r\n        if (this.viewMethod === 'default') {\r\n            contractArgs = [{ string: '%default' }].concat(contractArgs);\r\n        }\r\n        return [\r\n            { prim: 'PUSH', args: [{ prim: 'mutez' }, { int: '0' }] },\r\n            { prim: 'NONE', args: [{ prim: 'key_hash' }] },\r\n            {\r\n                prim: 'CREATE_CONTRACT',\r\n                args: [\r\n                    [\r\n                        { prim: 'parameter', args: [callback] },\r\n                        { prim: 'storage', args: [{ prim: 'unit' }] },\r\n                        {\r\n                            prim: 'code',\r\n                            args: [[{ prim: 'CAR' }, { prim: 'FAILWITH' }]],\r\n                        },\r\n                    ],\r\n                ],\r\n            },\r\n            {\r\n                prim: 'DIP',\r\n                args: [\r\n                    [\r\n                        {\r\n                            prim: 'DIP',\r\n                            args: [\r\n                                [\r\n                                    {\r\n                                        prim: 'LAMBDA',\r\n                                        args: [\r\n                                            {\r\n                                                prim: 'pair',\r\n                                                args: [{ prim: 'address' }, { prim: 'unit' }],\r\n                                            },\r\n                                            {\r\n                                                prim: 'pair',\r\n                                                args: [{ prim: 'list', args: [{ prim: 'operation' }] }, { prim: 'unit' }],\r\n                                            },\r\n                                            [\r\n                                                { prim: 'CAR' },\r\n                                                { prim: 'CONTRACT', args: [callback] },\r\n                                                {\r\n                                                    prim: 'IF_NONE',\r\n                                                    args: [\r\n                                                        [\r\n                                                            {\r\n                                                                prim: 'PUSH',\r\n                                                                args: [{ prim: 'string' }, { string: \"Callback type unmatched\" }],\r\n                                                            },\r\n                                                            { prim: 'FAILWITH' },\r\n                                                        ],\r\n                                                        [],\r\n                                                    ],\r\n                                                },\r\n                                                {\r\n                                                    prim: 'PUSH',\r\n                                                    args: [parameter, this.contractParameter],\r\n                                                },\r\n                                                { prim: 'PAIR' },\r\n                                                {\r\n                                                    prim: 'DIP',\r\n                                                    args: [\r\n                                                        [\r\n                                                            {\r\n                                                                prim: 'PUSH',\r\n                                                                args: [\r\n                                                                    { prim: 'address' },\r\n                                                                    { string: this.viewContract.address + \"%\" + this.viewMethod },\r\n                                                                ],\r\n                                                            },\r\n                                                            { prim: 'DUP' },\r\n                                                            { prim: 'CONTRACT', args: contractArgs },\r\n                                                            {\r\n                                                                prim: 'IF_NONE',\r\n                                                                args: [\r\n                                                                    [\r\n                                                                        {\r\n                                                                            prim: 'PUSH',\r\n                                                                            args: [\r\n                                                                                { prim: 'string' },\r\n                                                                                { string: \"Contract does not exist\" },\r\n                                                                            ],\r\n                                                                        },\r\n                                                                        { prim: 'FAILWITH' },\r\n                                                                    ],\r\n                                                                    [{ prim: 'DIP', args: [[{ prim: 'DROP' }]] }],\r\n                                                                ],\r\n                                                            },\r\n                                                            {\r\n                                                                prim: 'PUSH',\r\n                                                                args: [{ prim: 'mutez' }, { int: '0' }],\r\n                                                            },\r\n                                                        ],\r\n                                                    ],\r\n                                                },\r\n                                                { prim: 'TRANSFER_TOKENS' },\r\n                                                {\r\n                                                    prim: 'DIP',\r\n                                                    args: [[{ prim: 'NIL', args: [{ prim: 'operation' }] }]],\r\n                                                },\r\n                                                { prim: 'CONS' },\r\n                                                { prim: 'DIP', args: [[{ prim: 'UNIT' }]] },\r\n                                                { prim: 'PAIR' },\r\n                                            ],\r\n                                        ],\r\n                                    },\r\n                                ],\r\n                            ],\r\n                        },\r\n                        { prim: 'APPLY' },\r\n                        {\r\n                            prim: 'DIP',\r\n                            args: [\r\n                                [\r\n                                    {\r\n                                        prim: 'PUSH',\r\n                                        args: [{ prim: 'address' }, { string: this.lambdaContract.address }],\r\n                                    },\r\n                                    { prim: 'DUP' },\r\n                                    {\r\n                                        prim: 'CONTRACT',\r\n                                        args: [\r\n                                            {\r\n                                                prim: 'lambda',\r\n                                                args: [\r\n                                                    { prim: 'unit' },\r\n                                                    {\r\n                                                        prim: 'pair',\r\n                                                        args: [\r\n                                                            { prim: 'list', args: [{ prim: 'operation' }] },\r\n                                                            { prim: 'unit' },\r\n                                                        ],\r\n                                                    },\r\n                                                ],\r\n                                            },\r\n                                        ],\r\n                                    },\r\n                                    {\r\n                                        prim: 'IF_NONE',\r\n                                        args: [\r\n                                            [\r\n                                                {\r\n                                                    prim: 'PUSH',\r\n                                                    args: [{ prim: 'string' }, { string: \"Contract does not exists\" }],\r\n                                                },\r\n                                                { prim: 'FAILWITH' },\r\n                                            ],\r\n                                            [{ prim: 'DIP', args: [[{ prim: 'DROP' }]] }],\r\n                                        ],\r\n                                    },\r\n                                    { prim: 'PUSH', args: [{ prim: 'mutez' }, { int: '0' }] },\r\n                                ],\r\n                            ],\r\n                        },\r\n                        { prim: 'TRANSFER_TOKENS' },\r\n                        {\r\n                            prim: 'DIP',\r\n                            args: [[{ prim: 'NIL', args: [{ prim: 'operation' }] }]],\r\n                        },\r\n                        { prim: 'CONS' },\r\n                    ],\r\n                ],\r\n            },\r\n            { prim: 'CONS' },\r\n            { prim: 'DIP', args: [[{ prim: 'UNIT' }]] },\r\n            { prim: 'PAIR' },\r\n        ];\r\n    };\r\n    LambdaView.prototype.getView = function () {\r\n        var entrypoints = this.viewContract.entrypoints.entrypoints;\r\n        var entrypoint = entrypoints[this.viewMethod];\r\n        if (!entrypoint) {\r\n            throw Error(\"Contract at \" + this.viewContract.address + \" does not have entrypoint: \" + this.viewMethod);\r\n        }\r\n        if (!('prim' in entrypoint) || !entrypoint.args) {\r\n            // TODO: Enhance this error message to be more descriptive\r\n            throw Error('Entrypoint args undefined');\r\n        }\r\n        var args = Array.from(entrypoint.args);\r\n        var _a = __read(args, 2), parameter = _a[0], callbackContract = _a[1];\r\n        if ('annots' in parameter) {\r\n            delete parameter['annots'];\r\n        }\r\n        if (!('prim' in callbackContract) || !callbackContract.args) {\r\n            // TODO: Enhance this error message to be more descriptive\r\n            throw Error('Callback contract args undefined');\r\n        }\r\n        var message;\r\n        if (entrypoint.prim !== 'pair') {\r\n            message = \"Expected {'prim': 'pair', ..} but found {'prim': \" + entrypoint.prim + \", ..}\";\r\n        }\r\n        else if (args.length !== 2) {\r\n            message = \"Expected an Array of length 2, but found: \" + args;\r\n        }\r\n        else if (callbackContract.prim !== 'contract') {\r\n            message = \"Expected a {prim: 'contract', ...}, but found: \" + callbackContract.prim;\r\n        }\r\n        else if (callbackContract.args && callbackContract.args.length !== 1) {\r\n            message = \"Expected a single argument to 'contract', but found: \" + callbackContract.args;\r\n        }\r\n        if (message)\r\n            throw Error(message);\r\n        return [parameter, callbackContract.args[0]];\r\n    };\r\n    return LambdaView;\r\n}());\n\nvar DEFAULT_SMART_CONTRACT_METHOD_NAME = 'default';\r\n/**\r\n * @description Utility class to retrieve data from a smart contract's storage without incurring fees via a contract's view method\r\n */\r\nvar ContractView = /** @class */ (function () {\r\n    function ContractView(currentContract, provider, name, chainId, callbackParametersSchema, parameterSchema, args) {\r\n        this.currentContract = currentContract;\r\n        this.provider = provider;\r\n        this.name = name;\r\n        this.chainId = chainId;\r\n        this.callbackParametersSchema = callbackParametersSchema;\r\n        this.parameterSchema = parameterSchema;\r\n        this.args = args;\r\n    }\r\n    /**\r\n     *\r\n     * @description Find which lambda contract to use based on the current network,\r\n     * encode parameters to Michelson,\r\n     * create an instance of Lambdaview to retrive data, and\r\n     * Decode Michelson response\r\n     *\r\n     * @param Options Address of a lambda contract (sandbox users)\r\n     */\r\n    ContractView.prototype.read = function (customLambdaAddress) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var lambdaAddress, lambdaContract, arg, lambdaView, failedWith, response;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        // TODO Verify if the 'customLambdaAdress' is a valid originated contract and if not, return an appropriate error message. \r\n                        if (customLambdaAddress) {\r\n                            lambdaAddress = customLambdaAddress;\r\n                        }\r\n                        else if (this.chainId === ChainIds.EDONET) {\r\n                            lambdaAddress = DefaultLambdaAddresses.EDONET;\r\n                        }\r\n                        else if (this.chainId === ChainIds.FLORENCENET) {\r\n                            lambdaAddress = DefaultLambdaAddresses.FLORENCENET;\r\n                        }\r\n                        else if (this.chainId === ChainIds.GRANADANET) {\r\n                            lambdaAddress = DefaultLambdaAddresses.GRANADANET;\r\n                        }\r\n                        else if (this.chainId === ChainIds.HANGZHOUNET) {\r\n                            lambdaAddress = DefaultLambdaAddresses.HANGZHOUNET;\r\n                        }\r\n                        else if (this.chainId === ChainIds.MAINNET) {\r\n                            lambdaAddress = DefaultLambdaAddresses.MAINNET;\r\n                        }\r\n                        else {\r\n                            throw new UndefinedLambdaContractError();\r\n                        }\r\n                        return [4 /*yield*/, this.provider.at(lambdaAddress)];\r\n                    case 1:\r\n                        lambdaContract = _b.sent();\r\n                        arg = (_a = this.parameterSchema).Encode.apply(_a, __spreadArray([], __read(this.args)));\r\n                        lambdaView = new LambdaView(lambdaContract, this.currentContract, this.name, arg);\r\n                        return [4 /*yield*/, lambdaView.execute()];\r\n                    case 2:\r\n                        failedWith = _b.sent();\r\n                        response = this.callbackParametersSchema.Execute(failedWith);\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ContractView;\r\n}());\r\nvar validateArgs = function (args, schema, name) {\r\n    var sigs = schema.ExtractSignatures();\r\n    if (!sigs.find(function (x) { return x.length === args.length; })) {\r\n        throw new InvalidParameterError(name, sigs, args);\r\n    }\r\n};\r\nvar isView = function (schema) {\r\n    var isView = false;\r\n    var sigs = schema.ExtractSignatures();\r\n    if ((sigs[0][sigs[0].length - 1] === 'contract')) {\r\n        isView = true;\r\n    }\r\n    return isView;\r\n};\r\nvar isContractProvider = function (variableToCheck) {\r\n    return variableToCheck.contractProviderTypeSymbol !== undefined;\r\n};\r\n/**\r\n * @description Smart contract abstraction\r\n */\r\nvar ContractAbstraction = /** @class */ (function () {\r\n    function ContractAbstraction(address, script, provider, storageProvider, entrypoints, chainId) {\r\n        this.address = address;\r\n        this.script = script;\r\n        this.storageProvider = storageProvider;\r\n        this.entrypoints = entrypoints;\r\n        this.chainId = chainId;\r\n        this.contractMethodFactory = new ContractMethodFactory();\r\n        /**\r\n         * @description Contains methods that are implemented by the target Tezos Smart Contract, and offers the user to call the Smart Contract methods as if they were native TS/JS methods.\r\n         * NB: if the contract contains annotation it will include named properties; if not it will be indexed by a number.\r\n         *\r\n         */\r\n        this.methods = {};\r\n        /**\r\n         * @description Contains methods that are implemented by the target Tezos Smart Contract, and offers the user to call the Smart Contract methods as if they were native TS/JS methods.\r\n         * `methodsObject` serves the exact same purpose as the `methods` member. The difference is that it allows passing the parameter in an object format when calling the smart contract method (instead of the flattened representation)\r\n         * NB: if the contract contains annotation it will include named properties; if not it will be indexed by a number.\r\n         *\r\n         */\r\n        this.methodsObject = {};\r\n        this.views = {};\r\n        this.schema = Schema.fromRPCResponse({ script: this.script });\r\n        this.parameterSchema = ParameterSchema.fromRPCResponse({ script: this.script });\r\n        this._initializeMethods(this, address, provider, this.entrypoints.entrypoints, this.chainId);\r\n    }\r\n    ContractAbstraction.prototype._initializeMethods = function (currentContract, address, provider, entrypoints, chainId) {\r\n        var _this = this;\r\n        var parameterSchema = this.parameterSchema;\r\n        var keys = Object.keys(entrypoints);\r\n        if (parameterSchema.isMultipleEntryPoint) {\r\n            keys.forEach(function (smartContractMethodName) {\r\n                var smartContractMethodSchema = new ParameterSchema(entrypoints[smartContractMethodName]);\r\n                _this.methods[smartContractMethodName] = function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return currentContract.contractMethodFactory.createContractMethodFlatParams(provider, address, smartContractMethodSchema, smartContractMethodName, args);\r\n                };\r\n                _this.methodsObject[smartContractMethodName] = function (args) {\r\n                    return currentContract.contractMethodFactory.createContractMethodObjectParam(provider, address, smartContractMethodSchema, smartContractMethodName, args);\r\n                };\r\n                if (isContractProvider(provider)) {\r\n                    if (isView(smartContractMethodSchema)) {\r\n                        var view = function () {\r\n                            var args = [];\r\n                            for (var _i = 0; _i < arguments.length; _i++) {\r\n                                args[_i] = arguments[_i];\r\n                            }\r\n                            var entrypointParamWithoutCallback = entrypoints[smartContractMethodName].args[0];\r\n                            var smartContractMethodSchemaWithoutCallback = new ParameterSchema(entrypointParamWithoutCallback);\r\n                            var parametersCallback = entrypoints[smartContractMethodName].args[1].args[0];\r\n                            var smartContractMethodCallbackSchema = new ParameterSchema(parametersCallback);\r\n                            validateArgs(args, smartContractMethodSchemaWithoutCallback, smartContractMethodName);\r\n                            return new ContractView(currentContract, provider, smartContractMethodName, chainId, smartContractMethodCallbackSchema, smartContractMethodSchemaWithoutCallback, args);\r\n                        };\r\n                        _this.views[smartContractMethodName] = view;\r\n                    }\r\n                }\r\n            });\r\n            // Deal with methods with no annotations which were not discovered by the RPC endpoint\r\n            // Methods with no annotations are discovered using parameter schema\r\n            var anonymousMethods = Object.keys(parameterSchema.ExtractSchema()).filter(function (key) { return Object.keys(entrypoints).indexOf(key) === -1; });\r\n            anonymousMethods.forEach(function (smartContractMethodName) {\r\n                _this.methods[smartContractMethodName] = function () {\r\n                    var args = [];\r\n                    for (var _i = 0; _i < arguments.length; _i++) {\r\n                        args[_i] = arguments[_i];\r\n                    }\r\n                    return currentContract.contractMethodFactory.createContractMethodFlatParams(provider, address, parameterSchema, smartContractMethodName, args, false, true);\r\n                };\r\n                _this.methodsObject[smartContractMethodName] = function (args) {\r\n                    return currentContract.contractMethodFactory.createContractMethodObjectParam(provider, address, parameterSchema, smartContractMethodName, args, false, true);\r\n                };\r\n            });\r\n        }\r\n        else {\r\n            var smartContractMethodSchema_1 = this.parameterSchema;\r\n            this.methods[DEFAULT_SMART_CONTRACT_METHOD_NAME] = function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                return currentContract.contractMethodFactory.createContractMethodFlatParams(provider, address, smartContractMethodSchema_1, DEFAULT_SMART_CONTRACT_METHOD_NAME, args, false);\r\n            };\r\n            this.methodsObject[DEFAULT_SMART_CONTRACT_METHOD_NAME] = function (args) {\r\n                return currentContract.contractMethodFactory.createContractMethodObjectParam(provider, address, smartContractMethodSchema_1, DEFAULT_SMART_CONTRACT_METHOD_NAME, args, false);\r\n            };\r\n        }\r\n    };\r\n    /**\r\n     * @description Return a friendly representation of the smart contract storage\r\n     */\r\n    ContractAbstraction.prototype.storage = function () {\r\n        return this.storageProvider.getStorage(this.address, this.schema);\r\n    };\r\n    /**\r\n     *\r\n     * @description Return a friendly representation of the smart contract big map value\r\n     *\r\n     * @param key BigMap key to fetch\r\n     *\r\n     * @deprecated getBigMapKey has been deprecated in favor of getBigMapKeyByID\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-context-contracts-contract-id-big-map-get\r\n     */\r\n    ContractAbstraction.prototype.bigMap = function (key) {\r\n        // tslint:disable-next-line: deprecation\r\n        return this.storageProvider.getBigMapKey(this.address, key, this.schema);\r\n    };\r\n    return ContractAbstraction;\r\n}());\n\nvar BigMapAbstraction = /** @class */ (function () {\r\n    function BigMapAbstraction(id, schema, provider) {\r\n        this.id = id;\r\n        this.schema = schema;\r\n        this.provider = provider;\r\n    }\r\n    /**\r\n     *\r\n     * @description Fetch one value in a big map\r\n     *\r\n     * @param keysToEncode Key to query (will be encoded properly according to the schema)\r\n     * @param block optional block level to fetch the values from (head will be use by default)\r\n     * @returns Return a well formatted json object of a big map value or undefined if the key is not found in the big map\r\n     *\r\n     */\r\n    BigMapAbstraction.prototype.get = function (keyToEncode, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var id, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.provider.getBigMapKeyByID(this.id.toString(), keyToEncode, this.schema, block)];\r\n                    case 1:\r\n                        id = _a.sent();\r\n                        return [2 /*return*/, id];\r\n                    case 2:\r\n                        e_1 = _a.sent();\r\n                        if (e_1 instanceof HttpResponseError && e_1.status === STATUS_CODE.NOT_FOUND) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        else {\r\n                            throw e_1;\r\n                        }\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Fetch multiple values in a big map\r\n     * All values will be fetched on the same block level. If a block is specified in the request, the values will be fetched at it.\r\n     * Otherwise, a first request will be done to the node to fetch the level of the head and all values will be fetched at this level.\r\n     * If one of the keys does not exist in the big map, its value will be set to undefined.\r\n     *\r\n     * @param keysToEncode Array of keys to query (will be encoded properly according to the schema)\r\n     * @param block optional block level to fetch the values from\r\n     * @param batchSize optional batch size representing the number of requests to execute in parallel\r\n     * @returns A MichelsonMap containing the keys queried in the big map and their value in a well-formatted JSON object format\r\n     *\r\n     */\r\n    BigMapAbstraction.prototype.getMultipleValues = function (keysToEncode, block, batchSize) {\r\n        if (batchSize === void 0) { batchSize = 5; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.provider.getBigMapKeysByID(this.id.toString(), keysToEncode, this.schema, block, batchSize)];\r\n            });\r\n        });\r\n    };\r\n    BigMapAbstraction.prototype.toJSON = function () {\r\n        return this.id.toString();\r\n    };\r\n    BigMapAbstraction.prototype.toString = function () {\r\n        return this.id.toString();\r\n    };\r\n    return BigMapAbstraction;\r\n}());\n\nvar SaplingStateAbstraction = /** @class */ (function () {\r\n    function SaplingStateAbstraction(id, provider) {\r\n        this.id = id;\r\n        this.provider = provider;\r\n    }\r\n    /**\r\n     *\r\n     * @description Fetch the sapling state\r\n     *\r\n     * @param block optional block level to fetch the values from (head will be use by default)\r\n     * @returns Return a json object of the sapling_state\r\n     *\r\n     */\r\n    SaplingStateAbstraction.prototype.getSaplingDiff = function (block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.provider.getSaplingDiffByID(this.id.toString(), block)];\r\n            });\r\n        });\r\n    };\r\n    SaplingStateAbstraction.prototype.getId = function () {\r\n        return this.id.toString();\r\n    };\r\n    return SaplingStateAbstraction;\r\n}());\n\n// Override the default michelson encoder semantic to provide richer abstraction over storage properties\r\nvar smartContractAbstractionSemantic = function (provider) { return ({\r\n    // Provide a specific abstraction for BigMaps\r\n    big_map: function (val, code) {\r\n        if (!val || !('int' in val) || val.int === undefined) {\r\n            // Return an empty object in case of missing big map ID\r\n            return {};\r\n        }\r\n        else {\r\n            var schema = new Schema(code);\r\n            return new BigMapAbstraction(new BigNumber(val.int), schema, provider);\r\n        }\r\n    },\r\n    sapling_state: function (val) {\r\n        if (!val || !('int' in val) || val.int === undefined) {\r\n            // Return an empty object in case of missing sapling state ID\r\n            return {};\r\n        }\r\n        else {\r\n            return new SaplingStateAbstraction(new BigNumber(val.int), provider);\r\n        }\r\n    }\r\n    /*\r\n    // TODO: embed useful other abstractions\r\n    'contract':  () => {},\r\n    'address':  () => {}\r\n    */\r\n}); };\n\nvar RpcContractProvider = /** @class */ (function (_super) {\r\n    __extends(RpcContractProvider, _super);\r\n    function RpcContractProvider(context, estimator) {\r\n        var _this = _super.call(this, context) || this;\r\n        _this.estimator = estimator;\r\n        _this.contractProviderTypeSymbol = Symbol.for('taquito--provider-type-symbol');\r\n        return _this;\r\n    }\r\n    /**\r\n     *\r\n     * @description Return a well formatted json object of the contract storage\r\n     *\r\n     * @param contract contract address you want to get the storage from\r\n     * @param schema optional schema can either be the contract script rpc response or a michelson-encoder schema\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-contracts-contract-id-script\r\n     */\r\n    RpcContractProvider.prototype.getStorage = function (contract, schema) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var contractSchema, storage;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!schema) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.rpc.getScript(contract)];\r\n                    case 1:\r\n                        schema = _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (Schema.isSchema(schema)) {\r\n                            contractSchema = schema;\r\n                        }\r\n                        else {\r\n                            contractSchema = Schema.fromRPCResponse({ script: schema });\r\n                        }\r\n                        return [4 /*yield*/, this.rpc.getStorage(contract)];\r\n                    case 3:\r\n                        storage = _a.sent();\r\n                        return [2 /*return*/, contractSchema.Execute(storage, smartContractAbstractionSemantic(this))]; // Cast into T because only the caller can know the true type of the storage\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Return a well formatted json object of the contract big map storage\r\n     *\r\n     * @param contract contract address you want to get the storage from\r\n     * @param key contract big map key to fetch value from\r\n     * @param schema optional schema can either be the contract script rpc response or a michelson-encoder schema\r\n     *\r\n     * @deprecated Deprecated in favor of getBigMapKeyByID\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#post-block-id-context-contracts-contract-id-big-map-get\r\n     */\r\n    RpcContractProvider.prototype.getBigMapKey = function (contract, key, schema) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var contractSchema, encodedKey, val;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!schema) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.rpc.getScript(contract)];\r\n                    case 1:\r\n                        schema = _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (Schema.isSchema(schema)) {\r\n                            contractSchema = schema;\r\n                        }\r\n                        else {\r\n                            contractSchema = Schema.fromRPCResponse({ script: schema });\r\n                        }\r\n                        encodedKey = contractSchema.EncodeBigMapKey(key);\r\n                        return [4 /*yield*/, this.rpc.getBigMapKey(contract, encodedKey)];\r\n                    case 3:\r\n                        val = _a.sent();\r\n                        return [2 /*return*/, contractSchema.ExecuteOnBigMapValue(val)]; // Cast into T because only the caller can know the true type of the storage\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Return a well formatted json object of a big map value\r\n     *\r\n     * @param id Big Map ID\r\n     * @param keyToEncode key to query (will be encoded properly according to the schema)\r\n     * @param schema Big Map schema (can be determined using your contract type)\r\n     * @param block optional block level to fetch the values from\r\n     *\r\n     * @see https://tezos.gitlab.io/api/rpc.html#get-block-id-context-big-maps-big-map-id-script-expr\r\n     */\r\n    RpcContractProvider.prototype.getBigMapKeyByID = function (id, keyToEncode, schema, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, key, type, packed, encodedExpr, bigMapValue, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = schema.EncodeBigMapKey(keyToEncode), key = _a.key, type = _a.type;\r\n                        return [4 /*yield*/, this.context.packer.packData({ data: key, type: type })];\r\n                    case 1:\r\n                        packed = (_c.sent()).packed;\r\n                        encodedExpr = encodeExpr(packed);\r\n                        if (!block) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.context.rpc.getBigMapExpr(id.toString(), encodedExpr, { block: String(block) })];\r\n                    case 2:\r\n                        _b = _c.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 3: return [4 /*yield*/, this.context.rpc.getBigMapExpr(id.toString(), encodedExpr)];\r\n                    case 4:\r\n                        _b = _c.sent();\r\n                        _c.label = 5;\r\n                    case 5:\r\n                        bigMapValue = _b;\r\n                        return [2 /*return*/, schema.ExecuteOnBigMapValue(bigMapValue, smartContractAbstractionSemantic(this))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Fetch multiple values in a big map\r\n     * All values will be fetched on the same block level. If a block is specified in the request, the values will be fetched at it.\r\n     * Otherwise, a first request will be done to the node to fetch the level of the head and all values will be fetched at this level.\r\n     * If one of the keys does not exist in the big map, its value will be set to undefined.\r\n     *\r\n     * @param id Big Map ID\r\n     * @param keys Array of keys to query (will be encoded properly according to the schema)\r\n     * @param schema Big Map schema (can be determined using your contract type)\r\n     * @param block optional block level to fetch the values from\r\n     * @param batchSize optional batch size representing the number of requests to execute in parallel\r\n     * @returns A MichelsonMap containing the keys queried in the big map and their value in a well-formatted JSON object format\r\n     *\r\n     */\r\n    RpcContractProvider.prototype.getBigMapKeysByID = function (id, keys, schema, block, batchSize) {\r\n        if (batchSize === void 0) { batchSize = 5; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var level, bigMapValues, position, results, keysBatch, batch, _a, i;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.getBlockForRequest(keys, block)];\r\n                    case 1:\r\n                        level = _b.sent();\r\n                        bigMapValues = new MichelsonMap();\r\n                        position = 0;\r\n                        results = [];\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        if (!(position < keys.length)) return [3 /*break*/, 4];\r\n                        keysBatch = keys.slice(position, position + batchSize);\r\n                        batch = keysBatch.map(function (keyToEncode) { return _this.getBigMapValueOrUndefined(keyToEncode, id, schema, level); });\r\n                        _a = [__spreadArray([], __read(results))];\r\n                        return [4 /*yield*/, Promise.all(batch)];\r\n                    case 3:\r\n                        results = __spreadArray.apply(void 0, _a.concat([__read.apply(void 0, [_b.sent()])]));\r\n                        position += batchSize;\r\n                        return [3 /*break*/, 2];\r\n                    case 4:\r\n                        for (i = 0; i < results.length; i++) {\r\n                            bigMapValues.set(keys[i], results[i]);\r\n                        }\r\n                        return [2 /*return*/, bigMapValues];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RpcContractProvider.prototype.getBlockForRequest = function (keys, block) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        if (!(keys.length === 1 || typeof block !== 'undefined')) return [3 /*break*/, 1];\r\n                        _b = block;\r\n                        return [3 /*break*/, 3];\r\n                    case 1: return [4 /*yield*/, this.rpc.getBlock()];\r\n                    case 2:\r\n                        _b = (_a = (_c.sent())) === null || _a === void 0 ? void 0 : _a.header.level;\r\n                        _c.label = 3;\r\n                    case 3: return [2 /*return*/, _b];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RpcContractProvider.prototype.getBigMapValueOrUndefined = function (keyToEncode, id, schema, level) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ex_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.getBigMapKeyByID(id, keyToEncode, schema, level)];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                    case 2:\r\n                        ex_1 = _a.sent();\r\n                        if (ex_1 instanceof HttpResponseError && ex_1.status === STATUS_CODE.NOT_FOUND) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        else {\r\n                            throw ex_1;\r\n                        }\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Return a well formatted json object of a sapling state\r\n     *\r\n     * @param id Sapling state ID\r\n     * @param block optional block level to fetch the value from\r\n     *\r\n     */\r\n    RpcContractProvider.prototype.getSaplingDiffByID = function (id, block) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var saplingState, _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!block) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.context.rpc.getSaplingDiffById(id.toString(), { block: String(block) })];\r\n                    case 1:\r\n                        _a = _b.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 2: return [4 /*yield*/, this.context.rpc.getSaplingDiffById(id.toString())];\r\n                    case 3:\r\n                        _a = _b.sent();\r\n                        _b.label = 4;\r\n                    case 4:\r\n                        saplingState = _a;\r\n                        return [2 /*return*/, saplingState];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RpcContractProvider.prototype.addRevealOperationIfNeeded = function (operation, publicKeyHash) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ops, publicKey, estimateReveal_1, reveal, estimatedReveal, _a, _b;\r\n            var _this = this;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        if (!isOpRequireReveal(operation)) return [3 /*break*/, 5];\r\n                        ops = [operation];\r\n                        return [4 /*yield*/, this.signer.publicKey()];\r\n                    case 1:\r\n                        publicKey = _c.sent();\r\n                        return [4 /*yield*/, this.estimator.reveal()];\r\n                    case 2:\r\n                        estimateReveal_1 = _c.sent();\r\n                        if (!estimateReveal_1) return [3 /*break*/, 5];\r\n                        reveal = { kind: OpKind.REVEAL };\r\n                        return [4 /*yield*/, this.estimate(reveal, function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                                return [2 /*return*/, estimateReveal_1];\r\n                            }); }); })];\r\n                    case 3:\r\n                        estimatedReveal = _c.sent();\r\n                        _b = (_a = ops).unshift;\r\n                        return [4 /*yield*/, createRevealOperation(__assign({}, estimatedReveal), publicKeyHash, publicKey)];\r\n                    case 4:\r\n                        _b.apply(_a, [_c.sent()]);\r\n                        return [2 /*return*/, ops];\r\n                    case 5: return [2 /*return*/, operation];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Originate a new contract according to the script in parameters. Will sign and inject an operation using the current context\r\n     *\r\n     * @returns An operation handle with the result from the rpc node\r\n     *\r\n     * @warn You cannot specify storage and init at the same time (use init to pass the raw michelson representation of storage)\r\n     *\r\n     * @param OriginationOperation Originate operation parameter\r\n     */\r\n    RpcContractProvider.prototype.originate = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var estimate, publicKeyHash, operation, _a, ops, preparedOrigination, forgedOrigination, _b, hash, context, forgedBytes, opResponse;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this.estimate(params, this.estimator.originate.bind(this.estimator))];\r\n                    case 1:\r\n                        estimate = _c.sent();\r\n                        return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 2:\r\n                        publicKeyHash = _c.sent();\r\n                        _a = createOriginationOperation;\r\n                        return [4 /*yield*/, this.context.parser.prepareCodeOrigination(__assign(__assign({}, params), estimate))];\r\n                    case 3: return [4 /*yield*/, _a.apply(void 0, [_c.sent()])];\r\n                    case 4:\r\n                        operation = _c.sent();\r\n                        return [4 /*yield*/, this.addRevealOperationIfNeeded(operation, publicKeyHash)];\r\n                    case 5:\r\n                        ops = _c.sent();\r\n                        return [4 /*yield*/, this.prepareOperation({ operation: ops, source: publicKeyHash })];\r\n                    case 6:\r\n                        preparedOrigination = _c.sent();\r\n                        return [4 /*yield*/, this.forge(preparedOrigination)];\r\n                    case 7:\r\n                        forgedOrigination = _c.sent();\r\n                        return [4 /*yield*/, this.signAndInject(forgedOrigination)];\r\n                    case 8:\r\n                        _b = _c.sent(), hash = _b.hash, context = _b.context, forgedBytes = _b.forgedBytes, opResponse = _b.opResponse;\r\n                        return [2 /*return*/, new OriginationOperation(hash, operation, forgedBytes, opResponse, context, this)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Set the delegate for a contract. Will sign and inject an operation using the current context\r\n     *\r\n     * @returns An operation handle with the result from the rpc node\r\n     *\r\n     * @param SetDelegate operation parameter\r\n     */\r\n    RpcContractProvider.prototype.setDelegate = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var estimate, publicKeyHash, operation, sourceOrDefault, ops, prepared, opBytes, _a, hash, context, forgedBytes, opResponse;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        // Since babylon delegation source cannot smart contract\r\n                        if (/kt1/i.test(params.source)) {\r\n                            throw new InvalidDelegationSource(params.source);\r\n                        }\r\n                        return [4 /*yield*/, this.estimate(params, this.estimator.setDelegate.bind(this.estimator))];\r\n                    case 1:\r\n                        estimate = _b.sent();\r\n                        return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 2:\r\n                        publicKeyHash = _b.sent();\r\n                        return [4 /*yield*/, createSetDelegateOperation(__assign(__assign({}, params), estimate))];\r\n                    case 3:\r\n                        operation = _b.sent();\r\n                        sourceOrDefault = params.source || publicKeyHash;\r\n                        return [4 /*yield*/, this.addRevealOperationIfNeeded(operation, publicKeyHash)];\r\n                    case 4:\r\n                        ops = _b.sent();\r\n                        return [4 /*yield*/, this.prepareOperation({\r\n                                operation: ops,\r\n                                source: sourceOrDefault,\r\n                            })];\r\n                    case 5:\r\n                        prepared = _b.sent();\r\n                        return [4 /*yield*/, this.forge(prepared)];\r\n                    case 6:\r\n                        opBytes = _b.sent();\r\n                        return [4 /*yield*/, this.signAndInject(opBytes)];\r\n                    case 7:\r\n                        _a = _b.sent(), hash = _a.hash, context = _a.context, forgedBytes = _a.forgedBytes, opResponse = _a.opResponse;\r\n                        return [2 /*return*/, new DelegateOperation(hash, operation, sourceOrDefault, forgedBytes, opResponse, context)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Register the current address as delegate. Will sign and inject an operation using the current context\r\n     *\r\n     * @returns An operation handle with the result from the rpc node\r\n     *\r\n     * @param RegisterDelegate operation parameter\r\n     */\r\n    RpcContractProvider.prototype.registerDelegate = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var estimate, source, operation, ops, prepared, opBytes, _a, hash, context, forgedBytes, opResponse;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.estimate(params, this.estimator.registerDelegate.bind(this.estimator))];\r\n                    case 1:\r\n                        estimate = _b.sent();\r\n                        return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 2:\r\n                        source = _b.sent();\r\n                        return [4 /*yield*/, createRegisterDelegateOperation(__assign(__assign({}, params), estimate), source)];\r\n                    case 3:\r\n                        operation = _b.sent();\r\n                        return [4 /*yield*/, this.addRevealOperationIfNeeded(operation, source)];\r\n                    case 4:\r\n                        ops = _b.sent();\r\n                        return [4 /*yield*/, this.prepareOperation({ operation: ops })];\r\n                    case 5:\r\n                        prepared = _b.sent();\r\n                        return [4 /*yield*/, this.forge(prepared)];\r\n                    case 6:\r\n                        opBytes = _b.sent();\r\n                        return [4 /*yield*/, this.signAndInject(opBytes)];\r\n                    case 7:\r\n                        _a = _b.sent(), hash = _a.hash, context = _a.context, forgedBytes = _a.forgedBytes, opResponse = _a.opResponse;\r\n                        return [2 /*return*/, new DelegateOperation(hash, operation, source, forgedBytes, opResponse, context)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Transfer tz from current address to a specific address. Will sign and inject an operation using the current context\r\n     *\r\n     * @returns An operation handle with the result from the rpc node\r\n     *\r\n     * @param Transfer operation parameter\r\n     */\r\n    RpcContractProvider.prototype.transfer = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var publickKeyHash, estimate, operation, source, ops, prepared, opBytes, _a, hash, context, forgedBytes, opResponse;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        publickKeyHash = _b.sent();\r\n                        return [4 /*yield*/, this.estimate(params, this.estimator.transfer.bind(this.estimator))];\r\n                    case 2:\r\n                        estimate = _b.sent();\r\n                        return [4 /*yield*/, createTransferOperation(__assign(__assign({}, params), estimate))];\r\n                    case 3:\r\n                        operation = _b.sent();\r\n                        source = params.source || publickKeyHash;\r\n                        return [4 /*yield*/, this.addRevealOperationIfNeeded(operation, publickKeyHash)];\r\n                    case 4:\r\n                        ops = _b.sent();\r\n                        return [4 /*yield*/, this.prepareOperation({ operation: ops, source: params.source })];\r\n                    case 5:\r\n                        prepared = _b.sent();\r\n                        return [4 /*yield*/, this.forge(prepared)];\r\n                    case 6:\r\n                        opBytes = _b.sent();\r\n                        return [4 /*yield*/, this.signAndInject(opBytes)];\r\n                    case 7:\r\n                        _a = _b.sent(), hash = _a.hash, context = _a.context, forgedBytes = _a.forgedBytes, opResponse = _a.opResponse;\r\n                        return [2 /*return*/, new TransactionOperation(hash, operation, source, forgedBytes, opResponse, context)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Reveal the current address. Will throw an error if the address is already revealed.\r\n     *\r\n     * @returns An operation handle with the result from the rpc node\r\n     *\r\n     * @param RevealParams operation parameter\r\n     */\r\n    RpcContractProvider.prototype.reveal = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var publicKeyHash, estimateReveal, estimated, operation, _a, _b, prepared, opBytes, _c, hash, context, forgedBytes, opResponse;\r\n            var _this = this;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0: return [4 /*yield*/, this.signer.publicKeyHash()];\r\n                    case 1:\r\n                        publicKeyHash = _d.sent();\r\n                        return [4 /*yield*/, this.estimator.reveal(params)];\r\n                    case 2:\r\n                        estimateReveal = _d.sent();\r\n                        if (!estimateReveal) return [3 /*break*/, 9];\r\n                        return [4 /*yield*/, this.estimate(params, function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                                return [2 /*return*/, estimateReveal];\r\n                            }); }); })];\r\n                    case 3:\r\n                        estimated = _d.sent();\r\n                        _a = createRevealOperation;\r\n                        _b = [__assign({}, estimated), publicKeyHash];\r\n                        return [4 /*yield*/, this.signer.publicKey()];\r\n                    case 4: return [4 /*yield*/, _a.apply(void 0, _b.concat([_d.sent()]))];\r\n                    case 5:\r\n                        operation = _d.sent();\r\n                        return [4 /*yield*/, this.prepareOperation({ operation: operation, source: publicKeyHash })];\r\n                    case 6:\r\n                        prepared = _d.sent();\r\n                        return [4 /*yield*/, this.forge(prepared)];\r\n                    case 7:\r\n                        opBytes = _d.sent();\r\n                        return [4 /*yield*/, this.signAndInject(opBytes)];\r\n                    case 8:\r\n                        _c = _d.sent(), hash = _c.hash, context = _c.context, forgedBytes = _c.forgedBytes, opResponse = _c.opResponse;\r\n                        return [2 /*return*/, new RevealOperation(hash, operation, publicKeyHash, forgedBytes, opResponse, context)];\r\n                    case 9: throw new Error('The current address is already revealed.');\r\n                }\r\n            });\r\n        });\r\n    };\r\n    RpcContractProvider.prototype.at = function (address, contractAbstractionComposer) {\r\n        if (contractAbstractionComposer === void 0) { contractAbstractionComposer = function (x) { return x; }; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var rpc, script, entrypoints, blockHeader, chainId, abs;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        rpc = this.context.withExtensions().rpc;\r\n                        return [4 /*yield*/, rpc.getScript(address)];\r\n                    case 1:\r\n                        script = _a.sent();\r\n                        return [4 /*yield*/, rpc.getEntrypoints(address)];\r\n                    case 2:\r\n                        entrypoints = _a.sent();\r\n                        return [4 /*yield*/, this.rpc.getBlockHeader()];\r\n                    case 3:\r\n                        blockHeader = _a.sent();\r\n                        chainId = blockHeader.chain_id;\r\n                        abs = new ContractAbstraction(address, script, this, this, entrypoints, chainId);\r\n                        return [2 /*return*/, contractAbstractionComposer(abs, this.context)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     *\r\n     * @description Batch a group of operation together. Operations will be applied in the order in which they are added to the batch\r\n     *\r\n     * @returns A batch object from which we can add more operation or send a command to execute the batch\r\n     *\r\n     * @param params List of operation to batch together\r\n     */\r\n    RpcContractProvider.prototype.batch = function (params) {\r\n        var batch = new OperationBatch(this.context, this.estimator);\r\n        if (Array.isArray(params)) {\r\n            batch.with(params);\r\n        }\r\n        return batch;\r\n    };\r\n    return RpcContractProvider;\r\n}(OperationEmitter));\n\nvar MichelCodecParser = /** @class */ (function () {\r\n    function MichelCodecParser(context) {\r\n        this.context = context;\r\n    }\r\n    MichelCodecParser.prototype.getNextProto = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var next_protocol;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.context.rpc.getBlockMetadata()];\r\n                    case 1:\r\n                        next_protocol = (_a.sent()).next_protocol;\r\n                        return [2 /*return*/, next_protocol];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MichelCodecParser.prototype.parseScript = function (src) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var parser, _a;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = Parser.bind;\r\n                        _b = {};\r\n                        return [4 /*yield*/, this.getNextProto()];\r\n                    case 1:\r\n                        parser = new (_a.apply(Parser, [void 0, (_b.protocol = _c.sent(), _b)]))();\r\n                        return [2 /*return*/, parser.parseScript(src)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MichelCodecParser.prototype.parseMichelineExpression = function (src) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var parser, _a;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = Parser.bind;\r\n                        _b = {};\r\n                        return [4 /*yield*/, this.getNextProto()];\r\n                    case 1:\r\n                        parser = new (_a.apply(Parser, [void 0, (_b.protocol = _c.sent(), _b)]))();\r\n                        return [2 /*return*/, parser.parseMichelineExpression(src)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MichelCodecParser.prototype.parseJSON = function (src) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var parser, _a;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _a = Parser.bind;\r\n                        _b = {};\r\n                        return [4 /*yield*/, this.getNextProto()];\r\n                    case 1:\r\n                        parser = new (_a.apply(Parser, [void 0, (_b.protocol = _c.sent(), _b)]))();\r\n                        return [2 /*return*/, parser.parseJSON(src)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MichelCodecParser.prototype.prepareCodeOrigination = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var parsedParams, _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        parsedParams = params;\r\n                        _a = parsedParams;\r\n                        return [4 /*yield*/, this.formatCodeParam(params.code)];\r\n                    case 1:\r\n                        _a.code = _c.sent();\r\n                        if (!params.init) return [3 /*break*/, 3];\r\n                        _b = parsedParams;\r\n                        return [4 /*yield*/, this.formatInitParam(params.init)];\r\n                    case 2:\r\n                        _b.init = _c.sent();\r\n                        _c.label = 3;\r\n                    case 3: return [2 /*return*/, parsedParams];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MichelCodecParser.prototype.formatCodeParam = function (code) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var parsedCode, c, c, order_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(typeof code === 'string')) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.parseScript(code)];\r\n                    case 1:\r\n                        c = _a.sent();\r\n                        if (c === null) {\r\n                            throw new InvalidCodeParameter('Invalid code parameter', code);\r\n                        }\r\n                        parsedCode = c;\r\n                        return [3 /*break*/, 4];\r\n                    case 2: return [4 /*yield*/, this.parseJSON(code)];\r\n                    case 3:\r\n                        c = _a.sent();\r\n                        order_1 = ['parameter', 'storage', 'code'];\r\n                        // Ensure correct ordering for RPC\r\n                        parsedCode = c.sort(function (a, b) { return order_1.indexOf(a.prim) - order_1.indexOf(b.prim); });\r\n                        _a.label = 4;\r\n                    case 4: return [2 /*return*/, parsedCode];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MichelCodecParser.prototype.formatInitParam = function (init) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var parsedInit, c;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(typeof init === 'string')) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.parseMichelineExpression(init)];\r\n                    case 1:\r\n                        c = _a.sent();\r\n                        if (c === null) {\r\n                            throw new InvalidInitParameter('Invalid init parameter', init);\r\n                        }\r\n                        parsedInit = c;\r\n                        return [3 /*break*/, 4];\r\n                    case 2: return [4 /*yield*/, this.parseJSON(init)];\r\n                    case 3:\r\n                        parsedInit = _a.sent();\r\n                        _a.label = 4;\r\n                    case 4: return [2 /*return*/, parsedInit];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return MichelCodecParser;\r\n}());\n\nvar RpcPacker = /** @class */ (function () {\r\n    function RpcPacker(context) {\r\n        this.context = context;\r\n    }\r\n    RpcPacker.prototype.packData = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.context.rpc.packData(data)];\r\n            });\r\n        });\r\n    };\r\n    return RpcPacker;\r\n}());\n\nvar defaultConfigConfirmation = {\r\n    defaultConfirmationCount: 1,\r\n    confirmationPollingTimeoutSecond: 180\r\n};\r\nvar defaultConfigStreamer = {\r\n    streamerPollingIntervalMilliseconds: 20000,\r\n    shouldObservableSubscriptionRetry: false,\r\n    observableSubscriptionRetryFunction: retry()\r\n};\r\n/**\r\n * @description Encapsulate common service used throughout different part of the library\r\n */\r\nvar Context = /** @class */ (function () {\r\n    function Context(_rpc, _signer, _proto, _config, forger, injector, packer, wallet, parser) {\r\n        if (_signer === void 0) { _signer = new NoopSigner(); }\r\n        if (_config === void 0) { _config = new BehaviorSubject(__assign(__assign({}, defaultConfigStreamer), defaultConfigConfirmation)); }\r\n        this._rpc = _rpc;\r\n        this._signer = _signer;\r\n        this._proto = _proto;\r\n        this._config = _config;\r\n        this._extensions = {};\r\n        this.providerDecorator = [];\r\n        this.tz = new RpcTzProvider(this);\r\n        this.estimate = new RPCEstimateProvider(this);\r\n        this.contract = new RpcContractProvider(this, this.estimate);\r\n        this.batch = new RPCBatchProvider(this, this.estimate);\r\n        this.wallet = new Wallet(this);\r\n        if (typeof this._rpc === 'string') {\r\n            this._rpcClient = new RpcClient(this._rpc);\r\n        }\r\n        else {\r\n            this._rpcClient = this._rpc;\r\n        }\r\n        this._forger = forger ? forger : new RpcForger(this);\r\n        this._injector = injector ? injector : new RpcInjector(this);\r\n        this.operationFactory = new OperationFactory(this);\r\n        this._walletProvider = wallet ? wallet : new LegacyWalletProvider(this);\r\n        this._parser = parser ? parser : new MichelCodecParser(this);\r\n        this._packer = packer ? packer : new RpcPacker(this);\r\n    }\r\n    Object.defineProperty(Context.prototype, \"config\", {\r\n        get: function () {\r\n            return this._config.getValue();\r\n        },\r\n        set: function (value) {\r\n            this._config.next(__assign({}, value));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Context.prototype.setPartialConfig = function (value) {\r\n        this._config.next(__assign(__assign({}, this._config.getValue()), value));\r\n    };\r\n    Object.defineProperty(Context.prototype, \"rpc\", {\r\n        get: function () {\r\n            return this._rpcClient;\r\n        },\r\n        set: function (value) {\r\n            this._rpcClient = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Context.prototype, \"injector\", {\r\n        get: function () {\r\n            return this._injector;\r\n        },\r\n        set: function (value) {\r\n            this._injector = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Context.prototype, \"forger\", {\r\n        get: function () {\r\n            return this._forger;\r\n        },\r\n        set: function (value) {\r\n            this._forger = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Context.prototype, \"signer\", {\r\n        get: function () {\r\n            return this._signer;\r\n        },\r\n        set: function (value) {\r\n            this._signer = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Context.prototype, \"walletProvider\", {\r\n        get: function () {\r\n            return this._walletProvider;\r\n        },\r\n        set: function (value) {\r\n            this._walletProvider = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Context.prototype, \"proto\", {\r\n        get: function () {\r\n            return this._proto;\r\n        },\r\n        set: function (value) {\r\n            this._proto = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Context.prototype, \"parser\", {\r\n        get: function () {\r\n            return this._parser;\r\n        },\r\n        set: function (value) {\r\n            this._parser = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Context.prototype, \"packer\", {\r\n        get: function () {\r\n            return this._packer;\r\n        },\r\n        set: function (value) {\r\n            this._packer = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Context.prototype.isAnyProtocolActive = function (protocol) {\r\n        if (protocol === void 0) { protocol = []; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var next_protocol;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._proto) return [3 /*break*/, 1];\r\n                        return [2 /*return*/, protocol.includes(this._proto)];\r\n                    case 1: return [4 /*yield*/, this.rpc.getBlockMetadata()];\r\n                    case 2:\r\n                        next_protocol = (_a.sent()).next_protocol;\r\n                        return [2 /*return*/, protocol.includes(next_protocol)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Context.prototype.getConfirmationPollingInterval = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var defaultInterval, constants, blockTime, confirmationPollingInterval;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        defaultInterval = 5;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.rpc.getConstants()];\r\n                    case 2:\r\n                        constants = _a.sent();\r\n                        blockTime = constants.time_between_blocks[0];\r\n                        if (constants.minimal_block_delay !== undefined) {\r\n                            blockTime = constants.minimal_block_delay;\r\n                        }\r\n                        confirmationPollingInterval = BigNumber.sum(blockTime, new BigNumber(constants.delay_per_missing_endorsement)\r\n                            .multipliedBy(Math.max(0, constants.initial_endorsers - constants.endorsers_per_block)));\r\n                        // Divide the polling interval by a constant 3\r\n                        // to improvise for polling time to work in prod,\r\n                        // testnet and sandbox enviornment.   \r\n                        confirmationPollingInterval = confirmationPollingInterval.dividedBy(3);\r\n                        this.config.confirmationPollingIntervalSecond = confirmationPollingInterval.toNumber() === 0 ?\r\n                            0.1 :\r\n                            confirmationPollingInterval.toNumber();\r\n                        return [2 /*return*/, this.config.confirmationPollingIntervalSecond];\r\n                    case 3:\r\n                        _a.sent();\r\n                        // Return default value if there is\r\n                        // an issue returning from constants\r\n                        // file.\r\n                        return [2 /*return*/, defaultInterval];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @description Create a copy of the current context. Useful when you have long running operation and you do not want a context change to affect the operation\r\n     */\r\n    Context.prototype.clone = function () {\r\n        return new Context(this.rpc, this.signer, this.proto, this._config, this.forger, this._injector, this.packer);\r\n    };\r\n    /**\r\n     * @description Allows extensions set on the TezosToolkit to inject logic into the context\r\n     */\r\n    Context.prototype.registerProviderDecorator = function (fx) {\r\n        this.providerDecorator.push(fx);\r\n    };\r\n    /**\r\n     * @description Applies the decorators on a cloned instance of the context and returned this cloned instance.\r\n     * The decorators are functions that inject logic into the context.\r\n     * They are provided by the extensions set on the TezosToolkit by calling the registerProviderDecorator method.\r\n     */\r\n    Context.prototype.withExtensions = function () {\r\n        var currentContext = this;\r\n        this.providerDecorator.forEach(function (decorator) {\r\n            currentContext = decorator(currentContext.clone());\r\n        });\r\n        return currentContext;\r\n    };\r\n    return Context;\r\n}());\n\nvar opHashFilter = function (op, filter) { return op.hash === filter.opHash; };\r\nvar sourceFilter = function (x, filter) {\r\n    switch (x.kind) {\r\n        case 'endorsement':\r\n            return 'metadata' in x && x.metadata.delegate === filter.source;\r\n        case 'activate_account':\r\n            return 'metadata' in x && x.pkh === filter.source;\r\n        default:\r\n            return 'source' in x && x.source === filter.source;\r\n    }\r\n};\r\nvar kindFilter = function (x, filter) { return 'kind' in x && x.kind === filter.kind; };\r\nvar destinationFilter = function (x, filter) {\r\n    switch (x.kind) {\r\n        case 'delegation':\r\n            return x.delegate === filter.destination;\r\n        case 'origination':\r\n            if ('metadata' in x &&\r\n                'operation_result' in x.metadata &&\r\n                'originated_contracts' in x.metadata.operation_result &&\r\n                Array.isArray(x.metadata.operation_result.originated_contracts)) {\r\n                return x.metadata.operation_result.originated_contracts.some(function (contract) { return contract === filter.destination; });\r\n            }\r\n            break;\r\n        case 'transaction':\r\n            return x.destination === filter.destination;\r\n        default:\r\n            return false;\r\n    }\r\n};\r\nvar evaluateOpFilter = function (op, filter) {\r\n    if ('opHash' in filter) {\r\n        return opHashFilter(op, filter);\r\n    }\r\n    else if ('source' in filter) {\r\n        return sourceFilter(op, filter);\r\n    }\r\n    else if ('kind' in filter) {\r\n        return kindFilter(op, filter);\r\n    }\r\n    else if ('destination' in filter) {\r\n        return destinationFilter(op, filter);\r\n    }\r\n    return false;\r\n};\r\nvar evaluateExpression = function (op, exp) {\r\n    if (Array.isArray(exp.and)) {\r\n        return exp.and.every(function (x) { return evaluateFilter(op, x); });\r\n    }\r\n    else if (Array.isArray(exp.or)) {\r\n        return exp.or.some(function (x) { return evaluateFilter(op, x); });\r\n    }\r\n    else {\r\n        throw new Error('Filter expression must contains either and/or property');\r\n    }\r\n};\r\nvar evaluateFilter = function (op, filter) {\r\n    var filters = [];\r\n    if (!Array.isArray(filter)) {\r\n        filters.push(filter);\r\n    }\r\n    else {\r\n        filters.push.apply(filters, __spreadArray([], __read(filter)));\r\n    }\r\n    return filters.every(function (filterOrExp) {\r\n        if ('and' in filterOrExp || 'or' in filterOrExp) {\r\n            return evaluateExpression(op, filterOrExp);\r\n        }\r\n        else {\r\n            return evaluateOpFilter(op, filterOrExp);\r\n        }\r\n    });\r\n};\n\nvar ObservableSubscription = /** @class */ (function () {\r\n    function ObservableSubscription(obs, shouldRetry, operatorFunction) {\r\n        var _this = this;\r\n        if (shouldRetry === void 0) { shouldRetry = false; }\r\n        if (operatorFunction === void 0) { operatorFunction = retry(); }\r\n        this.shouldRetry = shouldRetry;\r\n        this.operatorFunction = operatorFunction;\r\n        this.errorListeners = [];\r\n        this.messageListeners = [];\r\n        this.closeListeners = [];\r\n        this.completed$ = new Subject();\r\n        obs\r\n            .pipe(takeUntil(this.completed$), tap(function (data) {\r\n            _this.call(_this.messageListeners, data);\r\n        }, function (error) {\r\n            _this.call(_this.errorListeners, error);\r\n        }, function () {\r\n            _this.call(_this.closeListeners);\r\n        }), this.shouldRetry ? operatorFunction : tap(), catchError(function () { return NEVER; }))\r\n            .subscribe();\r\n    }\r\n    ObservableSubscription.prototype.call = function (listeners, value) {\r\n        var e_1, _a;\r\n        try {\r\n            for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\r\n                var l = listeners_1_1.value;\r\n                try {\r\n                    l(value);\r\n                }\r\n                catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    };\r\n    ObservableSubscription.prototype.remove = function (listeners, value) {\r\n        var idx = listeners.indexOf(value);\r\n        if (idx !== -1) {\r\n            listeners.splice(idx, 1);\r\n        }\r\n    };\r\n    ObservableSubscription.prototype.on = function (type, cb) {\r\n        switch (type) {\r\n            case 'data':\r\n                this.messageListeners.push(cb);\r\n                break;\r\n            case 'error':\r\n                this.errorListeners.push(cb);\r\n                break;\r\n            case 'close':\r\n                this.closeListeners.push(cb);\r\n                break;\r\n            default:\r\n                throw new Error(\"Trying to register on an unsupported event: \" + type);\r\n        }\r\n    };\r\n    ObservableSubscription.prototype.off = function (type, cb) {\r\n        switch (type) {\r\n            case 'data':\r\n                this.remove(this.messageListeners, cb);\r\n                break;\r\n            case 'error':\r\n                this.remove(this.errorListeners, cb);\r\n                break;\r\n            case 'close':\r\n                this.remove(this.closeListeners, cb);\r\n                break;\r\n            default:\r\n                throw new Error(\"Trying to unregister on an unsupported event: \" + type);\r\n        }\r\n    };\r\n    ObservableSubscription.prototype.close = function () {\r\n        this.completed$.next();\r\n    };\r\n    return ObservableSubscription;\r\n}());\n\nvar getLastBlock = function (context) {\r\n    return from(context.rpc.getBlock()).pipe(first());\r\n};\r\nvar applyFilter = function (filter) {\r\n    return concatMap(function (block) {\r\n        return new Observable(function (sub) {\r\n            var e_1, _a, e_2, _b, e_3, _c;\r\n            try {\r\n                for (var _d = __values(block.operations), _e = _d.next(); !_e.done; _e = _d.next()) {\r\n                    var ops = _e.value;\r\n                    try {\r\n                        for (var ops_1 = (e_2 = void 0, __values(ops)), ops_1_1 = ops_1.next(); !ops_1_1.done; ops_1_1 = ops_1.next()) {\r\n                            var op = ops_1_1.value;\r\n                            try {\r\n                                for (var _f = (e_3 = void 0, __values(op.contents)), _g = _f.next(); !_g.done; _g = _f.next()) {\r\n                                    var content = _g.value;\r\n                                    if (evaluateFilter(__assign({ hash: op.hash }, content), filter)) {\r\n                                        sub.next(__assign({ hash: op.hash }, content));\r\n                                    }\r\n                                }\r\n                            }\r\n                            catch (e_3_1) { e_3 = { error: e_3_1 }; }\r\n                            finally {\r\n                                try {\r\n                                    if (_g && !_g.done && (_c = _f.return)) _c.call(_f);\r\n                                }\r\n                                finally { if (e_3) throw e_3.error; }\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (ops_1_1 && !ops_1_1.done && (_b = ops_1.return)) _b.call(ops_1);\r\n                        }\r\n                        finally { if (e_2) throw e_2.error; }\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n            sub.complete();\r\n        });\r\n    });\r\n};\r\nvar PollingSubscribeProvider = /** @class */ (function () {\r\n    function PollingSubscribeProvider(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        // Map the changing polling interval to a timer, which will automatically terminate the previous timer when the next one starts.\r\n        this.timer$ = this.context._config.pipe(switchMap(function (val) { return timer(0, val.streamerPollingIntervalMilliseconds); }));\r\n        this.newBlock$ = this.timer$.pipe(map(function () { return _this.context; }), switchMap(getLastBlock), distinctUntilKeyChanged('hash'), publish(), refCount());\r\n    }\r\n    PollingSubscribeProvider.prototype.subscribe = function (_filter) {\r\n        return new ObservableSubscription(this.newBlock$.pipe(pluck('hash')), this.context.config.shouldObservableSubscriptionRetry, this.context.config.observableSubscriptionRetryFunction);\r\n    };\r\n    PollingSubscribeProvider.prototype.subscribeOperation = function (filter) {\r\n        return new ObservableSubscription(this.newBlock$.pipe(applyFilter(filter)), this.context.config.shouldObservableSubscriptionRetry, this.context.config.observableSubscriptionRetryFunction);\r\n    };\r\n    return PollingSubscribeProvider;\r\n}());\n\n// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!\r\n/* tslint:disable */\r\nvar VERSION = {\r\n    \"commitHash\": \"5711569ffaf481d88ba3251343a1788090b35dd4\",\r\n    \"version\": \"10.2.1\"\r\n};\r\n/* tslint:enable */\n\nvar ForgingMismatchError = /** @class */ (function () {\r\n    function ForgingMismatchError(results) {\r\n        this.results = results;\r\n        this.name = 'ForgingMismatchError';\r\n        this.message = 'Forging mismatch error';\r\n    }\r\n    return ForgingMismatchError;\r\n}());\r\nvar CompositeForger = /** @class */ (function () {\r\n    function CompositeForger(forgers) {\r\n        this.forgers = forgers;\r\n        if (forgers.length === 0) {\r\n            throw new Error('At least one forger must be specified');\r\n        }\r\n    }\r\n    CompositeForger.prototype.forge = function (_a) {\r\n        var branch = _a.branch, contents = _a.contents;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var results, lastResult, currentResult;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, Promise.all(this.forgers.map(function (forger) {\r\n                            return forger.forge({ branch: branch, contents: contents });\r\n                        }))];\r\n                    case 1:\r\n                        results = _b.sent();\r\n                        if (results.length === 0) {\r\n                            throw new Error('At least one forger must be specified');\r\n                        }\r\n                        lastResult = results.pop();\r\n                        while (results.length) {\r\n                            currentResult = results.pop();\r\n                            if (currentResult !== lastResult) {\r\n                                throw new ForgingMismatchError([lastResult, currentResult]);\r\n                            }\r\n                            lastResult = currentResult;\r\n                        }\r\n                        return [2 /*return*/, lastResult];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return CompositeForger;\r\n}());\n\nvar NoopParser = /** @class */ (function () {\r\n    function NoopParser() {\r\n    }\r\n    NoopParser.prototype.prepareCodeOrigination = function (params) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, params];\r\n            });\r\n        });\r\n    };\r\n    return NoopParser;\r\n}());\n\nvar MichelCodecPacker = /** @class */ (function () {\r\n    function MichelCodecPacker() {\r\n    }\r\n    MichelCodecPacker.prototype.packData = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var bytes;\r\n            return __generator(this, function (_a) {\r\n                bytes = packDataBytes(data.data, data.type).bytes;\r\n                return [2 /*return*/, { packed: bytes }];\r\n            });\r\n        });\r\n    };\r\n    return MichelCodecPacker;\r\n}());\n\n/**\r\n * @packageDocumentation\r\n * @module @taquito/taquito\r\n */\r\n/**\r\n * @description Facade class that surfaces all of the libraries capability and allow it's configuration\r\n *\r\n * @param _rpc The RPC server to use\r\n */\r\nvar TezosToolkit = /** @class */ (function () {\r\n    function TezosToolkit(_rpc) {\r\n        this._rpc = _rpc;\r\n        this._options = {};\r\n        this.format = format;\r\n        if (typeof this._rpc === 'string') {\r\n            this._rpcClient = new RpcClient(this._rpc);\r\n        }\r\n        else {\r\n            this._rpcClient = this._rpc;\r\n        }\r\n        this._context = new Context(_rpc);\r\n        this._wallet = new Wallet(this._context);\r\n        this.setProvider({ rpc: this._rpcClient });\r\n        // tslint:disable-next-line: deprecation\r\n        this.batch = this._context.batch.batch.bind(this._context.batch);\r\n    }\r\n    /**\r\n     * @description Sets configuration on the Tezos Taquito instance. Allows user to choose which signer, rpc client, rpc url, forger and so forth\r\n     *\r\n     * @param options rpc url or rpcClient to use to interact with the Tezos network\r\n     *\r\n     * @example Tezos.setProvider({rpc: 'https://mainnet.api.tez.ie/', signer: new InMemorySigner.fromSecretKey(edsk...)})\r\n     * @example Tezos.setProvider({ config: { confirmationPollingTimeoutSecond: 300 }})\r\n     *\r\n     */\r\n    TezosToolkit.prototype.setProvider = function (_a) {\r\n        var rpc = _a.rpc, stream = _a.stream, signer = _a.signer, protocol = _a.protocol, config = _a.config, forger = _a.forger, wallet = _a.wallet, packer = _a.packer;\r\n        this.setRpcProvider(rpc);\r\n        this.setStreamProvider(stream);\r\n        this.setSignerProvider(signer);\r\n        this.setForgerProvider(forger);\r\n        this.setWalletProvider(wallet);\r\n        this.setPackerProvider(packer);\r\n        this._context.proto = protocol;\r\n        if (config) {\r\n            this._context.setPartialConfig(config);\r\n        }\r\n    };\r\n    /**\r\n     * @description Sets signer provider on the Tezos Taquito instance.\r\n     *\r\n     * @param options signer to use to interact with the Tezos network\r\n     *\r\n     * @example Tezos.setSignerProvider(new InMemorySigner.fromSecretKey('edsk...'))\r\n     *\r\n     */\r\n    TezosToolkit.prototype.setSignerProvider = function (signer) {\r\n        if (!this._options.signer && typeof signer === 'undefined') {\r\n            this._context.signer = new NoopSigner();\r\n            this._options.signer = signer;\r\n        }\r\n        else if (typeof signer !== 'undefined') {\r\n            this._context.signer = signer;\r\n            this._options.signer = signer;\r\n        }\r\n    };\r\n    /**\r\n     * @description Sets rpc provider on the Tezos Taquito instance\r\n     *\r\n     * @param options rpc url or rpcClient to use to interact with the Tezos network\r\n     *\r\n     * @example Tezos.setRpcProvider('https://mainnet.api.tez.ie/')\r\n     *\r\n     */\r\n    TezosToolkit.prototype.setRpcProvider = function (rpc) {\r\n        if (typeof rpc === 'string') {\r\n            this._rpcClient = new RpcClient(rpc);\r\n        }\r\n        else if (rpc === undefined) ;\r\n        else {\r\n            this._rpcClient = rpc;\r\n        }\r\n        this._options.rpc = this._rpcClient;\r\n        this._context.rpc = this._rpcClient;\r\n    };\r\n    /**\r\n     * @description Sets forger provider on the Tezos Taquito instance\r\n     *\r\n     * @param options forger to use to interact with the Tezos network\r\n     *\r\n     * @example Tezos.setForgerProvider(localForger)\r\n     *\r\n     */\r\n    TezosToolkit.prototype.setForgerProvider = function (forger) {\r\n        var f = typeof forger === 'undefined' ? this.getFactory(RpcForger)() : forger;\r\n        this._options.forger = f;\r\n        this._context.forger = f;\r\n    };\r\n    /**\r\n     * @description Sets stream provider on the Tezos Taquito instance\r\n     *\r\n     * @param options stream to use to interact with the Tezos network\r\n     *\r\n     * @example Tezos.setStreamProvider(...)\r\n     *\r\n     */\r\n    TezosToolkit.prototype.setStreamProvider = function (stream) {\r\n        if (typeof stream === 'string') {\r\n            this._stream = new PollingSubscribeProvider(new Context(new RpcClient(stream)));\r\n        }\r\n        else if (typeof stream !== 'undefined') {\r\n            this._stream = stream;\r\n        }\r\n        else if (this._options.stream === undefined) {\r\n            this._stream = this.getFactory(PollingSubscribeProvider)();\r\n        }\r\n        this._options.stream = stream;\r\n    };\r\n    /**\r\n     * @description Sets wallet provider on the Tezos Taquito instance\r\n     *\r\n     * @param options wallet to use to interact with the Tezos network\r\n     *\r\n     * @example Tezos.setWalletProvider(...)\r\n     *\r\n     */\r\n    TezosToolkit.prototype.setWalletProvider = function (wallet) {\r\n        if (!this._options.wallet && typeof wallet === 'undefined') {\r\n            var w = this.getFactory(LegacyWalletProvider)();\r\n            this._options.wallet = w;\r\n            this._context.walletProvider = w;\r\n        }\r\n        else if (typeof wallet !== 'undefined') {\r\n            this._options.wallet = wallet;\r\n            this._context.walletProvider = wallet;\r\n        }\r\n    };\r\n    /**\r\n     * @description Sets Packer provider on the Tezos Taquito instance\r\n     *\r\n     * @param options packer to use to interact with the Tezos network\r\n     *\r\n     * @example Tezos.setPackerProvider(new MichelCodecPacker())\r\n     *\r\n     */\r\n    TezosToolkit.prototype.setPackerProvider = function (packer) {\r\n        var p = typeof packer === 'undefined' ? this.getFactory(RpcPacker)() : packer;\r\n        this._options.packer = p;\r\n        this._context.packer = p;\r\n    };\r\n    Object.defineProperty(TezosToolkit.prototype, \"tz\", {\r\n        /**\r\n         * @description Provide access to tezos account management\r\n         */\r\n        get: function () {\r\n            return this._context.tz;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TezosToolkit.prototype, \"contract\", {\r\n        /**\r\n         * @description Provide access to smart contract utilities\r\n         */\r\n        get: function () {\r\n            return this._context.contract;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TezosToolkit.prototype, \"wallet\", {\r\n        get: function () {\r\n            return this._wallet;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TezosToolkit.prototype, \"operation\", {\r\n        get: function () {\r\n            return this._context.operationFactory;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TezosToolkit.prototype, \"estimate\", {\r\n        /**\r\n         * @description Provide access to operation estimation utilities\r\n         */\r\n        get: function () {\r\n            return this._context.estimate;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TezosToolkit.prototype, \"stream\", {\r\n        /**\r\n         * @description Provide access to streaming utilities backed by an streamer implementation\r\n         */\r\n        get: function () {\r\n            return this._stream;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TezosToolkit.prototype, \"rpc\", {\r\n        /**\r\n         * @description Provide access to the currently used rpc client\r\n         */\r\n        get: function () {\r\n            return this._context.rpc;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TezosToolkit.prototype, \"signer\", {\r\n        /**\r\n         * @description Provide access to the currently used signer\r\n         */\r\n        get: function () {\r\n            return this._context.signer;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @description Allow to add a module to the TezosToolkit instance. This method adds the appropriate Providers(s) required by the module to the internal context.\r\n     *\r\n     * @param module extension to add to the TezosToolkit instance\r\n     *\r\n     * @example Tezos.addExtension(new Tzip16Module());\r\n     */\r\n    TezosToolkit.prototype.addExtension = function (module) {\r\n        var _this = this;\r\n        if (Array.isArray(module)) {\r\n            module.forEach(function (extension) { return extension.configureContext(_this._context); });\r\n        }\r\n        else {\r\n            module.configureContext(this._context);\r\n        }\r\n    };\r\n    TezosToolkit.prototype.getFactory = function (ctor) {\r\n        var _this = this;\r\n        return function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return new (ctor.bind.apply(ctor, __spreadArray([void 0, _this._context], __read(args))))();\r\n        };\r\n    };\r\n    /**\r\n     * @description Gets an object containing the version of Taquito library and git sha of the commit this library is compiled from\r\n     */\r\n    TezosToolkit.prototype.getVersionInfo = function () {\r\n        return VERSION;\r\n    };\r\n    return TezosToolkit;\r\n}());\n\nexport { BatchOperation, BigMapAbstraction, ChainIds, CompositeForger, Context, ContractAbstraction, ContractMethod, ContractMethodObject, ContractView, DEFAULT_FEE, DEFAULT_GAS_LIMIT, DEFAULT_SMART_CONTRACT_METHOD_NAME, DEFAULT_STORAGE_LIMIT, DefaultLambdaAddresses, DelegateOperation, DelegationWalletOperation, InvalidCodeParameter, InvalidDelegationSource, InvalidInitParameter, InvalidParameterError, LegacyWalletProvider, MANAGER_LAMBDA, MichelCodecPacker, MichelCodecParser, MissedBlockDuringConfirmationError, NoopParser, Operation, OperationBatch, OriginationOperation, OriginationWalletOperation, PollingSubscribeProvider, Protocols, RpcForger, RpcPacker, TezosOperationError, TezosPreapplyFailureError, TezosToolkit, TransactionOperation, TransactionWalletOperation, UndefinedLambdaContractError, VIEW_LAMBDA, Wallet, WalletOperation, WalletOperationBatch, compose, createOriginationOperation, createRegisterDelegateOperation, createRevealOperation, createSetDelegateOperation, createTransferOperation, defaultConfigConfirmation, defaultConfigStreamer, protocols };\n//# sourceMappingURL=taquito.es5.js.map\n","import { juster } from \"@/services/tools\"\nimport { OpKind } from \"@taquito/taquito\"\n\nexport const withdrawAll = async ({ eventIds, address }) => {\n    try {\n        const contract = await juster._tezos.contract.at(\n            \"KT197iHRJaAGw3oGpQj21YYV1vK9Fa5ShoMn\",\n        )\n\n        if (!eventIds.length || !address) return\n\n        const transactions = []\n        eventIds.forEach(id => {\n            transactions.push({\n                kind: OpKind.TRANSACTION,\n                ...contract.methods.withdraw(id, address).toTransferParams(),\n            })\n        })\n\n        const batch = await juster._tezos.wallet.batch(transactions)\n\n        const batchOp = await batch.send()\n\n        return { success: true, hash: batchOp.hash }\n    } catch (error) {\n        return { success: false, title: error.title, message: error.message }\n    }\n}\n","<script>\r\nimport { computed, defineComponent, ref, toRefs, watch } from \"vue\"\r\n\r\n/**\r\n * UI\r\n */\r\nimport Modal from \"@/components/ui/Modal\"\r\nimport Button from \"@/components/ui/Button\"\r\nimport Spin from \"@/components/ui/Spin\"\r\nimport Checkbox from \"@/components/ui/Checkbox\"\r\n\r\n/**\r\n * Store\r\n */\r\nimport { useNotificationsStore } from \"@/store/notifications\"\r\nimport { useAccountStore } from \"@/store/account\"\r\n\r\n/**\r\n * SDK\r\n */\r\nimport { withdrawAll } from \"@/services/sdk\"\r\n\r\nexport default defineComponent({\r\n    name: \"WithdrawAllModal\",\r\n    props: { show: Boolean },\r\n\r\n    setup(props, context) {\r\n        const { show } = toRefs(props)\r\n\r\n        const accountStore = useAccountStore()\r\n        const notificationsStore = useNotificationsStore()\r\n\r\n        const awaitingConfirmation = ref(false)\r\n\r\n        const positions = computed(() => accountStore.positionsForWithdrawal)\r\n\r\n        const selectedPositionsIds = ref([])\r\n        const selectedPositions = computed(() =>\r\n            positions.value.filter((position) =>\r\n                selectedPositionsIds.value.includes(position.id),\r\n            ),\r\n        )\r\n\r\n        const isAllSelected = computed(() =>\r\n            positions.value.every((position) =>\r\n                selectedPositionsIds.value.includes(position.id),\r\n            ),\r\n        )\r\n\r\n        const buttonState = computed(() => {\r\n            if (!selectedPositionsIds.value.length)\r\n                return {\r\n                    text: \"Select at least one position\",\r\n                    disabled: true,\r\n                }\r\n\r\n            if (awaitingConfirmation.value)\r\n                return {\r\n                    text: \"Awaiting confirmation..\",\r\n                    disabled: true,\r\n                }\r\n\r\n            return {\r\n                text: `Withdraw ${selectedPositions.value\r\n                    .reduce((acc, curr) => acc + curr.value, 0)\r\n                    .toFixed(0)} XTZ`,\r\n                disabled: false,\r\n            }\r\n        })\r\n\r\n        const handleSelectPosition = (position) => {\r\n            if (selectedPositionsIds.value.includes(position.id)) {\r\n                selectedPositionsIds.value.splice(\r\n                    selectedPositionsIds.value.indexOf(position.id),\r\n                    1,\r\n                )\r\n            } else {\r\n                selectedPositionsIds.value.push(position.id)\r\n            }\r\n        }\r\n\r\n        const handleSelectAllPositions = () => {\r\n            positions.value.forEach((position) => {\r\n                selectedPositionsIds.value.push(position.id)\r\n            })\r\n        }\r\n        const handleUnselectAllPositions = () => {\r\n            selectedPositionsIds.value = []\r\n        }\r\n\r\n        const handleWithdrawAll = async () => {\r\n            if (!selectedPositionsIds.value.length) return\r\n\r\n            const selectedEventsIds = positions.value\r\n                .filter((pos) => selectedPositionsIds.value.includes(pos.id))\r\n                .map((pos) => pos.event.id)\r\n\r\n            awaitingConfirmation.value = true\r\n\r\n            const result = await withdrawAll({\r\n                eventIds: selectedEventsIds,\r\n                address: accountStore.pkh,\r\n            })\r\n\r\n            if (result.success) {\r\n                context.emit(\"onClose\")\r\n                awaitingConfirmation.value = false\r\n\r\n                notificationsStore.create({\r\n                    notification: {\r\n                        type: \"success\",\r\n                        title: \"Batch request sent\",\r\n                        description: `Wait for confirmation of the operation to continue (${result.op})`,\r\n                        autoDestroy: true,\r\n                    },\r\n                })\r\n            } else {\r\n                awaitingConfirmation.value = false\r\n\r\n                notificationsStore.create({\r\n                    notification: {\r\n                        type: \"warning\",\r\n                        title: result.title,\r\n                        description: result.message,\r\n                        autoDestroy: true,\r\n                    },\r\n                })\r\n            }\r\n        }\r\n\r\n        watch(show, () => {\r\n            if (!show.value) {\r\n                selectedPositionsIds.value = []\r\n                awaitingConfirmation.value = false\r\n            }\r\n        })\r\n\r\n        return {\r\n            positions,\r\n            selectedPositionsIds,\r\n            selectedPositions,\r\n            isAllSelected,\r\n            awaitingConfirmation,\r\n            handleSelectPosition,\r\n            handleSelectAllPositions,\r\n            handleUnselectAllPositions,\r\n            handleWithdrawAll,\r\n            buttonState,\r\n        }\r\n    },\r\n\r\n    components: {\r\n        Modal,\r\n        Button,\r\n        Spin,\r\n        Checkbox,\r\n    },\r\n})\r\n</script>\r\n\r\n<template>\r\n    <Modal\r\n        :show=\"show\"\r\n        width=\"500\"\r\n        padding=\"32px 32px 24px 32px\"\r\n        closable\r\n        @onClose=\"$emit('onClose')\"\r\n    >\r\n        <div :class=\"$style.title\">Withdraw all</div>\r\n        <div :class=\"$style.description\">\r\n            Here you can send a batch request to withdraw all your funds\r\n        </div>\r\n\r\n        <div :class=\"$style.subtitle\">\r\n            <span>Select positions to withdraw</span>\r\n\r\n            <span v-if=\"!isAllSelected\" @click=\"handleSelectAllPositions\"\r\n                >Select all ({{\r\n                    positions.filter((pos) => pos.value).length\r\n                }})</span\r\n            >\r\n            <span v-else @click=\"handleUnselectAllPositions\"\r\n                >Unselect all ({{\r\n                    positions.filter((pos) => pos.value).length\r\n                }})</span\r\n            >\r\n        </div>\r\n\r\n        <div :class=\"$style.positions\">\r\n            <div\r\n                v-for=\"position in positions.filter((pos) => pos.value)\"\r\n                :key=\"position.id\"\r\n                @click=\"handleSelectPosition(position)\"\r\n                :class=\"$style.position\"\r\n            >\r\n                <Checkbox\r\n                    :forceChecked=\"selectedPositionsIds.includes(position.id)\"\r\n                />\r\n\r\n                <div :class=\"$style.base\">\r\n                    <div :class=\"$style.name\">\r\n                        <img\r\n                            v-if=\"position.event.winnerBets == 'ABOVE_EQ'\"\r\n                            :src=\"require('@/assets/icons/higher_won.svg')\"\r\n                        />\r\n                        <img\r\n                            v-else\r\n                            :src=\"require('@/assets/icons/lower_won.svg')\"\r\n                        />\r\n                        <span>Tezos / Dollar</span> price event\r\n                    </div>\r\n                    <div :class=\"$style.subname\">\r\n                        Event ID: {{ position.event.id }}, Amount:&nbsp;<span>{{\r\n                            position.value.toFixed(2)\r\n                        }}</span\r\n                        >&nbsp;XTZ\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div :class=\"$style.hint\">\r\n            Please note that a response about successful withdrawal will come\r\n            when all operations are completed (this may take some time).\r\n            <a\r\n                href=\"https://juster.notion.site/Withdraw-all-funds-77d8592c238947b497a54f8f3617feb3\"\r\n                target=\"_blank\"\r\n                >Learn more</a\r\n            >\r\n        </div>\r\n\r\n        <Button\r\n            @click=\"handleWithdrawAll\"\r\n            :type=\"buttonState.disabled ? 'secondary' : 'success'\"\r\n            size=\"large\"\r\n            :disabled=\"buttonState.disabled\"\r\n            :loading=\"awaitingConfirmation\"\r\n            block\r\n            ><Icon v-if=\"!awaitingConfirmation\" name=\"crown\" size=\"16\" />\r\n            <Spin v-else size=\"16\" />{{ buttonState.text }}</Button\r\n        >\r\n    </Modal>\r\n</template>\r\n\r\n<style module>\r\n.wrapper {\r\n}\r\n\r\n.title {\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    line-height: 1.2;\r\n    color: var(--text-primary);\r\n\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.description {\r\n    font-size: 14px;\r\n    line-height: 1.6;\r\n    font-weight: 600;\r\n    color: var(--text-tertiary);\r\n\r\n    margin-bottom: 32px;\r\n}\r\n\r\n.subtitle {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    font-size: 14px;\r\n    line-height: 1;\r\n    font-weight: 600;\r\n    color: var(--text-secondary);\r\n\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.subtitle span:nth-child(2) {\r\n    color: var(--text-blue);\r\n    cursor: pointer;\r\n}\r\n\r\n.positions {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n\r\n    max-height: 340px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.position {\r\n    display: flex;\r\n    gap: 14px;\r\n\r\n    border-radius: 8px;\r\n    border: 1px solid var(--border);\r\n    padding: 16px;\r\n}\r\n\r\n.base {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.name {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 6px;\r\n\r\n    font-size: 14px;\r\n    line-height: 1;\r\n    font-weight: 600;\r\n    color: var(--text-tertiary);\r\n}\r\n\r\n.name img {\r\n    width: 16px;\r\n    height: 16px;\r\n}\r\n\r\n.name span {\r\n    color: var(--text-primary);\r\n}\r\n\r\n.subname {\r\n    display: flex;\r\n\r\n    font-size: 12px;\r\n    line-height: 1;\r\n    font-weight: 500;\r\n    color: var(--text-tertiary);\r\n}\r\n\r\n.subname span {\r\n    color: var(--text-primary);\r\n}\r\n\r\n.hint {\r\n    font-size: 12px;\r\n    line-height: 1.6;\r\n    font-weight: 500;\r\n    color: var(--text-tertiary);\r\n\r\n    margin: 8px 0 32px 0;\r\n}\r\n\r\n.hint a {\r\n    color: var(--text-blue);\r\n}\r\n</style>\r\n","import { render } from \"./WithdrawAllModal.vue?vue&type=template&id=3a0ec956\"\nimport script from \"./WithdrawAllModal.vue?vue&type=script&lang=js\"\nexport * from \"./WithdrawAllModal.vue?vue&type=script&lang=js\"\n\nconst cssModules = {}\nimport style0 from \"./WithdrawAllModal.vue?vue&type=style&index=0&id=3a0ec956&module=true&lang=css\"\ncssModules[\"$style\"] = style0\n\nimport exportComponent from \"/home/mickey/juster-app-old/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__cssModules',cssModules]])\n\nexport default __exports__","import { render } from \"./WithdrawalsBase.vue?vue&type=template&id=04f8938f\"\nimport script from \"./WithdrawalsBase.vue?vue&type=script&lang=js\"\nexport * from \"./WithdrawalsBase.vue?vue&type=script&lang=js\"\n\nconst cssModules = {}\nimport style0 from \"./WithdrawalsBase.vue?vue&type=style&index=0&id=04f8938f&module=true&lang=css\"\ncssModules[\"$style\"] = style0\n\nimport exportComponent from \"/home/mickey/juster-app-old/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__cssModules',cssModules]])\n\nexport default __exports__","import { render } from \"./WithdrawalsPage.vue?vue&type=template&id=2758f0c4\"\nimport script from \"./WithdrawalsPage.vue?vue&type=script&lang=js\"\nexport * from \"./WithdrawalsPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/mickey/juster-app-old/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\n\nvar charAt = uncurryThis(''.charAt);\n\nvar FORCED = fails(function () {\n  return ''.at(-2) !== '\\uD842';\n});\n\n// `String.prototype.at` method\n// https://github.com/tc39/proposal-relative-indexing-method\n$({ target: 'String', proto: true, forced: FORCED }, {\n  at: function at(index) {\n    var S = toString(requireObjectCoercible(this));\n    var len = S.length;\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : charAt(S, k);\n  }\n});\n","var isObject = require('../internals/is-object');\n\nvar floor = Math.floor;\n\n// `IsIntegralNumber` abstract operation\n// https://tc39.es/ecma262/#sec-isintegralnumber\n// eslint-disable-next-line es/no-number-isinteger -- safe\nmodule.exports = Number.isInteger || function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"WithdrawalsBase_wrapper_MnlHI\",\"block\":\"WithdrawalsBase_block_2aHCo\",\"description\":\"WithdrawalsBase_description_-7Lj2\",\"header\":\"WithdrawalsBase_header_2hhci\",\"stats\":\"WithdrawalsBase_stats_CrSFB\",\"stat\":\"WithdrawalsBase_stat_2Lsgh\",\"stat_name\":\"WithdrawalsBase_stat_name_1vMhT\",\"stat_value\":\"WithdrawalsBase_stat_value_1dM3S\",\"stat_avg\":\"WithdrawalsBase_stat_avg_cYudO\",\"withdrawboard\":\"WithdrawalsBase_withdrawboard_1Yh5U\",\"sort_icon\":\"WithdrawalsBase_sort_icon_7F9e9\",\"reverse\":\"WithdrawalsBase_reverse_2rIN8\",\"bottom\":\"WithdrawalsBase_bottom_2pL23\",\"user\":\"WithdrawalsBase_user_1fh7m\",\"money_icon\":\"WithdrawalsBase_money_icon_2q3Rs\",\"name\":\"WithdrawalsBase_name_BHPgK\",\"tier\":\"WithdrawalsBase_tier_1Wwn-\",\"hint_block\":\"WithdrawalsBase_hint_block_q9BTI\",\"hint\":\"WithdrawalsBase_hint_3H-C7\",\"items\":\"WithdrawalsBase_items_3Jrze\",\"empty\":\"WithdrawalsBase_empty_2ddmV\",\"pagination\":\"WithdrawalsBase_pagination_1cUyM\",\"tb_pagination\":\"WithdrawalsBase_tb_pagination_3zwzI\",\"page\":\"WithdrawalsBase_page_Ps3Hb\",\"current\":\"WithdrawalsBase_current_2ejbE\"};","export { default } from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./WithdrawalsBase.vue?vue&type=style&index=0&id=04f8938f&module=true&lang=css\"; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./WithdrawalsBase.vue?vue&type=style&index=0&id=04f8938f&module=true&lang=css\"","export { default } from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./WithdrawAllModal.vue?vue&type=style&index=0&id=3a0ec956&module=true&lang=css\"; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-0-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./WithdrawAllModal.vue?vue&type=style&index=0&id=3a0ec956&module=true&lang=css\""],"sourceRoot":""}