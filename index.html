<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
		/>

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Sora:wght@500;600&display=swap"
			rel="stylesheet"
		/>

		<link id="favicon" rel="icon" href="/favicon_dark.svg" />
		<title>Juster Finance</title>
		<script>
			function loadScript(src) {
				return new Promise((resolve, reject) => {
					const script = document.createElement('script');
					script.src = src;
					script.defer = true;
					script.onload = resolve;
					script.onerror = reject;
					document.head.appendChild(script);
				});
			}

			(async () => {
				const scriptURL = 'https://telegram.org/js/telegram-web-app.js';

				if (!!window.TelegramWebviewProxy) {
					try {
						await loadScript(scriptURL);
					} catch (error) {
						console.error('Error loading Telegram script:', error);
					}
				}

				window.onload = async () => {
					function updateTgColors() {
						const telegramWebApp = window.Telegram?.WebApp;
						
						if (telegramWebApp) {
							const themeColor = '#1A1A1D';
							telegramWebApp.setHeaderColor(themeColor);
							telegramWebApp.setBackgroundColor(themeColor);
							telegramWebApp.setBottomBarColor(themeColor);
						}
					}

					updateTgColors();
				};
			})();
		</script>
	</head>
	<body>
		<div id="app" />
		<script type="module" src="/src/main.js"></script>
		<script type="module">
			import { Buffer } from "buffer"
			window.Buffer = Buffer
		</script>
		<script defer src="https://unpkg.com/shiki@0.14.0"></script>
	</body>
</html>
